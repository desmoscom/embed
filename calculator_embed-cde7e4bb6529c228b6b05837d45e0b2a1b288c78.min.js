(function(){var requirejs,require,define,define_enum_constant,enum_strings,debuggable_enums,next_enum,_kmq,_kms,Desmos;(function(a){function l(a,b){return j.call(a,b)}function m(a,b){var c,d,e,f,g,i,j,k,l,m,n=b&&b.split("/"),o=h.map,p=o&&o["*"]||{};if(a&&a.charAt(0)===".")if(b){n=n.slice(0,n.length-1),a=n.concat(a.split("/"));for(k=0;k<a.length;k+=1){m=a[k];if(m===".")a.splice(k,1),k-=1;else if(m===".."){if(k===1&&(a[2]===".."||a[0]===".."))break;k>0&&(a.splice(k-1,2),k-=2)}}a=a.join("/")}else a.indexOf("./")===0&&(a=a.substring(2));if((n||p)&&o){c=a.split("/");for(k=c.length;k>0;k-=1){d=c.slice(0,k).join("/");if(n)for(l=n.length;l>0;l-=1){e=o[n.slice(0,l).join("/")];if(e){e=e[d];if(e){f=e,g=k;break}}}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,g=j),f&&(c.splice(0,g,f),a=c.join("/"))}return a}function n(b,d){return function(){return c.apply(a,k.call(arguments,0).concat([b,d]))}}function o(a){return function(b){return m(b,a)}}function p(a){return function(b){f[a]=b}}function q(c){var d;l(g,c)&&(d=g[c],delete g[c],i[c]=!0,b.apply(a,d));if(!l(f,c)&&!l(i,c))throw new Error("No "+c);return f[c]}function r(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function s(a){return function(){return h&&h.config&&h.config[a]||{}}}var b,c,d,e,f={},g={},h={},i={},j=Object.prototype.hasOwnProperty,k=[].slice;d=function(a,b){var c,d=r(a),e=d[0];return a=d[1],e&&(e=m(e,b),c=q(e)),e?c&&c.normalize?a=c.normalize(a,o(b)):a=m(a,b):(a=m(a,b),d=r(a),e=d[0],a=d[1],e&&(c=q(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},e={require:function(a){return n(a)},exports:function(a){var b=f[a];return typeof b!="undefined"?b:f[a]={}},module:function(a){return{id:a,uri:"",exports:f[a],config:s(a)}}},b=function(b,c,h,j){var k,m,o,r,s,t,u=[];j=j||b;if(typeof h=="function"){c=!c.length&&h.length?["require","exports","module"]:c;for(s=0;s<c.length;s+=1){r=d(c[s],j),m=r.f;if(m==="require")u[s]=e.require(b);else if(m==="exports")u[s]=e.exports(b),t=!0;else if(m==="module")k=u[s]=e.module(b);else if(l(f,m)||l(g,m)||l(i,m))u[s]=q(m);else{if(!r.p)throw new Error(b+" missing "+m);r.p.load(r.n,n(j,!0),p(m),{}),u[s]=f[m]}}o=h.apply(f[b],u);if(b)if(k&&k.exports!==a&&k.exports!==f[b])f[b]=k.exports;else if(o!==a||!t)f[b]=o}else b&&(f[b]=h)},requirejs=require=c=function(f,g,i,j,k){return typeof f=="string"?e[f]?e[f](g):q(d(f,g).f):(f.splice||(h=f,g.splice?(f=g,g=i,i=null):f=a),g=g||function(){},typeof i=="function"&&(i=j,j=k),j?b(a,f,g,i):setTimeout(function(){b(a,f,g,i)},4),c)},c.config=function(a){return h=a,h.deps&&c(h.deps,h.callback),c},define=function(a,b,c){b.splice||(c=b,b=[]),!l(f,a)&&!l(g,a)&&(g[a]=[a,b,c])},define.amd={jQuery:!0}})(),define("vendor/almond",function(){}),define("pjs",[],function(){var a=function(a,b,c){function d(a){return typeof a=="object"}function e(a){return typeof a=="function"}function f(){}function g(h,i){function j(){var a=new k;return e(a.init)&&a.init.apply(a,arguments),a}function k(){}i===c&&(i=h,h=Object),j.Bare=k;var l=f[a]=h[a],m=k[a]=j[a]=new f,n;return m.constructor=j,j.mixin=function(b){return k[a]=j[a]=g(j,b)[a],j},(j.open=function(a){n={},e(a)?n=a.call(j,m,l,j,h):d(a)&&(n=a);if(d(n))for(var c in n)b.call(n,c)&&(m[c]=n[c]);return e(m.init)||(m.init=h),j})(i)}return g}("prototype",{}.hasOwnProperty);return a}),function(a,b){function rc(a){var b=e[a]={};return bc.each(a.split(ec),function(a,c){b[c]=!0}),b}function sc(a,c,d){var e;if(d===b&&a.nodeType===1){e="data-"+c.replace(g,"-$1").toLowerCase(),d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:+d+""===d?+d:f.test(d)?bc.parseJSON(d):d}catch(h){}bc.data(a,c,d)}else d=b}return d}function tc(a){var b;for(b in a){if(b==="data"&&bc.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function uc(){return!1}function vc(){return!0}function wc(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function xc(a,b){do a=a[b];while(a&&a.nodeType!==1);return a}function yc(a,b,c){var d;b=b||0;if(bc.isFunction(b))return bc.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return bc.grep(a,function(a){return a===b===c});if(typeof b=="string"){d=bc.grep(a,function(a){return a.nodeType===1});if(A.test(b))return bc.filter(b,d,!c);b=bc.filter(b,d)}return bc.grep(a,function(a){return bc.inArray(a,b)>=0===c})}function zc(a){var b=D.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function Ac(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function Bc(a,b){var c,d,e,f,g,h;if(b.nodeType!==1||!bc.hasData(a))return;f=bc._data(a),g=bc._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)bc.event.add(b,c,h[c][d])}g.data&&(g.data=bc.extend({},g.data))}function Cc(a,b){var c;if(b.nodeType!==1)return;b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?(b.parentNode&&(b.outerHTML=a.outerHTML),bc.support.html5Clone&&a.innerHTML&&!bc.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):c==="input"&&N.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(bc.expando)}function Dc(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function Ec(a){N.test(a.type)&&(a.defaultChecked=a.checked)}function Fc(a,b){var c,d,e;if(b in a)return b;c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=hb.length;while(e--){b=hb[e]+c;if(b in a)return b}return d}function Gc(a,b){return a=b||a,bc.css(a,"display")==="none"||!bc.contains(a.ownerDocument,a)}function Hc(a,b){var c,d,e=[],f=0,g=a.length;for(;f<g;f++){c=a[f];if(!c.style)continue;e[f]=bc._data(c,"olddisplay"),b?(!e[f]&&c.style.display==="none"&&(c.style.display=""),c.style.display===""&&Gc(c)&&(e[f]=bc._data(c,"olddisplay",Lc(c.nodeName)))):(d=U(c,"display"),!e[f]&&d!=="none"&&bc._data(c,"olddisplay",d))}for(f=0;f<g;f++){c=a[f];if(!c.style)continue;if(!b||c.style.display==="none"||c.style.display==="")c.style.display=b?e[f]||"":"none"}return a}function Ic(a,b,c){var d=ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Jc(a,b,c,d){var e=c===(d?"border":"content")?4:b==="width"?1:0,f=0;for(;e<4;e+=2)c==="margin"&&(f+=bc.css(a,c+gb[e],!0)),d?(c==="content"&&(f-=parseFloat(U(a,"padding"+gb[e]))||0),c!=="margin"&&(f-=parseFloat(U(a,"border"+gb[e]+"Width"))||0)):(f+=parseFloat(U(a,"padding"+gb[e]))||0,c!=="padding"&&(f+=parseFloat(U(a,"border"+gb[e]+"Width"))||0));return f}function Kc(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=!0,f=bc.support.boxSizing&&bc.css(a,"boxSizing")==="border-box";if(d<=0||d==null){d=U(a,b);if(d<0||d==null)d=a.style[b];if(bb.test(d))return d;e=f&&(bc.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+Jc(a,b,c||(f?"border":"content"),e)+"px"}function Lc(a){var b,c;if(db[a])return db[a];b=bc("<"+a+">").appendTo(Sb.body),c=b.css("display"),b.remove();if(c==="none"||c===""){V=Sb.body.appendChild(V||bc.extend(Sb.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!W||!V.createElement)W=(V.contentWindow||V.contentDocument).document,W.write("<!doctype html><html><body>"),W.close();b=W.body.appendChild(W.createElement(a)),c=U(b,"display"),Sb.body.removeChild(V)}return db[a]=c,c}function Mc(a,b,c,d){var e;if(bc.isArray(b))bc.each(b,function(b,e){c||kb.test(a)?d(a,e):Mc(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&bc.type(b)==="object")for(e in b)Mc(a+"["+e+"]",b[e],c,d);else d(a,b)}function Oc(a){return function(b,c){var d,e,f,g,h,i;typeof b!="string"&&(c=b,b="*"),g=b.toLowerCase().split(ec),h=0,i=g.length;if(bc.isFunction(c))for(;h<i;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function Pc(a,c,d,e,f,g){var h,i,j,k,l;f=f||c.dataTypes[0],g=g||{},g[f]=!0,i=a[f],j=0,k=i?i.length:0,l=a===Ab;for(;j<k&&(l||!h);j++)h=i[j](c,d,e),typeof h=="string"&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=Pc(a,c,d,e,h,g)));return(l||!h)&&!g["*"]&&(h=Pc(a,c,d,e,"*",g)),h}function Qc(a,c){var d,e,f=bc.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&bc.extend(!0,a,e)}function Rc(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);while(j[0]==="*")j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}if(g)return g!==j[0]&&j.unshift(g),d[g]}function Sc(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;a.dataFilter&&(b=a.dataFilter(b,a.dataType));if(g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if(e!=="*"){if(h!=="*"&&h!==e){c=i[h+" "+e]||i["* "+e];if(!c)for(d in i){f=d.split(" ");if(f[1]===e){c=i[h+" "+f[0]]||i["* "+f[0]];if(c){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}}}if(c!==!0)if(c&&a["throws"])b=c(b);else try{b=c(b)}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e}}}h=e}return{state:"success",data:b}}function Tc(){try{return new a.XMLHttpRequest}catch(b){}}function Uc(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function Vc(){return setTimeout(function(){Kb=b},0),Kb=bc.now()}function Wc(a,b){bc.each(b,function(b,c){var d=(Qb[b]||[]).concat(Qb["*"]),e=0,f=d.length;for(;e<f;e++)if(d[e].call(a,b,c))return})}function Xc(a,b,c){var d,e=0,f=0,g=Pb.length,h=bc.Deferred().always(function(){delete i.elem}),i=function(){var b=Kb||Vc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,e=1-d,f=0,g=j.tweens.length;for(;f<g;f++)j.tweens[f].run(e);return h.notifyWith(a,[j,e,c]),e<1&&g?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:bc.extend({},b),opts:bc.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Kb||Vc(),duration:c.duration,tweens:[],createTween:function(b,c,d){var e=bc.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(e),e},stop:function(b){var c=0,d=b?j.tweens.length:0;for(;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;Yc(k,j.opts.specialEasing);for(;e<g;e++){d=Pb[e].call(j,a,k,j.opts);if(d)return d}return Wc(j,k),bc.isFunction(j.opts.start)&&j.opts.start.call(a,j),bc.fx.timer(bc.extend(i,{anim:j,queue:j.opts.queue,elem:a})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function Yc(a,b){var c,d,e,f,g;for(c in a){d=bc.camelCase(c),e=b[d],f=a[c],bc.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=bc.cssHooks[d];if(g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}}function Zc(a,b,c){var d,e,f,g,h,i,j,k,l,m=this,n=a.style,o={},p=[],q=a.nodeType&&Gc(a);c.queue||(k=bc._queueHooks(a,"fx"),k.unqueued==null&&(k.unqueued=0,l=k.empty.fire,k.empty.fire=function(){k.unqueued||l()}),k.unqueued++,m.always(function(){m.always(function(){k.unqueued--,bc.queue(a,"fx").length||k.empty.fire()})})),a.nodeType===1&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],bc.css(a,"display")==="inline"&&bc.css(a,"float")==="none"&&(!bc.support.inlineBlockNeedsLayout||Lc(a.nodeName)==="inline"?n.display="inline-block":n.zoom=1)),c.overflow&&(n.overflow="hidden",bc.support.shrinkWrapBlocks||m.done(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b){f=b[d];if(Mb.exec(f)){delete b[d],i=i||f==="toggle";if(f===(q?"hide":"show"))continue;p.push(d)}}g=p.length;if(g){h=bc._data(a,"fxshow")||bc._data(a,"fxshow",{}),"hidden"in h&&(q=h.hidden),i&&(h.hidden=!q),q?bc(a).show():m.done(function(){bc(a).hide()}),m.done(function(){var b;bc.removeData(a,"fxshow",!0);for(b in o)bc.style(a,b,o[b])});for(d=0;d<g;d++)e=p[d],j=m.createTween(e,q?h[e]:0),o[e]=h[e]||bc.style(a,e),e in h||(h[e]=j.start,q&&(j.end=j.start,j.start=e==="width"||e==="height"?1:0))}}function $c(a,b,c,d,e){return new $c.prototype.init(a,b,c,d,e)}function _c(a,b){var c,d={height:a},e=0;b=b?1:0;for(;e<4;e+=2-b)c=gb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function ad(a){return bc.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb=a.document,Tb=a.location,Ub=a.navigator,Vb=a.jQuery,Wb=a.$,Xb=Array.prototype.push,Yb=Array.prototype.slice,Zb=Array.prototype.indexOf,$b=Object.prototype.toString,_b=Object.prototype.hasOwnProperty,ac=String.prototype.trim,bc=function(a,b){return new bc.fn.init(a,b,c)},cc=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,dc=/\S/,ec=/\s+/,fc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,gc=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,hc=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ic=/^[\],:{}\s]*$/,jc=/(?:^|:|,)(?:\s*\[)+/g,kc=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,lc=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,mc=/^-ms-/,nc=/-([\da-z])/gi,oc=function(a,b){return(b+"").toUpperCase()},pc=function(){Sb.addEventListener?(Sb.removeEventListener("DOMContentLoaded",pc,!1),bc.ready()):Sb.readyState==="complete"&&(Sb.detachEvent("onreadystatechange",pc),bc.ready())},qc={};bc.fn=bc.prototype={constructor:bc,init:function(a,c,d){var e,f,g;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?e=[null,a,null]:e=gc.exec(a);if(e&&(e[1]||!c)){if(e[1])return c=c instanceof bc?c[0]:c,g=c&&c.nodeType?c.ownerDocument||c:Sb,a=bc.parseHTML(e[1],g,!0),hc.test(e[1])&&bc.isPlainObject(c)&&this.attr.call(a,c,!0),bc.merge(this,a);f=Sb.getElementById(e[2]);if(f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=Sb,this.selector=a,this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}return bc.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),bc.makeArray(a,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return Yb.call(this)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=bc.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return bc.each(this,a,b)},ready:function(a){return bc.ready.promise().done(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Yb.apply(this,arguments),"slice",Yb.call(arguments).join(","))},map:function(a){return this.pushStack(bc.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:Xb,sort:[].sort,splice:[].splice},bc.fn.init.prototype=bc.fn,bc.extend=bc.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;typeof h=="boolean"&&(k=h,h=arguments[1]||{},i=2),typeof h!="object"&&!bc.isFunction(h)&&(h={}),j===i&&(h=this,--i);for(;i<j;i++)if((a=arguments[i])!=null)for(c in a){d=h[c],e=a[c];if(h===e)continue;k&&e&&(bc.isPlainObject(e)||(f=bc.isArray(e)))?(f?(f=!1,g=d&&bc.isArray(d)?d:[]):g=d&&bc.isPlainObject(d)?d:{},h[c]=bc.extend(k,g,e)):e!==b&&(h[c]=e)}return h},bc.extend({noConflict:function(b){return a.$===bc&&(a.$=Wb),b&&a.jQuery===bc&&(a.jQuery=Vb),bc},isReady:!1,readyWait:1,holdReady:function(a){a?bc.readyWait++:bc.ready(!0)},ready:function(a){if(a===!0?--bc.readyWait:bc.isReady)return;if(!Sb.body)return setTimeout(bc.ready,1);bc.isReady=!0;if(a!==!0&&--bc.readyWait>0)return;d.resolveWith(Sb,[bc]),bc.fn.trigger&&bc(Sb).trigger("ready").off("ready")},isFunction:function(a){return bc.type(a)==="function"},isArray:Array.isArray||function(a){return bc.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):qc[$b.call(a)]||"object"},isPlainObject:function(a){var c;if(!a||bc.type(a)!=="object"||a.nodeType||bc.isWindow(a))return!1;try{if(a.constructor&&!_b.call(a,"constructor")&&!_b.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}for(c in a);return c===b||_b.call(a,c)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return!a||typeof a!="string"?null:(typeof b=="boolean"&&(c=b,b=0),b=b||Sb,(d=hc.exec(a))?[b.createElement(d[1])]:(d=bc.buildFragment([a],b,c?null:[]),bc.merge([],(d.cacheable?bc.clone(d.fragment):d.fragment).childNodes)))},parseJSON:function(b){if(!b||typeof b!="string")return null;b=bc.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(ic.test(b.replace(kc,"@").replace(lc,"]").replace(jc,"")))return(new Function("return "+b))();bc.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||typeof c!="string")return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&bc.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&dc.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(mc,"ms-").replace(nc,oc)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||bc.isFunction(a);if(d){if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;f<g;)if(c.apply(a[f++],d)===!1)break}else if(h){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;f<g;)if(c.call(a[f],f,a[f++])===!1)break;return a},trim:ac&&!ac.call("﻿ ")?function(a){return a==null?"":ac.call(a)}:function(a){return a==null?"":(a+"").replace(fc,"")},makeArray:function(a,b){var c,d=b||[];return a!=null&&(c=bc.type(a),a.length==null||c==="string"||c==="function"||c==="regexp"||bc.isWindow(a)?Xb.call(d,a):bc.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(Zb)return Zb.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if(typeof d=="number")for(;f<d;f++)a[e++]=c[f];else while(c[f]!==b)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;c=!!c;for(;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof bc||i!==b&&typeof i=="number"&&(i>0&&a[0]&&a[i-1]||i===0||bc.isArray(a));if(j)for(;h<i;h++)e=c(a[h],h,d),e!=null&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),e!=null&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return typeof c=="string"&&(d=a[c],c=a,a=d),bc.isFunction(a)?(e=Yb.call(arguments,2),f=function(){return a.apply(c,e.concat(Yb.call(arguments)))},f.guid=a.guid=a.guid||bc.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=d==null,k=0,l=a.length;if(d&&typeof d=="object"){for(k in d)bc.access(a,c,k,d[k],1,g,e);f=1}else if(e!==b){i=h===b&&bc.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call(bc(a),c)}):(c.call(a,e),c=null));if(c)for(;k<l;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),bc.ready.promise=function(b){var c;if(!d){d=bc.Deferred();if(Sb.readyState==="complete")setTimeout(bc.ready,1);else if(Sb.addEventListener)Sb.addEventListener("DOMContentLoaded",pc,!1),a.addEventListener("load",bc.ready,!1);else{Sb.attachEvent("onreadystatechange",pc),a.attachEvent("onload",bc.ready),c=!1;try{c=a.frameElement==null&&Sb.documentElement}catch(e){}c&&c.doScroll&&function f(){if(!bc.isReady){try{c.doScroll("left")}catch(a){return setTimeout(f,50)}bc.ready()}}()}}return d.promise(b)},bc.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){qc["[object "+b+"]"]=b.toLowerCase()}),c=bc(Sb),e={},bc.Callbacks=function(a){var c,d,f,g,h,i,j,k,l,m;return a=typeof a=="string"?e[a]||rc(a):bc.extend({},a),j=[],k=!a.once&&[],l=function(b){c=a.memory&&b,d=!0,i=g||0,g=0,h=j.length,f=!0;for(;j&&i<h;i++)if(j[i].apply(b[0],b[1])===!1&&a.stopOnFalse){c=!1;break}f=!1,j&&(k?k.length&&l(k.shift()):c?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;(function d(b){bc.each(b,function(b,c){var e=bc.type(c);e==="function"?(!a.unique||!m.has(c))&&j.push(c):c&&c.length&&e!=="string"&&d(c)})})(arguments),f?h=j.length:c&&(g=b,l(c))}return this},remove:function(){return j&&bc.each(arguments,function(a,b){var c;while((c=bc.inArray(b,j,c))>-1)j.splice(c,1),f&&(c<=h&&h--,c<=i&&i--)}),this},has:function(a){return bc.inArray(a,j)>-1},empty:function(){return j=[],this},disable:function(){return j=k=c=b,this},disabled:function(){return!j},lock:function(){return k=b,c||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],j&&(!d||k)&&(f?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!d}},m},bc.extend({Deferred:function(a){var b=[["resolve","done",bc.Callbacks("once memory"),"resolved"],["reject","fail",bc.Callbacks("once memory"),"rejected"],["notify","progress",bc.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return bc.Deferred(function(c){bc.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]](bc.isFunction(g)?function(){var a=g.apply(this,arguments);a&&bc.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return a!=null?bc.extend(a,d):d}},e={};return d.pipe=d.then,bc.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=Yb.call(arguments),g=f.length,h=g!==1||a&&bc.isFunction(a.promise)?g:0,i=h===1?a:bc.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?Yb.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1){b=new Array(g),c=new Array(g),d=new Array(g);for(;e<g;e++)f[e]&&bc.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h}return h||i.resolveWith(d,f),i.promise()}}),bc.support=function(){var b,c,d,e,f,g,h,i,j,k,l,m=Sb.createElement("div");m.setAttribute("className","t"),m.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=m.getElementsByTagName("*"),d=m.getElementsByTagName("a")[0];if(!c||!d||!c.length)return{};e=Sb.createElement("select"),f=e.appendChild(Sb.createElement("option")),g=m.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b={leadingWhitespace:m.firstChild.nodeType===3,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:g.value==="on",optSelected:f.selected,getSetAttribute:m.className!=="t",enctype:!!Sb.createElement("form").enctype,html5Clone:Sb.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:Sb.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},g.checked=!0,b.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,b.optDisabled=!f.disabled;try{delete m.test}catch(n){b.deleteExpando=!1}!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",l=function(){b.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick"),m.detachEvent("onclick",l)),g=Sb.createElement("input"),g.value="t",g.setAttribute("type","radio"),b.radioValue=g.value==="t",g.setAttribute("checked","checked"),g.setAttribute("name","t"),m.appendChild(g),h=Sb.createDocumentFragment(),h.appendChild(m.lastChild),b.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=g.checked,h.removeChild(g),h.appendChild(m);if(m.attachEvent)for(j in{submit:!0,change:!0,focusin:!0})i="on"+j,k=i in m,k||(m.setAttribute(i,"return;"),k=typeof m[i]=="function"),b[j+"Bubbles"]=k;return bc(function(){var c,d,e,f,g="padding:0;margin:0;border:0;display:block;overflow:hidden;",h=Sb.getElementsByTagName("body")[0];if(!h)return;c=Sb.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",h.insertBefore(c,h.firstChild),d=Sb.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=d.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",k=e[0].offsetHeight===0,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=k&&e[0].offsetHeight===0,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=d.offsetWidth===4,b.doesNotIncludeMarginInBodyOffset=h.offsetTop!==1,a.getComputedStyle&&(b.pixelPosition=(a.getComputedStyle(d,null)||{}).top!=="1%",b.boxSizingReliable=(a.getComputedStyle(d,null)||{width:"4px"}).width==="4px",f=Sb.createElement("div"),f.style.cssText=d.style.cssText=g,f.style.marginRight=f.style.width="0",d.style.width="1px",d.appendChild(f),b.reliableMarginRight=!parseFloat((a.getComputedStyle(f,null)||{}).marginRight)),typeof d.style.zoom!="undefined"&&(d.innerHTML="",d.style.cssText=g+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=d.offsetWidth===3,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=d.offsetWidth!==3,c.style.zoom=1),h.removeChild(c),c=d=e=f=null}),h.removeChild(m),c=d=e=f=g=h=m=null,b}(),f=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,g=/([A-Z])/g,bc.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(bc.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?bc.cache[a[bc.expando]]:a[bc.expando],!!a&&!tc(a)},data:function(a,c,d,e){var f,g,h,i,j,k,l;if(!bc.acceptData(a))return;h=bc.expando,i=typeof c=="string",j=a.nodeType,k=j?bc.cache:a,l=j?a[h]:a[h]&&h;if((!l||!k[l]||!e&&!k[l].data)&&i&&d===b)return;l||(j?a[h]=l=bc.deletedIds.pop()||bc.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=bc.noop));if(typeof c=="object"||typeof c=="function")e?k[l]=bc.extend(k[l],c):k[l].data=bc.extend(k[l].data,c);return f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[bc.camelCase(c)]=d),i?(g=f[c],g==null&&(g=f[bc.camelCase(c)])):g=f,g},removeData:function(a,b,c){var d,e,f,g,h,i;if(!bc.acceptData(a))return;g=a.nodeType,h=g?bc.cache:a,i=g?a[bc.expando]:bc.expando;if(!h[i])return;if(b){d=c?h[i]:h[i].data;if(d){bc.isArray(b)||(b in d?b=[b]:(b=bc.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,f=b.length;e<f;e++)delete d[b[e]];if(!(c?tc:bc.isEmptyObject)(d))return}}if(!c){delete h[i].data;if(!tc(h[i]))return}g?bc.cleanData([a],!0):bc.support.deleteExpando||h!=h.window?delete h[i]:h[i]=null},_data:function(a,b,c){return bc.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&bc.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),bc.fn.extend({data:function(a,c){var d,e,f,g,h,i=this[0],j=0,k=null;if(a===b){if(this.length){k=bc.data(i);if(i.nodeType===1&&!bc._data(i,"parsedAttrs")){f=i.attributes;for(h=f.length;j<h;j++)g=f[j].name,g.indexOf("data-")||(g=bc.camelCase(g.substring(5)),sc(i,g,k[g]));bc._data(i,"parsedAttrs",!0)}}return k}return typeof a=="object"?this.each(function(){bc.data(this,a)}):(d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!",bc.access(this,function(c){if(c===b)return k=this.triggerHandler("getData"+e,[d[0]]),k===b&&i&&(k=bc.data(i,a),k=sc(i,a,k)),k===b&&d[1]?this.data(d[0]):k;d[1]=c,this.each(function(){var b=bc(this);b.triggerHandler("setData"+e,d),bc.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){bc.removeData(this,a)})}}),bc.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=bc._data(a,b),c&&(!d||bc.isArray(c)?d=bc._data(a,b,bc.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){var c,d,e,f,g;b=b||"fx",c=bc.queue(a,b),d=c.length,e=c.shift(),f=bc._queueHooks(a,b),g=function(){bc.dequeue(a,b)},e==="inprogress"&&(e=c.shift(),d--),e&&(b==="fx"&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return bc._data(a,c)||bc._data(a,c,{empty:bc.Callbacks("once memory").add(function(){bc.removeData(a,b+"queue",!0),bc.removeData(a,c,!0)})})}}),bc.fn.extend({queue:function(a,c){var d=2;return typeof a!="string"&&(c=a,a="fx",d--),arguments.length<d?bc.queue(this[0],a):c===b?this:this.each(function(){var b=bc.queue(this,a,c);bc._queueHooks(this,a),a==="fx"&&b[0]!=="inprogress"&&bc.dequeue(this,a)})},dequeue:function(a){return this.each(function(){bc.dequeue(this,a)})},delay:function(a,b){return a=bc.fx?bc.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=bc.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};typeof a!="string"&&(c=a,a=b),a=a||"fx";while(h--)d=bc._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}}),k=/[\t\r\n]/g,l=/\r/g,m=/^(?:button|input)$/i,n=/^(?:button|input|object|select|textarea)$/i,o=/^a(?:rea|)$/i,p=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,q=bc.support.getSetAttribute,bc.fn.extend({attr:function(a,b){return bc.access(this,bc.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){bc.removeAttr(this,a)})},prop:function(a,b){return bc.access(this,bc.prop,a,b,arguments.length>1)},removeProp:function(a){return a=bc.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(bc.isFunction(a))return this.each(function(b){bc(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(ec);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{f=" "+e.className+" ";for(g=0,h=b.length;g<h;g++)f.indexOf(" "+b[g]+" ")<0&&(f+=b[g]+" ");e.className=bc.trim(f)}}}return this},removeClass:function(a){var c,d,e,f,g,h,i;if(bc.isFunction(a))return this.each(function(b){bc(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(ec);for(h=0,i=this.length;h<i;h++){e=this[h];if(e.nodeType===1&&e.className){d=(" "+e.className+" ").replace(k," ");for(f=0,g=c.length;f<g;f++)while(d.indexOf(" "+c[f]+" ")>=0)d=d.replace(" "+c[f]+" "," ");e.className=a?bc.trim(d):""}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return bc.isFunction(a)?this.each(function(c){bc(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){var e,f,g,h,i;if(c==="string"){f=0,g=bc(this),h=b,i=a.split(ec);while(e=i[f++])h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&bc._data(this,"__className__",this.className),this.className=this.className||a===!1?"":bc._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(k," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];if(!arguments.length){if(f)return c=bc.valHooks[f.type]||bc.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,typeof d=="string"?d.replace(l,""):d==null?"":d);return}
return e=bc.isFunction(a),this.each(function(d){var f,g=bc(this);if(this.nodeType!==1)return;e?f=a.call(this,d,g.val()):f=a,f==null?f="":typeof f=="number"?f+="":bc.isArray(f)&&(f=bc.map(f,function(a){return a==null?"":a+""})),c=bc.valHooks[this.type]||bc.valHooks[this.nodeName.toLowerCase()];if(!c||!("set"in c)||c.set(this,f,"value")===b)this.value=f})}}),bc.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d=a.options,e=a.selectedIndex,f=a.type==="select-one"||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;for(;i<h;i++){c=d[i];if((c.selected||i===e)&&(bc.support.optDisabled?!c.disabled:c.getAttribute("disabled")===null)&&(!c.parentNode.disabled||!bc.nodeName(c.parentNode,"optgroup"))){b=bc(c).val();if(f)return b;g.push(b)}}return g},set:function(a,b){var c=bc.makeArray(b);return bc(a).find("option").each(function(){this.selected=bc.inArray(bc(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,j,k=a.nodeType;if(!a||k===3||k===8||k===2)return;if(e&&bc.isFunction(bc.fn[c]))return bc(a)[c](d);if(typeof a.getAttribute=="undefined")return bc.prop(a,c,d);j=k!==1||!bc.isXMLDoc(a),j&&(c=c.toLowerCase(),g=bc.attrHooks[c]||(p.test(c)?i:h));if(d!==b){if(d===null){bc.removeAttr(a,c);return}return g&&"set"in g&&j&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d)}return g&&"get"in g&&j&&(f=g.get(a,c))!==null?f:(f=a.getAttribute(c),f===null?b:f)},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&a.nodeType===1){d=b.split(ec);for(;g<d.length;g++)e=d[g],e&&(c=bc.propFix[e]||e,f=p.test(e),f||bc.attr(a,e,""),a.removeAttribute(q?e:c),f&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){var c;if(m.test(a.nodeName)&&a.parentNode)bc.error("type property can't be changed");else if(!bc.support.radioValue&&b==="radio"&&bc.nodeName(a,"input"))return c=a.value,a.setAttribute("type",b),c&&(a.value=c),b}},value:{get:function(a,b){return h&&bc.nodeName(a,"button")?h.get(a,b):b in a?a.value:null},set:function(a,b,c){if(h&&bc.nodeName(a,"button"))return h.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(!a||h===3||h===8||h===2)return;return g=h!==1||!bc.isXMLDoc(a),g&&(c=bc.propFix[c]||c,f=bc.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&(e=f.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):n.test(a.nodeName)||o.test(a.nodeName)&&a.href?0:b}}}}),i={get:function(a,c){var d,e=bc.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?bc.removeAttr(a,c):(d=bc.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},q||(j={name:!0,id:!0,coords:!0},h=bc.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&(j[c]?d.value!=="":d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=Sb.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},bc.each(["width","height"],function(a,b){bc.attrHooks[b]=bc.extend(bc.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})}),bc.attrHooks.contenteditable={get:h.get,set:function(a,b,c){b===""&&(b="false"),h.set(a,b,c)}}),bc.support.hrefNormalized||bc.each(["href","src","width","height"],function(a,c){bc.attrHooks[c]=bc.extend(bc.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),bc.support.style||(bc.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=b+""}}),bc.support.optSelected||(bc.propHooks.selected=bc.extend(bc.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),bc.support.enctype||(bc.propFix.enctype="encoding"),bc.support.checkOn||bc.each(["radio","checkbox"],function(){bc.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),bc.each(["radio","checkbox"],function(){bc.valHooks[this]=bc.extend(bc.valHooks[this],{set:function(a,b){if(bc.isArray(b))return a.checked=bc.inArray(bc(a).val(),b)>=0}})}),r=/^(?:textarea|input|select)$/i,s=/^([^\.]*|)(?:\.(.+)|)$/,t=/(?:^|\s)hover(\.\S+|)\b/,u=/^key/,v=/^(?:mouse|contextmenu)|click/,w=/^(?:focusinfocus|focusoutblur)$/,x=function(a){return bc.event.special.hover?a:a.replace(t,"mouseenter$1 mouseleave$1")},bc.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;if(a.nodeType===3||a.nodeType===8||!c||!d||!(g=bc._data(a)))return;d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=bc.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return typeof bc=="undefined"||!!a&&bc.event.triggered===a.type?b:bc.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=bc.trim(x(c)).split(" ");for(j=0;j<c.length;j++){k=s.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),q=bc.event.special[l]||{},l=(f?q.delegateType:q.bindType)||l,q=bc.event.special[l]||{},n=bc.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&bc.expr.match.needsContext.test(f),namespace:m.join(".")},o),p=i[l];if(!p){p=i[l]=[],p.delegateCount=0;if(!q.setup||q.setup.call(a,e,m,h)===!1)a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h)}q.add&&(q.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?p.splice(p.delegateCount++,0,n):p.push(n),bc.event.global[l]=!0}a=null},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=bc.hasData(a)&&bc._data(a);if(!q||!(m=q.events))return;b=bc.trim(x(b||"")).split(" ");for(f=0;f<b.length;f++){g=s.exec(b[f])||[],h=i=g[1],j=g[2];if(!h){for(h in m)bc.event.remove(a,h+b[f],c,d,!0);continue}n=bc.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(l=0;l<o.length;l++)p=o[l],(e||i===p.origType)&&(!c||c.guid===p.guid)&&(!j||j.test(p.namespace))&&(!d||d===p.selector||d==="**"&&p.selector)&&(o.splice(l--,1),p.selector&&o.delegateCount--,n.remove&&n.remove.call(a,p));o.length===0&&k!==o.length&&((!n.teardown||n.teardown.call(a,j,q.handle)===!1)&&bc.removeEvent(a,h,q.handle),delete m[h])}bc.isEmptyObject(m)&&(delete q.handle,bc.removeData(a,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r;if(!e||e.nodeType!==3&&e.nodeType!==8){q=c.type||c,r=[];if(w.test(q+bc.event.triggered))return;q.indexOf("!")>=0&&(q=q.slice(0,-1),h=!0),q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort());if((!e||bc.event.customEvent[q])&&!bc.event.global[q])return;c=typeof c=="object"?c[bc.expando]?c:new bc.Event(q,c):new bc.Event(q),c.type=q,c.isTrigger=!0,c.exclusive=h,c.namespace=r.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=q.indexOf(":")<0?"on"+q:"";if(!e){g=bc.cache;for(i in g)g[i].events&&g[i].events[q]&&bc.event.trigger(c,d,g[i].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?bc.makeArray(d):[],d.unshift(c),m=bc.event.special[q]||{};if(m.trigger&&m.trigger.apply(e,d)===!1)return;o=[[e,m.bindType||q]];if(!f&&!m.noBubble&&!bc.isWindow(e)){p=m.delegateType||q,j=w.test(p+q)?e:e.parentNode;for(k=e;j;j=j.parentNode)o.push([j,p]),k=j;k===(e.ownerDocument||Sb)&&o.push([k.defaultView||k.parentWindow||a,p])}for(i=0;i<o.length&&!c.isPropagationStopped();i++)j=o[i][0],c.type=o[i][1],n=(bc._data(j,"events")||{})[c.type]&&bc._data(j,"handle"),n&&n.apply(j,d),n=l&&j[l],n&&bc.acceptData(j)&&n.apply&&n.apply(j,d)===!1&&c.preventDefault();return c.type=q,!f&&!c.isDefaultPrevented()&&(!m._default||m._default.apply(e.ownerDocument,d)===!1)&&(q!=="click"||!bc.nodeName(e,"a"))&&bc.acceptData(e)&&l&&e[q]&&(q!=="focus"&&q!=="blur"||c.target.offsetWidth!==0)&&!bc.isWindow(e)&&(k=e[l],k&&(e[l]=null),bc.event.triggered=q,e[q](),bc.event.triggered=b,k&&(e[l]=k)),c.result}return},dispatch:function(c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;c=bc.event.fix(c||a.event),m=(bc._data(this,"events")||{})[c.type]||[],n=m.delegateCount,o=Yb.call(arguments),p=!c.exclusive&&!c.namespace,q=bc.event.special[c.type]||{},r=[],o[0]=c,c.delegateTarget=this;if(q.preDispatch&&q.preDispatch.call(this,c)===!1)return;if(n&&(!c.button||c.type!=="click"))for(f=c.target;f!=this;f=f.parentNode||this)if(f.disabled!==!0||c.type!=="click"){h={},j=[];for(d=0;d<n;d++)k=m[d],l=k.selector,h[l]===b&&(h[l]=k.needsContext?bc(l,this).index(f)>=0:bc.find(l,this,null,[f]).length),h[l]&&j.push(k);j.length&&r.push({elem:f,matches:j})}m.length>n&&r.push({elem:this,matches:m.slice(n)});for(d=0;d<r.length&&!c.isPropagationStopped();d++){i=r[d],c.currentTarget=i.elem;for(e=0;e<i.matches.length&&!c.isImmediatePropagationStopped();e++){k=i.matches[e];if(p||!c.namespace&&!k.namespace||c.namespace_re&&c.namespace_re.test(k.namespace))c.data=k.data,c.handleObj=k,g=((bc.event.special[k.origType]||{}).handle||k.handler).apply(i.elem,o),g!==b&&(c.result=g,g===!1&&(c.preventDefault(),c.stopPropagation()))}}return q.postDispatch&&q.postDispatch.call(this,c),c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return a.pageX==null&&c.clientX!=null&&(d=a.target.ownerDocument||Sb,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),!a.which&&g!==b&&(a.which=g&1?1:g&2?3:g&4?2:0),a}},fix:function(a){var b,c,d,e,f;if(a[bc.expando])return a;d=a,e=bc.event.fixHooks[a.type]||{},f=e.props?this.props.concat(e.props):this.props,a=bc.Event(d);for(b=f.length;b;)c=f[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||Sb),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,e.filter?e.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){bc.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=bc.extend(new bc.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?bc.event.trigger(e,null,b):bc.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},bc.event.handle=bc.event.dispatch,bc.removeEvent=Sb.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]=="undefined"&&(a[d]=null),a.detachEvent(d,c))},bc.Event=function(a,b){if(!(this instanceof bc.Event))return new bc.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?vc:uc):this.type=a,b&&bc.extend(this,b),this.timeStamp=a&&a.timeStamp||bc.now(),this[bc.expando]=!0},bc.Event.prototype={preventDefault:function(){var a;this.isDefaultPrevented=vc,a=this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){var a;this.isPropagationStopped=vc,a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=vc,this.stopPropagation()},isDefaultPrevented:uc,isPropagationStopped:uc,isImmediatePropagationStopped:uc},bc.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){bc.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj,g=f.selector;if(!e||e!==d&&!bc.contains(d,e))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return c}}}),bc.support.submitBubbles||(bc.event.special.submit={setup:function(){if(bc.nodeName(this,"form"))return!1;bc.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=bc.nodeName(c,"input")||bc.nodeName(c,"button")?c.form:b;d&&!bc._data(d,"_submit_attached")&&(bc.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),bc._data(d,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&bc.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(bc.nodeName(this,"form"))return!1;bc.event.remove(this,"._submit")}}),bc.support.changeBubbles||(bc.event.special.change={setup:function(){if(r.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")bc.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),bc.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),bc.event.simulate("change",this,a,!0)});return!1}bc.event.add(this,"beforeactivate._change",function(a){var b=a.target;r.test(b.nodeName)&&!bc._data(b,"_change_attached")&&(bc.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&bc.event.simulate("change",this.parentNode,a,!0)}),bc._data(b,"_change_attached",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){return bc.event.remove(this,"._change"),!r.test(this.nodeName)}}),bc.support.focusinBubbles||bc.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){bc.event.simulate(b,a.target,bc.event.fix(a),!0)};bc.event.special[b]={setup:function(){c++===0&&Sb.addEventListener(a,d,!0)},teardown:function(){--c===0&&Sb.removeEventListener(a,d,!0)}}}),bc.fn.extend({on:function(a,c,d,e,f){var g,h;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(h in a)this.on(h,c,d,a[h],f);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=uc;else if(!e)return this;return f===1&&(g=e,e=function(a){return bc().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=bc.guid++)),this.each(function(){bc.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,bc(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if(typeof a=="object"){for(f in a)this.off(f,c,a[f]);return this}if(c===!1||typeof c=="function")d=c,c=b;return d===!1&&(d=uc),this.each(function(){bc.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return bc(this.context).on(a,this.selector,b,c),this},die:function(a,b){return bc(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){bc.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return bc.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||bc.guid++,d=0,e=function(c){var e=(bc._data(this,"lastToggle"+a.guid)||0)%d;return bc._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),bc.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){bc.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},u.test(b)&&(bc.event.fixHooks[b]=bc.event.keyHooks),v.test(b)&&(bc.event.fixHooks[b]=bc.event.mouseHooks)}),function(a,b){function bb(a,b,c,d){var e,f,i,j,k;c=c||[],b=b||q,k=b.nodeType;if(!a||typeof a!="string")return c;if(k!==1&&k!==9)return[];i=g(b);if(!i&&!d)if(e=O.exec(a))if(j=e[1]){if(k===9){f=b.getElementById(j);if(!f||!f.parentNode)return c;if(f.id===j)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(j))&&h(b,f)&&f.id===j)return c.push(f),c}else{if(e[2])return v.apply(c,w.call(b.getElementsByTagName(a),0)),c;if((j=e[3])&&$&&b.getElementsByClassName)return v.apply(c,w.call(b.getElementsByClassName(j),0)),c}return ob(a.replace(K,"$1"),b,c,d,i)}function cb(a){return function(b){var c=b.nodeName.toLowerCase();return c==="input"&&b.type===a}}function db(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a}}function eb(a){return y(function(b){return b=+b,y(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function fb(a,b,c){var d;if(a===b)return c;d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}function gb(a,b){var c,d,f,g,h,i,j,k=B[o][a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=e.preFilter;while(h){if(!c||(d=L.exec(h)))d&&(h=h.slice(d[0].length)||h),i.push(f=[]);c=!1;if(d=M.exec(h))f.push(c=new p(d.shift())),h=h.slice(c.length),c.type=d[0].replace(K," ");for(g in e.filter)(d=V[g].exec(h))&&(!j[g]||(d=j[g](d)))&&(f.push(c=new p(d.shift())),h=h.slice(c.length),c.type=g,c.matches=d);if(!c)break}return b?h.length:h?bb.error(a):B(a,i).slice(0)}function hb(a,b,d){var e=b.dir,f=d&&b.dir==="parentNode",g=t++;return b.first?function(b,c,d){while(b=b[e])if(f||b.nodeType===1)return a(b,c,d)}:function(b,d,h){var i,j,k;if(!h){j=s+" "+g+" ",k=j+c;while(b=b[e])if(f||b.nodeType===1){if((i=b[o])===k)return b.sizset;if(typeof i=="string"&&i.indexOf(j)===0){if(b.sizset)return b}else{b[o]=k;if(a(b,d,h))return b.sizset=!0,b;b.sizset=!1}}}else while(b=b[e])if(f||b.nodeType===1)if(a(b,d,h))return b}}function ib(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function jb(a,b,c,d,e){var f,g=[],h=0,i=a.length,j=b!=null;for(;h<i;h++)if(f=a[h])if(!c||c(f,d,e))g.push(f),j&&b.push(h);return g}function kb(a,b,c,d,e,f){return d&&!d[o]&&(d=kb(d)),e&&!e[o]&&(e=kb(e,f)),y(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||nb(b||"*",h.nodeType?[h]:h,[]),q=a&&(f||!b)?jb(p,m,a,h,i):p,r=c?e||(f?a:o||d)?[]:g:q;c&&c(q,r,h,i);if(d){j=jb(r,n),d(j,[],h,i),k=j.length;while(k--)if(l=j[k])r[n[k]]=!(q[n[k]]=l)}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?x.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=jb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):v.apply(g,r)})}function lb(a){var b,c,d,f=a.length,g=e.relative[a[0].type],h=g||e.relative[" "],i=g?1:0,j=hb(function(a){return a===b},h,!0),k=hb(function(a){return x.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==l)||((b=c).nodeType?j(a,c,d):k(a,c,d))}];for(;i<f;i++)if(c=e.relative[a[i].type])m=[hb(ib(m),c)];else{c=e.filter[a[i].type].apply(null,a[i].matches);if(c[o]){d=++i;for(;d<f;d++)if(e.relative[a[d].type])break;return kb(i>1&&ib(m),i>1&&a.slice(0,i-1).join("").replace(K,"$1"),c,i<d&&lb(a.slice(i,d)),d<f&&lb(a=a.slice(d)),d<f&&a.join(""))}m.push(c)}return ib(m)}function mb(a,b){var d=b.length>0,f=a.length>0,g=function(h,i,j,k,m){var n,o,p,r=[],t=0,w="0",x=h&&[],y=m!=null,z=l,A=h||f&&e.find.TAG("*",m&&i.parentNode||i),B=s+=z==null?1:Math.E;y&&(l=i!==q&&i,c=g.el);for(;(n=A[w])!=null;w++){if(f&&n){for(o=0;p=a[o];o++)if(p(n,i,j)){k.push(n);break}y&&(s=B,c=++g.el)}d&&((n=!p&&n)&&t--,h&&x.push(n))}t+=w;if(d&&w!==t){for(o=0;p=b[o];o++)p(x,r,i,j);if(h){if(t>0)while(w--)!x[w]&&!r[w]&&(r[w]=u.call(k));r=jb(r)}v.apply(k,r),y&&!h&&r.length>0&&t+b.length>1&&bb.uniqueSort(k)}return y&&(s=B,l=z),x};return g.el=0,d?y(g):g}function nb(a,b,c){var d=0,e=b.length;for(;d<e;d++)bb(a,b[d],c);return c}function ob(a,b,c,d,f){var g,h,j,k,l,m=gb(a),n=m.length;if(!d&&m.length===1){h=m[0]=m[0].slice(0);if(h.length>2&&(j=h[0]).type==="ID"&&b.nodeType===9&&!f&&e.relative[h[1].type]){b=e.find.ID(j.matches[0].replace(U,""),b,f)[0];if(!b)return c;a=a.slice(h.shift().length)}for(g=V.POS.test(a)?-1:h.length-1;g>=0;g--){j=h[g];if(e.relative[k=j.type])break;if(l=e.find[k])if(d=l(j.matches[0].replace(U,""),Q.test(h[0].type)&&b.parentNode||b,f)){h.splice(g,1),a=d.length&&h.join("");if(!a)return v.apply(c,w.call(d,0)),c;break}}}return i(a,m)(d,b,f,c,Q.test(a)),c}function pb(){}var c,d,e,f,g,h,i,j,k,l,m=!0,n="undefined",o=("sizcache"+Math.random()).replace(".",""),p=String,q=a.document,r=q.documentElement,s=0,t=0,u=[].pop,v=[].push,w=[].slice,x=[].indexOf||function(a){var b=0,c=this.length;for(;b<c;b++)if(this[b]===a)return b;return-1},y=function(a,b){return a[o]=b==null||b,a},z=function(){var a={},b=[];return y(function(c,d){return b.push(c)>e.cacheLength&&delete a[b.shift()],a[c+" "]=d},a)},A=z(),B=z(),C=z(),D="[\\x20\\t\\r\\n\\f]",E="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",F=E.replace("w","w#"),G="([*^$|!~]?=)",H="\\["+D+"*("+E+")"+D+"*(?:"+G+D+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+F+")|)|)"+D+"*\\]",I=":("+E+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+H+")|[^:]|\\\\.)*|.*))\\)|)",J=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+D+"*((?:-\\d)?\\d*)"+D+"*\\)|)(?=[^-]|$)",K=new RegExp("^"+D+"+|((?:^|[^\\\\])(?:\\\\.)*)"+D+"+$","g"),L=new RegExp("^"+D+"*,"+D+"*"),M=new RegExp("^"+D+"*([\\x20\\t\\r\\n\\f>+~])"+D+"*"),N=new RegExp(I),O=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,P=/^:not/,Q=/[\x20\t\r\n\f]*[+~]/,R=/:not\($/,S=/h\d/i,T=/input|select|textarea|button/i,U=/\\(?!\\)/g,V={ID:new RegExp("^#("+E+")"),CLASS:new RegExp("^\\.("+E+")"),NAME:new RegExp("^\\[name=['\"]?("+E+")['\"]?\\]"),TAG:new RegExp("^("+E.replace("w","w*")+")"),ATTR:new RegExp("^"+H),PSEUDO:new RegExp("^"+I),POS:new RegExp(J,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+D+"*(even|odd|(([+-]|)(\\d*)n|)"+D+"*(?:([+-]|)"+D+"*(\\d+)|))"+D+"*\\)|)","i"),needsContext:new RegExp("^"+D+"*[>+~]|"+J,"i")},W=function(a){var b=q.createElement("div");try{return a(b)}catch(c){return!1}finally{b=null}},X=W(function(a){return a.appendChild(q.createComment("")),!a.getElementsByTagName("*").length}),Y=W(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==n&&a.firstChild.getAttribute("href")==="#"}),Z=W(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return b!=="boolean"&&b!=="string"}),$=W(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!a.getElementsByClassName||!a.getElementsByClassName("e").length?!1:(a.lastChild.className="e",a.getElementsByClassName("e").length===2)}),_=W(function(a){a.id=o+0,a.innerHTML="<a name='"+o+"'></a><div name='"+o+"'></div>",r.insertBefore(a,r.firstChild);var b=q.getElementsByName&&q.getElementsByName(o).length===2+q.getElementsByName(o+0).length;return d=!q.getElementById(o),r.removeChild(a),b});try{w.call(r.childNodes,0)[0].nodeType}catch(ab){w=function(a){var b,c=[];for(;b=this[a];a++)c.push(b);return c}}bb.matches=function(a,b){return bb(a,null,null,b)},bb.matchesSelector=function(a,b){return bb(b,null,null,[a]).length>0},f=bb.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(e===1||e===9||e===11){if(typeof a.textContent=="string")return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=f(a)}else if(e===3||e===4)return a.nodeValue}else for(;b=a[d];d++)c+=f(b);return c},g=bb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":!1},h=bb.contains=r.contains?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&d.nodeType===1&&c.contains&&c.contains(d))}:r.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){while(b=b.parentNode)if(b===a)return!0;return!1},bb.attr=function(a,b){var c,d=g(a);return d||(b=b.toLowerCase()),(c=e.attrHandle[b])?c(a):d||Z?a.getAttribute(b):(c=a.getAttributeNode(b),c?typeof a[b]=="boolean"?a[b]?b:null:c.specified?c.value:null:null)},e=bb.selectors={cacheLength:50,createPseudo:y,match:V,attrHandle:Y?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:d?function(a,b,c){var d;if(typeof b.getElementById!==n&&!c)return d=b.getElementById(a),d&&d.parentNode?[d]:[]}:function(a,c,d){var e;if(typeof c.getElementById!==n&&!d)return e=c.getElementById(a),e?e.id===a||typeof e.getAttributeNode!==n&&e.getAttributeNode("id").value===a?[e]:b:[]},TAG:X?function(a,b){if(typeof b.getElementsByTagName!==n)return b.getElementsByTagName(a)}:function(a,b){var c,d,e,f=b.getElementsByTagName(a);if(a==="*"){d=[],e=0;for(;c=f[e];e++)c.nodeType===1&&d.push(c);return d}return f},NAME:_&&function(a,b){if(typeof b.getElementsByName!==n)return b.getElementsByName(name)},CLASS:$&&function(a,b,c){if(typeof b.getElementsByClassName!==n&&!c)return b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(U,""),a[3]=(a[4]||a[5]||"").replace(U,""),a[2]==="~="&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1]==="nth"?(a[2]||bb.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*(a[2]==="even"||a[2]==="odd")),a[4]=+(a[6]+a[7]||a[2]==="odd")):a[2]&&bb.error(a[0]),a},PSEUDO:function(a){var b,c;if(V.CHILD.test(a[0]))return null;if(a[3])a[2]=a[3];else if(b=a[4])N.test(b)&&(c=gb(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b;return a.slice(0,3)}},filter:{ID:d?function(a){return a=a.replace(U,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(U,""),function(b){var c=typeof b.getAttributeNode!==n&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return a==="*"?function(){return!0}:(a=a.replace(U,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=A[o][a+" "];return b||(b=new RegExp("(^|"+D+")"+a+"("+D+"|$)"))&&A(a,function(a){return b.test(a.className||typeof a.getAttribute!==n&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=bb.attr(d,a);return e==null?b==="!=":b?(e+="",b==="="?e===c:b==="!="?e!==c:b==="^="?c&&e.indexOf(c)===0:b==="*="?c&&e.indexOf(c)>-1:b==="$="?c&&e.substr(e.length-c.length)===c:b==="~="?(" "+e+" ").indexOf(c)>-1:b==="|="?e===c||e.substr(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d){return a==="nth"?function(a){var b,e,f=a.parentNode;if(c===1&&d===0)return!0;if(f){e=0;for(b=f.firstChild;b;b=b.nextSibling)if(b.nodeType===1){e++;if(a===b)break}}return e-=d,e===c||e%c===0&&e/c>=0}:function(b){var c=b;switch(a){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(a==="first")return!0;c=b;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0}}},PSEUDO:function(a,b){var c,d=e.pseudos[a]||e.setFilters[a.toLowerCase()]||bb.error("unsupported pseudo: "+a);return d[o]?d(b):d.length>1?(c=[a,a,"",b],e.setFilters.hasOwnProperty(a.toLowerCase())?y(function(a,c){var e,f=d(a,b),g=f.length;while(g--)e=x.call(a,f[g]),a[e]=!(c[e]=f[g])}):function(a){return d(a,0,c)}):d}},pseudos:{not:y(function(a){var b=[],c=[],d=i(a.replace(K,"$1"));return d[o]?y(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)if(f=g[h])a[h]=!(b[h]=f)}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:y(function(a){return function(b){return bb(a,b).length>0}}),contains:y(function(a){return function(b){return(b.textContent||b.innerText||f(b)).indexOf(a)>-1}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!e.pseudos.empty(a)},empty:function(a){var b;a=a.firstChild;while(a){if(a.nodeName>"@"||(b=a.nodeType)===3||b===4)return!1;a=a.nextSibling}return!0},header:function(a){return S.test(a.nodeName)},text:function(a){var b,c;return a.nodeName.toLowerCase()==="input"&&(b=a.type)==="text"&&((c=a.getAttribute("type"))==null||c.toLowerCase()===b)},radio:cb("radio"),checkbox:cb("checkbox"),file:cb("file"),password:cb("password"),image:cb("image"),submit:db("submit"),reset:db("reset"),button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button"},input:function(a){return T.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},active:function(a){return a===a.ownerDocument.activeElement},first:eb(function(){return[0]}),last:eb(function(a,b){return[b-1]}),eq:eb(function(a,b,c){return[c<0?c+b:c]}),even:eb(function(a,b){var c;for(c=0;c<b;c+=2)a.push(c);return a}),odd:eb(function(a,b){var c;for(c=1;c<b;c+=2)a.push(c);return a}),lt:eb(function(a,b,c){var d;for(d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:eb(function(a,b,c){var d;for(d=c<0?c+b:c;++d<b;)a.push(d);return a})}},j=r.compareDocumentPosition?function(a,b){return a===b?(k=!0,0):(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:function(a,b){var c,d,e,f,g,h,i,j;if(a===b)return k=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;e=[],f=[],g=a.parentNode,h=b.parentNode,i=g;if(g===h)return fb(a,b);if(!g)return-1;if(!h)return 1;while(i)e.unshift(i),i=i.parentNode;i=h;while(i)f.unshift(i),i=i.parentNode;c=e.length,d=f.length;for(j=0;j<c&&j<d;j++)if(e[j]!==f[j])return fb(e[j],f[j]);return j===c?fb(a,f[j],-1):fb(e[j],b,1)},[0,0].sort(j),m=!k,bb.uniqueSort=function(a){var b,c=[],d=1,e=0;k=m,a.sort(j);if(k){for(;b=a[d];d++)b===a[d-1]&&(e=c.push(d));while(e--)a.splice(c[e],1)}return a},bb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},i=bb.compile=function(a,b){var c,d=[],e=[],f=C[o][a+" "];if(!f){b||(b=gb(a)),c=b.length;while(c--)f=lb(b[c]),f[o]?d.push(f):e.push(f);f=C(a,mb(e,d))}return f},q.querySelectorAll&&function(){var a,b=ob,c=/'|\\/g,d=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,e=[":focus"],f=[":active"],h=r.matchesSelector||r.mozMatchesSelector||r.webkitMatchesSelector||r.oMatchesSelector||r.msMatchesSelector;W(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||e.push("\\["+D+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||e.push(":checked")}),W(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&e.push("[*^$]="+D+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'/>",a.querySelectorAll(":enabled").length||e.push(":enabled",":disabled")}),e=new RegExp(e.join("|")),ob=function(a,d,f,g,h){var i,j,k,l,m,n;if(!g&&!h&&!e.test(a)){k=!0,l=o,m=d,n=d.nodeType===9&&a;if(d.nodeType===1&&d.nodeName.toLowerCase()!=="object"){i=gb(a),(k=d.getAttribute("id"))?l=k.replace(c,"\\$&"):d.setAttribute("id",l),l="[id='"+l+"'] ",j=i.length;while(j--)i[j]=l+i[j].join("");m=Q.test(a)&&d.parentNode||d,n=i.join(",")}if(n)try{return v.apply(f,w.call(m.querySelectorAll(n),0)),f}catch(p){}finally{k||d.removeAttribute("id")}}return b(a,d,f,g,h)},h&&(W(function(b){a=h.call(b,"div");try{h.call(b,"[test!='']:sizzle"),f.push("!=",I)}catch(c){}}),f=new RegExp(f.join("|")),bb.matchesSelector=function(b,c){var i;c=c.replace(d,"='$1']");if(!g(b)&&!f.test(c)&&!e.test(c))try{i=h.call(b,c);if(i||a||b.document&&b.document.nodeType!==11)return i}catch(j){}return bb(c,null,null,[b]).length>0})}(),e.pseudos.nth=e.pseudos.eq,e.filters=pb.prototype=e.pseudos,e.setFilters=new pb,bb.attr=bc.attr,bc.find=bb,bc.expr=bb.selectors,bc.expr[":"]=bc.expr.pseudos,bc.unique=bb.uniqueSort,bc.text=bb.getText,bc.isXMLDoc=bb.isXML,bc.contains=bb.contains}(a),y=/Until$/,z=/^(?:parents|prev(?:Until|All))/,A=/^.[^:#\[\.,]*$/,B=bc.expr.match
.needsContext,C={children:!0,contents:!0,next:!0,prev:!0},bc.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if(typeof a!="string")return bc(a).filter(function(){for(b=0,c=h.length;b<c;b++)if(bc.contains(h[b],this))return!0});g=this.pushStack("","find",a);for(b=0,c=this.length;b<c;b++){d=g.length,bc.find(a,this[b],g);if(b>0)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}}return g},has:function(a){var b,c=bc(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(bc.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(yc(this,a,!1),"not",a)},filter:function(a){return this.pushStack(yc(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?B.test(a)?bc(a,this.context).index(this[0])>=0:bc.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d=0,e=this.length,f=[],g=B.test(a)||typeof a!="string"?bc(a,b||this.context):0;for(;d<e;d++){c=this[d];while(c&&c.ownerDocument&&c!==b&&c.nodeType!==11){if(g?g.index(c)>-1:bc.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}}return f=f.length>1?bc.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?typeof a=="string"?bc.inArray(this[0],bc(a)):bc.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?bc(a,b):bc.makeArray(a&&a.nodeType?[a]:a),d=bc.merge(this.get(),c);return this.pushStack(wc(c[0])||wc(d[0])?d:bc.unique(d))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),bc.fn.andSelf=bc.fn.addBack,bc.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return bc.dir(a,"parentNode")},parentsUntil:function(a,b,c){return bc.dir(a,"parentNode",c)},next:function(a){return xc(a,"nextSibling")},prev:function(a){return xc(a,"previousSibling")},nextAll:function(a){return bc.dir(a,"nextSibling")},prevAll:function(a){return bc.dir(a,"previousSibling")},nextUntil:function(a,b,c){return bc.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return bc.dir(a,"previousSibling",c)},siblings:function(a){return bc.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return bc.sibling(a.firstChild)},contents:function(a){return bc.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:bc.merge([],a.childNodes)}},function(a,b){bc.fn[a]=function(c,d){var e=bc.map(this,b,c);return y.test(a)||(d=c),d&&typeof d=="string"&&(e=bc.filter(d,e)),e=this.length>1&&!C[a]?bc.unique(e):e,this.length>1&&z.test(a)&&(e=e.reverse()),this.pushStack(e,a,Yb.call(arguments).join(","))}}),bc.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?bc.find.matchesSelector(b[0],a)?[b[0]]:[]:bc.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!bc(f).is(d)))f.nodeType===1&&e.push(f),f=f[c];return e},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}}),D="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",E=/ jQuery\d+="(?:null|\d+)"/g,F=/^\s+/,G=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,H=/<([\w:]+)/,I=/<tbody/i,J=/<|&#?\w+;/,K=/<(?:script|style|link)/i,L=/<(?:script|object|embed|option|style)/i,M=new RegExp("<(?:"+D+")[\\s/>]","i"),N=/^(?:checkbox|radio)$/,O=/checked\s*(?:[^=]|=\s*.checked.)/i,P=/\/(java|ecma)script/i,Q=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,R={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},S=zc(Sb),T=S.appendChild(Sb.createElement("div")),R.optgroup=R.option,R.tbody=R.tfoot=R.colgroup=R.caption=R.thead,R.th=R.td,bc.support.htmlSerialize||(R._default=[1,"X<div>","</div>"]),bc.fn.extend({text:function(a){return bc.access(this,function(a){return a===b?bc.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Sb).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){var b;return bc.isFunction(a)?this.each(function(b){bc(this).wrapAll(a.call(this,b))}):(this[0]&&(b=bc(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)),this)},wrapInner:function(a){return bc.isFunction(a)?this.each(function(b){bc(this).wrapInner(a.call(this,b))}):this.each(function(){var b=bc(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=bc.isFunction(a);return this.each(function(c){bc(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){bc.nodeName(this,"body")||bc(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(a,this.firstChild)})},before:function(){var a;if(!wc(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length)return a=bc.clean(arguments),this.pushStack(bc.merge(a,this),"before",this.selector)},after:function(){var a;if(!wc(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length)return a=bc.clean(arguments),this.pushStack(bc.merge(this,a),"after",this.selector)},remove:function(a,b){var c,d=0;for(;(c=this[d])!=null;d++)if(!a||bc.filter(a,[c]).length)!b&&c.nodeType===1&&(bc.cleanData(c.getElementsByTagName("*")),bc.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++){a.nodeType===1&&bc.cleanData(a.getElementsByTagName("*"));while(a.firstChild)a.removeChild(a.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return bc.clone(this,a,b)})},html:function(a){return bc.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(E,""):b;if(typeof a=="string"&&!K.test(a)&&(bc.support.htmlSerialize||!M.test(a))&&(bc.support.leadingWhitespace||!F.test(a))&&!R[(H.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(G,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(bc.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return wc(this[0])?this.length?this.pushStack(bc(bc.isFunction(a)?a():a),"replaceWith",a):this:bc.isFunction(a)?this.each(function(b){var c=bc(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=bc(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;bc(this).remove(),b?bc(b).before(a):bc(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,f,g,h,i,j,k,l;a=[].concat.apply([],a),i=0,j=a[0],k=[],l=this.length;if(!bc.support.checkClone&&l>1&&typeof j=="string"&&O.test(j))return this.each(function(){bc(this).domManip(a,c,d)});if(bc.isFunction(j))return this.each(function(e){var f=bc(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){e=bc.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,g.childNodes.length===1&&(g=f);if(f){c=c&&bc.nodeName(f,"tr");for(h=e.cacheable||l-1;i<l;i++)d.call(c&&bc.nodeName(this[i],"table")?Ac(this[i],"tbody"):this[i],i===h?g:bc.clone(g,!0,!0))}g=f=null,k.length&&bc.each(k,function(a,b){b.src?bc.ajax?bc.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):bc.error("no ajax"):bc.globalEval((b.text||b.textContent||b.innerHTML||"").replace(Q,"")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),bc.buildFragment=function(a,c,d){var e,f,g,h=a[0];return c=c||Sb,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,a.length===1&&typeof h=="string"&&h.length<512&&c===Sb&&h.charAt(0)==="<"&&!L.test(h)&&(bc.support.checkClone||!O.test(h))&&(bc.support.html5Clone||!M.test(h))&&(f=!0,e=bc.fragments[h],g=e!==b),e||(e=c.createDocumentFragment(),bc.clean(a,c,e,d),f&&(bc.fragments[h]=g&&e)),{fragment:e,cacheable:f}},bc.fragments={},bc.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){bc.fn[a]=function(c){var d,e=0,f=[],g=bc(c),h=g.length,i=this.length===1&&this[0].parentNode;if((i==null||i&&i.nodeType===11&&i.childNodes.length===1)&&h===1)return g[b](this[0]),this;for(;e<h;e++)d=(e>0?this.clone(!0):this).get(),bc(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),bc.extend({clone:function(a,b,c){var d,e,f,g;bc.support.html5Clone||bc.isXMLDoc(a)||!M.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(T.innerHTML=a.outerHTML,T.removeChild(g=T.firstChild));if((!bc.support.noCloneEvent||!bc.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!bc.isXMLDoc(a)){Cc(a,g),d=Dc(a),e=Dc(g);for(f=0;d[f];++f)e[f]&&Cc(d[f],e[f])}if(b){Bc(a,g);if(c){d=Dc(a),e=Dc(g);for(f=0;d[f];++f)Bc(d[f],e[f])}}return d=e=null,g},clean:function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p=b===Sb&&S,q=[];if(!b||typeof b.createDocumentFragment=="undefined")b=Sb;for(e=0;(g=a[e])!=null;e++){typeof g=="number"&&(g+="");if(!g)continue;if(typeof g=="string")if(!J.test(g))g=b.createTextNode(g);else{p=p||zc(b),k=b.createElement("div"),p.appendChild(k),g=g.replace(G,"<$1></$2>"),h=(H.exec(g)||["",""])[1].toLowerCase(),i=R[h]||R._default,j=i[0],k.innerHTML=i[1]+g+i[2];while(j--)k=k.lastChild;if(!bc.support.tbody){l=I.test(g),m=h==="table"&&!l?k.firstChild&&k.firstChild.childNodes:i[1]==="<table>"&&!l?k.childNodes:[];for(f=m.length-1;f>=0;--f)bc.nodeName(m[f],"tbody")&&!m[f].childNodes.length&&m[f].parentNode.removeChild(m[f])}!bc.support.leadingWhitespace&&F.test(g)&&k.insertBefore(b.createTextNode(F.exec(g)[0]),k.firstChild),g=k.childNodes,k.parentNode.removeChild(k)}g.nodeType?q.push(g):bc.merge(q,g)}k&&(g=k=p=null);if(!bc.support.appendChecked)for(e=0;(g=q[e])!=null;e++)bc.nodeName(g,"input")?Ec(g):typeof g.getElementsByTagName!="undefined"&&bc.grep(g.getElementsByTagName("input"),Ec);if(c){n=function(a){if(!a.type||P.test(a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)};for(e=0;(g=q[e])!=null;e++)if(!bc.nodeName(g,"script")||!n(g))c.appendChild(g),typeof g.getElementsByTagName!="undefined"&&(o=bc.grep(bc.merge([],g.getElementsByTagName("script")),n),q.splice.apply(q,[e+1,0].concat(o)),e+=o.length)}return q},cleanData:function(a,b){var c,d,e,f,g=0,h=bc.expando,i=bc.cache,j=bc.support.deleteExpando,k=bc.event.special;for(;(e=a[g])!=null;g++)if(b||bc.acceptData(e)){d=e[h],c=d&&i[d];if(c){if(c.events)for(f in c.events)k[f]?bc.event.remove(e,f):bc.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,bc.deletedIds.push(d))}}}}),function(){var a,b;bc.uaMatch=function(a){var b;return a=a.toLowerCase(),b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[],{browser:b[1]||"",version:b[2]||"0"}},a=bc.uaMatch(Ub.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),bc.browser=b,bc.sub=function(){function b(a,c){return new b.fn.init(a,c)}var a;return bc.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(c,d){return d&&d instanceof bc&&!(d instanceof b)&&(d=b(d)),bc.fn.init.call(this,c,d,a)},b.fn.init.prototype=b.fn,a=b(Sb),b}}(),X=/alpha\([^)]*\)/i,Y=/opacity=([^)]*)/,Z=/^(top|right|bottom|left)$/,$=/^(none|table(?!-c[ea]).+)/,_=/^margin/,ab=new RegExp("^("+cc+")(.*)$","i"),bb=new RegExp("^("+cc+")(?!px)[a-z%]+$","i"),cb=new RegExp("^([-+])=("+cc+")","i"),db={BODY:"block"},eb={position:"absolute",visibility:"hidden",display:"block"},fb={letterSpacing:0,fontWeight:400},gb=["Top","Right","Bottom","Left"],hb=["Webkit","O","Moz","ms"],ib=bc.fn.toggle,bc.fn.extend({css:function(a,c){return bc.access(this,function(a,c,d){return d!==b?bc.style(a,c,d):bc.css(a,c)},a,c,arguments.length>1)},show:function(){return Hc(this,!0)},hide:function(){return Hc(this)},toggle:function(a,b){var c=typeof a=="boolean";return bc.isFunction(a)&&bc.isFunction(b)?ib.apply(this,arguments):this.each(function(){(c?a:Gc(this))?bc(this).show():bc(this).hide()})}}),bc.extend({cssHooks:{opacity:{get:function(a,b){var c;if(b)return c=U(a,"opacity"),c===""?"1":c}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":bc.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){var f,g,h,i,j;if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;i=bc.camelCase(c),j=a.style,c=bc.cssProps[i]||(bc.cssProps[i]=Fc(j,i)),h=bc.cssHooks[c]||bc.cssHooks[i];if(d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];g=typeof d,g==="string"&&(f=cb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(bc.css(a,c)),g="number");if(d==null||g==="number"&&isNaN(d))return;g==="number"&&!bc.cssNumber[i]&&(d+="px");if(!h||!("set"in h)||(d=h.set(a,d,e))!==b)try{j[c]=d}catch(k){}},css:function(a,c,d,e){var f,g,h,i=bc.camelCase(c);return c=bc.cssProps[i]||(bc.cssProps[i]=Fc(a.style,i)),h=bc.cssHooks[c]||bc.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,e)),f===b&&(f=U(a,c)),f==="normal"&&c in fb&&(f=fb[c]),d||e!==b?(g=parseFloat(f),d||bc.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?U=function(b,c){var d,e,f,g,h=a.getComputedStyle(b,null),i=b.style;return h&&(d=h.getPropertyValue(c)||h[c],d===""&&!bc.contains(b.ownerDocument,b)&&(d=bc.style(b,c)),bb.test(d)&&_.test(c)&&(e=i.width,f=i.minWidth,g=i.maxWidth,i.minWidth=i.maxWidth=i.width=d,d=h.width,i.width=e,i.minWidth=f,i.maxWidth=g)),d}:Sb.documentElement.currentStyle&&(U=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return e==null&&f&&f[b]&&(e=f[b]),bb.test(e)&&!Z.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),e===""?"auto":e}),bc.each(["height","width"],function(a,b){bc.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth===0&&$.test(U(a,"display"))?bc.swap(a,eb,function(){return Kc(a,b,d)}):Kc(a,b,d)},set:function(a,c,d){return Ic(a,c,d?Jc(a,b,d,bc.support.boxSizing&&bc.css(a,"boxSizing")==="border-box"):0)}}}),bc.support.opacity||(bc.cssHooks.opacity={get:function(a,b){return Y.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=bc.isNumeric(b)?"alpha(opacity="+b*100+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&bc.trim(f.replace(X,""))===""&&c.removeAttribute){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=X.test(f)?f.replace(X,e):f+" "+e}}),bc(function(){bc.support.reliableMarginRight||(bc.cssHooks.marginRight={get:function(a,b){return bc.swap(a,{display:"inline-block"},function(){if(b)return U(a,"marginRight")})}}),!bc.support.pixelPosition&&bc.fn.position&&bc.each(["top","left"],function(a,b){bc.cssHooks[b]={get:function(a,c){var d;if(c)return d=U(a,b),bb.test(d)?bc(a).position()[b]+"px":d}}})}),bc.expr&&bc.expr.filters&&(bc.expr.filters.hidden=function(a){return a.offsetWidth===0&&a.offsetHeight===0||!bc.support.reliableHiddenOffsets&&(a.style&&a.style.display||U(a,"display"))==="none"},bc.expr.filters.visible=function(a){return!bc.expr.filters.hidden(a)}),bc.each({margin:"",padding:"",border:"Width"},function(a,b){bc.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++)f[a+gb[d]+b]=e[d]||e[d-2]||e[0];return f}},_.test(a)||(bc.cssHooks[a+b].set=Ic)}),jb=/%20/g,kb=/\[\]$/,lb=/\r?\n/g,mb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,nb=/^(?:select|textarea)/i,bc.fn.extend({serialize:function(){return bc.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?bc.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||nb.test(this.nodeName)||mb.test(this.type))}).map(function(a,b){var c=bc(this).val();return c==null?null:bc.isArray(c)?bc.map(c,function(a){return{name:b.name,value:a.replace(lb,"\r\n")}}):{name:b.name,value:c.replace(lb,"\r\n")}}).get()}}),bc.param=function(a,c){var d,e=[],f=function(a,b){b=bc.isFunction(b)?b():b==null?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=bc.ajaxSettings&&bc.ajaxSettings.traditional);if(bc.isArray(a)||a.jquery&&!bc.isPlainObject(a))bc.each(a,function(){f(this.name,this.value)});else for(d in a)Mc(d,a[d],c,f);return e.join("&").replace(jb,"+")},qb=/#.*$/,rb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,sb=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,tb=/^(?:GET|HEAD)$/,ub=/^\/\//,vb=/\?/,wb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,xb=/([?&])_=[^&]*/,yb=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,zb=bc.fn.load,Ab={},Bb={},Cb=["*/"]+["*"];try{pb=Tb.href}catch(Nc){pb=Sb.createElement("a"),pb.href="",pb=pb.href}ob=yb.exec(pb.toLowerCase())||[],bc.fn.load=function(a,c,d){var e,f,g,h,i;return typeof a!="string"&&zb?zb.apply(this,arguments):this.length?(h=this,i=a.indexOf(" "),i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),bc.isFunction(c)?(d=c,c=b):c&&typeof c=="object"&&(f="POST"),bc.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?bc("<div>").append(a.replace(wb,"")).find(e):a)}),this):this},bc.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){bc.fn[b]=function(a){return this.on(b,a)}}),bc.each(["get","post"],function(a,c){bc[c]=function(a,d,e,f){return bc.isFunction(d)&&(f=f||e,e=d,d=b),bc.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),bc.extend({getScript:function(a,c){return bc.get(a,b,c,"script")},getJSON:function(a,b,c){return bc.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?Qc(a,bc.ajaxSettings):(b=a,a=bc.ajaxSettings),Qc(a,b),a},ajaxSettings:{url:pb,isLocal:sb.test(ob[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Cb},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":bc.parseJSON,"text xml":bc.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Oc(Ab),ajaxTransport:Oc(Bb),ajax:function(a,c){function y(a,c,f,i){var k,r,s,u,w,x=c;if(t===2)return;t=2,h&&clearTimeout(h),g=b,e=i||"",v.readyState=a>0?4:0,f&&(u=Rc(l,v,f));if(a>=200&&a<300||a===304)l.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(bc.lastModified[d]=w),w=v.getResponseHeader("Etag"),w&&(bc.etag[d]=w)),a===304?(x="notmodified",k=!0):(k=Sc(l,u),x=k.state,r=k.data,s=k.error,k=!s);else{s=x;if(!x||a)x="error",a<0&&(a=0)}v.status=a,v.statusText=(c||x)+"",k?o.resolveWith(m,[r,x,v]):o.rejectWith(m,[v,x,s]),v.statusCode(q),q=b,j&&n.trigger("ajax"+(k?"Success":"Error"),[v,l,k?r:s]),p.fireWith(m,[v,x]),j&&(n.trigger("ajaxComplete",[v,l]),--bc.active||bc.event.trigger("ajaxStop"))}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;typeof a=="object"&&(c=a,a=b),c=c||{},l=bc.ajaxSetup({},c),m=l.context||l,n=m!==l&&(m.nodeType||m instanceof bc)?bc(m):bc.event,o=bc.Deferred(),p=bc.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,setRequestHeader:function(a,b){if(!t){var c=a.toLowerCase();a=s[c]=s[c]||a,r[a]=b}return this},getAllResponseHeaders:function(){return t===2?e:null},getResponseHeader:function(a){var c;if(t===2){if(!f){f={};while(c=rb.exec(e))f[c[1].toLowerCase()]=c[2]}c=f[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return t||(l.mimeType=a),this},abort:function(a){return a=a||u,g&&g.abort(a),y(0,a),this}},o.promise(v),v.success=v.done,v.error=v.fail,v.complete=p.add,v.statusCode=function(a){var b;if(a)if(t<2)for(b in a)q[b]=[q[b],a[b]];else b=a[v.status],v.always(b);return this},l.url=((a||l.url)+"").replace(qb,"").replace(ub,ob[1]+"//"),l.dataTypes=bc.trim(l.dataType||"*").toLowerCase().split(ec),l.crossDomain==null&&(i=yb.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]===ob[1]&&i[2]===ob[2]&&(i[3]||(i[1]==="http:"?80:443))==(ob[3]||(ob[1]==="http:"?80:443)))),l.data&&l.processData&&typeof l.data!="string"&&(l.data=bc.param(l.data,l.traditional)),Pc(Ab,l,c,v);if(t===2)return v;j=l.global,l.type=l.type.toUpperCase(),l.hasContent=!tb.test(l.type),j&&bc.active++===0&&bc.event.trigger("ajaxStart"),l.hasContent||(l.data&&(l.url+=(vb.test(l.url)?"&":"?")+l.data,delete l.data),d=l.url,l.cache===!1&&(w=bc.now(),x=l.url.replace(xb,"$1_="+w),l.url=x+(x===l.url?(vb.test(l.url)?"&":"?")+"_="+w:""))),(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",l.contentType),l.ifModified&&(d=d||l.url,bc.lastModified[d]&&v.setRequestHeader("If-Modified-Since",bc.lastModified[d]),bc.etag[d]&&v.setRequestHeader("If-None-Match",bc.etag[d])),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+Cb+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)v.setRequestHeader(k,l.headers[k]);if(!l.beforeSend||l.beforeSend.call(m,v,l)!==!1&&t!==2){u="abort";for(k in{success:1,error:1,complete:1})v[k](l[k]);g=Pc(Bb,l,c,v);if(!g)y(-1,"No Transport");else{v.readyState=1,j&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,g.send(r,y)}catch(z){if(!(t<2))throw z;y(-1,z)}}return v}return v.abort()},active:0,lastModified:{},etag:{}}),Db=[],Eb=/\?/,Fb=/(=)\?(?=&|$)|\?\?/,Gb=bc.now(),bc.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Db.pop()||bc.expando+"_"+Gb++;return this[a]=!0,a}}),bc.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&Fb.test(j),m=k&&!l&&typeof i=="string"&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fb.test(i);if(c.dataTypes[0]==="jsonp"||l||m)return f=c.jsonpCallback=bc.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(Fb,"$1"+f):m?c.data=i.replace(Fb,"$1"+f):k&&(c.url+=(Eb.test(j)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||bc.error(f+" was not called"),h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Db.push(f)),h&&bc.isFunction(g)&&g(h[0]),h=g=b}),"script"}),bc.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return bc.globalEval(a),a}}}),bc.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),bc.ajaxTransport("script",function(a){var c,d;if(a.crossDomain)return d=Sb.head||Sb.getElementsByTagName("head")[0]||Sb.documentElement,{send:function(e,f){c=Sb.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success")},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}),Ib=a.ActiveXObject?function(){for(var a in Hb)Hb[a](0,1)}:!1,Jb=0,bc.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&Tc()||Uc()}:Tc,function(a){bc.extend(bc.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(bc.ajaxSettings.xhr()),bc.support.ajax&&bc.ajaxTransport(function(c){var d;if(!c.crossDomain||bc.support.cors)return{send:function(e,f){var g,h,i=c.xhr();c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async);if(c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||i.readyState===4)){d=b,g&&(i.onreadystatechange=bc.noop,Ib&&delete Hb[g]);if(e)i.readyState!==4&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(n){}try{j=i.statusText}catch(n){j=""}!h&&c.isLocal&&!c.crossDomain?h=l.text?200:404:h===1223&&(h=204)}}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?i.readyState===4?setTimeout(d,0):(g=++Jb,Ib&&(Hb||(Hb={},bc(a).unload(Ib)),Hb[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}),Mb=/^(?:toggle|show|hide)$/,Nb=new RegExp("^(?:([-+])=|)("+cc+")([a-z%]*)$","i"),Ob=/queueHooks$/,Pb=[Zc],Qb={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=Nb.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){c=+f[2],d=f[3]||(bc.cssNumber[a]?"":"px");if(d!=="px"&&h){h=bc.css(e.elem,a,!0)||c||1;do i=i||".5",h/=i,bc.style(e.elem,a,h+d);while(i!==(i=e.cur()/g)&&i!==1&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]},bc.Animation=bc.extend(Xc,{tweener:function(a,b){var c,d,e;bc.isFunction(a)?(b=a,a=["*"]):a=a.split(" "),d=0,e=a.length;for(;d<e;d++)c=a[d],Qb[c]=Qb[c]||[],Qb[c].unshift(b)},prefilter:function(a,b){b?Pb.unshift(a):Pb.push(a)}}),bc.Tween=$c,$c.prototype={constructor:$c,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(bc.cssNumber[c]?"":"px")},cur:function(){var a=$c.propHooks[this.prop];return a&&a.get?a.get(this):$c.propHooks._default.get(this)},run:function(a){var b,c=$c.propHooks[this.prop];return this.options.duration?this.pos=b=bc.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):$c.propHooks._default.set(this),this}},$c.prototype.init.prototype=$c.prototype,$c.propHooks={_default:{get:function(a){var b;return a.elem[a.prop]==null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=bc.css(a.elem,a.prop,!1,""),!b||b==="auto"?0:b):a.elem[a.prop]},set:function(a){bc.fx.step[a.prop]?bc.fx.step[a.prop](a):a.elem.style&&(a.elem.style[bc.cssProps[a.prop]]!=null||bc.cssHooks[a.prop])?bc.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},$c.propHooks.scrollTop=$c.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},bc.each(["toggle","show","hide"],function(a,b){var c=bc.fn[b];bc.fn[b]=function(d,e,f){return d==null||typeof d=="boolean"||!a&&bc.isFunction(d)&&bc.isFunction(e)?c.apply(this,arguments):this.animate(_c(b,!0),d,e,f)}}),bc.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Gc).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=bc.isEmptyObject(a),f=bc.speed(b,c,d),g=function(){var b=Xc(this,bc.extend({},a),f);e&&b.stop(!0)};return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=a!=null&&a+"queueHooks",f=bc.timers,g=bc._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Ob.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem===this&&(a==null||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&bc.dequeue(this,a)})}}),bc.each({slideDown:_c("show"),slideUp:_c("hide"),slideToggle:_c("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){bc.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),bc.speed=function(a,b,c){var d=a&&typeof a=="object"?bc.extend({},a):{complete:c||!c&&b||bc.isFunction(a)&&a,duration:a,easing:c&&b||b&&!bc.isFunction(b)&&b};d.duration=bc.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in bc.fx.speeds?bc.fx.speeds[d.duration]:bc.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";return d.old=d.complete,d.complete=function(){bc.isFunction(d.old)&&d.old.call(this),d.queue&&bc.dequeue(this,d.queue)},d},bc.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},bc.timers=[],bc.fx=$c.prototype.init,bc.fx.tick=function(){var a,c=bc.timers,d=0;Kb=bc.now();for(;d<c.length;d++)a=c[d],!a()&&c[d]===a&&c.splice(d--,1);c.length||bc.fx.stop(),Kb=b},bc.fx.timer=function(a){a()&&bc.timers.push(a)&&!Lb&&(Lb=setInterval(bc.fx.tick,bc.fx.interval))},bc.fx.interval=13,bc.fx.stop=function(){clearInterval(Lb),Lb=null},bc.fx.speeds={slow:600,fast:200,_default:400},bc.fx.step={},bc.expr&&bc.expr.filters&&(bc.expr.filters.animated=function(a){return bc.grep(bc.timers,function(b){return a===b.elem}).length}),Rb=/^(?:body|html)$/i,bc.fn.offset=function(a){var c,d,e,f,g,h,i,j,k,l;if(arguments.length)return a===b?this:this.each(function(b){bc.offset.setOffset(this,a,b)});j={top:0,left:0},k=this[0],l=k&&k.ownerDocument;if(!l)return;return(d=l.body)===k?bc.offset.bodyOffset(k):(c=l.documentElement,bc.contains(c,k)?(typeof k.getBoundingClientRect!="undefined"&&(j=k.getBoundingClientRect()),e=ad(l),f=c.clientTop||d.clientTop||0,g=c.clientLeft||d.clientLeft||0,h=e.pageYOffset||c.scrollTop,i=e.pageXOffset||c.scrollLeft,{top:j.top+h-f,left:j.left+i-g}):j)},bc.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return bc.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(bc.css(a,"marginTop"))||0,c+=parseFloat(bc.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d,e,f,g,h,i,j,k,l,m=bc.css(a,"position");m==="static"&&(a.style.position="relative"),d=bc(a),e=d.offset(),f=bc.css(a,"top"),g=bc.css(a,"left"),h=(m==="absolute"||m==="fixed")&&bc.inArray("auto",[f,g])>-1,i={},j={},h?(j=d.position(),k=j.top,l=j.left):(k=parseFloat(f)||0,l=parseFloat(g)||0),bc.isFunction(b)&&(b=b.call(a,c,e)),b.top!=null&&(i.top=b.top-e.top+k),b.left!=null&&(i.left=b.left-e.left+l),"using"in b?b.using.call(a,i):d.css(i)}},bc.fn.extend({position:function(){var a,b,c,d;if(!this[0])return;return a=this[0],b=this.offsetParent(),c=this.offset(),d=Rb.test(b[0].nodeName)?{top:0,left:0}:b.offset(),c.top-=parseFloat(bc.css(a,"marginTop"))||0,c.left-=parseFloat(bc.css(a,"marginLeft"))||0,d.top+=parseFloat(bc.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(bc.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Sb.body;while(a&&!Rb.test(a.nodeName)&&bc.css(a,"position")==="static")a=a.offsetParent;return a||Sb.body})}}),bc.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);bc.fn[a]=function(e){return bc.access(this,function(a,e,f){var g=ad(a);if(f===b)return g?c in g?g[c]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?bc(g).scrollLeft():f,d?f:bc(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}}),bc.each({Height:"height",Width:"width"},function(a,c){bc.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){bc.fn[e]=function(e,f){var g=arguments.length&&(d||typeof e!="boolean"),h=d||(e===!0||f===!0?"margin":"border");return bc.access(this,function(c,d,e){var f;return bc.isWindow(c)?c.document.documentElement["client"+a]:c.nodeType===9?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?bc.css(c,d,e,h):bc.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=bc,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return bc})}(window),function(){function K(a,b,c){var d,e,f,g,h;if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual&&J.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&J.isFunction(b.isEqual))return b.isEqual(a);d=v.call(a);if(d!=v.call(b))return!1;switch(d){
case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;e=c.length;while(e--)if(c[e]==a)return!0;c.push(a),f=0,g=!0;if(d=="[object Array]"){f=a.length,g=f==b.length;if(g)while(f--)if(!(g=f in a==f in b&&K(a[f],b[f],c)))break}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(h in a)if(J.has(a,h)){f++;if(!(g=J.has(b,h)&&K(a[h],b[h],c)))break}if(g){for(h in b)if(J.has(b,h)&&!(f--))break;g=!f}}return c.pop(),g}var a,b,c,d,e,f,g,h,i,j,k,l,m,n=this,o=n._,p={},q=Array.prototype,r=Object.prototype,s=Function.prototype,t=q.slice,u=q.unshift,v=r.toString,w=r.hasOwnProperty,x=q.forEach,y=q.map,z=q.reduce,A=q.reduceRight,B=q.filter,C=q.every,D=q.some,E=q.indexOf,F=q.lastIndexOf,G=Array.isArray,H=Object.keys,I=s.bind,J=function(a){return new k(a)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=J),exports._=J):n._=J,J.VERSION="1.3.3",a=J.each=J.forEach=function(a,b,c){if(a==null)return;if(x&&a.forEach===x)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,e=a.length;d<e;d++)if(d in a&&b.call(c,a[d],d,a)===p)return}else for(var f in a)if(J.has(a,f)&&b.call(c,a[f],f,a)===p)return},J.map=J.collect=function(b,c,d){var e=[];return b==null?e:y&&b.map===y?b.map(c,d):(a(b,function(a,b,f){e[e.length]=c.call(d,a,b,f)}),b.length===+b.length&&(e.length=b.length),e)},J.reduce=J.foldl=J.inject=function(b,c,d,e){var f=arguments.length>2;b==null&&(b=[]);if(z&&b.reduce===z)return e&&(c=J.bind(c,e)),f?b.reduce(c,d):b.reduce(c);a(b,function(a,b,g){f?d=c.call(e,d,a,b,g):(d=a,f=!0)});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d},J.reduceRight=J.foldr=function(a,b,c,d){var e,f=arguments.length>2;return a==null&&(a=[]),A&&a.reduceRight===A?(d&&(b=J.bind(b,d)),f?a.reduceRight(b,c):a.reduceRight(b)):(e=J.toArray(a).reverse(),d&&!f&&(b=J.bind(b,d)),f?J.reduce(e,b,c,d):J.reduce(e,b))},J.find=J.detect=function(a,c,d){var e;return b(a,function(a,b,f){if(c.call(d,a,b,f))return e=a,!0}),e},J.filter=J.select=function(b,c,d){var e=[];return b==null?e:B&&b.filter===B?b.filter(c,d):(a(b,function(a,b,f){c.call(d,a,b,f)&&(e[e.length]=a)}),e)},J.reject=function(b,c,d){var e=[];return b==null?e:(a(b,function(a,b,f){c.call(d,a,b,f)||(e[e.length]=a)}),e)},J.every=J.all=function(b,c,d){var e=!0;return b==null?e:C&&b.every===C?b.every(c,d):(a(b,function(a,b,f){if(!(e=e&&c.call(d,a,b,f)))return p}),!!e)},b=J.some=J.any=function(b,c,d){c||(c=J.identity);var e=!1;return b==null?e:D&&b.some===D?b.some(c,d):(a(b,function(a,b,f){if(e||(e=c.call(d,a,b,f)))return p}),!!e)},J.include=J.contains=function(a,c){var d=!1;return a==null?d:E&&a.indexOf===E?a.indexOf(c)!=-1:(d=b(a,function(a){return a===c}),d)},J.invoke=function(a,b){var c=t.call(arguments,2);return J.map(a,function(a){return(J.isFunction(b)?b||a:a[b]).apply(a,c)})},J.pluck=function(a,b){return J.map(a,function(a){return a[b]})},J.max=function(b,c,d){var e;return!c&&J.isArray(b)&&b[0]===+b[0]?Math.max.apply(Math,b):!c&&J.isEmpty(b)?-Infinity:(e={computed:-Infinity},a(b,function(a,b,f){var g=c?c.call(d,a,b,f):a;g>=e.computed&&(e={value:a,computed:g})}),e.value)},J.min=function(b,c,d){var e;return!c&&J.isArray(b)&&b[0]===+b[0]?Math.min.apply(Math,b):!c&&J.isEmpty(b)?Infinity:(e={computed:Infinity},a(b,function(a,b,f){var g=c?c.call(d,a,b,f):a;g<e.computed&&(e={value:a,computed:g})}),e.value)},J.shuffle=function(b){var c,d=[];return a(b,function(a,b){c=Math.floor(Math.random()*(b+1)),d[b]=d[c],d[c]=a}),d},J.sortBy=function(a,b,c){var d=J.isFunction(b)?b:function(a){return a[b]};return J.pluck(J.map(a,function(a,b,e){return{value:a,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c===void 0?1:d===void 0?-1:c<d?-1:c>d?1:0}),"value")},J.groupBy=function(b,c){var d={},e=J.isFunction(c)?c:function(a){return a[c]};return a(b,function(a,b){var c=e(a,b);(d[c]||(d[c]=[])).push(a)}),d},J.sortedIndex=function(a,b,c){var d,e,f;c||(c=J.identity),d=0,e=a.length;while(d<e)f=d+e>>1,c(a[f])<c(b)?d=f+1:e=f;return d},J.toArray=function(a){return a?J.isArray(a)?t.call(a):J.isArguments(a)?t.call(a):a.toArray&&J.isFunction(a.toArray)?a.toArray():J.values(a):[]},J.size=function(a){return J.isArray(a)?a.length:J.keys(a).length},J.first=J.head=J.take=function(a,b,c){return b!=null&&!c?t.call(a,0,b):a[0]},J.initial=function(a,b,c){return t.call(a,0,a.length-(b==null||c?1:b))},J.last=function(a,b,c){return b!=null&&!c?t.call(a,Math.max(a.length-b,0)):a[a.length-1]},J.rest=J.tail=function(a,b,c){return t.call(a,b==null||c?1:b)},J.compact=function(a){return J.filter(a,function(a){return!!a})},J.flatten=function(a,b){return J.reduce(a,function(a,c){return J.isArray(c)?a.concat(b?c:J.flatten(c)):(a[a.length]=c,a)},[])},J.without=function(a){return J.difference(a,t.call(arguments,1))},J.uniq=J.unique=function(a,b,c){var d=c?J.map(a,c):a,e=[];return a.length<3&&(b=!0),J.reduce(d,function(c,d,f){if(b?J.last(c)!==d||!c.length:!J.include(c,d))c.push(d),e.push(a[f]);return c},[]),e},J.union=function(){return J.uniq(J.flatten(arguments,!0))},J.intersection=J.intersect=function(a){var b=t.call(arguments,1);return J.filter(J.uniq(a),function(a){return J.every(b,function(b){return J.indexOf(b,a)>=0})})},J.difference=function(a){var b=J.flatten(t.call(arguments,1),!0);return J.filter(a,function(a){return!J.include(b,a)})},J.zip=function(){var a,b=t.call(arguments),c=J.max(J.pluck(b,"length")),d=new Array(c);for(a=0;a<c;a++)d[a]=J.pluck(b,""+a);return d},J.indexOf=function(a,b,c){var d,e;if(a==null)return-1;if(c)return d=J.sortedIndex(a,b),a[d]===b?d:-1;if(E&&a.indexOf===E)return a.indexOf(b);for(d=0,e=a.length;d<e;d++)if(d in a&&a[d]===b)return d;return-1},J.lastIndexOf=function(a,b){var c;if(a==null)return-1;if(F&&a.lastIndexOf===F)return a.lastIndexOf(b);c=a.length;while(c--)if(c in a&&a[c]===b)return c;return-1},J.range=function(a,b,c){var d,e,f;arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1,d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);while(e<d)f[e++]=a,a+=c;return f},c=function(){},J.bind=function(a,b){var d,e;if(a.bind===I&&I)return I.apply(a,t.call(arguments,1));if(!J.isFunction(a))throw new TypeError;return e=t.call(arguments,2),d=function(){var f,g;return this instanceof d?(c.prototype=a.prototype,f=new c,g=a.apply(f,e.concat(t.call(arguments))),Object(g)===g?g:f):a.apply(b,e.concat(t.call(arguments)))}},J.bindAll=function(b){var c=t.call(arguments,1);return c.length==0&&(c=J.functions(b)),a(c,function(a){b[a]=J.bind(b[a],b)}),b},J.memoize=function(a,b){var c={};return b||(b=J.identity),function(){var d=b.apply(this,arguments);return J.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},J.delay=function(a,b){var c=t.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},J.defer=function(a){return J.delay.apply(J,[a,1].concat(t.call(arguments,1)))},J.throttle=function(a,b){var c,d,e,f,g,h,i=J.debounce(function(){g=f=!1},b);return function(){var j;return c=this,d=arguments,j=function(){e=null,g&&a.apply(c,d),i()},e||(e=setTimeout(j,b)),f?g=!0:h=a.apply(c,d),i(),f=!0,h}},J.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)};c&&!d&&a.apply(e,f),clearTimeout(d),d=setTimeout(g,b)}},J.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments))}},J.wrap=function(a,b){return function(){var c=[a].concat(t.call(arguments,0));return b.apply(this,c)}},J.compose=function(){var a=arguments;return function(){var b,c=arguments;for(b=a.length-1;b>=0;b--)c=[a[b].apply(this,c)];return c[0]}},J.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},J.keys=H||function(a){var b,c;if(a!==Object(a))throw new TypeError("Invalid object");b=[];for(c in a)J.has(a,c)&&(b[b.length]=c);return b},J.values=function(a){return J.map(a,J.identity)},J.functions=J.methods=function(a){var b,c=[];for(b in a)J.isFunction(a[b])&&c.push(b);return c.sort()},J.extend=function(b){return a(t.call(arguments,1),function(a){var c;for(c in a)b[c]=a[c]}),b},J.pick=function(b){var c={};return a(J.flatten(t.call(arguments,1)),function(a){a in b&&(c[a]=b[a])}),c},J.defaults=function(b){return a(t.call(arguments,1),function(a){var c;for(c in a)b[c]==null&&(b[c]=a[c])}),b},J.clone=function(a){return J.isObject(a)?J.isArray(a)?a.slice():J.extend({},a):a},J.tap=function(a,b){return b(a),a},J.isEqual=function(a,b){return K(a,b,[])},J.isEmpty=function(a){var b;if(a==null)return!0;if(J.isArray(a)||J.isString(a))return a.length===0;for(b in a)if(J.has(a,b))return!1;return!0},J.isElement=function(a){return!!a&&a.nodeType==1},J.isArray=G||function(a){return v.call(a)=="[object Array]"},J.isObject=function(a){return a===Object(a)},J.isArguments=function(a){return v.call(a)=="[object Arguments]"},J.isArguments(arguments)||(J.isArguments=function(a){return!!a&&!!J.has(a,"callee")}),J.isFunction=function(a){return v.call(a)=="[object Function]"},J.isString=function(a){return v.call(a)=="[object String]"},J.isNumber=function(a){return v.call(a)=="[object Number]"},J.isFinite=function(a){return J.isNumber(a)&&isFinite(a)},J.isNaN=function(a){return a!==a},J.isBoolean=function(a){return a===!0||a===!1||v.call(a)=="[object Boolean]"},J.isDate=function(a){return v.call(a)=="[object Date]"},J.isRegExp=function(a){return v.call(a)=="[object RegExp]"},J.isNull=function(a){return a===null},J.isUndefined=function(a){return a===void 0},J.has=function(a,b){return w.call(a,b)},J.noConflict=function(){return n._=o,this},J.identity=function(a){return a},J.times=function(a,b,c){var d;for(d=0;d<a;d++)b.call(c,d)},J.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},J.result=function(a,b){var c;return a==null?null:(c=a[b],J.isFunction(c)?c.call(a):c)},J.mixin=function(b){a(J.functions(b),function(a){m(a,J[a]=b[a])})},d=0,J.uniqueId=function(a){var b=d++;return a?a+b:b},J.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},e=/.^/,f={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(g in f)f[f[g]]=g;h=/\\|'|\r|\n|\t|\u2028|\u2029/g,i=/\\(\\|'|r|n|t|u2028|u2029)/g,j=function(a){return a.replace(i,function(a,b){return f[b]})},J.template=function(a,b,c){var d,g,i;return c=J.defaults(c||{},J.templateSettings),d="__p+='"+a.replace(h,function(a){return"\\"+f[a]}).replace(c.escape||e,function(a,b){return"'+\n_.escape("+j(b)+")+\n'"}).replace(c.interpolate||e,function(a,b){return"'+\n("+j(b)+")+\n'"}).replace(c.evaluate||e,function(a,b){return"';\n"+j(b)+"\n;__p+='"})+"';\n",c.variable||(d="with(obj||{}){\n"+d+"}\n"),d="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+d+"return __p;\n",g=new Function(c.variable||"obj","_",d),b?g(b,J):(i=function(a){return g.call(this,a,J)},i.source="function("+(c.variable||"obj")+"){\n"+d+"}",i)},J.chain=function(a){return J(a).chain()},k=function(a){this._wrapped=a},J.prototype=k.prototype,l=function(a,b){return b?J(a).chain():a},m=function(a,b){k.prototype[a]=function(){var a=t.call(arguments);return u.call(a,this._wrapped),l(b.apply(J,a),this._chain)}},J.mixin(J),a(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=q[a];k.prototype[a]=function(){var c,d=this._wrapped;return b.apply(d,arguments),c=d.length,(a=="shift"||a=="splice")&&c===0&&delete d[0],l(d,this._chain)}}),a(["concat","join","slice"],function(a){var b=q[a];k.prototype[a]=function(){return l(b.apply(this._wrapped,arguments),this._chain)}}),k.prototype.chain=function(){return this._chain=!0,this},k.prototype.value=function(){return this._wrapped}}.call(this),define("underscore",function(a){return function(){var b;return b||a._}}(this)),define("lib/clone",["require"],function(){var a=function(a){return JSON.parse(JSON.stringify(a))};return a}),define("config",["require","lib/clone"],function(a){var b,c,d=a("lib/clone"),e={};return typeof Desmos!="undefined"&&Desmos.config&&(e=d(Desmos.config)),b=new RegExp("desmos_config=([^&]+)"),c=location.search.match(b),c!==null&&(e=JSON.parse(decodeURIComponent(c[1]))),{get:function(a){return e[a]},use:function(a,b){var c,f=d(e);for(c in a)e[c]=a[c];try{b()}finally{e=f}},all:function(){return d(e)}}}),define("math/builtin",["require"],function(){var a,b={};return b.mod=function(a,b){return a-b*Math.floor(a/b)},b.min=function(a,b){return a<b?a:b},b.max=function(a,b){return a>b?a:b},b.sign=function(a){return a===0?0:a>0?1:a<0?-1:NaN},b.lcm=function(a,c){var d;return a=b.smartTruncate(a),c=b.smartTruncate(c),d=b.getGCD(a,c),Math.abs(a*c/d)},b.gcd=function(a,c){return b.getGCD(a,c)},b.nCr=function(a,c){var d,e;a=b.smartTruncate(a),c=b.smartTruncate(c);if(c>a||a<0||c<0)return 0;d=1;for(e=0;e<c;e++)d*=(a-e)/(e+1);return d},b.nPr=function(a,c){var d,e;a=b.smartTruncate(a),c=b.smartTruncate(c);if(c>a||a<0||c<0)return 0;d=1;for(e=0;e<c;e++)d*=a-e;return d},b.factorial=function(a){return b.gamma(a+1)},b._integerFactorial=function(a){var b,c;if(a!==Math.floor(a))return NaN;if(a<0)return NaN;if(a>170)return NaN;if(a===0||a===1)return 1;b=1;for(c=2;c<=a;c++)b*=c;return b},b.gamma=function(a){return a===Math.floor(a)?b._integerFactorial(a-1):a<0?Math.PI/(Math.sin(Math.PI*a)*b.gamma(1-a)):Math.exp(b.lnGamma(a))},b.lnGamma=function(a){var b,c,d,e;if(a<0)return NaN;b=[57.15623566586292,-59.59796035547549,14.136097974741746,-0.4919138160976202,3399464998481189e-20,4652362892704858e-20,-0.00009837447530487956,.0001580887032249125,-0.00021026444172410488,.00021743961811521265,-0.0001643181065367639,8441822398385275e-20,-0.000026190838401581408,36899182659531625e-22],c=.9999999999999971;for(d=0;d<14;d++)c+=b[d]/(a+d+1);return e=a+5.2421875,(a+.5)*Math.log(e)-e+Math.log(2.5066282746310007*c/a)},b.bernoulliTable=[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-236364091/2730,8553103/6,-23749461029/870],b.cotDerivative=function(a,c){var d,e,f,g,h,i,j,k,l;if(a!==Math.floor(a))return NaN;if(a<0)return NaN;if(a===0)return 1/b.tan(c);d=b.sin(c);if(a===1)return-1/(d*d);e=b.cos(c);if(a===2)return 2*e/(d*d*d);f=[0,2];for(h=3;h<=a;h++){g=[];for(i=0;i<h;i++)j=0,k=0,i>0&&(j=(h-i+1)*f[i-1]),i+2<h&&(k=(i+1)*f[i+1]),g.push(-(j+k));f=g}l=0;for(i=a-1;i>=0;i--)l=g[i]+e*l;return l/Math.pow(d,a+1)},b.polyGamma=function(a,c){var d,e,f,g,h,i,j,k,l,m;if(a<0)return NaN;if(a!==Math.floor(a))return NaN;d=a%2===0?-1:1;if(c<0)return-d*b.polyGamma(a,1-c)-Math.pow(Math.PI,a+1)*b.cotDerivative(a,Math.PI*c);e=b.factorial(a),f=0,g=Math.pow(c,-(a+1));while(c<10)f+=g,c++,g=Math.pow(c,-(a+1));f+=a===0?-Math.log(c):g*c/a,f+=.5*g,h=b.bernoulliTable,i=a+1,j=2,k=g*c*i/j,l=1/(c*c);for(m=1;m<=14;m++)k*=l,f+=k*h[m-1],i++,j++,k*=i/j,i++,j++,k*=i/j;return e*d*f},b.getGCD=function(a,c){var d,e,f=b.smartTruncate(a),g=b.smartTruncate(c);f<0&&(f=-f),g<0&&(g=-g),g>f&&(d=g,g=f,f=d);if(g===0)return f;e=f%g;while(e>0)f=g,g=e,e=f%g;return g},b.toFraction=function(a,b){var c,d,e,f,g,h,i;if(a===Infinity)return{n:Infinity,d:1};if(a===-Infinity)return{n:-Infinity,d:1};if(!isFinite(a))return{n:NaN,d:1};d=0,e=1,f=1,g=0,b||(b=1e6);for(;;){c=Math.floor(a),h=c*e+d,i=c*g+f;if(i>b)break;d=e,f=g,e=h,g=i;if(a===c)break;a=1/(a-c)}return{n:e,d:g}},b.approx=function(a,b,c){var d=Math.max(Math.max(Math.abs(a),Math.abs(b)),1),e=c===undefined?.5:Math.pow(.5,c);return d===d+e*Math.abs(b-a)},b.smartTruncate=function(a){return a<0?Math.ceil(a):Math.floor(a)},b.log_base=function(a,b){return Math.log(a)/Math.log(b)},b.pow=function(a,c){var d;return a>=0||c===Math.floor(c)?Math.pow(a,c):(d=b.toFraction(c,100),b.approx(d.n/d.d,c,2)&&d.d%2===1?(d.n%2===0?1:-1)*Math.pow(-a,c):NaN)},b.nthroot=function(a,c){return b.pow(a,1/c)},a=1/Math.PI,b.sin=function(b){return 2*a*b%2===0?0:Math.sin(b)},b.cos=function(b){return Math.abs(2*a*b%2)===1?0:Math.cos(b)},b.tan=function(b){return 2*a*b%2===0?0:Math.abs(2*a*b%2)===1?Infinity:Math.tan(b)},b.sec=function(b){return Math.abs(2*a*b%2)===1?Infinity:1/Math.cos(b)},b.csc=function(b){return 2*a*b%2===0?Infinity:1/Math.sin(b)},b.cot=function(b){return 2*a*b%2===0?Infinity:Math.abs(2*a*b%2)===1?0:1/Math.tan(b)},b.acot=function(a){return Math.PI/2-Math.atan(a)},b.acsc=function(a){return Math.asin(1/a)},b.asec=function(a){return Math.acos(1/a)},b.sinh=function(a){return(Math.exp(a)-Math.exp(-a))/2},b.cosh=function(a){return(Math.exp(a)+Math.exp(-a))/2},b.tanh=function(a){return a>0?(1-Math.exp(-2*a))/(1+Math.exp(-2*a)):(Math.exp(2*a)-1)/(Math.exp(2*a)+1)},b.sech=function(a){return 1/b.cosh(a)},b.csch=function(a){return 1/b.sinh(a)},b.coth=function(a){return 1/b.tanh(a)},b.asinh=function(a){return Math.log(a+Math.sqrt(a*a+1))},b.acosh=function(a){return Math.log(a+Math.sqrt(a+1)*Math.sqrt(a-1))},b.atanh=function(a){return.5*Math.log((1+a)/(1-a))},b.asech=function(a){return Math.log(1/a+Math.sqrt(1/a+1)*Math.sqrt(1/a-1))},b.acsch=function(a){return Math.log(1/a+Math.sqrt(1/(a*a)+1))},b.acoth=function(a){return.5*Math.log((a+1)/(a-1))},b}),define("math/evalframe",["require","pjs"],function(a){var b=a("pjs"),c=b(function(a){a.init=function(a){a instanceof c?this.parentFrame=a:this.parentFrame=null,this.variables={},this.functions={},this.evalStrings={},this.definitionIds={};if(this.parentFrame)for(var b in this.parentFrame.evalStrings)this.evalStrings[b]=this.parentFrame.getEvalStrings(b)},a.setVariable=function(a,b){this.variables[a]=b},a.getVariable=function(a){if(this.variables.hasOwnProperty(a))return this.variables[a];if(this.parentFrame)return this.parentFrame.getVariable(a);throw"Variable '"+a+"' not defined"},a.setDefinitionId=function(a,b){this.definitionIds[a]=b},a.getDefinitionId=function(a){return this.definitionIds[a]},a.setFunction=function(a,b,c,d,e,f){this.functions[a]={arity:b,body:c,tree:d,source:f,args:e}},a.hasFunction=function(a){return this.functions.hasOwnProperty(a)?!0:this.parentFrame?this.parentFrame.hasFunction(a):!1},a.hasFunctionWithArity=function(a,b){return this.functions.hasOwnProperty(a)&&this.functions[a].arity==b?!0:this.parentFrame?this.parentFrame.hasFunction(a):!1},a.hasVariable=function(a){return this.variables.hasOwnProperty(a)?!0:this.parentFrame?this.parentFrame.hasVariable(a):!1},a.getFunctionTree=function(a){if(this.functions.hasOwnProperty(a)){var b=this.functions[a];return b.tree}if(this.parentFrame)return this.parentFrame.getFunctionTree(a);throw"Function '"+a+"' not defined"},a.callFunction=function(a,b){if(this.functions.hasOwnProperty(a)){var c=this.functions[a];if(c.arity==b.length)return c.body.apply(null,b);throw"Function "+a+" expects "+c.arity+" arguments, but was called with "+b.length}if(this.parentFrame)return this.parentFrame.callFunction(a,b);throw"Function '"+a+"' not defined"},a.defines=function(a){return this.hasVariable(a)||this.hasFunction(a)},a.arity=function(a){if(this.hasVariable(a))return 0;if(this.hasFunction(a))return this.functions[a].arity;if(this.parentFrame)return this.parentFrame.arity(a)},a.setEvalStrings=function(a,b){this.evalStrings[a]=b},a.getEvalStrings=function(a){return this.evalStrings.hasOwnProperty(a)?this.evalStrings[a]:{expression:a,statements:""}},a.functionMap=function(a){var b={};this.parentFrame&&!a&&(b=this.parentFrame.functionMap());for(var c in this.functions)this.functions.hasOwnProperty(c)&&(b[c]=this.functions[c].body);return b},a.leafFunctionMap=function(){return this.functionMap(!0)},a.functionSourceMap=function(a){var b={};this.parentFrame&&!a&&(b=this.parentFrame.functionSourceMap());for(var c in this.functions)this.functions.hasOwnProperty(c)&&this.functions[c].source&&(b[c]={args:this.functions[c].args,source:this.functions[c].source});return b},a.leafFunctionSourceMap=function(){return this.functionSourceMap(!0)}});return c}),define("math/comparators",["require"],function(){var a={"<":{inclusive:!1,direction:-1},"!=":{inclusive:!1,direction:0},">":{inclusive:!1,direction:1},"<=":{inclusive:!0,direction:-1},"=":{inclusive:!0,direction:0},">=":{inclusive:!0,direction:1}},b=function(a,b){switch(b){case-1:return a?"<=":"<";case 0:return a?"=":"!=";case 1:return a?">=":">";default:throw"Programming error.  Comparators must have a direction of -1, 0, or 1"}};return{table:a,get:b}}),define("parser",[],function(){var a={trace:function(){},yy:{},symbols_:{error:2,sentence:3,expr:4,EOF:5,assignment:6,equation:7,function_declaration:8,ordered_pair_list:9,double_inequality:10,"boolean":11,identifier:12,"=":13,FUNCTION_PROTOTYPE:14,",":15,comparator:16,IDENTIFIER_BASE:17,ordered_pair_list_elements:18,ordered_pair:19,"[":20,"]":21,"(":22,")":23,expr_sum:24,"<":25,">":26,">=":27,"<=":28,"+":29,expr_product:30,"-":31,expr_atom_impmul:32,"*":33,expr_atom:34,"/":35,exponent:36,"^N":37,"^I":38,"^":39,"{":40,"}":41,function_call:42,function_call_unary:43,trig_function_call:44,log_function_call:45,"left|":46,"right|":47,FRAC:48,SQRT:49,"!":50,repeated_operator:51,DERIVATIVE:52,expr_piecewise:53,constant:54,NUMBER:55,repeated_operator_symbol:56,SUM:57,PROD:58,_:59,"{_visible":60,piecewise_list:61,"}_visible":62,incomplete_piecewise_list:63,piecewise_element:64,":":65,trig_function:66,TRIG_FUNCTION:67,log_prefix:68,LN:69,LOG:70,LOG_BASE_N:71,function_argument_list:72,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"=",14:"FUNCTION_PROTOTYPE",15:",",17:"IDENTIFIER_BASE",20:"[",21:"]",22:"(",23:")",25:"<",26:">",27:">=",28:"<=",29:"+",31:"-",33:"*",35:"/",37:"^N",38:"^I",39:"^",40:"{",41:"}",46:"left|",47:"right|",48:"FRAC",49:"SQRT",50:"!",52:"DERIVATIVE",55:"NUMBER",57:"SUM",58:"PROD",59:"_",60:"{_visible",62:"}_visible",65:":",67:"TRIG_FUNCTION",69:"LN",70:"LOG",71:"LOG_BASE_N"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,3],[3,2],[3,4],[3,1],[6,3],[6,3],[7,3],[10,5],[12,1],[9,1],[18,1],[18,3],[19,5],[19,5],[4,1],[16,1],[16,1],[16,1],[16,1],[11,3],[11,3],[11,5],[24,3],[24,3],[24,1],[30,2],[30,3],[30,3],[30,1],[36,1],[36,1],[36,4],[32,1],[32,1],[32,1],[32,1],[32,1],[32,3],[32,3],[32,3],[32,2],[32,7],[32,4],[32,7],[32,2],[32,1],[32,2],[32,1],[34,1],[34,3],[34,2],[34,2],[34,2],[34,1],[56,1],[56,1],[51,9],[53,3],[53,2],[61,3],[61,1],[63,3],[63,1],[64,3],[64,1],[54,1],[54,2],[43,5],[43,4],[66,1],[44,4],[44,2],[44,7],[44,9],[44,3],[44,5],[68,1],[68,1],[68,1],[68,3],[68,5],[45,4],[45,2],[45,5],[45,3],[42,4],[72,3],[72,3],[8,2]],performAction:function(b,c,d,e,f,g,h){var i=g.length-1;switch(f){case 1:return g[i-1];case 2:return g[i-1];case 3:return g[i-1];case 4:return g[i-1];case 5:return g[i-1];case 6:return g[i-1];case 7:return g[i-1];case 8:return e.ErrorNode("What do you want variable '"+g[i-2].identifier+"' to equal?");case 9:var j=e.parseFunctionDeclaration(g[i-1]);return e.ErrorNode("What do you want function '"+j.identifier.identifier+"' to equal?");case 10:return e.ErrorNode("Points are written like this: (1, 2)");case 11:return e.ErrorNode("You haven't written anything yet");case 12:this.$=e.AssignmentNode(g[i-2],g[i]);break;case 13:this.$=e.AssignmentNode(g[i-2],e.ErrorNode);break;case 14:this.$=e.EquationNode(g[i-2],g[i]);break;case 15:this.$=e.DoubleInequalityNode(g[i-4],g[i-3],g[i-2],g[i-1],g[i]);break;case 16:this.$=e.IdentifierNode(b),e.setInput(this.$,this._$);break;case 17:this.$=e.OrderedPairListNode(g[i]);break;case 18:this.$=[g[i]];break;case 19:g[i-2].push(g[i]),this.$=g[i-2];break;case 20:this.$=e.OrderedPairNode(g[i-3],g[i-1]);break;case 21:this.$=e.OrderedPairNode(g[i-3],g[i-1]);break;case 22:this.$=g[i],e.setInput(this.$,this._$);break;case 23:this.$="<";break;case 24:this.$=">";break;case 25:this.$=">=";break;case 26:this.$="<=";break;case 27:this.$=e.ComparatorNode(g[i-1],g[i-2],g[i]);break;case 28:this.$=e.ComparatorNode("===",g[i-2],g[i]);break;case 29:this.$=e.ChainedComparatorNode([g[i-3],g[i-1]],[g[i-4],g[i-2],g[i]]);break;case 30:this.$=e.BinaryOperatorNode("+",g[i-2],g[i]);break;case 31:this.$=e.BinaryOperatorNode("-",g[i-2],g[i]);break;case 32:this.$=g[i];break;case 33:this.$=e.BinaryOperatorNode("*",g[i-1],g[i]);break;case 34:this.$=e.BinaryOperatorNode("*",g[i-2],g[i]);break;case 35:this.$=e.BinaryOperatorNode("/",g[i-2],g[i]);break;case 36:this.$=g[i];break;case 37:this.$=e.ConstantNode(Number(g[i]));break;case 38:this.$=e.IdentifierNode(g[i]);break;case 39:this.$=g[i-1];break;case 40:this.$=g[i];break;case 41:this.$=g[i];break;case 42:this.$=g[i];break;case 43:this.$=g[i];break;case 44:this.$=g[i];break;case 45:this.$=g[i-1];break;case 46:this.$=g[i-1];break;case 47:this.$=e.FunctionNode(e.IdentifierNode("\\abs"),[g[i-1]]);break;case 48:this.$=e.BinaryOperatorNode("^",g[i-1],g[i]);break;case 49:this.$=e.BinaryOperatorNode("/",g[i-4],g[i-1]);break;case 50:this.$=e.FunctionNode(e.IdentifierNode("\\sqrt"),[g[i-1]]);break;case 51:this.$=e.FunctionNode(e.IdentifierNode("\\nthroot"),[g[i-1],g[i-4]]);break;case 52:this.$=e.FunctionNode(e.IdentifierNode("\\factorial"),[g[i-1]]);break;case 53:this.$=g[i];break;case 54:this.$=e.DerivativeNode(e.IdentifierNode(g[i-1]),g[i]);break;case 55:this.$=g[i];break;case 56:this.$=g[i];break;case 57:this.$=e.NegationNode(e.BinaryOperatorNode("^",e.ConstantNode(Number(g[i-1])),g[i]));break;case 58:this.$=e.BinaryOperatorNode("^",g[i-1],g[i]);break;case 59:this.$=e.FunctionNode(e.IdentifierNode("\\factorial"),[g[i-1]]);break;case 60:this.$=e.NegationNode(g[i]);break;case 61:this.$=g[i];break;case 62:this.$=e.SummationNode;break;case 63:this.$=e.ProductNode;break;case 64:this.$=g[i-8](g[i-5],g[i-3],g[i-1],g[i]);break;case 65:this.$=g[i-1];break;case 66:this.$=e.ConstantNode(1);break;case 67:this.$=g[i-2].append_else(e.PiecewiseNode(e.ConstantNode(!0),g[i]));break;case 68:this.$=g[i];break;case 69:this.$=g[i-2].append_else(g[i]);break;case 70:this.$=g[i];break;case 71:this.$=e.PiecewiseNode(g[i-2],g[i]);break;case 72:this.$=e.PiecewiseNode(g[i],e.ConstantNode(1));break;case 73:this.$=e.ConstantNode(Number(b));break;case 74:this.$=e.ConstantNode(-g[i]);break;case 75:this.$=e.FunctionCallExponentNode(g[i-4],g[i-2],g[i]);break;case 76:this.$=e.FunctionNode(g[i-3],[g[i-1]]);break;case 77:this.$=e.IdentifierNode(b);break;case 78:this.$=e.FunctionNode(g[i-3],[g[i-1]]);break;case 79:if(!g[i].okForImplicitFunction())throw"Too complicated.  Use parens";this.$=e.FunctionNode(g[i-1],[g[i]]);break;case 80:if(!g[i].okForImplicitFunction())throw"Too complicated.  Use parens";if(g[i-2].value!=1)throw"Only sin^2 and sin^-1 are supported.  Otherwise, use parens";this.$=e.FunctionNode(e.IdentifierNode(e.inverses[g[i-6].identifier]),[g[i]]);break;case 81:if(g[i-4].value!=1)throw"Only sin^2 and sin^-1 are supported.  Otherwise, use parens";this.$=e.FunctionNode(e.IdentifierNode(e.inverses[g[i-8].identifier]),[g[i-1]]);break;case 82:if(!g[i].okForImplicitFunction())throw"Too complicated.  Use parens";if(g[i-1]!="2")throw"Only sin^2 and sin^-1 are supported.  Otherwise, use parens";this.$=e.BinaryOperatorNode("^",e.FunctionNode(g[i-2],[g[i]]),e.ConstantNode(2));break;case 83:if(g[i-3]!="2")throw"Only sin^2 and sin^-1 are supported.  Otherwise, use parens";this.$=e.BinaryOperatorNode("^",e.FunctionNode(g[i-4],[g[i-1]]),e.ConstantNode(2));break;case 84:this.$=e.ConstantNode(Math.E);break;case 85:this.$=e.ConstantNode(10);break;case 86:this.$=e.ConstantNode(Number(b));break;case 87:this.$=g[i];break;case 88:this.$=g[i-1];break;case 89:this.$=e.FunctionNode(e.IdentifierNode("log"),[g[i-1],g[i-3]]);break;case 90:if(!g[i].okForImplicitFunction())throw"Too complicated.  Use parens";this.$=e.FunctionNode(e.IdentifierNode("log"),[g[i],g[i-1]]);break;case 91:if(g[i-3]!="2")throw"Only log^2 is supported.  Use parens";this.$=e.BinaryOperatorNode("^",e.FunctionNode(e.IdentifierNode("log"),[g[i-1],g[i-4]]),e.ConstantNode(2));break;case 92:if(!g[i].okForImplicitFunction())throw"Too complicated.  Use parens";if(g[i-1]!="2")throw"Only log^2 is supported.  Use parens";this.$=e.BinaryOperatorNode("^",e.FunctionNode(e.IdentifierNode("log"),[g[i],g[i-2]]),e.ConstantNode(2));break;case 93:this.$=e.FunctionNode(g[i-3],g[i-1]);break;case 94:this.$=g[i-2].concat([g[i]]);break;case 95:this.$=[g[i-2],g[i]];break;case 96:var j=e.parseFunctionDeclaration(g[i-1]);this.$=e.FunctionDeclarationNode(j.identifier,j.args,g[i]),this.$.setInputString(j.input_string)}},table:[{3:1,4:2,5:[1,11],6:3,7:4,8:5,9:6,10:7,11:8,12:9,14:[1,10],17:[1,14],18:13,19:16,20:[1,18],22:[1,19],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{1:[3]},{5:[1,45],13:[1,47],15:[1,46],16:48,25:[1,49],26:[1,50],27:[1,51],28:[1,52]},{5:[1,53]},{5:[1,54]},{5:[1,55]},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[2,40],13:[1,59],15:[2,40],17:[2,40],22:[1,60],25:[2,40],26:[2,40],27:[2,40],28:[2,40],29:[2,40],31:[2,40],33:[2,40],35:[2,40],37:[2,40],38:[2,40],39:[2,40],40:[2,40],46:[2,40],48:[2,40],49:[2,40],50:[2,40],52:[2,40],57:[2,40],58:[2,40],60:[2,40],67:[2,40],69:[2,40],70:[2,40],71:[2,40]},{4:62,5:[1,61],12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{1:[2,11]},{5:[2,22],13:[2,22],15:[2,22],17:[2,22],21:[2,22],22:[2,22],23:[2,22],25:[2,22],26:[2,22],27:[2,22],28:[2,22],29:[1,65],31:[1,66],33:[2,22],35:[2,22],37:[2,22],38:[2,22],39:[2,22],40:[2,22],41:[2,22],46:[2,22],47:[2,22],48:[2,22],49:[2,22],50:[2,22],52:[2,22],57:[2,22],58:[2,22],60:[2,22],62:[2,22],65:[2,22],67:[2,22],69:[2,22],70:[2,22],71:[2,22]},{5:[2,17],15:[1,67]},{5:[2,16],13:[2,16],15:[2,16],17:[2,16],21:[2,16],22:[2,16],23:[2,16],25:[2,16],26:[2,16],27:[2,16],28:[2,16],29:[2,16],31:[2,16],33:[2,16],35:[2,16],37:[2,16],38:[2,16],39:[2,16],40:[2,16],41:[2,16],46:[2,16],47:[2,16],48:[2,16],49:[2,16],50:[2,16],52:[2,16],55:[2,16],57:[2,16],58:[2,16],60:[2,16],62:[2,16],65:[2,16],67:[2,16],69:[2,16],70:[2,16],71:[2,16]},{5:[2,32],12:63,13:[2,32],15:[2,32],17:[1,14],21:[2,32],22:[1,64],23:[2,32],25:[2,32],26:[2,32],27:[2,32],28:[2,32],29:[2,32],31:[2,32],32:68,33:[1,69],35:[1,70],37:[2,32],38:[2,32],39:[2,32],40:[1,28],41:[2,32],42:24,43:25,44:26,45:27,46:[1,29],47:[2,32],48:[1,30],49:[1,31],50:[2,32],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,32],65:[2,32],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,18],15:[2,18]},{5:[2,36],13:[2,36],15:[2,36],17:[2,36],21:[2,36],22:[2,36],23:[2,36],25:[2,36],26:[2,36],27:[2,36],28:[2,36],29:[2,36],31:[2,36],33:[2,36],35:[2,36],36:71,37:[1,73],38:[1,74],39:[1,75],40:[2,36],41:[2,36],46:[2,36],47:[2,36],48:[2,36],49:[2,36],50:[1,72],52:[2,36],57:[2,36],58:[2,36],60:[2,36],62:[2,36],65:[2,36],67:[2,36],69:[2,36],70:[2,36],71:[2,36]},{4:76,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:77,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,56],13:[2,56],15:[2,56],17:[2,56],21:[2,56],22:[2,56],23:[2,56],25:[2,56],26:[2,56],27:[2,56],28:[2,56],29:[2,56],31:[2,56],33:[2,56],35:[2,56],37:[2,56],38:[2,56],39:[2,56],40:[2,56],41:[2,56],46:[2,56],47:[2,56],48:[2,56],49:[2,56],50:[2,56],52:[2,56],57:[2,56],58:[2,56],60:[2,56],62:[2,56],65:[2,56],67:[2,56],69:[2,56],70:[2,56],71:[2,56]},{12:63,17:[1,14],22:[1,64],31:[1,21],32:22,34:79,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,78],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,61],13:[2,61],15:[2,61],17:[2,61],21:[2,61],22:[2,61],23:[2,61],25:[2,61],26:[2,61],27:[2,61],28:[2,61],29:[2,61],31:[2,61],33:[2,61],35:[2,61],36:80,37:[1,73],38:[1,74],39:[1,75],40:[2,61],41:[2,61],46:[2,61],47:[2,61],48:[2,61],49:[2,61],50:[1,81],52:[2,61],57:[2,61],58:[2,61],60:[2,61],62:[2,61],65:[2,61],67:[2,61],69:[2,61],70:[2,61],71:[2,61]},{5:[2,73],13:[2,73],15:[2,73],17:[2,73],21:[2,73],22:[2,73],23:[2,73],25:[2,73],26:[2,73],27:[2,73],28:[2,73],29:[2,73],31:[2,73],33:[2,73],35:[2,73],37:[2,73],38:[2,73],39:[2,73],40:[2,73],41:[2,73],46:[2,73],47:[2,73],48:[2,73],49:[2,73],50:[2,73],52:[2,73],57:[2,73],58:[2,73],60:[2,73],62:[2,73],65:[2,73],67:[2,73],69:[2,73
],70:[2,73],71:[2,73]},{5:[2,41],13:[2,41],15:[2,41],17:[2,41],21:[2,41],22:[2,41],23:[2,41],25:[2,41],26:[2,41],27:[2,41],28:[2,41],29:[2,41],31:[2,41],33:[2,41],35:[2,41],37:[2,41],38:[2,41],39:[2,41],40:[2,41],41:[2,41],46:[2,41],47:[2,41],48:[2,41],49:[2,41],50:[2,41],52:[2,41],57:[2,41],58:[2,41],60:[2,41],62:[2,41],65:[2,41],67:[2,41],69:[2,41],70:[2,41],71:[2,41]},{5:[2,42],13:[2,42],15:[2,42],17:[2,42],21:[2,42],22:[2,42],23:[2,42],25:[2,42],26:[2,42],27:[2,42],28:[2,42],29:[2,42],31:[2,42],33:[2,42],35:[2,42],37:[2,42],38:[2,42],39:[2,42],40:[2,42],41:[2,42],46:[2,42],47:[2,42],48:[2,42],49:[2,42],50:[2,42],52:[2,42],57:[2,42],58:[2,42],60:[2,42],62:[2,42],65:[2,42],67:[2,42],69:[2,42],70:[2,42],71:[2,42]},{5:[2,43],13:[2,43],15:[2,43],17:[2,43],21:[2,43],22:[2,43],23:[2,43],25:[2,43],26:[2,43],27:[2,43],28:[2,43],29:[2,43],31:[2,43],33:[2,43],35:[2,43],37:[2,43],38:[2,43],39:[2,43],40:[2,43],41:[2,43],46:[2,43],47:[2,43],48:[2,43],49:[2,43],50:[2,43],52:[2,43],57:[2,43],58:[2,43],60:[2,43],62:[2,43],65:[2,43],67:[2,43],69:[2,43],70:[2,43],71:[2,43]},{5:[2,44],13:[2,44],15:[2,44],17:[2,44],21:[2,44],22:[2,44],23:[2,44],25:[2,44],26:[2,44],27:[2,44],28:[2,44],29:[2,44],31:[2,44],33:[2,44],35:[2,44],37:[2,44],38:[2,44],39:[2,44],40:[2,44],41:[2,44],46:[2,44],47:[2,44],48:[2,44],49:[2,44],50:[2,44],52:[2,44],57:[2,44],58:[2,44],60:[2,44],62:[2,44],65:[2,44],67:[2,44],69:[2,44],70:[2,44],71:[2,44]},{4:82,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:83,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{40:[1,84]},{20:[1,86],40:[1,85]},{5:[2,53],13:[2,53],15:[2,53],17:[2,53],21:[2,53],22:[2,53],23:[2,53],25:[2,53],26:[2,53],27:[2,53],28:[2,53],29:[2,53],31:[2,53],33:[2,53],35:[2,53],37:[2,53],38:[2,53],39:[2,53],40:[2,53],41:[2,53],46:[2,53],47:[2,53],48:[2,53],49:[2,53],50:[2,53],52:[2,53],57:[2,53],58:[2,53],60:[2,53],62:[2,53],65:[2,53],67:[2,53],69:[2,53],70:[2,53],71:[2,53]},{12:63,17:[1,14],22:[1,64],30:87,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,55],13:[2,55],15:[2,55],17:[2,55],21:[2,55],22:[2,55],23:[2,55],25:[2,55],26:[2,55],27:[2,55],28:[2,55],29:[2,55],31:[2,55],33:[2,55],35:[2,55],37:[2,55],38:[2,55],39:[2,55],40:[2,55],41:[2,55],46:[2,55],47:[2,55],48:[2,55],49:[2,55],50:[2,55],52:[2,55],57:[2,55],58:[2,55],60:[2,55],62:[2,55],65:[2,55],67:[2,55],69:[2,55],70:[2,55],71:[2,55]},{12:63,17:[1,14],22:[1,88],30:89,31:[1,21],32:22,34:17,37:[1,91],39:[1,90],40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{12:63,17:[1,14],22:[1,92],30:93,31:[1,21],32:22,34:17,37:[1,94],40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{59:[1,95]},{4:101,11:100,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],61:96,62:[1,97],63:98,64:99,66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{17:[2,77],22:[2,77],31:[2,77],37:[2,77],39:[2,77],40:[2,77],46:[2,77],48:[2,77],49:[2,77],52:[2,77],55:[2,77],57:[2,77],58:[2,77],60:[2,77],67:[2,77],69:[2,77],70:[2,77],71:[2,77]},{17:[2,84],22:[2,84],31:[2,84],37:[2,84],40:[2,84],46:[2,84],48:[2,84],49:[2,84],52:[2,84],55:[2,84],57:[2,84],58:[2,84],60:[2,84],67:[2,84],69:[2,84],70:[2,84],71:[2,84]},{17:[2,85],22:[2,85],31:[2,85],37:[2,85],40:[2,85],46:[2,85],48:[2,85],49:[2,85],52:[2,85],55:[2,85],57:[2,85],58:[2,85],59:[1,102],60:[2,85],67:[2,85],69:[2,85],70:[2,85],71:[2,85]},{17:[2,86],22:[2,86],31:[2,86],37:[2,86],40:[2,86],46:[2,86],48:[2,86],49:[2,86],52:[2,86],55:[2,86],57:[2,86],58:[2,86],60:[2,86],67:[2,86],69:[2,86],70:[2,86],71:[2,86]},{59:[2,62]},{59:[2,63]},{1:[2,1]},{4:103,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:104,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:106,12:105,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{17:[2,23],22:[2,23],31:[2,23],40:[2,23],46:[2,23],48:[2,23],49:[2,23],52:[2,23],55:[2,23],57:[2,23],58:[2,23],60:[2,23],67:[2,23],69:[2,23],70:[2,23],71:[2,23]},{17:[2,24],22:[2,24],31:[2,24],40:[2,24],46:[2,24],48:[2,24],49:[2,24],52:[2,24],55:[2,24],57:[2,24],58:[2,24],60:[2,24],67:[2,24],69:[2,24],70:[2,24],71:[2,24]},{17:[2,25],22:[2,25],31:[2,25],40:[2,25],46:[2,25],48:[2,25],49:[2,25],52:[2,25],55:[2,25],57:[2,25],58:[2,25],60:[2,25],67:[2,25],69:[2,25],70:[2,25],71:[2,25]},{17:[2,26],22:[2,26],31:[2,26],40:[2,26],46:[2,26],48:[2,26],49:[2,26],52:[2,26],55:[2,26],57:[2,26],58:[2,26],60:[2,26],67:[2,26],69:[2,26],70:[2,26],71:[2,26]},{1:[2,2]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{2:[1,109],4:108,5:[1,107],12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:111,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42],72:110},{1:[2,9]},{5:[2,96]},{5:[2,40],13:[2,40],15:[2,40],17:[2,40],21:[2,40],22:[1,60],23:[2,40],25:[2,40],26:[2,40],27:[2,40],28:[2,40],29:[2,40],31:[2,40],33:[2,40],35:[2,40],37:[2,40],38:[2,40],39:[2,40],40:[2,40],41:[2,40],46:[2,40],47:[2,40],48:[2,40],49:[2,40],50:[2,40],52:[2,40],57:[2,40],58:[2,40],60:[2,40],62:[2,40],65:[2,40],67:[2,40],69:[2,40],70:[2,40],71:[2,40]},{4:112,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{12:63,17:[1,14],22:[1,64],30:113,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{12:63,17:[1,14],22:[1,64],30:114,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{19:115,20:[1,18],22:[1,116]},{5:[2,33],13:[2,33],15:[2,33],17:[2,33],21:[2,33],22:[2,33],23:[2,33],25:[2,33],26:[2,33],27:[2,33],28:[2,33],29:[2,33],31:[2,33],33:[2,33],35:[2,33],36:80,37:[1,73],38:[1,74],39:[1,75],40:[2,33],41:[2,33],46:[2,33],47:[2,33],48:[2,33],49:[2,33],50:[1,81],52:[2,33],57:[2,33],58:[2,33],60:[2,33],62:[2,33],65:[2,33],67:[2,33],69:[2,33],70:[2,33],71:[2,33]},{12:63,17:[1,14],22:[1,64],31:[1,21],32:22,34:117,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{12:63,17:[1,14],22:[1,64],31:[1,21],32:22,34:118,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,58],13:[2,58],15:[2,58],17:[2,58],21:[2,58],22:[2,58],23:[2,58],25:[2,58],26:[2,58],27:[2,58],28:[2,58],29:[2,58],31:[2,58],33:[2,58],35:[2,58],37:[2,58],38:[2,58],39:[2,58],40:[2,58],41:[2,58],46:[2,58],47:[2,58],48:[2,58],49:[2,58],50:[2,58],52:[2,58],57:[2,58],58:[2,58],60:[2,58],62:[2,58],65:[2,58],67:[2,58],69:[2,58],70:[2,58],71:[2,58]},{5:[2,59],13:[2,59],15:[2,59],17:[2,59],21:[2,59],22:[2,59],23:[2,59],25:[2,59],26:[2,59],27:[2,59],28:[2,59],29:[2,59],31:[2,59],33:[2,59],35:[2,59],37:[2,59],38:[2,59],39:[2,59],40:[2,59],41:[2,59],46:[2,59],47:[2,59],48:[2,59],49:[2,59],50:[2,59],52:[2,59],57:[2,59],58:[2,59],60:[2,59],62:[2,59],65:[2,59],67:[2,59],69:[2,59],70:[2,59],71:[2,59]},{5:[2,37],13:[2,37],15:[2,37],17:[2,37],21:[2,37],22:[2,37],23:[2,37],25:[2,37],26:[2,37],27:[2,37],28:[2,37],29:[2,37],31:[2,37],33:[2,37],35:[2,37],37:[2,37],38:[2,37],39:[2,37],40:[2,37],41:[2,37],46:[2,37],47:[2,37],48:[2,37],49:[2,37],50:[2,37],52:[2,37],55:[2,37],57:[2,37],58:[2,37],60:[2,37],62:[2,37],65:[2,37],67:[2,37],69:[2,37],70:[2,37],71:[2,37]},{5:[2,38],13:[2,38],15:[2,38],17:[2,38],21:[2,38],22:[2,38],23:[2,38],25:[2,38],26:[2,38],27:[2,38],28:[2,38],29:[2,38],31:[2,38],33:[2,38],35:[2,38],37:[2,38],38:[2,38],39:[2,38],40:[2,38],41:[2,38],46:[2,38],47:[2,38],48:[2,38],49:[2,38],50:[2,38],52:[2,38],55:[2,38],57:[2,38],58:[2,38],60:[2,38],62:[2,38],65:[2,38],67:[2,38],69:[2,38],70:[2,38],71:[2,38]},{40:[1,119]},{15:[1,120]},{15:[1,121],23:[1,122]},{5:[2,74],13:[2,74],15:[2,74],17:[2,74],21:[2,74],22:[2,74],23:[2,74],25:[2,74],26:[2,74],27:[2,74],28:[2,74],29:[2,74],31:[2,74],33:[2,74],35:[2,74],36:123,37:[1,73],38:[1,74],39:[1,75],40:[2,74],41:[2,74],46:[2,74],47:[2,74],48:[2,74],49:[2,74],50:[2,74],52:[2,74],57:[2,74],58:[2,74],60:[2,74],62:[2,74],65:[2,74],67:[2,74],69:[2,74],70:[2,74],71:[2,74]},{5:[2,60],13:[2,60],15:[2,60],17:[2,60],21:[2,60],22:[2,60],23:[2,60],25:[2,60],26:[2,60],27:[2,60],28:[2,60],29:[2,60],31:[2,60],33:[2,60],35:[2,60],36:71,37:[1,73],38:[1,74],39:[1,75],40:[2,60],41:[2,60],46:[2,60],47:[2,60],48:[2,60],49:[2,60],50:[1,72],52:[2,60],57:[2,60],58:[2,60],60:[2,60],62:[2,60],65:[2,60],67:[2,60],69:[2,60],70:[2,60],71:[2,60]},{5:[2,48],13:[2,48],15:[2,48],17:[2,48],21:[2,48],22:[2,48],23:[2,48],25:[2,48],26:[2,48],27:[2,48],28:[2,48],29:[2,48],31:[2,48],33:[2,48],35:[2,48],37:[2,48],38:[2,48],39:[2,48],40:[2,48],41:[2,48],46:[2,48],47:[2,48],48:[2,48],49:[2,48],50:[2,48],52:[2,48],57:[2,48],58:[2,48],60:[2,48],62:[2,48],65:[2,48],67:[2,48],69:[2,48],70:[2,48],71:[2,48]},{5:[2,52],13:[2,52],15:[2,52],17:[2,52],21:[2,52],22:[2,52],23:[2,52],25:[2,52],26:[2,52],27:[2,52],28:[2,52],29:[2,52],31:[2,52],33:[2,52],35:[2,52],37:[2,52],38:[2,52],39:[2,52],40:[2,52],41:[2,52],46:[2,52],47:[2,52],48:[2,52],49:[2,52],50:[2,52],52:[2,52],57:[2,52],58:[2,52],60:[2,52],62:[2,52],65:[2,52],67:[2,52],69:[2,52],70:[2,52],71:[2,52]},{41:[1,124]},{47:[1,125]},{4:126,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:127,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:128,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,54],12:63,13:[2,54],15:[2,54],17:[1,14],21:[2,54],22:[1,64],23:[2,54],25:[2,54],26:[2,54],27:[2,54],28:[2,54],29:[2,54],31:[2,54],32:68,33:[1,69],35:[1,70],37:[2,54],38:[2,54],39:[2,54],40:[1,28],41:[2,54],42:24,43:25,44:26,45:27,46:[1,29],47:[2,54],48:[1,30],49:[1,31],50:[2,54],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,54],65:[2,54],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:129,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,79],12:63,13:[2,79],15:[2,79],17:[1,14],21:[2,79],22:[1,64],23:[2,79],25:[2,79],26:[2,79],27:[2,79],28:[2,79],29:[2,79],31:[2,79],32:68,33:[1,69],35:[1,70],37:[2,79],38:[2,79],39:[2,79],40:[1,28],41:[2,79],42:24,43:25,44:26,45:27,46:[1,29],47:[2,79],48:[1,30],49:[1,31],50:[2,79],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,79],65:[2,79],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{40:[1,130]},{12:63,17:[1,14],22:[1,132],30:131,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:133,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,90],12:63,13:[2,90],15:[2,90],17:[1,14],21:[2,90],22:[1,64],23:[2,90],25:[2,90],26:[2,90],27:[2,90],28:[2,90],29:[2,90],31:[2,90],32:68,33:[1,69],35:[1,70],37:[2,90],38:[2,90],39:[2,90],40:[1,28],41:[2,90],42:24,43:25,44:26,45:27,46:[1,29],47:[2,90],48:[1,30],49:[1,31],50:[2,90],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,90],65:[2,90],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{12:63,17:[1,14],22:[1,134],30:135,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{40:[1,136]},{62:[1,137]},{5:[2,66],13:[2,66],15:[2,66],17:[2,66],21:[2,66],22:[2,66],23:[2,66],25:[2,66],26:[2,66],27:[2,66],28:[2,66],29:[2,66],31:[2,66],33:[2,66],35:[2,66],37:[2,66],38:[2,66],39:[2,66],40:[2,66],41:[2,66],46:[2,66],47:[2,66],48:[2,66],49:[2,66],50:[2,66],52:[2,66],57:[2,66],58:[2,66],60:[2,66],62:[2,66],65:[2,66],67:[2,66],69:[2,66],70:[2,66],71:[2,66]},{15:[1,138],62:[2,68]},{15:[2,70],62:[2,70]},{15:[2,72],62:[2,72],65:[1,139]},{13:[1,141],16:140,25:[1,49],26:[1,50],27:[1,51],28:[1,52]},{12:142,17:[1,14],40:[1,143]},{5:[1,144]},{5:[2,14]},{5:[2,40],16:145,17:[2,40],22:[1,60],25:[1,49],26:[1,50],27:[1,51],28:[1,52],29:[2,40],31:[2,40],33:[2,40],35:[2,40],37:[2,40],38:[2,40],39:[2,40],40:[2,40],46:[2,40],48:[2,40],49:[2,40],50:[2,40],52:[2,40],57:[2,40],58:[2,40],60:[2,40],67:[2,40],69:[2,40],70:[2,40],71:[2,40]},{5:[2,27],15:[2,27],16:146,25:[1,49],26:[1,50],27:[1,51],28:[1,52],62:[2,27],65:[2,27]},{1:[2,8]},{5:[2,12]},{5:[2,13]},{15:[1,148],23:[1,147]},{15:[1,150],23:[1,149]},{23:[1,122]},{5:[2,30],12:63,13:[2,30],15:[2,30],17:[1,14],21:[2,30],22:[1,64],23:[2,30],25:[2,30],26:[2,30],27:[2,30],28:[2,30],29:[2,30],31:[2,30],32:68,33:[1,69],35:[1,70],37:[2,30],38:[2,30],39:[2,30],40:[1,28],41:[2,30],42:24,43:25,44:26,45:27,46:[1,29],47:[2,30],48:[1,30],49:[1,31],50:[2,30],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,30],65:[2,30],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,31],12:63,13:[2,31],15:[2,31],17:[1,14],21:[2,31],22:[1,64],23:[2,31],25:[2,31],26:[2,31],27:[2,31],28:[2,31],29:[2,31],31:[2,31],32:68,33:[1,69],35:[1,70],37:[2,31],38:[2,31],39:[2,31],40:[1,28],41:[2,31],42:24,43:25,44:26,45:27,46:[1,29],47:[2,31],48:[1,30],49:[1,31],50:[2,31],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,31],65:[2,31],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,19],15:[2,19]},{4:151,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,34],13:[2,34],15:[2,34],17:[2,34],21:[2,34],22:[2,34],23:[2,34],25:[2,34],26:[2,34],27:[2,34],28:[2,34],29:[2,34],31:[2,34],33:[2,34],35:[2,34],36:71,37:[1,73],38:[1,74],39:[1,75],40:[2,34],41:[2,34],46:[2,34],47:[2,34],48:[2,34],49:[2,34],50:[1,72],52:[2,34],57:[2,34],58:[2,34],60:[2,34],62:[2,34],65:[2,34],67:[2,34],69:[2,34],70:[2,34],71:[2,34]},{5:[2,35],13:[2,35],15:[2,35],17:[2,35],21:[2,35],22:[2,35],23:[2,35],25:[2,35],26:[2,35],27:[2,35],28:[2,35],29:[2,35],31:[2,35],33:[2,35],35:[2,35],36:71,37:[1,73],38:[1,74],39:[1,75],40:[2,35],41:[2,35],46:[2,35],47:[2,35],48:[2,35],49:[2,35],50:[1,72],52:[2,35],57:[2,35],58:[2,35],60:[2,35],62:[2,35],65:[2,35],67:[2,35],69:[2,35],70:[2,35],71:[2,35]},{4:152,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:153,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:154,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,45],13:[2,45],15:[2,45],17:[2,45],21:[2,45],22:[2,45],23:[2,45],25:[2,45],26:[2,45],27:[2,45],28:[2,45],29:[2,45],31:[2,45],33:[2,45],35:[2,45],37:[2,45],38:[2,45],39:[2,45],40:[2,45],41:[2,45],46:[2,45],47:[2,45],48:[2,45],49:[2,45],50:[2,45],52:[2,45],57:[2,45],58:[2,45],60:[2,45],62:[2,45],65:[2,45],67:[2,45],69:[2,45],70:[2,45],71:[2,45]},{5:[2,57],13:[2,57],15:[2,57],17:[2,57],21:[2,57],22:[2,57],23:[2,57],25:[2,57],26:[2,57],27:[2,57],28:[2,57],29:[2,57],31:[2,57],33:[2,57],35:[2,57],37:[2,57],38:[2,57],39:[2,57],40:[2,57],41:[2,57],46:[2,57],47:[2,57],48:[2,57],49:[2,57],50:[2,57],52:[2,57],57:[2,57],58:[2,57],60:[2,57],62:[2,57],65:[2,57],67:[2,57],69:[2,57],70:[2,57],71:[2,57]},{5:[2,46],13:[2,46],15:[2,46],17:[2,46],21:[2,46],22:[2,46],23:[2,46],25:[2,46],26:[2,46],27:[2,46],28:[2,46],29:[2,46],31:[2,46],33:[2,46],35:[2,46],37:[2,46],38:[2,46],39:[2,46],40:[2,46],41:[2,46],46:[2,46],47:[2,46],48:[2,46],49:[2,46],50:[2,46],52:[2,46],57:[2,46],58:[2,46],60:[2,46],62:[2,46],65:[2,46],67:[2,46],69:[2,46],70:[2,46],71:[2,46]},{5:[2,47],13:[2,47],15:[2,47],17:[2,47],21:[2,47],22:[2,47],23:[2,47],25:[2,47],26:[2,47],27:[2,47],28:[2,47],29:[2,47],31:[2,47],33:[2,47],35:[2,47],37:[2,47],38:[2,47],39:[2,47],40:[2,47],41:[2,47],46:[2,47],47:[2,47],48:[2,47],49:[2,47],50:[2,47],52:[2,47],57:[2,47],58:[2,47],60:[2,47],62:[2,47],65:[2,47],67:[2,47],69:[2,47],70:[2,47],71:[2,47]},{41:[1,155]},{41:[1,156]},{21:[1,157]},{23:[1,158]},{31:[1,159]},{5:[2,82],12:63,13:[2,82],15:[2,82],17:[1,14],21:[2,82],22:[1,64],23:[2,82],25:[2,82],26:[2,82],27:[2,82],28:[2,82],29:[2,82],31:[2,82],32:68,33:[1,69],35:[1,70],37:[2,82],38:[2,82],39:[2,82],40:[1,28],41:[2,82],42:24,43:25,44:26,45:27,46:[1,29],47:[2,82],48:[1,30],49:[1,31],50:[2,82],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,82],65:[2,82],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:160,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{23:[1,161]},{4:162,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,92],12:63,13:[2,92],15:[2,92],17:[1,14],21:[2,92],22:[1,64],23:[2,92],25:[2,92],26:[2,92],27:[2,92],28:[2,92],29:[2,92],31:[2,92],32:68,33:[1,69],35:[1,70],37:[2,92],38:[2,92],39:[2,92],40:[1,28],41:[2,92],42:24,43:25,44:26,45:27,46:[1,29],47:[2,92],48:[1,30],49:[1,31],50:[2,92],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,92],65:[2,92],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{12:163,17:[1,14]},{5:[2,65],13:[2,65],15:[2,65],17:[2,65],21:[2,65],22:[2,65],23:[2,65],25:[2,65],26:[2,65],27:[2,65],28:[2,65],29:[2,65],31:[2,65],33:[2,65],35:[2,65],37:[2,65],38:[2,65],39:[2,65],40:[2,65],41:[2,65],46:[2,65],47:[2,65],48:[2,65],49:[2,65],50:[2,65],52:[2,65],57:[2,65],58:[2,65],60:[2,65],62:[2,65],65:[2,65],67:[2,65],69:[2,65],70:[2,65],71:[2,65]},{4:164,11:100,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],64:165,66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:166,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:106,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:167,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{17:[2,87],22:[2,87],31:[2,87],37:[2,87],40:[2,87],46:[2,87],48:[2,87],49:[2,87],52:[2,87],55:[2,87],57:[2,87],58:[2,87],60:[2,87],67:[2,87],69:[2,87],70:[2,87],71:[2,87]},{4:168,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{1:[2,10]},{4:169,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:170,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,93],13:[2,93],15:[2,93],17:[2,93],21:[2,93],22:[2,93],23:[2,93],25:[2,93],26:[2,93],27:[2,93],28:[2,93],29:[2,93],31:[2,93],33:[2,93],35:[2,93],37:[2,93],38:[2,93],39:[2,93],40:[2,93],41:[2,93],46:[2,93],47:[2,93],48:[2,93],49:[2,93],50:[2,93],52:[2,93],57:[2,93],58:[2,93],60:[2,93],62:[2,93],65:[2,93],67:[2,93],69:[2,93],70:[2,93],71:[2,93]},{4:171,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,76],13:[2,76],15:[2,76],17:[2,76],21:[2,76],22:[2,76],23:[2,76],25:[2,76],26:[2,76],27:[2,76],28:[2,76],29:[2,76],31:[2,76],33:[2,76],35:[2,76],36:172,37:[1,73],38:[1,74],39:[1,75],40:[2,76],41:[2,76],46:[2,76],47:[2,76],48:[2,76],49:[2,76],50:[2,76],52:[2,76],57:[2,76],58:[2,76],60:[2,76],62:[2,76],65:[2,76],67:[2,76],69:[2,76],70:[2,76],71:[2,76]},{4:173,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{15:[1,121]},{41:[1,174]},{21:[1,175]},{23:[1,176]},{40:[1,177]},{5:[2,50],13:[2,50],15:[2,50],17:[2,50],21:[2,50],22:[2,50],23:[2,50],25:[2,50],26:[2,50],27:[2,50],28:[2,50],29:[2,50],31:[2,50],33:[2,50],35:[2,50],37:[2,50],38:[2,50],39:[2,50],40:[2,50],41:[2,50],46:[2,50],47:[2,50],48:[2,50],49:[2,50],50:[2,50],52:[2,50],57:[2,50],58:[2,50],60:[2,50],62:[2,50],65:[2,50],67:[2,50],69:[2,50],70:[2,50],71:[2,50]},{40:[1,178]},{5:[2,78],13:[2,78],15:[2,78],17:[2,78],21:[2,78],22:[2,78],23:[2,78],25:[2,78],26:[2,78],27:[2,78],28:[2,78],29:[2,78],31:[2,78],33:[2,78],35:[2,78],37:[2,78],38:[2,78],39:[2,78],40:[2,78],41:[2,78],46:[2,78],47:[2,78],48:[2,78],49:[2,78],50:[2,78],52:[2,78],57:[2,78],58:[2,78],60:[2,78],62:[2,78],65:[2,78],67:[2,78],69:[2,78],70:[2,78],71:[2,78]},{31:[1,180],54:179,55:[1,23]},{23:[1,181]},{5:[2,89],13:[2,89],15:[2,89],17:[2,89],21:[2,89],22:[2,89],23:[2,89],25:[2,89],26:[2,89],27:[2,89],28:[2,89],29:[2,89],31:[2,89],33:[2,89],35:[2,89],37:[2,89],38:[2,89],39:[2,89],40:[2,89],41:[2,89],46:[2,89],47:[2,89],48:[2,89],49:[2,89],50:[2,89],52:[2,89],57:[2,89],58:[2,89],60:[2,89],62:[2,89],65:[2,89],67:[2,89],69:[2,89],70:[2,89],71:[2,89]},{23:[1,182]},{13:[1,183]},{13:[1,141],16:140,25:[1,49],26:[1,50],27:[1,51],28:[1,52],62:[2,67]},{15:[2,69],62:[2,69]},{15:[2,71],62:[2,71]},{15:[2,28],62:[2,28],65:[2,28]},{41:[1,184]},{5:[2,15]},{5:[2,29],15:[2,29],62:[2,29],65:[2,29]},{15:[2,94],23:[2,94]},{5:[2,75],13:[2,75],15:[2,75],17:[2,75],21:[2,75],22:[2,75],23:[2,75],25:[2,75],26:[2,75],27:[2,75],28:[2,75],29:[2,75],31:[2,75],33:[2,75],35:[2,75],37:[2,75],38:[2,75],39:[2,75],40:[2,75],41:[2,75],46:[2,75],47:[2,75],48:[2,75],49:[2,75],50:[2,75],52:[2,75],57:[2,75],58:[2,75],60:[2,75],62:[2,75],65:[2,75],67:[2,75],69:[2,75],70:[2,75],71:[2,75]},{15:[2,95],23:[2,95]},{5:[2,39],13:[2,39],15:[2,39],17:[2,39],21:[2,39],22:[2,39],23:[2,39],25:[2,39],26:[2,39],27:[2,39],28:[2,39],29:[2,39],31:[2,39],33:[2,39],35:[2,39],37:[2,39],38:[2,39],39:[2,39],40:[2,39],41:[2,39],46:[2,39],47:[2,39],48:[2,39],49:[2,39],50:[2,39],52:[2,39],55:[2,39],57:[2,39],58:[2,39],60:[2,39],62:[2,39],65:[2,39],67:[2,39],69:[2,39],70:[2,39],71:[2,39]},{5:[2,20],15:[2,20]},{5:[2,21],15:[2,21]},{4:185,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:186,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{41:[1,187]},{55:[1,188]},{5:[2,83],13:[2,83],15:[2,83],17:[2,83],21:[2,83],22:[2,83],23:[2,83],25:[2,83],26:[2,83],27:[2,83],28:[2,83],29:[2,83],31:[2,83],33:[2,83],35:[2,83],37:[2,83],38:[2,83],39:[2,83],40:[2,83],41:[2,83],46:[2,83],47:[2,83],48:[2,83],49:[2,83],50:[2,83],52:[2,83],57:[2,83],58:[2,83],60:[2,83],62:[2,83],65:[2,83],67:[2,83],69:[2,83],70:[2,83],71:[2,83]},{5:[2,91],13:[2,91],15:[2,91],17:[2,91],21:[2,91],22:[2,91],23:[2,91],25:[2,91],26:[2,91],27:[2,91],28:[2,91],29:[2,91],31:[2,91],33:[2,91],35:[2,91],37:[2,91],38:[2,91],39:[2,91],40:[2,91],41:[2,91],46:[2,91],47:[2,91],48:[2,91],49:[2,91],50:[2,91],52:[2,91],57:[2,91],58:[2,91],60:[2,91],62:[2,91],65:[2,91],67:[2,91],69:[2,91],70:[2,91],71:[2,91]},{4:189,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{17:[2,88],22:[2,88],31:[2,88],37:[2,88],40:[2,88],46:[2,88],48:[2,88],49:[2,88],52:[2,88],55:[2,88],57:[2,88],58:[2,88],60:[2,88],67:[2,88],69:[2,88],70:[2,88],71:[2,88]},{41:[1,190]},{41:[1,191]},{12:63,17:[1,14],22:[1,193],30:192,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{41:[2,74]},{41:[1,194]},{5:[2,49],13:[2,49],15:[2,49],17:[2,49],21:[2,49],22:[2,49],23:[2,49],25:[2,49],26:[2,49],27:[2,49],28:[2,49],29:[2,49],31:[2,49],33:[2,49],35:[2,49],37:[2,49],38:[2,49],39:[2,49],40:[2,49],41:[2,49],46:[2,49],47:[2,49],48:[2,49],49:[2,49],50:[2,49],52:[2,49],57:[2,49],58:[2,49],60:[2,49],62:[2,49],65:[2,49],67:[2,49],69:[2,49],70:[2,49],71:[2,49]},{5:[2,51],13:[2,51],15:[2,51],17:[2,51],21:[2,51],22:[2,51],23:[2,51],25:[2,51],26:[2,51],27:[2,51],28:[2,51],29:[2,51],31:[2,51],33:[2,51],35:[2,51],37:[2,51],38:[2,51],39:[2,51],40:[2,51],41:[2,51],46:[2,51],47:[2,51],48:[2,51],49:[2,51],50:[2,51],52:[2,51],57:[2,51],58:[2,51],60:[2,51],62:[2,51],65:[2,51],67:[2,51],69:[2,51],70:[2,51],71:[2,51]},{5:[2,80],12:63,13:[2,80],15:[2,80],17:[1,14],21:[2,80],22:[1,64],23:[2,80],25:[2,80],26:[2,80],27:[2,80],28:[2,80],29:[2,80],31:[2,80],32:68,33:[1,69],35:[1,70],37:[2,80],38:[2,80],39:[2,80],40:[1,28],41:[2,80],42:24,43:25,44:26,45:27,46:[1,29],47:[2,80],48:[1,30],49:[1,31],50:[2,80],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,80],65:[2,80],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:195,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{36:196,37:[1,73],38:[1,74],39:[1,75]},{23:[1,197]},{4:198,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,81],13:[2,81],15:[2,81],17:[2,81],21:[2,81],22:[2,81],23:[2,81],25:[2,81],26:[2,81],27:[2,81],28:[2,81],29:[2,81],31:[2,81],33:[2,81],35:[2,81],37:[2,81],38:[2,81],39:[2,81],40:[2,81],41:[2,81],46:[2,81],47:[2,81],48:[2,81],49:[2,81],50:[2,81],52:[2,81],57:[2,81],58:[2,81],60:[2,81],62:[2,81],65:[2,81],67:[2,81],69:[2,81],70:[2,81],71:[2,81]},{5:[2,64],13:[2,64],15:[2,64],17:[2,64],21:[2,64],22:[2,64],23:[2,64],25:[2,64],26:[2,64],27:[2,64],28:[2,64],29:[2,64],31:[2,64],33:[2,64],35:[2,64],37:[2,64],38:[2,64],39:[2,64],40:[2,64],41:[2,64],46:[2,64],47:[2,64],48:[2,64],49:[2,64],50:[2,64],52:[2,64],57:[2,64],58:[2,64],60:[2,64],62:[2,64],65:[2,64],67:[2,64],69:[2,64],70:[2,64],71:[2,64]}],defaultActions:{11:[2,11],43:[2,62],44:[2,63],45:[2,1],53:[2,2],54:[2,3],55:[2,4],56:[2,5],57:[2,6],58:[2,7],61:[2,9],62:[2,96],104:[2,14],107:[2,8],108:[2,12],109:[2,13],144:[2,10],169:[2,15],188:[2,74]},parseError:function(b,c){throw new Error(b)},parse:function(b){function p(a){d.length=d.length-2*a,e.length=e.length-a,f.length=f.length-a}function q(){var a;return a=c.lexer.lex()||1,typeof a!="number"&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0,l=2,m=1;this.lexer.setInput(b),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var n=this.lexer.yylloc;f.push(n);var o=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var r,s,t,u,v,w,x={},y,z,A,B;for(;;){t=d[d.length-1];if(this.defaultActions[t])u=this.defaultActions[t];else{if(r===null||typeof r=="undefined")r=q();u=g[t]&&g[t][r]}if(typeof u=="undefined"||!u.length||!u[0]){var C="";if(!k){B=[];for(y in g[t])this.terminals_[y]&&y>2&&B.push("'"+this.terminals_[y]+"'");this.lexer.showPosition?C="Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+B.join(", ")+", got '"+(this.terminals_[r]||r)+"'":C="Parse error on line "+(i+1)+": Unexpected "+(r==1?"end of input":"'"+(this.terminals_[r]||r)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[r]||r,line:this.lexer.yylineno,loc:n,expected:B})}if(k==3){if(r==m)throw new Error(C||"Parsing halted.");j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,n=this.lexer.yylloc,r=q()}for(;;){if(l.toString()in g[t]
)break;if(t===0)throw new Error(C||"Parsing halted.");p(1),t=d[d.length-1]}s=r==2?null:r,r=l,t=d[d.length-1],u=g[t]&&g[t][l],k=3}if(u[0]instanceof Array&&u.length>1)throw new Error("Parse Error: multiple actions possible at state: "+t+", token: "+r);switch(u[0]){case 1:d.push(r),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(u[1]),r=null,s?(r=s,s=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,n=this.lexer.yylloc,k>0&&k--);break;case 2:z=this.productions_[u[1]][1],x.$=e[e.length-z],x._$={first_line:f[f.length-(z||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(z||1)].first_column,last_column:f[f.length-1].last_column},o&&(x._$.range=[f[f.length-(z||1)].range[0],f[f.length-1].range[1]]),w=this.performAction.call(x,h,j,i,this.yy,u[1],e,f);if(typeof w!="undefined")return w;z&&(d=d.slice(0,-1*z*2),e=e.slice(0,-1*z),f=f.slice(0,-1*z)),d.push(this.productions_[u[1]][0]),e.push(x.$),f.push(x._$),A=g[d[d.length-2]][d[d.length-1]],d.push(A);break;case 3:return!0}}return!0}},b=function(){var a={EOF:1,parseError:function(b,c){if(!this.yy.parser)throw new Error(b);this.yy.parser.parseError(b,c)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=(new Array(a.length+1)).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e,f;this._more||(this.yytext="",this.match="");var g=this._currentRules();for(var h=0;h<g.length;h++){c=this._input.match(this.rules[g[h]]);if(c&&(!b||c[0].length>b[0].length)){b=c,d=h;if(!this.options.flex)break}}if(b){f=b[0].match(/(?:\r\n?|\n).*/g),f&&(this.yylineno+=f.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:f?f[f.length-1].length-f[f.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,g[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(a)return a;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var b=this.next();return typeof b!="undefined"?b:this.lex()},begin:function(b){this.conditionStack.push(b)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(b){this.begin(b)}};return a.options={},a.performAction=function(b,c,d,e){var f=e;switch(d){case 0:break;case 1:return 40;case 2:return 41;case 3:return"MATH_SHIFT";case 4:return c.yytext=this.matches[this.matches.length-1],37;case 5:return c.yytext=this.matches[this.matches.length-1],38;case 6:return 39;case 7:return 55;case 8:return 33;case 9:return 35;case 10:return c.yytext=this.matches[3],52;case 11:return c.yytext=this.matches[this.matches.length-1],71;case 12:return 69;case 13:return 70;case 14:return 48;case 15:return 49;case 16:return 57;case 17:return 58;case 18:return 46;case 19:return 47;case 20:return 31;case 21:return 29;case 22:return 13;case 23:return 59;case 24:return 50;case 25:return 5;case 26:return 22;case 27:return 23;case 28:return 20;case 29:return 21;case 30:return 60;case 31:return 62;case 32:return 65;case 33:return 27;case 34:return 28;case 35:return 26;case 36:return 25;case 37:return 15;case 38:return 14;case 39:return 67;case 40:return c.yytext="\\sign",17;case 41:return c.yytext="\\gcd",17;case 42:return c.yytext="\\lcm",17;case 43:return 17;case 44:break;case 45:return"UNRECOGNIZED"}},a.rules=[/^(?:(\\space|\\:|\s)+)/,/^(?:\{)/,/^(?:\})/,/^(?:\$)/,/^(?:\^([0-9]))/,/^(?:\^([a-zA-Z]))/,/^(?:\^)/,/^(?:[0-9]+(\.[0-9]+)?|(\.[0-9]+))/,/^(?:\*|(\\cdot))/,/^(?:\/)/,/^(?:(\\frac((?:\s|\\space|\\:)*)\{d\}\{d(((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?))\}))/,/^(?:(\\log)((?:\s|\\space|\\:)*)*_([0-9]))/,/^(?:(\\ln))/,/^(?:(\\log))/,/^(?:(\\frac))/,/^(?:(\\sqrt))/,/^(?:(\\sum))/,/^(?:(\\prod))/,/^(?:\\left\|)/,/^(?:\\right\|)/,/^(?:-)/,/^(?:\+)/,/^(?:=)/,/^(?:[_])/,/^(?:!)/,/^(?:$)/,/^(?:(\()|\\left\()/,/^(?:(\))|\\right\))/,/^(?:(\[)|\\left\[)/,/^(?:(\])|\\right\])/,/^(?:(\\\{)|\\left\\\{)/,/^(?:(\\\})|\\right\\\})/,/^(?::)/,/^(?:(\\ge|>=))/,/^(?:(\\le|<=))/,/^(?:(\\gt|>))/,/^(?:(\\lt|<))/,/^(?:,)/,/^(?:(###)(((?:\s|\\space|\\:)*)((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)((?:\s|\\space|\\:)*)(\\left\(|\()((?:\s|\\space|\\:)*)((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)(((?:\s|\\space|\\:)*),((?:\s|\\space|\\:)*)((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)((?:\s|\\space|\\:)*))*((?:\s|\\space|\\:)*)(\\right\)|\))((?:\s|\\space|\\:)*)=))/,/^(?:(\\(arc)?(sin|cos|tan|cot|sec|csc)h?))/,/^(?:(\\signum))/,/^(?:(\\(gcf|mcd)))/,/^(?:(\\mcm))/,/^(?:((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?))/,/^(?:(###))/,/^(?:.)/],a.conditions={conditional:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0}},a}();return a.lexer=b,a}),define("math/inverses",[],function(){var a={},b=["sin","cos","tan","cot","sec","csc","sinh","cosh","tanh","coth","sech","csch"];return b.forEach(function(b){a[b]="arc"+b,a["arc"+b]=b}),a}),enum_strings={},debuggable_enums=!0,debuggable_enums?define_enum_constant=function(a){this[a]=a}:(next_enum=1e3,define_enum_constant=function(a){enum_strings[next_enum]=a,this[a]=next_enum++}),define_enum_constant("EXPRESSION"),define_enum_constant("FUNCTION_DEFINITION"),define_enum_constant("VARIABLE_DEFINITION"),define_enum_constant("ORDERED_PAIR_LIST"),define_enum_constant("DOUBLE_INEQUALITY"),define_enum_constant("COMPARATOR"),define_enum_constant("CHAINED_COMPARATOR"),define_enum_constant("EQUATION"),define_enum_constant("CONSTANT"),define_enum_constant("IDENTIFIER"),define("math/enums",function(){}),define("math/parser_util",["require","pjs","./evalframe","./comparators","parser","./inverses","./builtin","./enums"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=a("pjs"),t=a("./evalframe"),u=a("./comparators"),v=a("parser"),w=a("./inverses"),x=a("./builtin");a("./enums"),b={},v.yy.inverses=w,c=b.ParseNode=s(function(a){a.init=function(){this._dependencies={},this._referencedSymbols={}},a.setInputString=function(a){this._inputString=a},a.getInputString=function(){return this._inputString},a.statementType=EXPRESSION,a.assigns=null,a.valid=!0,a.exportDefinitionsTo=function(a,b){},a.evaluateOnce=function(a){return"Unable to evaluate"},a.addDependency=function(a,b){this.referenceSymbol(a);if(!this._dependencies.hasOwnProperty(a)){this._dependencies[a]=b;return}var c=this._dependencies[a];if(b===c)return;if(b===1&&c===0)return;if(b===0&&c===1){this._dependencies[a]=b;return}throw b===0||c===0?"You're referencing '"+a+"' as both a function and a variable. Make up your mind!":"You're referencing '"+a+"' as both a "+c+"-variable and a "+b+"-variable function. Make up your mind!"},a.referenceSymbol=function(a){this._referencedSymbols[a]=!0},a.shadowVariable=function(a){this.referenceSymbol(a);if(!this._dependencies.hasOwnProperty(a))return;var b=this._dependencies[a];if(b<=1){delete this._dependencies[a];return}throw"Cannot redefine function "+a+" as a variable"},a.addDependencies=function(a){for(var b in a){if(!a.hasOwnProperty(b))continue;var c=a[b];this.addDependency(b,c)}},a.references=function(a){if(this._referencedSymbols[a])return!0},a.dependencies=function(){return this._dependencies},a.getEvalStrings=function(){throw"Cannot call getEvalStrings on base ParseNode"},a.polynomialOrder=function(){return Infinity},a.uid_counter=[0],a.tmp=function(){return"tmp"+this.uid_counter[0]++},a.okForImplicitFunction=function(){return!1}}),b.AssignmentNode=s(c,function(a,b){a.init=function(a,c){b.init.call(this),this.assigns=a,this.referenceSymbol(this.assigns.identifier),this.arity=0,this.expression=c,this.addDependencies(c.dependencies()),this.lhs=a,this.rhs=c,this.dependencies().hasOwnProperty(this.assigns.identifier)&&(this.statementType=EQUATION)},a.statementType=VARIABLE_DEFINITION,a.evaluateOnce=function(a){return this.expression.evaluateOnce(a)},a.exportDefinitionsTo=function(a){var b,c;if(this.statementType===EQUATION)return;try{b=this.expression.evaluateOnce(a),c=f(b),a.setVariable(this.assigns.identifier,c),a.setEvalStrings(this.assigns.identifier,c.getEvalStrings(a))}catch(d){a.setVariable(this.assigns.identifier,this.expression),a.setEvalStrings(this.assigns.identifier,this.expression.getEvalStrings(a))}},a.getEvalStrings=function(a){return this.statementType===EQUATION?b.getEvalStrings(a):this.expression.getEvalStrings(a)},a.toString=function(){return this.assigns+" = "+this.expression}}),b.DoubleInequalityNode=s(c,function(a,b){a.init=function(c,e,f,g,h){var i,j,k,l;b.init.call(this),this._inequalities=[];if(u.table[e].direction!=u.table[g].direction)throw"Double inequalities must both go the same way, e.g. 1 < y < 2";this.direction=u.table[e].direction,this.inclusive=u.table[e].inclusive&&u.table[g].inclusive,i=u.get(this.inclusive,this.direction),j=n(i,c,h),k=d(j,c),l=d(j,h),this._inequalities.push(n(e,f,k)),this._inequalities.push(n(g,f,l)),this.addDependencies(f.dependencies()),this.addDependencies(c.dependencies()),this.addDependencies(h.dependencies()),a.statementType=DOUBLE_INEQUALITY},a.getInequality=function(a){return this._inequalities[a]}}),b.EquationNode=s(c,function(a,b){a.init=function(a,c){b.init.call(this),this.lhs=a,this.rhs=c,this.addDependencies(a.dependencies()),this.addDependencies(c.dependencies())},a.statementType=EQUATION,a.toString=function(){return this.lhs+" = "+this.rhs}}),d=b.PiecewiseNode=s(c,function(a,b){a.init=function(a,c,d){b.init.call(this),this.condition=a,this.if_expr=c,this.frozen=!1,d&&(this.else_expr=d,this.addDependencies(this.else_expr._partial_dependencies())),this.addDependencies(a.dependencies()),this.addDependencies(c.dependencies())},a._partial_dependencies=function(){return b.dependencies},a.append_else=function(a){if(this.frozen)throw"Programming Error - please treat me as immutable.  Cannot change PiecewiseNode after getting dependencies";return this.else_expr?this.else_expr.append_else(a):this.else_expr=a,this.addDependencies(a.dependencies()),this},a.evaluateOnce=function(a){return this.frozen=!0,this.condition.evaluateOnce(a)?this.if_expr.evaluateOnce(a):this.else_expr?this.else_expr.evaluateOnce(a):undefined},a.getEvalStrings=function(a){var b=this.condition.getEvalStrings(a),c=this.if_expr.getEvalStrings(a),d;this.else_expr?d=this.else_expr.getEvalStrings(a):d={statements:"",expression:"undefined"};var e=this.tmp(),f="var "+e+";"+b.statements+"if("+b.expression+") {"+c.statements+e+"="+c.expression+";}else{"+d.statements+e+"="+d.expression+";}";return{expression:e,statements:f}},a.polynomialOrder=function(a,b){return this.dependencies().hasOwnProperty(b)?Infinity:0},a.quadraticCoefficients=function(a,b){return[0,0,this.evaluateOnce(a)]},a.polynomialEvalStrings=function(a,b,c){var d=this.getEvalStrings(a);return{statements:d.statements,expressions:[d.expression]}},a.toString=function(){if(!this.else_expr)return"\\left\\{"+this.condition+": "+this.if_expr+"\\right\\}";var a;return this.else_expr.condition&&this.else_expr.condition.value===!0?a=String(this.else_expr.if_expr):a=String(this.else_expr).replace(/^\\left\\\{(.*)\\right\\\}$/,"$1"),"\\left\\{"+this.condition+": "+this.if_expr+", "+a+"\\right\\}"}}),b.OrderedPairNode=s(c,function(a,b){a.init=function(a,c){b.init.call(this),this.children=[a,c],this.addDependencies(a.dependencies()),this.addDependencies(c.dependencies())},a.getEvalStrings=function(a){var b=this.children[0].getEvalStrings(a),c=this.children[1].getEvalStrings(a),d=b.statements+c.statements,e="["+b.expression+","+c.expression+"]";return{statements:d,expression:e}},a.evaluateOnce=function(a){return[this.children[0].evaluateOnce(a),this.children[1].evaluateOnce(a)]},this.toString=function(){return"\\left("+this.children[0]+", "+this.children[1]+"\\right)"}}),e=b.ErrorNode=s(c,function(a,b){a.init=function(a){b.init.call(this),this.error_msg=a},a.valid=!1,this.evaluateOnce=function(a){return this.error_msg}}),f=b.ConstantNode=s(c,function(a,b){a.init=function(a){b.init.call(this),this.value=a},a.evaluateOnce=function(a){return this.value},a.getEvalStrings=function(){var a="",b=this.value<0?"("+String(this.value)+")":String(this.value);return{expression:b,statements:a}},a.quadraticCoefficients=function(a,b){return[0,0,this.value]},a.polynomialEvalStrings=function(a,b,c){return{statements:"",expressions:["("+String(this.value)+")"]}},a.polynomialOrder=function(a,b){return 0},a.okForImplicitFunction=function(){return!0},a.toString=function(){return String(this.value)},a.statementType=CONSTANT}),g=b.NegationNode=s(c,function(a,b){a.init=function(a){b.init.call(this),this.expression=a,this.addDependencies(this.expression.dependencies())},a.evaluateOnce=function(a){return-this.expression.evaluateOnce(a)},a.quadraticCoefficients=function(a,b){var c=this.expression.quadraticCoefficients(a,b);return[-c[0],-c[1],-c[2]]},a.polynomialEvalStrings=function(a,b,c){var d=this.expression.polynomialEvalStrings(a,b,c);for(var e=0;e<d.expressions.length;e++)d.expressions[e]="(-"+d.expressions[e]+")";return d},a.polynomialOrder=function(a,b){return this.expression.polynomialOrder(a,b)},a.getEvalStrings=function(a){var b=this.expression.getEvalStrings(a);return{expression:"(-"+b.expression+")",statements:b.statements}},a.toString=function(){return"-"+this.expression}}),h=b.IdentifierNode=s(c,function(a,b){a.init=function(a){b.init.call(this),a=a.replace("\\",""),a=a.replace("{",""),a=a.replace("}",""),this.identifier=a,this.addDependency(this.identifier,0)},a.evaluateOnce=function(a){return a.getVariable(this.identifier).evaluateOnce(a)},a.getEvalStrings=function(a){return a.getEvalStrings(this.identifier)},a.quadraticCoefficients=function(a,b){if(b===this.identifier)return[0,1,0];var c=a.getVariable(this.identifier);return c.quadraticCoefficients(a,b)},a.polynomialEvalStrings=function(a,b,c){if(b===this.identifier)return{statements:"",expressions:["0","1"]};if(c===this.identifier)return{statements:"",expressions:[this.identifier]};var d=a.getVariable(this.identifier);return d.polynomialEvalStrings(a,b,c)},a.polynomialOrder=function(a,b){if(b===this.identifier)return 1;if(!a.hasVariable(this.identifier))return 0;var c=a.getVariable(this.identifier);return c.polynomialOrder(a,b)},a.okForImplicitFunction=function(){return!0},a.toString=function(){var a=this.identifier.match(/^([^_]+)(_(.*))?$/),b=a[1],c=a[3];return b.length>1&&(b="\\"+b),c?b+"_{"+c+"}":b},a.statementType=IDENTIFIER}),b.ChainedComparatorNode=s(c,function(a,b){a.init=function(a,c){var d;b.init.call(this);if(a.length!==2||c.length!==3)throw"Can't chain more than 2 comparators";this.comparators=a,this.args=c;for(d=0;d<3;d++)this.addDependencies(c[d].dependencies());this.node1=n(this.comparators[0],this.args[0],this.args[1]),this.node2=n(this.comparators[1],this.args[1],this.args[2])},a.evaluateOnce=function(a){return this.node1.evaluateOnce(a)&&this.node2.evaluateOnce(a)},a.getEvalStrings=function(a){var b=this.node1.getEvalStrings(a),c=this.node2.getEvalStrings(a),d=b.statements+c.statements,e="("+b.expression+"&&"+c.expression+")";return{expression:e,statements:d}},a.toString=function(){return[this.args[0],this.comparators[0],this.args[1],this.comparators[1],this.args[2]].join(" ")},a.statementType=CHAINED_COMPARATOR}),i={"+":"arg1+arg2","-":"arg1-arg2","*":"arg1*arg2","/":"arg1/arg2",">":"arg1>arg2","<":"arg1<arg2",">=":"arg1>=arg2","<=":"arg1<=arg2","===":"arg1===arg2","^":"this.pow(arg1, arg2)"},j={};for(k in i)i.hasOwnProperty(k)&&(k==="^"?l=x.pow:l=new Function(["arg1","arg2"],"return "+i[k]),j[k]=l);m=b.BinaryOperatorNode=s(c,function(a,b){a.init=function(a,c,d){b.init.call(this),this.args=[c,d],this.operator=a,this.evaluator=j[a],this.addDependencies(this.args[0].dependencies()),this.addDependencies(this.args[1].dependencies())},a.evaluateOnce=function(a){return this.evaluator(this.args[0].evaluateOnce(a),this.args[1].evaluateOnce(a))},a.getEvalStrings=function(a){var b=this.args[0].getEvalStrings(a),c=this.args[1].getEvalStrings(a),d=i[this.operator],e="("+d.replace("arg1",b.expression).replace("arg2",c.expression)+")",f=b.statements+c.statements;return{expression:e,statements:f}},a.quadraticCoefficients=function(a,b){var c=this.args[0].quadraticCoefficients(a,b),d=this.args[1].quadraticCoefficients(a,b);switch(this.operator){case"+":return[c[0]+d[0],c[1]+d[1],c[2]+d[2]];case"-":return[c[0]-d[0],c[1]-d[1],c[2]-d[2]];case"*":var e=[0,0,0,0,0];for(var f=0;f<=2;f++)for(var g=0;g<=2;g++)e[f+g]+=c[f]*d[g];var h=e.splice(0,2);if(h[0]!==0||h[1]!==0)return[NaN,NaN,NaN];return e;case"/":if(d[0]!==0||d[1]!==0)return[NaN,NaN,NaN];return[c[0]/d[2],c[1]/d[2],c[2]/d[2]];case"^":if(d[0]!==0||d[1]!==0)return[NaN,NaN,NaN];if(c[0]===0&&c[1]===0)return[0,0,this.evaluator(c[2],d[2])];if(d[2]===1)return c;if(d[2]===2)return c[0]!==0?[NaN,NaN,NaN]:[c[1]*c[1],2*c[1]*c[2],c[2]*c[2]]}return[NaN,NaN,NaN]},a.polynomialEvalStrings=function(a,b,c){var d=this.args[0].polynomialEvalStrings(a,b,c),e=this.args[1].polynomialEvalStrings(a,b,c),f=d.expressions.length-1,g=e.expressions.length-1,h=d.statements+e.statements,i=[],j,k,l;switch(this.operator){case"+":case"-":for(j=0;j<=Math.min(f,g);j++)i[j]="("+d.expressions[j]+this.operator+e.expressions[j]+")";for(j=Math.min(f,g)+1;j<=Math.max(f,g);j++)this.operator==="+"&&(i[j]=f>g?d.expressions[j]:e.expressions[j]),this.operator==="-"&&(i[j]=f>g?d.expressions[j]:"(-"+e.expressions[j]+")");return{statements:h,expressions:i};case"*":for(j=0;j<=f;j++)for(k=0;k<=g;k++)l="("+d.expressions[j]+"*"+e.expressions[k]+")",i[j+k]===undefined?i[j+k]=l:i[j+k]+="+"+l;for(j=0;j<i.length;j++)i[j]="("+i[j]+")";return{statements:h,expressions:i};case"/":if(g>=1)throw"can't solve for variable in denominator";for(j=0;j<=f;j++)i[j]="(("+d.expressions[j]+")"+"/"+"("+e.expressions[0]+"))";return{statements:h,expressions:i};case"^":if(g>=1)throw"can't solve for variable in exponent";if(f===0)return{statements:h,expressions:["this.pow("+d.expressions[0]+","+e.expressions[0]+")"]};var m=this.args[1].evaluateOnce(a);switch(m){case 0:return{statements:"",expressions:["1"]};case 1:return e;case 2:for(j=0;j<=f;j++)for(k=0;k<=f;k++)l="("+d.expressions[j]+"*"+d.expressions[k]+")",i[j+k]===undefined?i[j+k]=l:i[j+k]+="+"+l;for(j=0;j<i.length;j++)i[j]="("+i[j]+")";return{statements:h,expressions:i}}}throw"Unable to compile polyomial representation of BinaryOperatorNode"},a.polynomialOrder=function(a,b){var c=this.args[0].polynomialOrder(a,b),d=this.args[1].polynomialOrder(a,b);switch(this.operator){case"+":case"-":return Math.max(c,d);case"*":return c+d;case"/":if(d>0)return Infinity;return c;case"^":if(c===0&&d===0)return 0;try{var e=this.args[1].evaluateOnce(a);return e!==Math.round(e)?Infinity:e<0?Infinity:e*c}catch(f){return Infinity}}return Infinity},a.okForImplicitFunction=function(){return this.args[0].okForImplicitFunction()&&this.args[1].okForImplicitFunction()};var c=function(a,b){var c=a.toString(),d=b.toString();return a instanceof m&&(c="("+c+")"),b instanceof m&&(d="{"+d+"}"),c+"^"+d},d=function(a,b){var c=String(a),d=String(b);if(a instanceof m&&(a.operator==="+"||a.operator==="-")||a instanceof g)c="("+c+")";if(b instanceof m&&(b.operator==="+"||b.operator==="-")||b instanceof g)d="("+d+")";return c+"*"+d};a.toString=function(){return this.operator==="^"?c(this.args[0],this.args[1]):this.operator==="/"?"\\frac{"+this.args[0]+"}{"+this.args[1]+"}":this.operator==="*"?d(this.args[0],this.args[1]):this.args[0]+" "+this.operator+" "+this.args[1]}}),n=b.ComparatorNode=s(m,function(a,b){a.init=function(a,c,d){b.init.call(this,a,c,d)},a.polynomialOrder=function(a,b){var c=this.args[0].polynomialOrder(a,b),d=this.args[1].polynomialOrder(a,b);return Math.max(c,d)},a.quadraticCoefficients=function(a,b){return[NaN,NaN,NaN]},a.statementType=COMPARATOR}),o=b.FunctionNode=s(c,function(a,b){a.init=function(a,c){b.init.call(this),this.identifier=a,this.args=c,this.arity=this.args.length,this.addDependency(this.identifier.identifier,this.arity);for(var d=0;d<c.length;d++)this.addDependencies(c[d].dependencies())},a.evaluateOnce=function(a){if(this.arity>1||a.hasFunction(this.identifier.identifier))return a.callFunction(this.identifier.identifier,this.args.map(function(b){return b.evaluateOnce(a)}));if(this.args.length===1&&a.hasVariable(this.identifier.identifier))return this.args[0].evaluateOnce(a)*a.getVariable(this.identifier.identifier).evaluateOnce(a)},a.getEvalStrings=function(a){if(this.arity>1||a.hasFunction(this.identifier.identifier)){var b=this.args.map(function(b){return b.getEvalStrings(a)}),c=b.map(function(a){return a.expression}),d=b.map(function(a){return a.statements}),e=d.join(""),f="this."+this.identifier.identifier+"("+c.join(",")+")";return{expression:f,statements:e}}var g=h(this.identifier.identifier),i=m("*",g,this.args[0]);return i.getEvalStrings(a)},a.quadraticCoefficients=function(a,b){if(this.arity>1||a.hasFunction(this.identifier.identifier)){var c=this.args.map(function(c){return c.polynomialOrder(a,b)}),d=Math.max.apply(null,c);if(d===0)return[0,0,this.evaluateOnce(a)];var e=a.getFunctionTree(this.identifier.identifier);if(!e)throw"Can't solve equations with "+this.identifier.identifier;var f=t(a);for(var g=0;g<e.arity;g++)f.setVariable(e.args[g].identifier,this.args[g]);return e.expression.quadraticCoefficients(f,b)}var i=h(this.identifier.identifier),j=m("*",i,this.args[0]);return j.quadraticCoefficients(a,b)},a.polynomialEvalStrings=function(a,b,c){if(!(this.arity>1||a.hasFunction(this.identifier.identifier))){var i=h(this.identifier.identifier),j=m("*",i,this.args[0]);return j.polynomialEvalStrings(a,b,c)}var d=this.args.map(function(d){return d.polynomialEvalStrings(a,b,c)}),e=d.map(function(a){return a.expressions.length-1}),f=Math.max.apply(null,e);if(f===0){var g=this.getEvalStrings(a);return{statements:g.statements,expressions:[g.expression]}}},a.polynomialOrder=function(a,b){if(this.arity>1||a.hasFunction(this.identifier.identifier)){var c=this.args.map(function(c){return c.polynomialOrder(a,b)}),d=Math.max.apply(null,c);return d===0?0:Infinity}var e=h(this.identifier.identifier),f=m("*",e,this.args[0]);return f.polynomialOrder(a,b)},a.toString=function(){return this.identifier.identifier==="sqrt"?this.identifier+"{"+this.args[0]+"}":this.identifier+"("+this.args.join(", ")+")"}}),b.FunctionCallExponentNode=s(c,function(a,b){a.init=function(a,c,d){b.init.call(this),this.identifier=a,this.arg=c,this.exponent=d,this.as_function_node=m("^",o(this.identifier,[this.arg]),this.exponent),this.as_multiplication_node=m("*",this.identifier,m("^",this.arg,this.exponent)),this.addDependency(this.identifier.identifier,1),this.addDependencies(this.arg.dependencies()),this.addDependencies(this.exponent.dependencies())},a.getEquivalentNode=function(a){return a.hasFunction(this.identifier.identifier)?this.as_function_node:this.as_multiplication_node},a.evaluateOnce=function(a){return this.getEquivalentNode(a).evaluateOnce(a)},a.getEvalStrings=function(a){return this.getEquivalentNode(a).getEvalStrings(a)},a.polynomialOrder=function(a,b){return this.getEquivalentNode(a).polynomialOrder(a,b)},a.quadraticCoefficients=function(a,b){return this.getEquivalentNode(a).quadraticCoefficients(a,b)},a.polynomialEvalStrings=function(a,b,c){return this.getEquivalentNode(a).polynomialEvalStrings(a,b,c)},a.toString=function(){return this.as_function_node.toString()}}),b.FunctionDeclarationNode=s(c,function(a,b){a.init=function(a,c,d){var e,f,g;b.init.call(this),this.assigns=a,this.referenceSymbol(this.assigns.identifier),this.args=c,this.arity=this.args.length,this.expression=d,this.passed_variables=this.args.map(function(a){return a.identifier}),e=this.expression.dependencies();for(f in e){if(!e.hasOwnProperty(f))continue;g=e[f];if(this.passed_variables.indexOf(f)>=0){if(g>1)throw"Cannot call argument "+f+" as a function"}else this.addDependency(f,g)}},a.statementType=FUNCTION_DEFINITION,a.exportDefinitionsTo=function(a,b){var c=this,d=c.expression.getEvalStrings(a),e=d.statements+"return "+d.expression,f=c.args.map(function(a){return a.identifier}),g=b.compile(f,e);a.setFunction(c.assigns.identifier,c.args.length,g,c,f,e)},a.passedVariables=function(){return this.passed_variables},a.evaluateOnce=function(){return"Defines function "+this.assigns.identifier},a.getEvalStrings=function(a){return this.expression.getEvalStrings(a)},a.toString=function(){return this.assigns+"\\left("+this.args.join(", ")+"\\right)"+" = "+this.expression}}),p=b.DerivativeNode=s(c,function(a,b){a.init=function(a,c){b.init.call(this),this.derivative_variable=a,this.expression=c,this.addDependencies(c.dependencies()),this.addDependency(a.identifier,0)},a.evaluateOnce=function(a){var b=this.derivative_variable,c=this.expression.takeDerivative(a,b);if(c instanceof p){var d=a.getVariable(b.identifier).evaluateOnce(a),e=t(a),g=5e-5;e.setVariable(b.identifier,f(d-g));var h=this.expression.evaluateOnce(e);e.setVariable(b.identifier,f(d+g));var i=this.expression.evaluateOnce(e);return(i-h)/(2*g)}return c.evaluateOnce(a)},a.getEvalStrings=function(a){var b=this.derivative_variable,c=this.expression.takeDerivative(a,b);if(c instanceof p){var d=this.tmp(),e=this.tmp(),f="(5e-5)",g=this.tmp(),h=this.tmp(),i=b.getEvalStrings(a),j=i.statements+"var "+e+"="+i.expression+";",k=this.expression.getEvalStrings(a),l=b.identifier+"="+e+"-"+f+";"+k.statements+"var "+h+"="+k.expression+";",m=b.identifier+"="+e+"+"+f+";"+k.statements+"var "+g+"="+k.expression+";",n="var "+d+"=("+g+"-"+h+")/(2*"+f+");",o=b.identifier+"="+e+";",q=j+l+m+n+o;return{expression:d,statements:q}}return c.getEvalStrings(a)},a.toString=function(){return"\\frac{d}{d"+this.derivative_variable+"}"+"\\left("+this.expression+"\\right)"}}),q=b.RepeatedOperatorNode=s(c,function(a,b){a.init=function(a,c,d,e){b.init.call(this),this.index=a,this.lower_bound=c,this.upper_bound=d,this.summand=e,this.addDependencies(this.lower_bound.dependencies()),this.addDependencies(this.upper_bound.dependencies()),this.addDependencies(this.summand.dependencies()),this.shadowVariable(this.index.identifier)},a.evaluateOnce=function(a){var b=t(a),c=Math.round(this.lower_bound.evaluateOnce(a)),d=Math.round(this.upper_bound.evaluateOnce(a)),e=this.starting_value;if(!isFinite(d-c))e=d<c?this.starting_value:NaN;else for(var g=c;g<=d;g++)b.setVariable(this.index.identifier,f(g)),e=this.fn(e,this.summand.evaluateOnce(b));return e},a.getEvalStrings=function(a){var b=this.tmp(),c=this.index.identifier,d=this.tmp(),e=this.tmp(),f=this.lower_bound.getEvalStrings(a),g=this.upper_bound.getEvalStrings(a),h=this.summand.getEvalStrings(a),i=f.statements+"var "+d+" = Math.round("+f.expression+");",j=g.statements+"var "+e+" = Math.round("+g.expression+");",k="var "+b+"="+this.starting_value+";",l="for (var "+c+"="+d+";"+c+"<="+e+";"+c+"++) {"+h.statements+b+this.in_place_operator+h.expression+"};",m="if(!isFinite("+e+"-"+d+")) {"+b+"=("+e+"<"+d+"?"+this.starting_value+":NaN);}else{"+l+"}";return{expression:b,statements:i+j+k+m}}}),b.SummationNode=s(q,function(a,b){a.init=function(a,c,d,e){b.init.call(this,a,c,d,e)},a.starting_value=0,a.in_place_operator="+=",a.fn=function(a,b){return a+b},a.toString=function(){return"\\sum_{"+this.index+"="+this.lower_bound+"}"+"^{"+this.upper_bound+"} "+this.summand}}),b.ProductNode=s(q,function(a,b){a.init=function(a,c,d,e){b.init.call(this,a,c,d,e)},a.starting_value=1,a.in_place_operator="*=",a.fn=function(a,b){return a*b},a.toString=function(){return"\\prod_{"+this.index+"="+this.lower_bound+"}"+"^{"+this.upper_bound+"} "+this.summand}}),b.OrderedPairListNode=s(c,function(a,b){a.init=function(a){var c;b.init.call(this),this.elements=a;for(c=0;c<a.length;c++)this.addDependencies(a[c].dependencies())},a.evaluateOnce=function(a){return this.elements.map(function(b){return b.evaluateOnce(a)})},a.getEvalStrings=function(a){var b,c,d="",e="[";for(b=0;b<this.elements.length;b++)c=this.elements[b].getEvalStrings(a),d+=c.statements,e+=c.expression,b<this.elements.length-1&&(this.expression+=",");return e+="]",{statements:d,expression:e}},a.toString=function(){return"\\left("+this.elements.join(", ")+"\\right)"},a.statementType=ORDERED_PAIR_LIST});for(r in b)b.hasOwnProperty(r)&&(v.yy[r]=b[r]);return v.yy.parseFunctionDeclaration=function(a){var b,c,d,e,f,g,i,j,k;return a=a.replace("###",""),b="(?:\\s|\\\\space|\\\\\\:)*",c="(?:[a-zA-Z]|\\\\[a-zA-Z]+)",d="(?:_[a-zA-Z0-9]|_{[a-zA-Z0-9]+})?",e=c+d,f="(?:"+e+"(?:\\,"+e+")*)",g="("+e+")"+"(?:\\\\left)?\\(("+f+")(?:\\\\right)?\\)=",i=new RegExp(g),j=new RegExp(b,"g"),a=a.replace(j,""),k=i.exec(a),{identifier:h(k[1]),args:k[2].split(",").map(h),input_string:a.split("=")[0]}},b.parse=function(a){return v.parse("###"+a)},b.tryParse=function(a){var c;try{return c=b.parse(a),c}catch(d){return e(d)}},v.yy.setInput=function(a,b){a.setInputString(v.yy.lexer.matched.slice(Math.max(3,b.first_column),b.last_column))},v.yy.parseError=function(){throw"Sorry - I don't understand this"},b}),define("math/quadratic",["require"],function(){var a={formula:function(a,b){if(a.length!=3)throw"Where did you learn the quadratic formula?";var c=a[0],d=a[1],e=a[2];if(c===0)return[-e/d,-e/d];var f=Math.sqrt(d*d-4*c*e),g=(-d+f)/(2*c),h=(-d-f)/(2*c);return b===0?g:b===1?h:[g,h]},inequalityRegions:function(a){var b=1e+305,c=a[0],d=a[1],e=a[2];if(c===0&&d===0)return e>0?[NaN,-b,b,NaN]:[NaN,NaN,NaN,NaN];if(c===0)return d>0?[NaN,NaN,NaN,-e/d]:[-e/d,NaN,NaN,NaN];var f=Math.sqrt(d*d-4*c*e);if(!isFinite(f))return c>0?[NaN,-b,b,NaN]:[NaN,NaN,NaN,NaN];var g=(-d+f)/(2*c),h=(-d-f)/(2*c);return c>0?[h,NaN,NaN,g]:[NaN,g,h,NaN]},formulaEvalStrings:function(a){var b,c;switch(a.expressions.length){case 2:return b=a.statements+"return "+"-"+a.expressions[0]+"/"+a.expressions[1],[b];case 3:var d=a.statements+"var coeffs = ["+a.expressions[2]+","+a.expressions[1]+","+a.expressions[0]+"];";return b=d+"return this.quadraticFormula(coeffs, 0);",c=d+"return this.quadraticFormula(coeffs, 1);",[b,c]}},inequalityRegionEvalStrings:function(a){var b=a.expressions.slice();while(b.length<3)b.push("0");var c=a.statements+"var coeffs = ["+b[2]+","+b[1]+","+b[0]+"];";return[c+"return this.quadraticInequalityRegions(coeffs)[0]",c+"return this.quadraticInequalityRegions(coeffs)[1]",c+"return this.quadraticInequalityRegions(coeffs)[2]",c+"return this.quadraticInequalityRegions(coeffs)[3]"
]}};return a}),define("math/builtinframe",["require","./builtin","./evalframe","./parser_util","./inverses","math/quadratic"],function(a){var b,c,d=a("./builtin"),e=a("./evalframe"),f=a("./parser_util"),g=a("./inverses"),h=a("math/quadratic"),i=f.ConstantNode,j=e();return j.setVariable("pi",i(Math.PI)),j.setEvalStrings("pi",{expression:String(Math.PI),statements:""}),j.setVariable("tau",i(2*Math.PI)),j.setEvalStrings("tau",{expression:String(2*Math.PI),statements:""}),j.setVariable("e",i(Math.E)),j.setEvalStrings("e",{expression:String(Math.E),statements:""}),j.setDegreeMode=function(a){j._angleMultiplier=a?Math.PI/180:1},j.setDegreeMode(!1),j.setFunction("angleMultiplier",1,function(){return j._angleMultiplier}),b=function(a,b,c){j.setFunction(a,1,function(a){return b(a*j._angleMultiplier)}),j.setFunction(g[a],1,function(a){return c(a)/j._angleMultiplier})},b("sin",d.sin,Math.asin),b("cos",d.cos,Math.acos),b("tan",d.tan,Math.atan),b("cot",d.cot,d.acot),b("sec",d.sec,d.asec),b("csc",d.csc,d.acsc),c=function(a,b,c){j.setFunction(a,1,b),j.setFunction(g[a],1,c)},c("sinh",d.sinh,d.asinh),c("cosh",d.cosh,d.acosh),c("tanh",d.tanh,d.atanh),c("coth",d.coth,d.acoth),c("sech",d.sech,d.asech),c("csch",d.csch,d.acsch),j.setFunction("pow",2,d.pow),j.setFunction("sqrt",1,Math.sqrt),j.setFunction("nthroot",2,d.nthroot),j.setFunction("log",2,d.log_base),j.setFunction("exp",1,Math.exp),j.setFunction("floor",1,Math.floor),j.setFunction("ceil",1,Math.ceil),j.setFunction("round",1,Math.round),j.setFunction("abs",1,Math.abs),j.setFunction("mod",2,d.mod),j.setFunction("max",2,d.max),j.setFunction("min",2,d.min),j.setFunction("sign",1,d.sign),j.setFunction("lcm",2,d.lcm),j.setFunction("gcd",2,d.gcd),j.setFunction("nCr",2,d.nCr),j.setFunction("nPr",2,d.nPr),j.setFunction("factorial",1,d.factorial),j.setFunction("polyGamma",2,d.polyGamma),j.setFunction("quadraticFormula",2,h.formula),j.setFunction("quadraticInequalityRegions",1,h.inequalityRegions),j}),define("numeric",[],function(){var numeric=typeof exports=="undefined"?function(){}:exports;return typeof global!="undefined"&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(a,b){var c,d,e,f;typeof b=="undefined"&&(b=15),e=.5,c=new Date;for(;;){e*=2;for(f=e;f>3;f-=4)a(),a(),a(),a();while(f>0)a(),f--;d=new Date;if(d-c>b)break}for(f=e;f>3;f-=4)a(),a(),a(),a();while(f>0)a(),f--;return d=new Date,1e3*(3*e-1)/(d-c)},numeric._myIndexOf=function(a){var b,c=this.length;for(b=0;b<c;++b)if(this[b]===a)return b;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.precision=4,numeric.largeArray=50,numeric.compile=function(){var a=Array.prototype.slice.call(arguments),b=a.pop();return b="return function ("+a.join(",")+") {"+b+";}",(new Function(["numeric"],b))(numeric)},numeric.prettyPrint=function(a){function c(a){var b,d,e;return a===0?"0":isNaN(a)?"NaN":a<0?"-"+c(-a):isFinite(a)?(b=Math.floor(Math.log(a)/Math.log(10)),d=a/Math.pow(10,b),e=d.toPrecision(numeric.precision),parseFloat(e)===10&&(b++,d=1,e=d.toPrecision(numeric.precision)),parseFloat(e).toString()+"e"+b.toString()):"Infinity"}function d(a){var e,f,g,h,i,j;if(typeof a=="undefined")return b.push(Array(numeric.precision+8).join(" ")),!1;if(typeof a=="string")return b.push('"'+a+'"'),!1;if(typeof a=="boolean")return b.push(a.toString()),!1;if(typeof a=="number"){f=c(a),g=a.toPrecision(numeric.precision),h=parseFloat(a.toString()).toString(),i=[f,g,h,parseFloat(g).toString(),parseFloat(h).toString()];for(e=1;e<i.length;e++)i[e].length<f.length&&(f=i[e]);return b.push(Array(numeric.precision+8-f.length).join(" ")+f),!1}if(a===null)return b.push("null"),!1;if(typeof a=="function"){b.push(a.toString()),j=!1;for(e in a)a.hasOwnProperty(e)&&(j?b.push(",\n"):b.push("\n{"),j=!0,b.push(e),b.push(": \n"),d(a[e]));return j&&b.push("}\n"),!0}if(a instanceof Array){if(a.length>numeric.largeArray)return b.push("...Large Array..."),!0;j=!1,b.push("[");for(e=0;e<a.length;e++)e>0&&(b.push(","),j&&b.push("\n ")),j=d(a[e]);return b.push("]"),!0}b.push("{"),j=!1;for(e in a)a.hasOwnProperty(e)&&(j&&b.push(",\n"),j=!0,b.push(e),b.push(": \n"),d(a[e]));return b.push("}"),!0}var b;return b=[],d(a),b.join("")},numeric.parseDate=function(a){function b(a){var c,d;if(typeof a=="string")return Date.parse(a.replace(/-/g,"/"));if(a instanceof Array){c=[];for(d=0;d<a.length;d++)c[d]=b(a[d]);return c}throw new Error("parseDate: parameter must be arrays of strings")}return b(a)},numeric.parseFloat=function(a){function b(a){var c,d;if(typeof a=="string")return parseFloat(a);if(a instanceof Array){c=[];for(d=0;d<a.length;d++)c[d]=b(a[d]);return c}throw new Error("parseFloat: parameter must be arrays of strings")}return b(a)},numeric.parseCSV=function(a){var b,c,d,e,f=a.split("\n"),g=[],h=/(([^'",]*)|('[^']*')|("[^"]*")),/g,i=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,j=function(a){return a.substr(0,a.length-1)},k=0;for(c=0;c<f.length;c++){d=(f[c]+",").match(h);if(d.length>0){g[k]=[];for(b=0;b<d.length;b++)e=j(d[b]),i.test(e)?g[k][b]=parseFloat(e):g[k][b]=e;k++}}return g},numeric.toCSV=function(a){var b,c,d,e=numeric.dim(a),f=e[0],g=e[1],h=[];for(b=0;b<f;b++){d=[];for(c=0;c<f;c++)d[c]=a[b][c].toString();h[b]=d.join(", ")}return h.join("\n")+"\n"},numeric.getURL=function(a){var b=new XMLHttpRequest;return b.open("GET",a,!1),b.send(),b},numeric.imageURL=function(a){function o(a){var b,c,d,e,f,g,h,i,j=a.length,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="";for(b=0;b<j;b+=3)c=a[b],d=a[b+1],e=a[b+2],f=c>>2,g=((c&3)<<4)+(d>>4),h=((d&15)<<2)+(e>>6),i=e&63,b+1>=j?h=i=64:b+2>=j&&(i=64),l+=k.charAt(f)+k.charAt(g)+k.charAt(h)+k.charAt(i);return l}function p(a,b,c){var d,e,f,g,h;typeof b=="undefined"&&(b=0),typeof c=="undefined"&&(c=a.length),d=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],e=-1,f=0,g=a.length;for(h=b;h<c;h++)f=(e^a[h])&255,e=e>>>8^d[f];return e^-1}var b,c,d,e,f,g,h,i,j,k,l,m,n;b=a[0].length,c=a[0][0].length,n=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,c>>24&255,c>>16&255,c>>8&255,c&255,b>>24&255,b>>16&255,b>>8&255,b&255,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29],m=p(n,12,29),n[29]=m>>24&255,n[30]=m>>16&255,n[31]=m>>8&255,n[32]=m&255,d=1,e=0;for(j=0;j<b;j++){j<b-1?n.push(0):n.push(1),h=3*c+1+(j===0)&255,i=3*c+1+(j===0)>>8&255,n.push(h),n.push(i),n.push(~h&255),n.push(~i&255),j===0&&n.push(0);for(k=0;k<c;k++)for(f=0;f<3;f++)h=a[f][j][k],h>255?h=255:h<0?h=0:h=Math.round(h),d=(d+h)%65521,e=(e+d)%65521,n.push(h);n.push(0)}return l=(e<<16)+d,n.push(l>>24&255),n.push(l>>16&255),n.push(l>>8&255),n.push(l&255),g=n.length-41,n[33]=g>>24&255,n[34]=g>>16&255,n[35]=g>>8&255,n[36]=g&255,m=p(n,37),n.push(m>>24&255),n.push(m>>16&255),n.push(m>>8&255),n.push(m&255),n.push(0),n.push(0),n.push(0),n.push(0),n.push(73),n.push(69),n.push(78),n.push(68),n.push(174),n.push(66),n.push(96),n.push(130),"data:image/png;base64,"+o(n)},numeric._dim=function(a){var b=[];while(typeof a=="object")b.push(a.length),a=a[0];return b},numeric.dim=function(a){var b,c;if(typeof a=="object")return b=a[0],typeof b=="object"?(c=b[0],typeof c=="object"?numeric._dim(a):[a.length,b.length]):[a.length];return[]},numeric.mapreduce=function(a,b){return numeric.compile("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+b+";\n"+'if(typeof x === "number") { var xi = x; '+a+"; return accum; }\n"+'if(typeof _s === "undefined") _s = numeric.dim(x);\n'+'if(typeof _k === "undefined") _k = 0;\n'+"var _n = _s[_k];\n"+"var i,xi;\n"+"if(_k < _s.length-1) {\n"+"    for(i=_n-1;i>=0;i--) {\n"+"        accum = arguments.callee(x[i],accum,_s,_k+1);\n"+"    }"+"    return accum;\n"+"}\n"+"for(i=_n-1;i>=1;i-=2) { \n"+"    xi = x[i];\n"+"    "+a+";\n"+"    xi = x[i-1];\n"+"    "+a+";\n"+"}\n"+"if(i === 0) {\n"+"    xi = x[i];\n"+"    "+a+"\n"+"}\n"+"return accum;")},numeric.mapreduce2=function(a,b){return numeric.compile("x","var n = x.length;\nvar i,xi;\n"+b+";\n"+"for(i=n-1;i!==-1;--i) { \n"+"    xi = x[i];\n"+"    "+a+";\n"+"}\n"+"return accum;")},numeric.same=function same(a,b){var c,d;if(a instanceof Array&&b instanceof Array){d=a.length;if(d!==b.length)return!1;for(c=0;c<d;c++){if(a[c]===b[c])continue;if(typeof a[c]!="object")return!1;if(!same(a[c],b[c]))return!1}return!0}return!1},numeric.rep=function(a,b,c){var d,e,f;typeof c=="undefined"&&(c=0),d=a[c],e=Array(d);if(c===a.length-1){for(f=d-2;f>=0;f-=2)e[f+1]=b,e[f]=b;return f===-1&&(e[0]=b),e}for(f=d-1;f>=0;f--)e[f]=numeric.rep(a,b,c+1);return e},numeric.dotMMsmall=function(a,b){var c,d,e,f,g,h,i,j=a.length,k=b.length,l=b[0].length,m=Array(j);for(c=j-1;c>=0;c--){f=Array(l),g=a[c];for(e=l-1;e>=0;e--){h=g[k-1]*b[k-1][e];for(d=k-2;d>=1;d-=2)i=d-1,h+=g[d]*b[d][e]+g[i]*b[i][e];d===0&&(h+=g[0]*b[0][e]),f[e]=h}m[c]=f}return m},numeric._getCol=function(a,b,c){var d,e=a.length;for(d=e-1;d>0;--d)c[d]=a[d][b],--d,c[d]=a[d][b];d===0&&(c[0]=a[0][b])},numeric.dotMMbig=function(a,b){var c,d,e,f,g=numeric._getCol,h=b.length,i=Array(h),j=a.length,k=b[0].length,l=new Array(j),m=numeric.dotVV;--h,--j;for(d=j;d!==-1;--d)l[d]=Array(k);--k;for(d=k;d!==-1;--d){g(b,d,i);for(e=j;e!==-1;--e)f=0,c=a[e],l[e][d]=m(c,i)}return l},numeric.dotMV=function(a,b){var c,d=a.length,e=b.length,f=Array(d),g=numeric.dotVV;for(c=d-1;c>=0;c--)f[c]=g(a[c],b);return f},numeric.dotVM=function(a,b){var c,d,e,f,g=a.length,h=b[0].length,i=Array(h);for(d=h-1;d>=0;d--){e=a[g-1]*b[g-1][d];for(c=g-2;c>=1;c-=2)f=c-1,e+=a[c]*b[c][d]+a[f]*b[f][d];c===0&&(e+=a[0]*b[0][d]),i[d]=e}return i},numeric.dotVV=function(a,b){var c,d,e=a.length,f=a[e-1]*b[e-1];for(c=e-2;c>=1;c-=2)d=c-1,f+=a[c]*b[c]+a[d]*b[d];return c===0&&(f+=a[0]*b[0]),f},numeric.dot=function(a,b){var c=numeric.dim;switch(c(a).length*1e3+c(b).length){case 2002:return b.length<10?numeric.dotMMsmall(a,b):numeric.dotMMbig(a,b);case 2001:return numeric.dotMV(a,b);case 1002:return numeric.dotVM(a,b);case 1001:return numeric.dotVV(a,b);case 1e3:return numeric.mulVS(a,b);case 1:return numeric.mulSV(a,b);case 0:return a*b;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(a){var b,c,d,e,f=a.length,g=Array(f);for(b=f-1;b>=0;b--){e=Array(f),c=b+2;for(d=f-1;d>=c;d-=2)e[d]=0,e[d-1]=0;d>b&&(e[d]=0),e[b]=a[b];for(d=b-1;d>=1;d-=2)e[d]=0,e[d-1]=0;d===0&&(e[0]=0),g[b]=e}return g},numeric.getDiag=function(a){var b,c=Math.min(a.length,a[0].length),d=Array(c);for(b=c-1;b>=1;--b)d[b]=a[b][b],--b,d[b]=a[b][b];return b===0&&(d[0]=a[0][0]),d},numeric.identity=function(a){return numeric.diag(numeric.rep([a],1))},numeric.pointwise=function(a,b,c){var d,e,f,g,h,i;typeof c=="undefined"&&(c=""),d=[],f=/\[i\]$/,h="",i=!1;for(e=0;e<a.length;e++)f.test(a[e])?(g=a[e].substring(0,a[e].length-3),h=g):g=a[e],g==="ret"&&(i=!0),d.push(g);return d[a.length]="_s",d[a.length+1]="_k",d[a.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+h+");\n"+'if(typeof _k === "undefined") _k = 0;\n'+"var _n = _s[_k];\n"+"var i"+(i?"":", ret = Array(_n)")+";\n"+"if(_k < _s.length-1) {\n"+"    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+a.join(",")+",_s,_k+1);\n"+"    return ret;\n"+"}\n"+c+"\n"+"for(i=_n-1;i!==-1;--i) {\n"+"    "+b+"\n"+"}\n"+"return ret;",numeric.compile.apply(null,d)},numeric.pointwise2=function(a,b,c){var d,e,f,g,h,i;typeof c=="undefined"&&(c=""),d=[],f=/\[i\]$/,h="",i=!1;for(e=0;e<a.length;e++)f.test(a[e])?(g=a[e].substring(0,a[e].length-3),h=g):g=a[e],g==="ret"&&(i=!0),d.push(g);return d[a.length]="var _n = "+h+".length;\n"+"var i"+(i?"":", ret = Array(_n)")+";\n"+c+"\n"+"for(i=_n-1;i!==-1;--i) {\n"+b+"\n"+"}\n"+"return ret;",numeric.compile.apply(null,d)},numeric._biforeach=function _biforeach(a,b,c,d,e){var f,g;if(d===c.length-1){e(a,b);return}g=c[d];for(f=g-1;f>=0;f--)_biforeach(typeof a=="object"?a[f]:a,typeof b=="object"?b[f]:b,c,d+1,e)},numeric._biforeach2=function _biforeach2(a,b,c,d,e){var f,g,h;if(d===c.length-1)return e(a,b);g=c[d],h=Array(g);for(f=g-1;f>=0;--f)h[f]=_biforeach2(typeof a=="object"?a[f]:a,typeof b=="object"?b[f]:b,c,d+1,e);return h},numeric._foreach=function _foreach(a,b,c,d){var e,f;if(c===b.length-1){d(a);return}f=b[c];for(e=f-1;e>=0;e--)_foreach(a[e],b,c+1,d)},numeric._foreach2=function _foreach2(a,b,c,d){var e,f,g;if(c===b.length-1)return d(a);f=b[c],g=Array(f);for(e=f-1;e>=0;e--)g[e]=_foreach2(a[e],b,c+1,d);return g},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var a,b,c,d,e;for(a=0;a<numeric.mathfuns2.length;++a)b=numeric.mathfuns2[a],numeric.ops2[b]=b;for(a in numeric.ops2)numeric.ops2.hasOwnProperty(a)&&(b=numeric.ops2[a],e="",numeric.myIndexOf.call(numeric.mathfuns2,a)!==-1?(e="var "+b+" = Math."+b+";\n",c=function(a,c,d){return a+" = "+b+"("+c+","+d+")"},d=function(a,c){return a+" = "+b+"("+a+","+c+")"}):(c=function(a,c,d){return a+" = "+c+" "+b+" "+d},numeric.opseq.hasOwnProperty(a+"eq")?d=function(a,c){return a+" "+b+"= "+c}:d=function(a,c){return a+" = "+a+" "+b+" "+c}),numeric[a+"VV"]=numeric.pointwise2(["x[i]","y[i]"],c("ret[i]","x[i]","y[i]"),e),numeric[a+"SV"]=numeric.pointwise2(["x","y[i]"],c("ret[i]","x","y[i]"),e),numeric[a+"VS"]=numeric.pointwise2(["x[i]","y"],c("ret[i]","x[i]","y"),e),numeric[a]=numeric.compile("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+a+"VV, VS = numeric."+a+"VS, SV = numeric."+a+"SV;\n"+"var dim = numeric.dim;\n"+"for(i=1;i!==n;++i) { \n"+"  y = arguments[i];\n"+'  if(typeof x === "object") {\n'+'      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n'+"      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n"+'  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n'+"  else "+d("x","y")+"\n"+"}\nreturn x;\n"),numeric[b]=numeric[a],numeric[a+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],d("ret[i]","x[i]"),e),numeric[a+"eqS"]=numeric.pointwise2(["ret[i]","x"],d("ret[i]","x"),e),numeric[a+"eq"]=numeric.compile("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+a+"eqV, S = numeric."+a+"eqS\n"+"var s = numeric.dim(x);\n"+"for(i=1;i!==n;++i) { \n"+"  y = arguments[i];\n"+'  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n'+"  else numeric._biforeach(x,y,s,0,S);\n"+"}\nreturn x;\n"));for(a=0;a<numeric.mathfuns2.length;++a)b=numeric.mathfuns2[a],delete numeric.ops2[b];for(a=0;a<numeric.mathfuns.length;++a)b=numeric.mathfuns[a],numeric.ops1[b]=b;for(a in numeric.ops1)numeric.ops1.hasOwnProperty(a)&&(e="",b=numeric.ops1[a],numeric.myIndexOf.call(numeric.mathfuns,a)!==-1&&Math.hasOwnProperty(b)&&(e="var "+b+" = Math."+b+";\n"),numeric[a+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+b+"(ret[i]);",e),numeric[a+"eq"]=numeric.compile("x",'if(typeof x !== "object") return '+b+"x\n"+"var i;\n"+"var V = numeric."+a+"eqV;\n"+"var s = numeric.dim(x);\n"+"numeric._foreach(x,s,0,V);\n"+"return x;\n"),numeric[a+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+b+"(x[i]);",e),numeric[a]=numeric.compile("x",'if(typeof x !== "object") return '+b+"(x)\n"+"var i;\n"+"var V = numeric."+a+"V;\n"+"var s = numeric.dim(x);\n"+"return numeric._foreach2(x,s,0,V);\n"));for(a=0;a<numeric.mathfuns.length;++a)b=numeric.mathfuns[a],delete numeric.ops1[b];for(a in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(a)&&(b=numeric.mapreducers[a],numeric[a+"V"]=numeric.mapreduce2(b[0],b[1]),numeric[a]=numeric.compile("x","s","k",b[1]+'if(typeof x !== "object") {'+"    xi = x;\n"+b[0]+";\n"+"    return accum;\n"+"}"+'if(typeof s === "undefined") s = numeric.dim(x);\n'+'if(typeof k === "undefined") k = 0;\n'+"if(k === s.length-1) return numeric."+a+"V(x);\n"+"var xi;\n"+"var n = x.length, i;\n"+"for(i=n-1;i!==-1;--i) {\n"+"   xi = arguments.callee(x[i]);\n"+b[0]+";\n"+"}\n"+"return accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(a,b){return typeof a=="object"?typeof b=="object"?numeric.truncVV(a,b):numeric.truncVS(a,b):typeof b=="object"?numeric.truncSV(a,b):Math.round(a/b)*b},numeric.inv=function(a){var a,b,c,d,e,f,g,h,i,j,k=numeric.dim(a),l=Math.abs,m=k[0],n=k[1],o=numeric.clone(a),p=numeric.identity(m);for(g=0;g<n;++g){i=-1,j=-1;for(f=g;f!==m;++f)h=l(o[f][g]),h>j&&(i=f,j=h);c=o[i],o[i]=o[g],o[g]=c,e=p[i],p[i]=p[g],p[g]=e,a=c[g];for(h=g;h!==n;++h)c[h]/=a;for(h=n-1;h!==-1;--h)e[h]/=a;for(f=m-1;f!==-1;--f)if(f!==g){b=o[f],d=p[f],a=b[g];for(h=g+1;h!==n;++h)b[h]-=c[h]*a;for(h=n-1;h>0;--h)d[h]-=e[h]*a,--h,d[h]-=e[h]*a;h===0&&(d[0]-=e[0]*a)}}return p},numeric.det=function(a){var b,c,d,e,f,g,h,i,j,k,l,m=numeric.dim(a);if(m.length!==2||m[0]!==m[1])throw new Error("numeric: det() only works on square matrices");b=m[0],c=1,g=numeric.clone(a);for(e=0;e<b-1;e++){f=e;for(d=e+1;d<b;d++)Math.abs(g[d][e])>Math.abs(g[f][e])&&(f=d);f!==e&&(k=g[f],g[f]=g[e],g[e]=k,c*=-1),h=g[e];for(d=e+1;d<b;d++){i=g[d],j=i[e]/h[e];for(f=e+1;f<b-1;f+=2)l=f+1,i[f]-=h[f]*j,i[l]-=h[l]*j;f!==b&&(i[f]-=h[f]*j)}if(h[e]===0)return 0;c*=h[e]}return c*g[e][e]},numeric.transpose=function(a){var b,c,d,e,f,g=a.length,h=a[0].length,i=Array(h);for(c=0;c<h;c++)i[c]=Array(g);for(b=g-1;b>=1;b-=2){e=a[b],d=a[b-1];for(c=h-1;c>=1;--c)f=i[c],f[b]=e[c],f[b-1]=d[c],--c,f=i[c],f[b]=e[c],f[b-1]=d[c];c===0&&(f=i[0],f[b]=e[0],f[b-1]=d[0])}if(b===0){d=a[0];for(c=h-1;c>=1;--c)i[c][0]=d[c],--c,i[c][0]=d[c];c===0&&(i[0][0]=d[0])}return i},numeric.negtranspose=function(a){var b,c,d,e,f,g=a.length,h=a[0].length,i=Array(h);for(c=0;c<h;c++)i[c]=Array(g);for(b=g-1;b>=1;b-=2){e=a[b],d=a[b-1];for(c=h-1;c>=1;--c)f=i[c],f[b]=-e[c],f[b-1]=-d[c],--c,f=i[c],f[b]=-e[c],f[b-1]=-d[c];c===0&&(f=i[0],f[b]=-e[0],f[b-1]=-d[0])}if(b===0){d=a[0];for(c=h-1;c>=1;--c)i[c][0]=-d[c],--c,i[c][0]=-d[c];c===0&&(i[0][0]=-d[0])}return i},numeric._random=function _random(a,b){var c,d,e=a[b],f=Array(e);if(b===a.length-1){d=Math.random;for(c=e-1;c>=1;c-=2)f[c]=d(),f[c-1]=d();return c===0&&(f[0]=d()),f}for(c=e-1;c>=0;c--)f[c]=_random(a,b+1);return f},numeric.random=function(a){return numeric._random(a,0)},numeric.norm2=function(a){return Math.sqrt(numeric.norm2Squared(a))},numeric.linspace=function(a,b,c){var d,e;typeof c=="undefined"&&(c=Math.max(Math.round(b-a)+1,1));if(c<2)return c===1?[a]:[];e=Array(c),c--;for(d=c;d>=0;d--)e[d]=(d*b+(c-d)*a)/c;return e},numeric.getBlock=function(a,b,c){function e(a,f){var g,h=b[f],i=c[f]-h,j=Array(i);if(f===d.length-1){for(g=i;g>=0;g--)j[g]=a[g+h];return j}for(g=i;g>=0;g--)j[g]=e(a[g+h],f+1);return j}var d=numeric.dim(a);return e(a,0)},numeric.setBlock=function(a,b,c,d){function f(a,d,g){var h,i=b[g],j=c[g]-i;if(g===e.length-1)for(h=j;h>=0;h--)a[h+i]=d[h];for(h=j;h>=0;h--)f(a[h+i],d[h],g+1)}var e=numeric.dim(a);return f(a,d,0),a},numeric.getRange=function(a,b,c){var d,e,f,g,h=b.length,i=c.length,j=Array(h);for(d=h-1;d!==-1;--d){j[d]=Array(i),f=j[d],g=a[b[d]];for(e=i-1;e!==-1;--e)f[e]=g[c[e]]}return j},numeric.blockMatrix=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=numeric.dim(a);if(p.length<4)return numeric.blockMatrix([a]);b=p[0],c=p[1],d=0,e=0;for(f=0;f<b;++f)d+=a[f][0].length;for(g=0;g<c;++g)e+=a[0][g][0].length;i=Array(d);for(f=0;f<d;++f)i[f]=Array(e);j=0;for(f=0;f<b;++f){k=e;for(g=c-1;g!==-1;--g){h=a[f][g],k-=h[0].length;for(m=h.length-1;m!==-1;--m){o=h[m],l=i[j+m];for(n=o.length-1;n!==-1;--n)l[k+n]=o[n]}}j+=a[f][0].length}return i},numeric.tensor=function(a,b){var c,d,e,f,g,h,i,j,k;if(typeof a=="number"||typeof b=="number")return numeric.mul(a,b);c=numeric.dim(a),d=numeric.dim(b);if(c.length!==1||d.length!==1)throw new Error("numeric: tensor product is only defined for vectors");e=c[0],f=d[0],g=Array(e);for(i=e-1;i>=0;i--){h=Array(f),k=a[i];for(j=f-1;j>=3;--j)h[j]=k*b[j],--j,h[j]=k*b[j],--j,h[j]=k*b[j],--j,h[j]=k*b[j];while(j>=0)h[j]=k*b[j],--j;g[i]=h}return g},numeric.T=function(a,b){this.x=a,this.y=b},numeric.t=function(a,b){return new numeric.T(a,b)},numeric.Tbinop=function(a,b,c,d,e){var f,g=numeric.indexOf;if(typeof e!="string"){e="";for(f in numeric)numeric.hasOwnProperty(f)&&(a.indexOf(f)>=0||b.indexOf(f)>=0||c.indexOf(f)>=0||d.indexOf(f)>=0)&&f.length>1&&(e+="var "+f+" = numeric."+f+";\n")}return numeric.compile(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+e+"\n"+"if(x.y) {"+"  if(y.y) {"+"    return new numeric.T("+d+");\n"+"  }\n"+"  return new numeric.T("+c+");\n"+"}\n"+"if(y.y) {\n"+"  return new numeric.T("+b+");\n"+"}\n"+"return new numeric.T("+a+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var a,b=numeric.mul,c=numeric.div;return this.y?(a=numeric.add(b(this.x,this.x),b(this.y,this.y)),new numeric.T(c(this.x,a),c(numeric.neg(this.y),a))):new T(c(1,this.x))},numeric.T.prototype.div=function div(a){var div;return a instanceof numeric.T||(a=new numeric.T(a)),a.y?this.mul(a.reciprocal()):(div=numeric.div,this.y?new numeric.T(div(this.x,a.x),div(this.y,a.x)):new numeric.T(div(this.x,a.x)))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var a=numeric.transpose,b=this.x,c=this.y;return c?new numeric.T(a(b),a(c)):new numeric.T(a(b))},numeric.T.prototype.transjugate=function(){var a=numeric.transpose,b=this.x,c=this.y;return c?new numeric.T(a(b),numeric.negtranspose(c)):new numeric.T(a(b))},numeric.Tunop=function(a,b,c){return typeof c!="string"&&(c=""),numeric.compile("var x = this;\n"+c+"\n"+"if(x.y) {"+"  "+b+";\n"+"}\n"+a+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=this;if(typeof x.y=="undefined")return new numeric.T(numeric.inv(x.x));a=x.x.length,e=numeric.identity(a),f=numeric.rep([a,a],0),g=numeric.clone(x.x),h=numeric.clone(x.y);for(b=0;b<a;b++){s=g[b][b],t=h[b][b],q=s*s+t*t,d=b;for(c=b+1;c<a;c++)s=g[c][b],t=h[c][b],r=s*s+t*t,r>q&&(d=c,q=r);d!==b&&(w=g[b],g[b]=g[d],g[d]=w,w=h[b],h[b]=h[d],h[d]=w,w=e[b],e[b]=e[d],e[d]=w,w=f[b],f[b]=f[d],f[d]=w),i=g[b],j=h[b],m=e[b],n=f[b],s=i[b],t=j[b];for(c=b+1;c<a;c++)u=i[c],v=j[c],i[c]=(u*s+v*t)/q,j[c]=(v*s-u*t)/q;for(c=0;c<a;c++)u=m[c],v=n[c],m[c]=(u*s+v*t)/q,n[c]=(v*s-u*t)/q;for(c=b+1;c<a;c++){k=g[c],l=h[c],o=e[c],p=f[c],s=k[b],t=l[b];for(d=b+1;d<a;d++)u=i[d],v=j[d],k[d]-=u*s-v*t,l[d]-=v*s+u*t;for(d=0;d<a;d++)u=m[d],v=n[d],o[d]-=u*s-v*t,p[d]-=v*s+u*t}}for(b=a-1;b>0;b--){m=e[b],n=f[b];for(c=b-1;c>=0;c--){o=e[c],p=f[c],s=g[c][b],t=h[c][b];for(d=a-1;d>=0;d--)u=m[d],v=n[d],o[d]-=s*u-t*v,p[d]-=s*v+t*u}}return new numeric.T(e,f)},numeric.T.prototype.get=function(a){var b,c=this.x,d=this.y,e=0,f=a.length;if(d){while(e<f)b=a[e],c=c[b],d=d[b],e++;return new numeric.T(c,d)}while(e<f)b=a[e],c=c[b],e++;return new numeric.T(c)},numeric.T.prototype.set=function(a,b){var c,d=this.x,e=this.y,f=0,g=a.length,h=b.x,i=b.y;if(g===0)return i?this.y=i:e&&(this.y=undefined),this.x=d,this;if(i){e||(e=numeric.rep(numeric.dim(d),0),this.y=e);while(f<g-1)c=a[f],d=d[c],e=e[c],f++;return c=a[f],d[c]=h,e[c]=i,this}if(e){while(f<g-1)c=a[f],d=d[c],e=e[c],f++;return c=a[f],d[c]=h,h instanceof Array?e[c]=numeric.rep(numeric.dim(h),0):e[c]=0,this}while(f<g-1)c=a[f],d=d[c],f++;return c=a[f],d[c]=h,this},numeric.T.prototype.getRows=function(a,b){var c,d,e=b-a+1,f=Array(e),g=this.x,h=this.y;for(c=a;c<=b;c++)f[c-a]=g[c];if(h){d=Array(e);for(c=a;c<=b;c++)d[c-a]=h[c];return new numeric.T(f,d)}return new numeric.T(f)},numeric.T.prototype.setRows=function(a,b,c){var d,e=this.x,f=this.y,g=c.x,h=c.y;for(d=a;d<=b;d++)e[d]=g[d-a];if(h){f||(f=numeric.rep(numeric.dim(e),0),this.y=f);for(d=a;d<=b;d++)f[d]=h[d-a]}else if(f)for(d=a;d<=b;d++)f[d]=numeric.rep([g[d-a].length],0);return this},numeric.T.prototype.getRow=function(a){var b=this.x,c=this.y;return c?new numeric.T(b[a],c[a]):new numeric.T(b[a])},numeric.T.prototype.setRow=function(a,b){var c=this.x,d=this.y,e=b.x,f=b.y;return c[a]=e,f?(d||(d=numeric.rep(numeric.dim(c),0),this.y=d),d[a]=f):d&&(d=numeric.rep([e.length],0)),this},numeric.T.prototype.getBlock=function(a,b){var c=this.x,d=this.y,e=numeric.getBlock;return d?new numeric.T(e(c,a,b),e(d,a,b)):new numeric.T(e(c,a,b))},numeric.T.prototype.setBlock=function(a,b,c){var d,e,f,g,h;c instanceof numeric.T||(c=new numeric.T(c)),d=this.x,e=this.y,f=numeric.setBlock,g=c.x,h=c.y;if(h)return e||(this.y=numeric.rep(numeric.dim(this),0),e=this.y),f(d,a,b,g),f(e,a,b,h),this;f(d,a,b,g),e&&f(e,a,b,numeric.rep(numeric.dim(g),0))},numeric.T.rep=function(a,b){var c,d,e,f=numeric.T;return b instanceof f||(b=new f(b)),c=b.x,d=b.y,e=numeric.rep,d?new f(e(a,c),e(a,d)):new f(e(a,c))},numeric.T.diag=function diag(a){var diag,b,c;return a instanceof numeric.T||(a=new numeric.T(a)),b=a.x,c=a.y,diag=numeric.diag,c?new numeric.T(diag(b),diag(c)):new numeric.T(diag(b))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(a){return new numeric.T(numeric.identity(a))},numeric.T.prototype.getDiag=function(){var a=numeric,b=this.x,c=this.y;return c?new a.T(a.getDiag(b),a.getDiag(c)):new a.T(a.getDiag(b))},numeric.house=function(a){var b,c=numeric.clone(a),d=a[0]>=0?1:-1,e=d*numeric.norm2(a);c[0]+=e,b=numeric.norm2(c);if(b===0)throw new Error("eig: internal error");return numeric.div(c,b)},numeric.toUpperHessenberg=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o=numeric.dim(a);if(o.length!==2||o[0]!==o[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");b=o[0],h=numeric.clone(a),m=numeric.identity(b);for(d=0;d<b-2;d++){f=Array(b-d-1);for(c=d+1;c<b;c++)f[c-d-1]=h[c][d];if(numeric.norm2(f)>0){g=numeric.house(f),i=numeric.getBlock(h,[d+1,d],[b-1,b-1]),j=numeric.tensor(g,numeric.dot(g,i));for(c=d+1;c<b;c++){k=h[c],l=j[c-d-1];for(e=d;e<b;e++)k[e]-=2*l[e-d]}i=numeric.getBlock(h,[0,d+1],[b-1,b-1]),j=numeric.tensor(numeric.dot(i,g),g);for(c=0;c<b;c++){k=h[c],l=j[c];for(e=d+1;e<b;e++)k[e]-=2*l[e-d-1]}i=Array(b-d-1);for(c=d+1;c<b;c++)i[c-d-1]=m[c];j=numeric.tensor(g,numeric.dot(g,i));for(c=d+1;c<b;c++){n=m[c],l=j[c-d-1];for(e=0;e<b;e++)n[e]-=2*l[e]}}}return{H:h,Q:m}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;typeof b=="undefined"&&(b=1e4),a=numeric.clone(a),c=numeric.clone(a),d=numeric.dim(a),e=d[0],o=numeric.identity(e);if(e<3)return{Q:o,B:[[0,e-1]]};y=numeric.epsilon;for(x=0;x<b;x++){for(v=0;v<e-1;v++)if(Math.abs(a[v+1][v])<y*(Math.abs(a[v][v])+Math.abs(a[v+1][v+1]))){z=numeric.QRFrancis(numeric.getBlock(a,[0,0],[v,v]),b),A=numeric.QRFrancis(numeric.getBlock(a,[v+1,v+1],[e-1,e-1]),b),r=Array(v+1);for(u=0;u<=v;u++)r[u]=o[u];s=numeric.dot(z.Q,r);for(u=0;u<=v;u++)o[u]=s[u];r=Array(e-v-1);for(u=v+1;u<e;u++)r[u-v-1]=o[u];s=numeric.dot(A.Q,r);for(u=v+1;u<e;u++)o[u]=s[u-v-1];return{Q:o,B:z.B.concat(numeric.add(A.B,v+1))}}h=a[e-2][e-2],i=a[e-2][e-1],j=a[e-1][e-2],k=a[e-1][e-1],m=h+k,l=h*k-i*j,n=numeric.getBlock(a,[0,0],[2,2]),m*m>=4*l?(B=.5*(m+Math.sqrt(m*m-4*l)),C=.5*(m-Math.sqrt(m*m-4*l)),n=numeric.add(numeric.sub(numeric.dot(n,n),numeric.mul(n,B+C)),numeric.diag(numeric.rep([3],B*C)))):n=numeric.add(numeric.sub(numeric.dot(n,n),numeric.mul(n,m)),numeric.diag(numeric.rep([3],l))),f=[n[0][0],n[1][0],n[2][0]],g=numeric.house(f),r=[a[0],a[1],a[2]],s=numeric.tensor(g,numeric
.dot(g,r));for(u=0;u<3;u++){q=a[u],t=s[u];for(w=0;w<e;w++)q[w]-=2*t[w]}r=numeric.getBlock(a,[0,0],[e-1,2]),s=numeric.tensor(numeric.dot(r,g),g);for(u=0;u<e;u++){q=a[u],t=s[u];for(w=0;w<3;w++)q[w]-=2*t[w]}r=[o[0],o[1],o[2]],s=numeric.tensor(g,numeric.dot(g,r));for(u=0;u<3;u++){p=o[u],t=s[u];for(w=0;w<e;w++)p[w]-=2*t[w]}for(v=0;v<e-2;v++){for(w=v;w<=v+1;w++)if(Math.abs(a[w+1][w])<y*(Math.abs(a[w][w])+Math.abs(a[w+1][w+1]))){z=numeric.QRFrancis(numeric.getBlock(a,[0,0],[w,w]),b),A=numeric.QRFrancis(numeric.getBlock(a,[w+1,w+1],[e-1,e-1]),b),r=Array(w+1);for(u=0;u<=w;u++)r[u]=o[u];s=numeric.dot(z.Q,r);for(u=0;u<=w;u++)o[u]=s[u];r=Array(e-w-1);for(u=w+1;u<e;u++)r[u-w-1]=o[u];s=numeric.dot(A.Q,r);for(u=w+1;u<e;u++)o[u]=s[u-w-1];return{Q:o,B:z.B.concat(numeric.add(A.B,w+1))}}D=Math.min(e-1,v+3),f=Array(D-v);for(u=v+1;u<=D;u++)f[u-v-1]=a[u][v];g=numeric.house(f),r=numeric.getBlock(a,[v+1,v],[D,e-1]),s=numeric.tensor(g,numeric.dot(g,r));for(u=v+1;u<=D;u++){q=a[u],t=s[u-v-1];for(w=v;w<e;w++)q[w]-=2*t[w-v]}r=numeric.getBlock(a,[0,v+1],[e-1,D]),s=numeric.tensor(numeric.dot(r,g),g);for(u=0;u<e;u++){q=a[u],t=s[u];for(w=v+1;w<=D;w++)q[w]-=2*t[w-v-1]}r=Array(D-v);for(u=v+1;u<=D;u++)r[u-v-1]=o[u];s=numeric.tensor(g,numeric.dot(g,r));for(u=v+1;u<=D;u++){p=o[u],t=s[u-v-1];for(w=0;w<e;w++)p[w]-=2*t[w]}}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=numeric.toUpperHessenberg(a),y=numeric.QRFrancis(x.H,b),z=numeric.T,A=a.length,B=!1,C=y.B,D=numeric.dot(y.Q,numeric.dot(x.H,numeric.transpose(y.Q))),E=new z(numeric.dot(y.Q,x.Q)),F=C.length,G=Math.sqrt;for(d=0;d<F;d++){c=C[d][0];if(c!==C[d][1]){f=c+1,g=D[c][c],h=D[c][f],i=D[f][c],j=D[f][f];if(h===0&&i===0)continue;k=-g-j,l=g*j-h*i,m=k*k-4*l,m>=0?(k<0?n=-0.5*(k-G(m)):n=-0.5*(k+G(m)),r=(g-n)*(g-n)+h*h,s=i*i+(j-n)*(j-n),r>s?(r=G(r),p=(g-n)/r,q=h/r):(s=G(s),p=i/s,q=(j-n)/s),e=new z([[q,-p],[p,q]]),E.setRows(c,f,e.dot(E.getRows(c,f)))):(n=-0.5*k,o=.5*G(-m),r=(g-n)*(g-n)+h*h,s=i*i+(j-n)*(j-n),r>s?(r=G(r+o*o),p=(g-n)/r,q=h/r,n=0,o/=r):(s=G(s+o*o),p=i/s,q=(j-n)/s,n=o/s,o=0),e=new z([[q,-p],[p,q]],[[n,o],[o,-n]]),E.setRows(c,f,e.dot(E.getRows(c,f))))}}t=E.dot(a).dot(E.transjugate()),A=a.length,u=numeric.T.identity(A);for(f=0;f<A;f++)if(f>0)for(d=f-1;d>=0;d--){v=t.get([d,d]),w=t.get([f,f]);if(!numeric.neq(v.x,w.x)&&!numeric.neq(v.y,w.y)){u.setRow(f,u.getRow(d));continue}n=t.getRow(d).getBlock([d],[f-1]),o=u.getRow(f).getBlock([d],[f-1]),u.set([f,d],t.get([d,f]).neg().sub(n.dot(o)).div(v.sub(w)))}for(f=0;f<A;f++)n=u.getRow(f),u.setRow(f,n.div(n.norm2()));return u=u.transpose(),u=E.transjugate().dot(u),{lambda:t.getDiag(),E:u}},numeric.ccsSparse=function(a){var b,c,d,e,f,g,h,i=a.length,j=[];for(d=i-1;d!==-1;--d){c=a[d];for(e in c){e=parseInt(e);while(e>=j.length)j[j.length]=0;c[e]!==0&&j[e]++}}b=j.length,f=Array(b+1),f[0]=0;for(d=0;d<b;++d)f[d+1]=f[d]+j[d];g=Array(f[b]),h=Array(f[b]);for(d=i-1;d!==-1;--d){c=a[d];for(e in c)c[e]!==0&&(j[e]--,g[f[e]+j[e]]=d,h[f[e]+j[e]]=c[e])}return[f,g,h]},numeric.ccsFull=function(a){var b,c,d,e,f=a[0],g=a[1],h=a[2],i=numeric.ccsDim(a),j=i[0],k=i[1],l=numeric.rep([j,k],0);for(b=0;b<k;b++){d=f[b],e=f[b+1];for(c=d;c<e;++c)l[g[c]][b]=h[c]}return l},numeric.ccsTSolve=function(a,b,c,d,e){function s(a){var b;if(c[a]!==0)return;c[a]=1;for(b=m[a];b<m[a+1];++b)s(n[b]);e[r]=a,++r}var f,g,h,i,j,k,l,m=a[0],n=a[1],o=a[2],p=m.length-1,q=Math.max,r=0;typeof d=="undefined"&&(c=numeric.rep([p],0)),typeof d=="undefined"&&(d=numeric.linspace(0,c.length-1)),typeof e=="undefined"&&(e=[]);for(f=d.length-1;f!==-1;--f)s(d[f]);e.length=r;for(f=e.length-1;f!==-1;--f)c[e[f]]=0;for(f=d.length-1;f!==-1;--f)g=d[f],c[g]=b[g];for(f=e.length-1;f!==-1;--f){g=e[f],h=m[g],i=q(m[g+1],h);for(j=h;j!==i;++j)if(n[j]===g){c[g]/=o[j];break}l=c[g];for(j=h;j!==i;++j)k=n[j],k!==g&&(c[k]-=l*o[j])}return c},numeric.ccsDFS=function(a){this.k=Array(a),this.k1=Array(a),this.j=Array(a)},numeric.ccsDFS.prototype.dfs=function(a,b,c,d,e,f){var g,h,i,j=0,k=e.length,l=this.k,m=this.k1,n=this.j;if(d[a]!==0)return;d[a]=1,n[0]=a,l[0]=h=b[a],m[0]=i=b[a+1];for(;;)if(h>=i){e[k]=n[j];if(j===0)return;++k,--j,h=l[j],i=m[j]}else g=f[c[h]],d[g]===0?(d[g]=1,l[j]=h,++j,n[j]=g,h=b[g],m[j]=i=b[g+1]):++h},numeric.ccsLPSolve=function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o=a[0],p=a[1],q=a[2],r=o.length-1,s=0,t=b[0],u=b[1],v=b[2],w=t[e],x=t[e+1];d.length=0;for(h=w;h<x;++h)g.dfs(f[u[h]],o,p,c,d,f);for(h=d.length-1;h!==-1;--h)c[d[h]]=0;for(h=w;h!==x;++h)i=f[u[h]],c[i]=v[h];for(h=d.length-1;h!==-1;--h){i=d[h],j=o[i],k=o[i+1];for(l=j;l<k;++l)if(f[p[l]]===i){c[i]/=q[l];break}n=c[i];for(l=j;l<k;++l)m=f[p[l]],m!==i&&(c[m]-=n*q[l])}return c},numeric.ccsLUP1=function(a,b){var c,d,e,f,g,h,i,j=a[0].length-1,k=[numeric.rep([j+1],0),[],[]],l=[numeric.rep([j+1],0),[],[]],m=k[0],n=k[1],o=k[2],p=l[0],q=l[1],r=l[2],s=numeric.rep([j],0),t=numeric.rep([j],0),u=numeric.ccsLPSolve,v=Math.max,w=Math.abs,x=numeric.linspace(0,j-1),y=numeric.linspace(0,j-1),z=new numeric.ccsDFS(j);typeof b=="undefined"&&(b=1);for(c=0;c<j;++c){u(k,a,s,t,c,y,z),f=-1,g=-1;for(d=t.length-1;d!==-1;--d){e=t[d];if(e<=c)continue;h=w(s[e]),h>f&&(g=e,f=h)}w(s[c])<b*f&&(d=x[c],f=x[g],x[c]=f,y[f]=c,x[g]=d,y[d]=g,f=s[c],s[c]=s[g],s[g]=f),f=m[c],g=p[c],i=s[c],n[f]=x[c],o[f]=1,++f;for(d=t.length-1;d!==-1;--d)e=t[d],h=s[e],t[d]=0,s[e]=0,e<=c?(q[g]=e,r[g]=h,++g):(n[f]=x[e],o[f]=h/i,++f);m[c+1]=f,p[c+1]=g}for(d=n.length-1;d!==-1;--d)n[d]=y[n[d]];return{L:k,U:l,P:x,Pinv:y}},numeric.ccsDFS0=function(a){this.k=Array(a),this.k1=Array(a),this.j=Array(a)},numeric.ccsDFS0.prototype.dfs=function(a,b,c,d,e,f){var g,h,i,j=0,k=e.length,l=this.k,m=this.k1,n=this.j;if(d[a]!==0)return;d[a]=1,n[0]=a,l[0]=h=b[f[a]],m[0]=i=b[f[a]+1];for(;;){if(isNaN(h))throw new Error("Ow!");if(h>=i){e[k]=f[n[j]];if(j===0)return;++k,--j,h=l[j],i=m[j]}else g=c[h],d[g]===0?(d[g]=1,l[j]=h,++j,n[j]=g,g=f[g],h=b[g],m[j]=i=b[g+1]):++h}},numeric.ccsLPSolve0=function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p=a[0],q=a[1],r=a[2],s=p.length-1,t=0,u=b[0],v=b[1],w=b[2],x=u[e],y=u[e+1];d.length=0;for(i=x;i<y;++i)h.dfs(v[i],p,q,c,d,f,g);for(i=d.length-1;i!==-1;--i)j=d[i],c[g[j]]=0;for(i=x;i!==y;++i)j=v[i],c[j]=w[i];for(i=d.length-1;i!==-1;--i){j=d[i],n=g[j],k=p[j],l=p[j+1];for(m=k;m<l;++m)if(q[m]===n){c[n]/=r[m];break}o=c[n];for(m=k;m<l;++m)c[q[m]]-=o*r[m];c[n]=o}},numeric.ccsLUP0=function(a,b){var c,d,e,f,g,h,i,j=a[0].length-1,k=[numeric.rep([j+1],0),[],[]],l=[numeric.rep([j+1],0),[],[]],m=k[0],n=k[1],o=k[2],p=l[0],q=l[1],r=l[2],s=numeric.rep([j],0),t=numeric.rep([j],0),u=numeric.ccsLPSolve0,v=Math.max,w=Math.abs,x=numeric.linspace(0,j-1),y=numeric.linspace(0,j-1),z=new numeric.ccsDFS0(j);typeof b=="undefined"&&(b=1);for(c=0;c<j;++c){u(k,a,s,t,c,y,x,z),f=-1,g=-1;for(d=t.length-1;d!==-1;--d){e=t[d];if(e<=c)continue;h=w(s[x[e]]),h>f&&(g=e,f=h)}w(s[x[c]])<b*f&&(d=x[c],f=x[g],x[c]=f,y[f]=c,x[g]=d,y[d]=g),f=m[c],g=p[c],i=s[x[c]],n[f]=x[c],o[f]=1,++f;for(d=t.length-1;d!==-1;--d)e=t[d],h=s[x[e]],t[d]=0,s[x[e]]=0,e<=c?(q[g]=e,r[g]=h,++g):(n[f]=x[e],o[f]=h/i,++f);m[c+1]=f,p[c+1]=g}for(d=n.length-1;d!==-1;--d)n[d]=y[n[d]];return{L:k,U:l,P:x,Pinv:y}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(a){return[numeric.sup(a[1])+1,a[0].length-1]},numeric.ccsGetBlock=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=numeric.ccsDim(a),x=w[0],y=w[1];typeof b=="undefined"?b=numeric.linspace(0,x-1):typeof b=="number"&&(b=[b]),typeof c=="undefined"?c=numeric.linspace(0,y-1):typeof c=="number"&&(c=[c]),e=b.length,g=c.length,k=numeric.rep([y],0),l=[],m=[],n=[k,l,m],o=a[0],p=a[1],q=a[2],r=numeric.rep([x],0),s=0,t=numeric.rep([x],0);for(f=0;f<g;++f){i=c[f],u=o[i],v=o[i+1];for(d=u;d<v;++d)h=p[d],t[h]=1,r[h]=q[d];for(d=0;d<e;++d)j=b[d],t[j]&&(l[s]=d,m[s]=r[b[d]],++s);for(d=u;d<v;++d)h=p[d],t[h]=0;k[f+1]=s}return n},numeric.ccsDot=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=a[0],o=a[1],p=a[2],q=b[0],r=b[1],s=b[2],t=numeric.ccsDim(a),u=numeric.ccsDim(b),v=t[0],w=t[1],x=u[1],y=numeric.rep([v],0),z=numeric.rep([v],0),A=Array(v),B=numeric.rep([x],0),C=[],D=[],E=[B,C,D];for(e=0;e!==x;++e){f=q[e],g=q[e+1],k=0;for(d=f;d<g;++d){l=r[d],m=s[d],h=n[l],i=n[l+1];for(c=h;c<i;++c)j=o[c],z[j]===0&&(A[k]=j,z[j]=1,k+=1),y[j]=y[j]+p[c]*m}f=B[e],g=f+k,B[e+1]=g;for(d=k-1;d!==-1;--d)m=f+d,c=A[d],C[m]=c,D[m]=y[c],z[c]=0,y[c]=0;B[e+1]=B[e]+k}return E},numeric.ccsLUPSolve=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=a.L,w=a.U,x=a.P,y=b[0],z=!1;typeof y!="object"&&(b=[[0,b.length],numeric.linspace(0,b.length-1),b],y=b[0],z=!0),c=b[1],d=b[2],e=v[0].length-1,f=y.length-1,g=numeric.rep([e],0),h=Array(e),i=numeric.rep([e],0),j=Array(e),k=numeric.rep([f+1],0),l=[],m=[],n=numeric.ccsTSolve,u=0;for(o=0;o<f;++o){s=0,q=y[o],r=y[o+1];for(p=q;p<r;++p)t=a.Pinv[c[p]],j[s]=t,i[t]=d[p],++s;j.length=s,n(v,i,g,j,h);for(p=j.length-1;p!==-1;--p)i[j[p]]=0;n(w,g,i,h,j);if(z)return i;for(p=h.length-1;p!==-1;--p)g[h[p]]=0;for(p=j.length-1;p!==-1;--p)t=j[p],l[u]=t,m[u]=i[t],i[t]=0,++u;k[o+1]=u}return[k,l,m]},numeric.ccsbinop=function(a,b){return typeof b=="undefined"&&(b=""),numeric.compile("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+b+"for(i=0;i<n;++i) {\n"+"  j0 = Xi[i]; j1 = Xi[i+1];\n"+"  for(j=j0;j!==j1;++j) {\n"+"    k = Xj[j];\n"+"    x[k] = 1;\n"+"    Zj[p] = k;\n"+"    ++p;\n"+"  }\n"+"  j0 = Yi[i]; j1 = Yi[i+1];\n"+"  for(j=j0;j!==j1;++j) {\n"+"    k = Yj[j];\n"+"    y[k] = Yv[j];\n"+"    if(x[k] === 0) {\n"+"      Zj[p] = k;\n"+"      ++p;\n"+"    }\n"+"  }\n"+"  Zi[i+1] = p;\n"+"  j0 = Xi[i]; j1 = Xi[i+1];\n"+"  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n"+"  j0 = Zi[i]; j1 = Zi[i+1];\n"+"  for(j=j0;j!==j1;++j) {\n"+"    k = Zj[j];\n"+"    xk = x[k];\n"+"    yk = y[k];\n"+a+"\n"+"    Zv[j] = zk;\n"+"  }\n"+"  j0 = Xi[i]; j1 = Xi[i+1];\n"+"  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n"+"  j0 = Yi[i]; j1 = Yi[i+1];\n"+"  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n"+"}\n"+"return [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)isFinite(eval("1"+numeric.ops2[k]+"0"))?A="[Y[0],Y[1],numeric."+k+"(X,Y[2])]":A="NaN",isFinite(eval("0"+numeric.ops2[k]+"1"))?B="[X[0],X[1],numeric."+k+"(X[2],Y)]":B="NaN",isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?C="numeric.ccs"+k+"MM(X,Y)":C="NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=numeric.compile("X","Y",'if(typeof X === "number") return '+A+";\n"+'if(typeof Y === "number") return '+B+";\n"+"return "+C+";\n")}(),numeric.ccsScatter=function(a){var b,c,d,e,f=a[0],g=a[1],h=a[2],i=numeric.sup(g)+1,j=f.length,k=numeric.rep([i],0),l=Array(j),m=Array(j),n=numeric.rep([i],0);for(b=0;b<j;++b)n[g[b]]++;for(b=0;b<i;++b)k[b+1]=k[b]+n[b];c=k.slice(0);for(b=0;b<j;++b)e=g[b],d=c[e],l[d]=f[b],m[d]=h[b],c[e]=c[e]+1;return[k,l,m]},numeric.ccsGather=function(a){var b,c,d,e,f=a[0],g=a[1],h=a[2],i=f.length-1,j=g.length,k=Array(j),l=Array(j),m=Array(j),n=0;for(b=0;b<i;++b){d=f[b],e=f[b+1];for(c=d;c!==e;++c)l[n]=b,k[n]=g[c],m[n]=h[c],++n}return[k,l,m]},numeric.sdim=function dim(a,b,c){var d;typeof b=="undefined"&&(b=[]);if(typeof a!="object")return b;typeof c=="undefined"&&(c=0),c in b||(b[c]=0),a.length>b[c]&&(b[c]=a.length);for(d in a)a.hasOwnProperty(d)&&dim(a[d],b,c+1);return b},numeric.sclone=function clone(a,b,c){var d,e;typeof b=="undefined"&&(b=0),typeof c=="undefined"&&(c=numeric.sdim(a).length),e=Array(a.length);if(b===c-1){for(d in a)a.hasOwnProperty(d)&&(e[d]=a[d]);return e}for(d in a)a.hasOwnProperty(d)&&(e[d]=clone(a[d],b+1,c));return e},numeric.sdiag=function(a){var b,c,d=a.length,e=Array(d);for(b=d-1;b>=1;b-=2)c=b-1,e[b]=[],e[b][b]=a[b],e[c]=[],e[c][c]=a[c];return b===0&&(e[0]=[],e[0][0]=a[b]),e},numeric.sidentity=function(a){return numeric.sdiag(numeric.rep([a],1))},numeric.stranspose=function(a){var b,c,d,e=[],f=a.length;for(b in a){if(!a.hasOwnProperty(b))continue;d=a[b];for(c in d){if(!d.hasOwnProperty(c))continue;typeof e[c]!="object"&&(e[c]=[]),e[c][b]=d[c]}}return e},numeric.sLUP=function(){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(a,b){var c,d,e,f,g,h,i,j=a.length,k=b.length,l=numeric.stranspose(b),m=l.length,n=Array(j);for(e=j-1;e>=0;e--){i=[],c=a[e];for(g=m-1;g>=0;g--){h=0,d=l[g];for(f in c){if(!c.hasOwnProperty(f))continue;f in d&&(h+=c[f]*d[f])}h&&(i[g]=h)}n[e]=i}return n},numeric.sdotMV=function(a,b){var c,d,e,f,g=a.length,h=Array(g);for(d=g-1;d>=0;d--){c=a[d],f=0;for(e in c){if(!c.hasOwnProperty(e))continue;b[e]&&(f+=c[e]*b[e])}f&&(h[d]=f)}return h},numeric.sdotVM=function(a,b){var c,d,e,f,g=[];for(c in a){if(!a.hasOwnProperty(c))continue;e=b[c],f=a[c];for(d in e){if(!e.hasOwnProperty(d))continue;g[d]||(g[d]=0),g[d]+=f*e[d]}}return g},numeric.sdotVV=function(a,b){var c,d=0;for(c in a)a[c]&&b[c]&&(d+=a[c]*b[c]);return d},numeric.sdot=function(a,b){var c=numeric.sdim(a).length,d=numeric.sdim(b).length,e=c*1e3+d;switch(e){case 0:return a*b;case 1001:return numeric.sdotVV(a,b);case 2001:return numeric.sdotMV(a,b);case 1002:return numeric.sdotVM(a,b);case 2002:return numeric.sdotMM(a,b);default:throw new Error("numeric.sdot not implemented for tensors of order "+c+" and "+d)}},numeric.sscatter=function(a){var b,c,d,e,f=a[0].length,g=a.length,h=[];for(c=f-1;c>=0;--c){if(!a[g-1][c])continue;e=h;for(d=0;d<g-2;d++)b=a[d][c],e[b]||(e[b]=[]),e=e[b];e[a[d][c]]=a[d+1][c]}return h},numeric.sgather=function gather(a,b,c){var d,e,f;typeof b=="undefined"&&(b=[]),typeof c=="undefined"&&(c=[]),d=c.length;for(e in a)if(a.hasOwnProperty(e)){c[d]=parseInt(e),f=a[e];if(typeof f=="number"){if(f){if(b.length===0)for(e=d+1;e>=0;--e)b[e]=[];for(e=d;e>=0;--e)b[e].push(c[e]);b[d+1].push(f)}}else gather(f,b,c)}return c.length>d&&c.pop(),b},numeric.cLU=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=a[0],x=a[1],y=a[2],z=w.length,A=0;for(b=0;b<z;b++)w[b]>A&&(A=w[b]);A++,h=Array(A),i=Array(A),j=numeric.rep([A],Infinity),k=numeric.rep([A],-Infinity);for(d=0;d<z;d++)b=w[d],c=x[d],c<j[b]&&(j[b]=c),c>k[b]&&(k[b]=c);for(b=0;b<A-1;b++)k[b]>k[b+1]&&(k[b+1]=k[b]);for(b=A-1;b>=1;b--)j[b]<j[b-1]&&(j[b-1]=j[b]);o=0,p=0;for(b=0;b<A;b++)i[b]=numeric.rep([k[b]-j[b]+1],0),h[b]=numeric.rep([b-j[b]],0),o+=b-j[b]+1,p+=k[b]-b+1;for(d=0;d<z;d++)b=w[d],i[b][x[d]-j[b]]=y[d];for(b=0;b<A-1;b++){e=b-j[b],l=i[b];for(c=b+1;j[c]<=b&&c<A;c++){f=b-j[c],g=k[b]-b,m=i[c],n=m[f]/l[e];if(n){for(d=1;d<=g;d++)m[d+f]-=n*l[d+e];h[c][b-j[c]]=n}}}l=[],m=[],q=[],r=[],s=[],t=[],z=0,u=0;for(b=0;b<A;b++){e=j[b],f=k[b],v=i[b];for(c=b;c<=f;c++)v[c-e]&&(l[z]=b,m[z]=c,q[z]=v[c-e],z++);v=h[b];for(c=e;c<b;c++)v[c-e]&&(r[u]=b,s[u]=c,t[u]=v[c-e],u++);r[u]=b,s[u]=b,t[u]=1,u++}return{U:[l,m,q],L:[r,s,t]}},numeric.cLUsolve=function(a,b){var c,d=a.L,e=a.U,f=numeric.clone(b),g=d[0],h=d[1],i=d[2],j=e[0],k=e[1],l=e[2],m=j.length,n=g.length,o=f.length,p=0;for(c=0;c<o;c++){while(h[p]<c)f[c]-=i[p]*f[h[p]],p++;p++}p=m-1;for(c=o-1;c>=0;c--){while(k[p]>c)f[c]-=l[p]*f[k[p]],p--;f[c]/=l[p],p--}return f},numeric.cgrid=function(a,b){var c,d,e,f;typeof a=="number"&&(a=[a,a]),c=numeric.rep(a,-1);if(typeof b!="function")switch(b){case"L":b=function(b,c){return b>=a[0]/2||c<a[1]/2};break;default:b=function(){return!0}}f=0;for(d=1;d<a[0]-1;d++)for(e=1;e<a[1]-1;e++)b(d,e)&&(c[d][e]=f,f++);return c},numeric.cdelsq=function(a){var b,c,d,e,f,g=[[-1,0],[0,-1],[0,1],[1,0]],h=numeric.dim(a),i=h[0],j=h[1],k=[],l=[],m=[];for(b=1;b<i-1;b++)for(c=1;c<j-1;c++){if(a[b][c]<0)continue;for(d=0;d<4;d++){e=b+g[d][0],f=c+g[d][1];if(a[e][f]<0)continue;k.push(a[b][c]),l.push(a[e][f]),m.push(-1)}k.push(a[b][c]),l.push(a[b][c]),m.push(4)}return[k,l,m]},numeric.cdotMV=function(a,b){var c,d,e=a[0],f=a[1],g=a[2],h=e.length,i=0;for(d=0;d<h;d++)e[d]>i&&(i=e[d]);i++,c=numeric.rep([i],0);for(d=0;d<h;d++)c[e[d]]+=g[d]*b[f[d]];return c},numeric.Spline=function(a,b,c,d,e){this.x=a,this.yl=b,this.yr=c,this.kl=d,this.kr=e},numeric.Spline.prototype._at=function(a,b){var a,c=this.x,d=this.yl,e=this.yr,f=this.kl,g=this.kr,h=numeric.add,i=numeric.sub,j=numeric.mul,k=i(j(f[b],c[b+1]-c[b]),i(e[b+1],d[b])),l=h(j(g[b+1],c[b]-c[b+1]),i(e[b+1],d[b])),m=(a-c[b])/(c[b+1]-c[b]),n=m*(1-m);return h(h(h(j(1-m,d[b]),j(m,e[b+1])),j(k,n*(1-m))),j(l,n*m))},numeric.Spline.prototype.at=function(a){var b,c,d,e,f,g,h,i;if(typeof a=="number"){b=this.x,c=b.length,g=Math.floor,d=0,e=c-1;while(e-d>1)f=g((d+e)/2),b[f]<=a?d=f:e=f;return this._at(a,d)}c=a.length,i=Array(c);for(h=c-1;h!==-1;--h)i[h]=this.at(a[h]);return i},numeric.Spline.prototype.diff=function(){var a,b,c,d=this.x,e=this.yl,f=this.yr,g=this.kl,h=this.kr,i=e.length,j=g,k=h,l=Array(i),m=Array(i),n=numeric.add,o=numeric.mul,p=numeric.div,q=numeric.sub;for(a=i-1;a!==-1;--a)b=d[a+1]-d[a],c=q(f[a+1],e[a]),l[a]=p(n(o(c,6),o(g[a],-4*b),o(h[a+1],-2*b)),b*b),m[a+1]=p(n(o(c,-6),o(g[a],2*b),o(h[a+1],4*b)),b*b);return new numeric.Spline(d,j,k,l,m)},numeric.Spline.prototype.roots=function(){function I(a){return a*a}var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;a=[],b=this.x,c=this.yl,d=this.yr,e=this.kl,f=this.kr,typeof c[0]=="number"&&(c=[c],d=[d],e=[e],f=[f]),g=c.length,h=b.length-1,a=Array(g),G=Math.sqrt;for(i=0;i!==g;++i){l=c[i],m=d[i],n=e[i],o=f[i],p=[];for(j=0;j!==h;j++){j>0&&m[j]*l[j]<0&&p.push(b[j]),x=b[j+1]-b[j],y=b[j],s=l[j],t=m[j+1],q=n[j]/x,r=o[j+1]/x,w=I(q-r+3*(s-t))+12*r*s,u=r+3*s+2*q-3*t,v=3*(r+q+2*(s-t)),w<=0?(A=u/v,A>b[j]&&A<b[j+1]?z=[b[j],A,b[j+1]]:z=[b[j],b[j+1]]):(A=(u-G(w))/v,B=(u+G(w))/v,z=[b[j]],A>b[j]&&A<b[j+1]&&z.push(A),B>b[j]&&B<b[j+1]&&z.push(B),z.push(b[j+1])),D=z[0],A=this._at(D,j);for(k=0;k<z.length-1;k++){E=z[k+1],B=this._at(E,j);if(A===0){p.push(D),D=E,A=B;continue}if(B===0||A*B>0){D=E,A=B;continue}H=0;for(;;){F=(A*E-B*D)/(A-B);if(F<=D||F>=E)break;C=this._at(F,j);if(C*B>0)E=F,B=C,H===-1&&(A*=.5),H=-1;else{if(!(C*A>0))break;D=F,A=C,H===1&&(B*=.5),H=1}}p.push(F),D=z[k+1],A=this._at(D,j)}B===0&&p.push(E)}a[i]=p}return typeof this.yl[0]=="number"?a[0]:a},numeric.spline=function(a,b,c,d){var e,f,g,h=a.length,i=[],j=[],k=[],l=numeric.sub,m=numeric.mul,n=numeric.add;for(e=h-2;e>=0;e--)j[e]=a[e+1]-a[e],k[e]=l(b[e+1],b[e]);if(typeof c=="string"||typeof d=="string")c=d="periodic";f=[[],[],[]];switch(typeof c){case"undefined":i[0]=m(3/(j[0]*j[0]),k[0]),f[0].push(0,0),f[1].push(0,1),f[2].push(2/j[0],1/j[0]);break;case"string":i[0]=n(m(3/(j[h-2]*j[h-2]),k[h-2]),m(3/(j[0]*j[0]),k[0])),f[0].push(0,0,0),f[1].push(h-2,0,1),f[2].push(1/j[h-2],2/j[h-2]+2/j[0],1/j[0]);break;default:i[0]=c,f[0].push(0),f[1].push(0),f[2].push(1)}for(e=1;e<h-1;e++)i[e]=n(m(3/(j[e-1]*j[e-1]),k[e-1]),m(3/(j[e]*j[e]),k[e])),f[0].push(e,e,e),f[1].push(e-1,e,e+1),f[2].push(1/j[e-1],2/j[e-1]+2/j[e],1/j[e]);switch(typeof d){case"undefined":i[h-1]=m(3/(j[h-2]*j[h-2]),k[h-2]),f[0].push(h-1,h-1),f[1].push(h-2,h-1),f[2].push(1/j[h-2],2/j[h-2]);break;case"string":f[1][f[1].length-1]=0;break;default:i[h-1]=d,f[0].push(h-1),f[1].push(h-1),f[2].push(1)}typeof i[0]!="number"?i=numeric.transpose(i):i=[i],g=Array(i.length);if(typeof c=="string")for(e=g.length-1;e!==-1;--e)g[e]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(f)),i[e]),g[e][h-1]=g[e][0];else for(e=g.length-1;e!==-1;--e)g[e]=numeric.cLUsolve(numeric.cLU(f),i[e]);return typeof b[0]=="number"?g=g[0]:g=numeric.transpose(g),new numeric.Spline(a,b,b,g,g)},numeric.fftpow2=function fftpow2(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o=a.length;if(o===1)return;c=Math.cos,d=Math.sin,g=Array(o/2),h=Array(o/2),i=Array(o/2),j=Array(o/2),f=o/2;for(e=o-1;e!==-1;--e)--f,i[f]=a[e],j[f]=b[e],--e,g[f]=a[e],h[f]=b[e];fftpow2(g,h),fftpow2(i,j),f=o/2,l=-6.283185307179586/o;for(e=o-1;e!==-1;--e)--f,f===-1&&(f=o/2-1),k=l*e,m=c(k),n=d(k),a[e]=g[f]+m*i[f]-n*j[f],b[e]=h[f]+m*j[f]+n*i[f]},numeric._ifftpow2=function _ifftpow2(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o=a.length;if(o===1)return;c=Math.cos,d=Math.sin,g=Array(o/2),h=Array(o/2),i=Array(o/2),j=Array(o/2),f=o/2;for(e=o-1;e!==-1;--e)--f,i[f]=a[e],j[f]=b[e],--e,g[f]=a[e],h[f]=b[e];_ifftpow2(g,h),_ifftpow2(i,j),f=o/2,l=6.283185307179586/o;for(e=o-1;e!==-1;--e)--f,f===-1&&(f=o/2-1),k=l*e,m=c(k),n=d(k),a[e]=g[f]+m*i[f]-n*j[f],b[e]=h[f]+m*j[f]+n*i[f]},numeric.ifftpow2=function(a,b){numeric._ifftpow2(a,b),numeric.diveq(a,a.length),numeric.diveq(b,b.length)},numeric.convpow2=function(a,b,c,d){var e,f,g,h,i,j;numeric.fftpow2(a,b),numeric.fftpow2(c,d),f=a.length;for(e=f-1;e!==-1;--e)g=a[e],i=b[e],h=c[e],j=d[e],a[e]=g*h-i*j,b[e]=g*j+i*h;numeric.ifftpow2(a,b)},numeric.T.prototype.fft=function(){var a,b,c,d,e=this.x,f=this.y,g=e.length,h=Math.log,i=h(2),j=Math.ceil(h(2*g-1)/i),k=Math.pow(2,j),l=numeric.rep([k],0),m=numeric.rep([k],0),n=Math.cos,o=Math.sin,p=-3.141592653589793/g,q=numeric.rep([k],0),r=numeric.rep([k],0),s=Math.floor(g/2);for(a=0;a<g;a++)q[a]=e[a];if(typeof f!="undefined")for(a=0;a<g;a++)r[a]=f[a];l[0]=1;for(a=1;a<=k/2;a++)b=p*a*a,l[a]=n(b),m[a]=o(b),l[k-a]=n(b),m[k-a]=o(b);return c=new numeric.T(q,r),d=new numeric.T(l,m),c=c.mul(d),numeric.convpow2(c.x,c.y,numeric.clone(d.x),numeric.neg(d.y)),c=c.mul(d),c.x.length=g,c.y.length=g,c},numeric.T.prototype.ifft=function(){var a,b,c,d,e=this.x,f=this.y,g=e.length,h=Math.log,i=h(2),j=Math.ceil(h(2*g-1)/i),k=Math.pow(2,j),l=numeric.rep([k],0),m=numeric.rep([k],0),n=Math.cos,o=Math.sin,p=3.141592653589793/g,q=numeric.rep([k],0),r=numeric.rep([k],0),s=Math.floor(g/2);for(a=0;a<g;a++)q[a]=e[a];if(typeof f!="undefined")for(a=0;a<g;a++)r[a]=f[a];l[0]=1;for(a=1;a<=k/2;a++)b=p*a*a,l[a]=n(b),m[a]=o(b),l[k-a]=n(b),m[k-a]=o(b);return c=new numeric.T(q,r),d=new numeric.T(l,m),c=c.mul(d),numeric.convpow2(c.x,c.y,numeric.clone(d.x),numeric.neg(d.y)),c=c.mul(d),c.x.length=g,c.y.length=g,c.div(g)},numeric.gradient=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=b.length,x=a(b);if(isNaN(x))throw new Error("gradient: f(x) is a NaN!");c=Math.max,e=numeric.clone(b),h=Array(w),i=numeric.div,j=numeric.sub,c=Math.max,l=.001,m=Math.abs,n=Math.min,r=0;for(d=0;d<w;d++){v=c(1e-6*x,1e-8);for(;;){++r;if(r>20)throw new Error("Numerical gradient fails");e[d]=b[d]+v,f=a(e),e[d]=b[d]-v,g=a(e),e[d]=b[d];if(isNaN(f)||isNaN(g)){v/=16;continue}h[d]=(f-g)/(2*v),o=b[d]-v,p=b[d],q=b[d]+v,s=(f-x)/v,t=(x-g)/v,u=c(m(h[d]),m(x),m(f),m(g),m(o),m(p),m(q),1e-8),k=n(c(m(s-h[d]),m(t-h[d]),m(s-t))/u,v/u);if(!(k>l))break;v/=16}}return h},numeric.uncmin=function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=numeric.gradient;typeof g=="undefined"&&(g={}),typeof c=="undefined"&&(c=1e-8),typeof d=="undefined"&&(d=function(b){return K(a,b)}),typeof e=="undefined"&&(e=1e3),b=numeric.clone(b),h=b.length,i=a(b);if(isNaN(i))throw new Error("uncmin: f(x0) is a NaN!");l=Math.max,m=numeric.norm2,c=l(c,numeric.epsilon),q=g.Hinv||numeric.identity(h),r=numeric.dot,s=numeric.inv,t=numeric.sub,u=numeric.add,v=numeric.tensor,w=numeric.div,x=numeric.mul,y=numeric.all,z=numeric.isFinite,A=numeric.neg,B=0,J="",o=d(b);while(B<e){if(typeof f=="function"&&f(B,b,i,o,q)){J="Callback returned true";break}if(!y(z(o))){J="Gradient has Infinity or NaN";break}n=A(r(q,o));if(!y(z(n))){J="Search direction has Infinity or NaN";break}I=m(n);if(I<c){J="Newton step smaller than tol";break}H=1,k=r(o,n),D=b;while(B<e){if(H*I<c)break;C=x(n,H),D=u(b,C),j=a(D);if(j-i>=.1*H*k||isNaN(j)){H*=.5,++B;continue}break}if(H*I<c){J="Line search step size smaller than tol";break}if(B===e){J="maxit reached during line search";break}p=d(D),E=t(p,o),G=r(E,C),F=r(q,E),q=t(u(q,x((G+r(E,F))/(G*G),v(C,C))),w(u(v(F,C),v(C,F)),G)),b=D,i=j,o=p,++B}return{solution:b,f:i,gradient:o,invHessian:q,iterations:B,message:J}},numeric.Dopri=function(a,b,c,d,e,f,g){this.x=a,this.y=b,this.f=c,this.ymid=d,this.iterations=e,this.events=g,this.message=f},numeric.Dopri.prototype._at=function(a,b){function x(a){return a*a}var a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;return c=this,d=c.x,e=c.y,f=c.f,g=c.ymid,h=d.length,o=Math.floor,q=.5,r=numeric.add,s=numeric.mul,t=numeric.sub,i=d[b],j=d[b+1],l=e[b],m=e[b+1],p=j-i,k=i+q*p,n=g[b],u=t(f[b],s(l,1/(i-k)+2/(i-j))),v=t(f[b+1],s(m,1/(j-k)+2/(j-i))),w=[x(a-j)*(a-k)/x(i-j)/(i-k),x(a-i)*x(a-j)/x(i-k)/x(j-k),x(a-i)*(a-k)/x(j-i)/(j-k),(a-i)*x(a-j)*(a-k)/x(i-j)/(i-k),(a-j)*x(a-i)*(a-k)/x(i-j)/(j-k)],r(r(r(r(s(l,w[0]),s(n,w[1])),s(m,w[2])),s(u,w[3])),s(v,w[4]))},numeric.Dopri.prototype.at=function(a){var b,c,d,e,f,g,h=Math.floor;if(typeof a!="number"){e=a.length,f=Array(e);for(b=e-1;b!==-1;--b)f[b]=this.at(a[b]);return f}g=this.x,b=0,c=g.length-1;while(c-b>1)d=h(.5*(b+c)),g[d]<=a?b=d:c=d;return this._at(a,b)},numeric.dopri=function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb;typeof e=="undefined"&&(e=1e-6),typeof f=="undefined"&&(f=1e3),h=[a],i=[c],j=[d(a,c)],q=[],r=.2,s=[.075,.225],t=[44/45,-56/15,32/9],u=[19372/6561,-25360/2187,64448/6561,-212/729],v=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],w=[35/384,0,500/1113,125/192,-2187/6784,11/84],x=[.10013431883002395,0,.3918321794184259,-0.02982460176594817,.05893268337240795,-0.04497888809104361,.023904308236133973],y=[.2,.3,.8,8/9,1,1],z=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],A=0,D=(b-a)/10,E=0,F=numeric.add,G=numeric.mul,J=Math.max,K=Math.min,L=Math.abs,M=numeric.norminf,N=Math.pow,O=numeric.any,P=numeric.lt,Q=numeric.and,R=numeric.sub,V=new numeric.Dopri(h,i,j,q,-1,""),typeof g=="function"&&(S=g(a,c));while(a<b&&E<f){++E,a+D>b&&(D=b-a),k=d(a+y[0]*D,F(c,G(r*D,j[A]))),l=d(a+y[1]*D,F(F(c,G(s[0]*D,j[A])),G(s[1]*D,k))),m=d(a+y[2]*D,F(F(F(c,G(t[0]*D,j[A])),G(t[1]*D,k)),G(t[2]*D,l))),n=d(a+y[3]*D,F(F(F(F(c,G(u[0]*D,j[A])),G(u[1]*D,k)),G(u[2]*D,l)),G(u[3]*D,m))),o=d(a+y[4]*D,F(F(F(F(F(c,G(v[0]*D,j[A])),G(v[1]*D,k)),G(v[2]*D,l)),G(v[3]*D,m)),G(v[4]*D,n))),H=F(F(F(F(F(c,G(j[A],D*w[0])),G(l,D*w[2])),G(m,D*w[3])),G(n,D*w[4])),G(o,D*w[5])),p=d(a+D,H),B=F(F(F(F(F(G(j[A],D*z[0]),G(l,D*z[2])),G(m,D*z[3])),G(n,D*z[4])),G(o,D*z[5])),G(p,D*z[6])),typeof B=="number"?I=L(B):I=M(B);if(I>e){D=.2*D*N(e/I,.25);if(a+D===a){V.msg="Step size became too small";break}continue}q[A]=F(F(F(F(F(F(c,G(j[A],D*x[0])),G(l,D*x[2])),G(m,D*x[3])),G(n,D*x[4])),G(o,D*x[5])),G(p,D*x[6])),++A,h[A]=a+D,i[A]=H,j[A]=p;if(typeof g=="function"){X=a,Y=a+.5*D,T=g(Y,q[A-1]),U=Q(P(S,0),P(0,T)),O(U)||(X=Y,Y=a+D,S=T,T=g(Y,H),U=Q(P(S,0),P(0,T)));if(O(U)){ab=0,bb=1,cb=1;for(;;){if(typeof S=="number")Z=(cb*T*X-bb*S*Y)/(cb*T-bb*S);else{Z=Y;for(C=S.length-1;C!==-1;--C)S[C]<0&&T[C]>0&&(Z=K(Z,(cb*T[C]*X-bb*S[C]*Y)/(cb*T[C]-bb*S[C])))}if(Z<=X||Z>=Y)break;W=V._at(Z,A-1),_=g(Z,W),$=Q(P(S,0),P(0,_)),O($)?(Y=Z,T=_,U=$,cb=1,ab===-1?bb*=.5:bb=1,ab=-1):(X=Z,S=_,bb=1,ab===1?cb*=.5:cb=1,ab=1)}return H=V._at(.5*(a+Z),A-1),V.f[A]=d(Z,W),V.x[A]=Z,V.y[A]=W,V.ymid[A-1]=H,V.events=U,V.iterations=E,V}}a+=D,c=H,S=T,D=K(.8*D*N(e/I,.25),4*D)}return V.iterations=E,V},numeric.LU=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;b=b||!1,c=Math.abs,m=a.length,n=m-1,o=new Array(m),b||(a=numeric.clone(a));for(f=0;f<m;++f){j=f,i=a[f],l=c(i[f]);for(e=f+1;e<m;++e)g=c(a[e][f]),l<g&&(l=g,j=e);o[f]=j,j!=f&&(a[f]=a[j],a[j]=i,i=a[f]),h=i[f];for(d=f+1;d<m;++d)a[d][f]/=h;for(d=f+1;d<m;++d){k=a[d];for(e=f+1;e<n;++e)k[e]-=k[f]*i[e],++e,k[e]-=k[f]*i[e];e===n&&(k[e]-=k[f]*i[e])}}return{LU:a,P:o}},numeric.LUsolve=function(a,b){var c,d,e,f,g,h=a.LU,i=h.length,j=numeric.clone(b),k=a.P;for(c=i-1;c!==-1;--c)j[c]=b[c];for(c=0;c<i;++c){e=k[c],k[c]!==c&&(g=j[c],j[c]=j[e],j[e]=g),f=h[c];for(d=0;d<c;++d)j[c]-=j[d]*f[d]}for(c=i-1;c>=0;--c){f=h[c];for(d=c+1;d<i;++d)j[c]-=j[d]*f[d];j[c]/=f[c]}return j},numeric.solve=function(a,b,c){return numeric.LUsolve(numeric.LU(a,c),b)},numeric.echelonize=function(a){var b,c,d,e,f,g,h,i,j=numeric.dim(a),k=j[0],l=j[1],m=numeric.identity(k),n=Array(k),o=Math.abs,p=numeric.diveq;a=numeric.clone(a);for(b=0;b<k;++b){d=0,f=a[b],g=m[b];for(c=1;c<l;++c)o(f[d])<o(f[c])&&(d=c);n[b]=d,p(g,f[d]),p(f,f[d]);for(c=0;c<k;++c)if(c!==b){h=a[c],i=h[d];for(e=l-1;e!==-1;--e)h[e]-=f[e]*i;h=m[c];for(e=k-1;e!==-1;--e)h[e]-=g[e]*i}}return{I:m,A:a,P:n}},numeric.__solveLP=function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t=numeric.sum,u=numeric.log,v=numeric.mul,w=numeric.sub,x=numeric.dot,y=numeric.div,z=numeric.add,A=a.length,B=c.length,C=!1,D=0,E=1,F=numeric.transpose(b),G=numeric.svd,H=numeric.transpose,I=numeric.leq,J=Math.sqrt,K=Math.abs,L=numeric.muleq,M=numeric.norminf,N=numeric.any,O=Math.min,P=numeric.all,Q=numeric.gt,R=Array(A),S=Array(B),T=numeric.rep([B],1),U=numeric.solve,V=w(c,x(b,f)),W=x(a,a);for(j=D;j<e;++j){for(l=B-1;l!==-1;--l)S[l]=y(b[l],V[l]);n=H(S);for(l=A-1;l!==-1;--l)R[l]=t(n[l]);E=.25*K(W/x(a,R)),o=100*J(W/x(R,R));if(!isFinite(E)||E>o)E=o;k=z(a,v(E,R)),i=x(n,S);for(l=A-1;l!==-1;--l)i[l][l]+=1;m=U(i,y(k,E),!0),p=y(V,x(b,m)),q=1;for(l=B-1;l!==-1;--l)p[l]<0&&(q=O(q,-0.999*p[l]));h=w(f,v(m,q)),V=w(c,x(b,h));if(!P(Q(V,0)))return{solution:f,message:"",iterations:j};f=h;if(E<d)return{solution:h,message:"",iterations:j};if(g){r=x(a,k),s=x(b,k),C=!0;for(l=B-1;l!==-1;--l)if(r*s[l]<0){C=!1;break}}else f[A-1]>=0?C=!1:C=!0;if(C)return{solution:h,message:"Unbounded",iterations:j}}return{solution:f,message:"maximum iteration count exceeded",iterations:j}},numeric._solveLP=function(a,b,c,d,e){var f,g,h=a.length,i=c.length,j=numeric.sum,k=numeric.log,l=numeric.mul,m=numeric.sub,n=numeric.dot,o=numeric.div,p=numeric.add,q=numeric.rep([h],0).concat([1]),r=numeric.rep([i,1],-1),s=numeric.blockMatrix([[b,r]]),t=c,u=numeric.rep([h],0).concat(Math.max(0,numeric.sup(numeric.neg(c)))+1),v=numeric.__solveLP(q,s,t,d,e,u,!1),w=numeric.clone(v.solution);return w.length=h,f=numeric.inf(m(c,n(b,w))),f<0?{solution:NaN,message:"Infeasible",iterations:v.iterations}:(g=numeric.__solveLP(a,b,c,d,e-v.iterations,w,!0),g.iterations+=v.iterations,g)},numeric.solveLP=function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;typeof g=="undefined"&&(g=1e3),typeof f=="undefined"&&(f=numeric.epsilon);if(typeof d=="undefined")return numeric._solveLP(a,b,c,f,g);h=d.length,i=d[0].length,j=b.length,k=numeric.echelonize(d),l=numeric.rep([i],0),m=k.P,n=[];for(o=m.length-1;o!==-1;--o)l[m[o]]=1;for(o=i-1;o!==-1;--o)l[o]===0&&n.push(o);p=numeric.getRange,q=numeric.linspace(0,h-1),r=numeric.linspace(0,j-1),s=p(d,q,n),t=p(b,r,m),u=p(b,r,n),v=numeric.dot,w=numeric.sub,x=v(t,k.I),y=w(u,v(x,s)),z=w(c,v(x,e)),A=Array(m.length),B=Array(n.length);for(o=m.length-1;o!==-1;--o)A[o]=a[m[o]];for(o=n.length-1;o!==-1;--o)B[o]=a[n[o]];C=w(B,v(A,v(k.I,s))),D=numeric._solveLP(C,y,z,f,g),E=D.solution;if(E!==E)return D;F=v(k.I,w(e,v(s,E))),G=Array(a.length);for(o=m.length-1;o!==-1;--o)G[m[o]]=F[o];for(o=n.length-1;o!==-1;--o)G[n[o]]=E[o];return{solution:G,message:D.message,iterations:D.iterations}},numeric.MPStoLP=function(a){function v(d){throw new Error("MPStoLP: "+d+"\nLine "+e+": "+a[e]+"\nCurrent state: "+c[b]+"\n")}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;a instanceof String&&a.split("\n"),b=0,c=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],d=a.length,h=0,i={},j=[],k=0,l={},m=0,o=[],p=[],q=[];for(e=0;e<d;++e){g=a[e],r=g.match(/\S*/g),s=[];for(f=0;f<r.length;++f)r[f]!==""&&s.push(r[f]);if(s.length===0)continue;for(f=0;f<c.length;++f)if(g.substr(0,c[f].length)===c[f])break;if(f<c.length){b=f,f===1&&(n=s[1]);if(f===6)return{name:n,c:o,A:numeric.transpose(p),b:q,rows:i,vars:l};continue}switch(b){case 0:case 1:v("Unexpected line");case 2:switch(s[0]){case"N":h===0?h=s[1]:v("Two or more N rows");break;case"L":i[s[1]]=k,j[k]=1,q[k]=0,++k;break;case"G":i[s[1]]=k,j[k]=-1,q[k]=0,++k;break;case"E":i[s[1]]=k,j[k]=0,q[k]=0,++k;break;default:v("Parse error "+numeric.prettyPrint(s))}break;case 3:l.hasOwnProperty(s[0])||(l[s[0]]=m,o[m]=0,p[m]=numeric.rep([k],0),++m),t=l[s[0]];for(f=1;f<s.length;f+=2){if(s[f]===h){o[t]=parseFloat(s[f+1]);continue}u=i[s[f]],p[t][u]=(j[u]<0?-1:1)*parseFloat(s[f+1])}break;case 4:for(f=1;f<s.length;f+=2)q[i[s[f]]]=(j[i[s[f]]]<0?-1:1)*parseFloat(s[f+1]);break;case 5:break;case 6:v("Internal error")}}v("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(a,b,c,d,e,f,g){function h(a){var b,d,e=this,f=a.length,g=0,h=e.i=e.j=e.m=0;e.S=[],e.c=[],f||(a=[f++]);while(g<c)e.S[g]=g++;for(g=0;g<c;g++)b=e.S[g],h=k(h+b+a[g%f]),d=e.S[h],e.S[g]=d,e.S[h]=b;e.g=function(a){var b,d=e.S,f=k(e.i+1),g=d[f],h=k(e.j+g),i=d[h];d[f]=i,d[h]=g,b=d[k(g+i)];while(--a)f=k(f+1),g=d[f],h=k(h+g),i=d[h],d[f]=i,d[h]=g,b=b*c+d[k(g+i)];return e.i=f,e.j=h,b},e.g(c)}function i(a,b,c,d,e){c=[],e=typeof a;if(b&&e=="object")for(d in a)if(d.indexOf("S")<5)try{c.push(i(a[d],b-1))}catch(f){}return c.length?c:a+(e!="string"?"\0":"")}function j(a,b,c,d){a+="",c=0;for(d=0;d<a.length
;d++)b[k(d)]=k((c^=b[k(d)]*19)+a.charCodeAt(d));a="";for(d in b)a+=String.fromCharCode(b[d]);return a}function k(a){return a&c-1}b.seedrandom=function(k,l){var m,n=[];return k=j(i(l?[k,a]:arguments.length?k:[(new Date).getTime(),a,window],3),n),m=new h(n),j(m.S,a),b.random=function(){var a=m.g(d),b=g,h=0;while(a<e)a=(a+h)*c,b*=c,h=m.g(1);while(a>=f)a/=2,b/=2,h>>>=1;return(a+h)/b},k},g=b.pow(c,d),e=b.pow(2,e),f=e*2,j(b.random(),a)}([],numeric.seedrandom,256,6,52),function(a){function b(a){var c,d,e;if(typeof a!="object")return a;c=[],e=a.length;for(d=0;d<e;d++)c[d+1]=b(a[d]);return c}function c(a){var b,d,e;if(typeof a!="object")return a;b=[],e=a.length;for(d=1;d<e;d++)b[d-1]=c(a[d]);return b}function d(a,b,c){var d,e,f,g,h;for(f=1;f<=c;f+=1){a[f][f]=1/a[f][f],h=-a[f][f];for(d=1;d<f;d+=1)a[d][f]=h*a[d][f];g=f+1;if(c<g)break;for(e=g;e<=c;e+=1){h=a[f][e],a[f][e]=0;for(d=1;d<=f;d+=1)a[d][e]=a[d][e]+h*a[d][f]}}}function e(a,b,c,d){var e,f,g,h;for(f=1;f<=c;f+=1){h=0;for(e=1;e<f;e+=1)h+=a[e][f]*d[e];d[f]=(d[f]-h)/a[f][f]}for(g=1;g<=c;g+=1){f=c+1-g,d[f]=d[f]/a[f][f],h=-d[f];for(e=1;e<f;e+=1)d[e]=d[e]+h*a[e][f]}}function f(a,b,c,d){var e,f,g,h,i,j;for(f=1;f<=c;f+=1){d[1]=f,j=0,g=f-1;if(g<1){j=a[f][f]-j;if(j<=0)break;a[f][f]=Math.sqrt(j)}else{for(h=1;h<=g;h+=1){i=a[h][f];for(e=1;e<h;e+=1)i-=a[e][f]*a[e][h];i/=a[h][h],a[h][f]=i,j+=i*i}j=a[f][f]-j;if(j<=0)break;a[f][f]=Math.sqrt(j)}d[1]=0}}function g(a,b,c,g,h,i,j,k,l,m,n,o,p,q,r,s){function U(){q[1]=q[1]+1,S=B;for(t=1;t<=m;t+=1){S+=1,G=-k[t];for(u=1;u<=g;u+=1)G+=j[u][t]*h[u];Math.abs(G)<T&&(G=0);if(t>n)r[S]=G;else{r[S]=-Math.abs(G);if(G>0){for(u=1;u<=g;u+=1)j[u][t]=-j[u][t];k[t]=-k[t]}}}for(t=1;t<=p;t+=1)r[B+o[t]]=0;D=0,F=0;for(t=1;t<=m;t+=1)r[B+t]<F*r[E+t]&&(D=t,F=r[B+t]/r[E+t]);return D===0?999:0}function V(){for(t=1;t<=g;t+=1){G=0;for(u=1;u<=g;u+=1)G+=a[u][t]*j[u][D];r[t]=G}v=y;for(t=1;t<=g;t+=1)r[v+t]=0;for(u=p+1;u<=g;u+=1)for(t=1;t<=g;t+=1)r[v+t]=r[v+t]+a[t][u]*r[u];M=!0;for(t=p;t>=1;t-=1){G=r[t],S=A+t*(t+3)/2,v=S-t;for(u=t+1;u<=p;u+=1)G-=r[S]*r[z+u],S+=u;G/=r[v],r[z+t]=G;if(o[t]<n)break;if(G<0)break;M=!1,x=t}if(!M){H=r[C+x]/r[z+x];for(t=1;t<=p;t+=1){if(o[t]<n)break;if(r[z+t]<0)break;F=r[C+t]/r[z+t],F<H&&(H=F,x=t)}}G=0;for(t=y+1;t<=y+g;t+=1)G+=r[t]*r[t];if(Math.abs(G)<=T){if(M)return s[1]=1,999;for(t=1;t<=p;t+=1)r[C+t]=r[C+t]-H*r[z+t];return r[C+p+1]=r[C+p+1]+H,700}G=0;for(t=1;t<=g;t+=1)G+=r[y+t]*j[t][D];I=-r[B+D]/G,N=!0,M||H<I&&(I=H,N=!1);for(t=1;t<=g;t+=1)h[t]=h[t]+I*r[y+t],Math.abs(h[t])<T&&(h[t]=0);i[1]=i[1]+I*G*(I/2+r[C+p+1]);for(t=1;t<=p;t+=1)r[C+t]=r[C+t]-I*r[z+t];r[C+p+1]=r[C+p+1]+I;if(!N){G=-k[D];for(u=1;u<=g;u+=1)G+=h[u]*j[u][D];if(D>n)r[B+D]=G;else{r[B+D]=-Math.abs(G);if(G>0){for(u=1;u<=g;u+=1)j[u][D]=-j[u][D];k[D]=-k[D]}}return 700}p+=1,o[p]=D,S=A+(p-1)*p/2+1;for(t=1;t<=p-1;t+=1)r[S]=r[t],S+=1;if(p===g)r[S]=r[g];else{for(t=g;t>=p+1;t-=1){if(r[t]===0)break;J=Math.max(Math.abs(r[t-1]),Math.abs(r[t])),K=Math.min(Math.abs(r[t-1]),Math.abs(r[t])),r[t-1]>=0?F=Math.abs(J*Math.sqrt(1+K*K/(J*J))):F=-Math.abs(J*Math.sqrt(1+K*K/(J*J))),J=r[t-1]/F,K=r[t]/F;if(J===1)break;if(J===0){r[t-1]=K*F;for(u=1;u<=g;u+=1)F=a[u][t-1],a[u][t-1]=a[u][t],a[u][t]=F}else{r[t-1]=F,L=K/(1+J);for(u=1;u<=g;u+=1)F=J*a[u][t-1]+K*a[u][t],a[u][t]=L*(a[u][t-1]+F)-a[u][t],a[u][t-1]=F}}r[S]=r[p]}return 0}function W(){S=A+x*(x+1)/2+1,v=S+x;if(r[v]===0)return 798;J=Math.max(Math.abs(r[v-1]),Math.abs(r[v])),K=Math.min(Math.abs(r[v-1]),Math.abs(r[v])),r[v-1]>=0?F=Math.abs(J*Math.sqrt(1+K*K/(J*J))):F=-Math.abs(J*Math.sqrt(1+K*K/(J*J))),J=r[v-1]/F,K=r[v]/F;if(J===1)return 798;if(J===0){for(t=x+1;t<=p;t+=1)F=r[v-1],r[v-1]=r[v],r[v]=F,v+=t;for(t=1;t<=g;t+=1)F=a[t][x],a[t][x]=a[t][x+1],a[t][x+1]=F}else{L=K/(1+J);for(t=x+1;t<=p;t+=1)F=J*r[v-1]+K*r[v],r[v]=L*(r[v-1]+F)-r[v],r[v-1]=F,v+=t;for(t=1;t<=g;t+=1)F=J*a[t][x]+K*a[t][x+1],a[t][x+1]=L*(a[t][x]+F)-a[t][x+1],a[t][x]=F}return 0}function X(){v=S-x;for(t=1;t<=x;t+=1)r[v]=r[S],S+=1,v+=1;return r[C+x]=r[C+x+1],o[x]=o[x+1],x+=1,x<p?797:0}function Y(){return r[C+p]=r[C+p+1],r[C+p+1]=0,o[p]=0,p-=1,q[2]=q[2]+1,0}var t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R=Math.min(g,m),S=2*g+R*(R+5)/2+2*m+1,T=1e-60;do T+=T,O=1+.1*T,P=1+.2*T;while(O<=1||P<=1);for(t=1;t<=g;t+=1)r[t]=b[t];for(t=g+1;t<=S;t+=1)r[t]=0;for(t=1;t<=m;t+=1)o[t]=0;w=[];if(s[1]===0){f(a,c,g,w);if(w[1]!==0){s[1]=2;return}e(a,c,g,b),d(a,c,g)}else{for(u=1;u<=g;u+=1){h[u]=0;for(t=1;t<=u;t+=1)h[u]=h[u]+a[t][u]*b[t]}for(u=1;u<=g;u+=1){b[u]=0;for(t=u;t<=g;t+=1)b[u]=b[u]+a[u][t]*h[t]}}i[1]=0;for(u=1;u<=g;u+=1){h[u]=b[u],i[1]=i[1]+r[u]*h[u],r[u]=0;for(t=u+1;t<=g;t+=1)a[t][u]=0}i[1]=-i[1]/2,s[1]=0,y=g,z=y+g,C=z+R,A=C+R+1,B=A+R*(R+1)/2,E=B+m;for(t=1;t<=m;t+=1){G=0;for(u=1;u<=g;u+=1)G+=j[u][t]*j[u][t];r[E+t]=Math.sqrt(G)}p=0,q[1]=0,q[2]=0,Q=0;for(;;){Q=U();if(Q===999)return;for(;;){Q=V();if(Q===0)break;if(Q===999)return;if(Q===700)if(x===p)Y();else{for(;;){W(),Q=X();if(Q!==797)break}Y()}}}}function h(a,d,e,f,h,i){var j,k,l,m,n,o,p,q,r,s,t;a=b(a),d=b(d),e=b(e),o=[],p=[],q=[],r=[],s=[],h=h||0,i=i?b(i):[undefined,0],f=f?b(f):[],k=a.length-1,l=e[1].length-1;if(!f)for(j=1;j<=l;j+=1)f[j]=0;for(j=1;j<=l;j+=1)p[j]=0;m=0,n=Math.min(k,l);for(j=1;j<=k;j+=1)q[j]=0;o[1]=0;for(j=1;j<=2*k+n*(n+5)/2+2*l+1;j+=1)r[j]=0;for(j=1;j<=2;j+=1)s[j]=0;return g(a,d,k,k,q,o,e,f,k,l,h,p,m,s,r,i),t="",i[1]===1&&(t="constraints are inconsistent, no solution!"),i[1]===2&&(t="matrix D in quadratic function is not positive definite!"),{solution:c(q),value:c(o),unconstrained_solution:c(d),iterations:c(s),iact:c(p),message:t}}a.solveQP=h}(numeric),numeric.svd=function(a){function A(a,b){return a=Math.abs(a),b=Math.abs(b),a>b?a*Math.sqrt(1+b*b/a/a):b==0?a:b*Math.sqrt(1+a*a/b/b)}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=numeric.epsilon,q=1e-64/p,r=50,s=0,t=0,u=0,v=0,w=0,x=numeric.clone(a),y=x.length,z=x[0].length;if(y<z)throw"Need more rows than columns";c=new Array(z),d=new Array(z);for(t=0;t<z;t++)c[t]=d[t]=0;e=numeric.rep([z,z],0),f=0,g=0,h=0,i=0,j=0,k=0,l=0;for(t=0;t<z;t++){c[t]=g,l=0,w=t+1;for(u=t;u<y;u++)l+=x[u][t]*x[u][t];if(l<=q)g=0;else{f=x[t][t],g=Math.sqrt(l),f>=0&&(g=-g),h=f*g-l,x[t][t]=f-g;for(u=w;u<z;u++){l=0;for(v=t;v<y;v++)l+=x[v][t]*x[v][u];f=l/h;for(v=t;v<y;v++)x[v][u]+=f*x[v][t]}}d[t]=g,l=0;for(u=w;u<z;u++)l+=x[t][u]*x[t][u];if(l<=q)g=0;else{f=x[t][t+1],g=Math.sqrt(l),f>=0&&(g=-g),h=f*g-l,x[t][t+1]=f-g;for(u=w;u<z;u++)c[u]=x[t][u]/h;for(u=w;u<y;u++){l=0;for(v=w;v<z;v++)l+=x[u][v]*x[t][v];for(v=w;v<z;v++)x[u][v]+=l*c[v]}}j=Math.abs(d[t])+Math.abs(c[t]),j>i&&(i=j)}for(t=z-1;t!=-1;t+=-1){if(g!=0){h=g*x[t][t+1];for(u=w;u<z;u++)e[u][t]=x[t][u]/h;for(u=w;u<z;u++){l=0;for(v=w;v<z;v++)l+=x[t][v]*e[v][u];for(v=w;v<z;v++)e[v][u]+=l*e[v][t]}}for(u=w;u<z;u++)e[t][u]=0,e[u][t]=0;e[t][t]=1,g=c[t],w=t}for(t=z-1;t!=-1;t+=-1){w=t+1,g=d[t];for(u=w;u<z;u++)x[t][u]=0;if(g!=0){h=x[t][t]*g;for(u=w;u<z;u++){l=0;for(v=w;v<y;v++)l+=x[v][t]*x[v][u];f=l/h;for(v=t;v<y;v++)x[v][u]+=f*x[v][t]}for(u=t;u<y;u++)x[u][t]=x[u][t]/g}else for(u=t;u<y;u++)x[u][t]=0;x[t][t]+=1}p*=i;for(v=z-1;v!=-1;v+=-1)for(m=0;m<r;m++){n=!1;for(w=v;w!=-1;w+=-1){if(Math.abs(c[w])<=p){n=!0;break}if(Math.abs(d[w-1])<=p)break}if(!n){s=0,l=1,o=w-1;for(t=w;t<v+1;t++){f=l*c[t],c[t]=s*c[t];if(Math.abs(f)<=p)break;g=d[t],h=A(f,g),d[t]=h,s=g/h,l=-f/h;for(u=0;u<y;u++)j=x[u][o],k=x[u][t],x[u][o]=j*s+k*l,x[u][t]=-j*l+k*s}}k=d[v];if(w==v){if(k<0){d[v]=-k;for(u=0;u<z;u++)e[u][v]=-e[u][v]}break}if(m>=r-1)throw"Error: no convergence.";i=d[w],j=d[v-1],g=c[v-1],h=c[v],f=((j-k)*(j+k)+(g-h)*(g+h))/(2*h*j),g=A(f,1),f<0?f=((i-k)*(i+k)+h*(j/(f-g)-h))/i:f=((i-k)*(i+k)+h*(j/(f+g)-h))/i,s=1,l=1;for(t=w+1;t<v+1;t++){g=c[t],j=d[t],h=l*g,g=s*g,k=A(f,h),c[t-1]=k,s=f/k,l=h/k,f=i*s+g*l,g=-i*l+g*s,h=j*l,j*=s;for(u=0;u<z;u++)i=e[u][t-1],k=e[u][t],e[u][t-1]=i*s+k*l,e[u][t]=-i*l+k*s;k=A(f,h),d[t-1]=k,s=f/k,l=h/k,f=s*g+l*j,i=-l*g+s*j;for(u=0;u<y;u++)j=x[u][t-1],k=x[u][t],x[u][t-1]=j*s+k*l,x[u][t]=-j*l+k*s}c[w]=0,c[v]=f,d[v]=i}for(t=0;t<d.length;t++)d[t]<p&&(d[t]=0);for(t=0;t<z;t++)for(u=t-1;u>=0;u--)if(d[u]<d[t]){s=d[u],d[u]=d[t],d[t]=s;for(v=0;v<x.length;v++)b=x[v][t],x[v][t]=x[v][u],x[v][u]=b;for(v=0;v<e.length;v++)b=e[v][t],e[v][t]=e[v][u],e[v][u]=b;t=u}return{U:x,S:d,V:e}},numeric}),define("math/distance",["require","math/builtin","numeric"],function(a){var b=a("math/builtin"),c=a("numeric"),d={hypot:function(a,b){return a===0&&b===0?0:Math.abs(a)>Math.abs(b)?Math.abs(a)*Math.sqrt(b/a*(b/a)+1):Math.abs(b)*Math.sqrt(a/b*(a/b)+1)},mean:function(a,b){return a>0==b>0?a+.5*(b-a):.5*(a+b)},dot:function(a,b,c,d){return a*c+b*d},pointToSegmentParameter:function(a,b,c,d,e,f){var g=this.hypot(e-c,f-d);if(g===0)return 0;var h=this.dot((a-c)/g,(b-d)/g,(e-c)/g,(f-d)/g);return h},closestPointOnSegment:function(a,b,c,d,e,f){var g=this.pointToSegmentParameter(a,b,c,d,e,f);return g<=0?[c,d]:g>=1?[e,f]:[c+g*(e-c),d+g*(f-d)]},pointToSegment:function(a,b,c,d,e,f){var g=this.closestPointOnSegment(a,b,c,d,e,f);return this.hypot(a-g[0],b-g[1])},isLine:function(a,d,e,f,g,h){var i=c.svd([[a,d,1],[e,f,1],[g,h,1]]).S;return b.approx(i[i.length-1]/i[0],0)},isCircle:function(a,d,e,f,g,h,i,j){var k=c.svd([[a*a+d*d,a,d,1],[e*e+f*f,e,f,1],[g*g+h*h,g,h,1],[i*i+j*j,i,j,1]]).S;return b.approx(k[k.length-1]/k[0],0)},isConic:function(a,d,e,f,g,h,i,j,k,l,m,n){var o=c.svd([[a*a,d*d,2*a*d,a,d,1],[e*e,f*f,2*e*f,e,f,1],[g*g,h*h,2*g*h,g,h,1],[i*i,j*j,2*i*j,i,j,1],[k*k,l*l,2*k*l,k,l,1],[m*m,n*n,2*m*n,m,n,1]]).S;return b.approx(o[o.length-1]/o[0],0)},conicQuadraticParameters:function(a,b,d,e,f,g,h,i,j,k){return{a:c.det([[b*b,2*a*b,a,b,1],[e*e,2*d*e,d,e,1],[g*g,2*f*g,f,g,1],[i*i,2*h*i,h,i,1],[k*k,2*j*k,j,k,1]]),b:c.det([[a*a,b*b,a,b,1],[d*d,e*e,d,e,1],[f*f,g*g,f,g,1],[h*h,i*i,h,i,1],[j*j,k*k,j,k,1]]),c:-c.det([[a*a,2*a*b,a,b,1],[d*d,2*d*e,d,e,1],[f*f,2*f*g,f,g,1],[h*h,2*h*i,h,i,1],[j*j,2*j*k,j,k,1]])}},classifyConic:function(a,e,f,g,h,i,j,k,l,m,n,o){if(d.isLine(a,e,h,i,n,o))return"line";if(d.isCircle(a,e,f,g,l,m,n,o))return"circle";if(!d.isConic(a,e,f,g,h,i,j,k,l,m,n,o))return"none";var p=d.conicQuadraticParameters(a,e,f,g,h,i,j,k,l,m),q=c.svd([[p.a,p.b],[p.b,p.c]]).S;return b.approx(q[q.length-1]/q[0],0,20)?"parabola":p.b*p.b>p.a*p.c?"hyperbola":"ellipse"}};return d}),define("math/poi",["require","./builtin","./distance"],function(a){function d(a,b){var d,e,f,g,h,i;return a>b&&(d=a,a=b,b=d),e=a>0,f=b>0,g=Math.abs(a)>.01,h=Math.abs(b)>.01,g||h?c.mean(a,b):a===0?b*Math.abs(b):b===0?a*Math.abs(a):e!==f?0:(i=e?Math.sqrt(a*b):-Math.sqrt(a*b),i>=a&&b>=i?i:c.mean(a,b))}function e(a,b,c,e,g){var h,i;if(!isFinite(b)||!isFinite(e)||b<0==e<0){console.log("bisectZero called with bad y values",[b,e]);return}for(;;){h=d(a,c),i=g(h);if(!isFinite(i))return null;if(h===a||h===c)return Math.abs(b)<=Math.abs(e)?[a,b]:[c,e];if(i===0)return f(a,b,h,i,c,e,g);b<0!=i<0?(c=h,e=i):(a=h,b=i)}}function f(a,b,c,e,f,i,j){var k,l,m,n;if(!isFinite(e))return;return isFinite(b)||(k=g(a,b,c,e,j),a=k[0],b=k[1]),isFinite(i)||(k=g(c,e,f,i,j),f=k[0],i=k[1]),b===e?l=[a,b]:l=h(a,b,c,e,j,e),i===e?m=[f,i]:m=h(c,e,f,i,j,e),n=d(l[0],m[0]),[n,j(n)]}function g(a,b,c,e,f){var g,h;if(isFinite(b)===isFinite(e)){console.log("bisectFinite called with bad y values",[b,e]);return}for(;;){g=d(a,c),h=f(g);if(g===a||g===c)return isFinite(b)?[a,b]:[c,e];isFinite(h)!==isFinite(b)?(c=g,e=h):(a=g,b=h)}}function h(a,b,c,e,f,g){var h,i;if(b===g==(e===g)){console.log("bisectConstant called with bad y values",[b,e,g]);return}for(;;){h=d(a,c),i=f(h);if(h===a||h===c)return b===g?[a,b]:[c,e];i===g!=(b===g)?(c=h,e=i):(a=h,b=i)}}function i(a,b,c,e,g,h,i){var j,k,l,m;if(!(a<c&&c<g)){console.log("bisectExtremum called with bad x values",[a,c,g]);return}if(!(isFinite(b)&&isFinite(e)&&isFinite(h)&&b!==e&&e!==h&&e>b==e>h)){console.log("bisectExtremum called with bad y values",[b,e,h]);return}for(;;){j=d(a,c),k=i(j),l=d(c,g),m=i(l);if(!isFinite(k)||!isFinite(m))return null;if(j===a||j===c||l===c||l===g)return k>e==e>b?[j,k]:m>e==e>b?[l,m]:[c,e];if(k===e||m===e)return f(a,b,c,e,g,h,i);k>b==e>b&&k>b==k>e?(g=c,h=e,c=j,e=k):m>h==e>h&&m>e==m>h?(a=c,b=e,c=l,e=m):(a=j,b=k,g=l,h=m)}}function j(a,b,c,d,e,f,g,h){var i=Math.abs(d-b),j=Math.abs(f-d),k=Math.abs(h-f);return i>j&&i>k?[[a,b],[c,d]]:k>j&&k>i?[[e,f],[g,h]]:[[c,d],[e,f]]}function k(a,b,e,f,h,i,k,l){var m,n,o,p,q,r,s,t;if(!(a<e&&e<h)){console.log("bisectJump called with bad x values",[a,e,h]);return}if(!(isFinite(b)&&isFinite(f)&&isFinite(i))){console.log("bisectJump called with bad y values",[b,f,i]);return}for(;;){m=d(a,e),n=k(m),o=d(e,h),p=k(o),q=Math.abs(n-c.mean(b,f)),r=Math.abs(p-c.mean(f,i)),l||(l=0);if(q<=l&&r<=l)return null;if(!isFinite(n))return s=g(a,b,m,n,k),t=g(m,n,h,i,k),[s,t];if(!isFinite(p))return s=g(a,b,o,p,k),t=g(o,p,h,i,k),[s,t];if(!(m!==a&&m!==e||o!==e&&o!==h))return Math.abs(f-b)>Math.abs(i-f)?(s=[a,b],t=[e,f]):(s=[e,f],t=[h,i]),[s,t];if(m===a||m===e)return j(a,b,e,f,o,p,h,i);if(o===e||o===h)return j(a,b,m,n,e,f,h,i);q>r?(h=e,i=f,e=m,f=n):(a=e,b=f,e=o,f=p)}}function l(a,b){var c,d,g,h,i,j,k,l,m,n,o,p={x:[],y:[]};for(l=0,m=a.length;l<m;l++){c=a[l],k=undefined,c[1]===0&&(k=[c[0],c[1]]);for(n=0,o=c.length;n<o-2;n+=2)d=c[n],g=c[n+1],h=c[n+2],i=c[n+3],k?i!==0&&(k[0]!==c[0]&&(j=f(k[0],k[1],d,g,h,i,b),p.x.push(j[0]),p.y.push(j[1])),k=undefined):i===0?k=[d,g]:g<0!=i<0&&(j=e(d,g,h,i,b),j&&(p.x.push(j[0]),p.y.push(j[1])))}return p}function m(a,b){var c,d,g,h,j,k,l,m,n,o,p,q,r,s={x:[],y:[]};for(o=0,p=a.length;o<p;o++){c=a[o];for(q=0,r=c.length;q<r-4;q+=2){d=c[q],g=c[q+1],h=c[q+2],j=c[q+3],k=c[q+4],l=c[q+5];if(!(isFinite(g)&&isFinite(j)&&isFinite(l)))continue;if(g!==j&&j===l)n=[d,g];else if(g===j&&j!==l&&n)j>n[1]==j>l&&(m=f(n[0],n[1],h,j,k,l,b),s.x.push(m[0]),s.y.push(m[1])),n=undefined;else if(g!==j||j!==l)if(j>g==j>l)if(b.derivative){if(b.derivative(d)>0==b.derivative(k)>0)continue;m=e(d,b.derivative(d),k,b.derivative(k),b.derivative),m&&(s.x.push(m[0]),s.y.push(b(m[0])))}else m=i(d,g,h,j,k,l,b),m&&(s.x.push(m[0]),s.y.push(m[1]))}}return s}function n(a,b){var c=b(0);return isFinite(c)?{x:[0],y:[b(0)]}:{x:[],y:[]}}function o(a){var b,c,d=a.length,e={x:[],y:[]};for(b=0;b<d;b++)c=a[b],parseFloat(c[1].toFixed(7))===0&&(e.x.push(c[0]),e.y.push(c[1])),parseFloat(c[c.length-1].toFixed(7))===0&&(e.x.push(c[c.length-2]),e.y.push(c[c.length-1]));return e}function p(a,b){var c=l(a,b),d=o(a,b);return c.x.push.apply(c.x,d.x),c.y.push.apply(c.y,d.y),{zeros:c,intercept:n(a,b),extrema:m(a,b)}}function q(a,c,d){var e,f,g,h=function(a){return d(a)-c(a)},i=l(a,h),j=m(a,h);for(e=0,f=j.x.length;e<f;e++)b.approx(j.y[e],0)&&(i.x.push(j.x[e]),i.y.push(j.y[e]));for(e=0,g=i.x.length;e<g;e++)i.y[e]=c(i.x[e]);return i}var b=a("./builtin"),c=a("./distance");return{bisectJump:k,bisectExtremum:i,bisectFinite:g,bisectZero:e,findExtrema:m,findZeros:l,findPOIs:p,findIntersections:q,INTERSECTION:1001,ZERO:1002,INTERCEPT:1003,EXTREMUM:1004,EDGE:1005,DEFINITION:1006}}),define("graphing/graphmode",{X:1,Y:2,XYPOINT:3,XYPOINT_MOVABLE:4,PARAMETRIC:5,POLAR:6,POLYGONFILL:7}),define("math/plotter",["require","./distance","./poi","graphing/graphmode","./builtinframe","config"],function(a){var b=a("./distance"),c=a("./poi"),d=a("graphing/graphmode"),e=a("./builtinframe"),f=a("config"),g={Accumulator:function(a){var c,d;a?(c=a.xtolerance||a.tolerance||0,d=a.ytolerance||a.tolerance||0):c=d=0;var e=function(c,d,e,f,g){a&&a.map&&(c=a.map(c),d=a.map(d),e=a.map(e));var h=b.pointToSegmentParameter(e[0],e[1],c[0],c[1],d[0],d[1]);if(h<1)return!1;var i=[c[0]+h*(d[0]-c[0]),c[1]+h*(d[1]-c[1])];return Math.abs(e[0]-i[0])<=f&&Math.abs(e[1]-i[1])<=g};return{xtolerance:c,ytolerance:d,segments:[],segment:null,pivotPoint:null,pendingPoint:null,addPoint:function(a){this.n+=1;var b=this.pivotPoint;if(!this.segment){this.segment=[a[0],a[1]];return}if(c<0&&d<0){this.segment.push(a[0],a[1]);return}if(!b){this.pivotPoint=a,this.pendingPoint=a;return}var f=[this.segment[this.segment.length-2],this.segment[this.segment.length-1]];e(f,b,a,c,d)||(this.flushPending(),this.pivotPoint=a),this.pendingPoint=a},flushPending:function(){this.pendingPoint&&(this.segment.push(this.pendingPoint[0],this.pendingPoint[1]),this.pivotPoint=null,this.pendingPoint=null)},breakSegment:function(){this.flushPending(),this.segment&&(this.segment.length>2&&this.segments.push(this.segment),this.segment=null)},getSegments:function(){return this.breakSegment(),this.segments}}},sampleParametricNaive:function(a,b){var c=g.Accumulator(),d;for(var e=b.min;e<=b.max+b.step/2;e+=b.step)d=a(e),isFinite(d[0])&&isFinite(d[1])?c.addPoint(d):c.breakSegment();return c.getSegments()},sampleXYNaive:function(a,b){var c=g.Accumulator(b),d;for(var e=b.min;e<=b.max+b.step/2;e+=b.step)d=a(e),isFinite(d)?c.addPoint([e,d]):c.breakSegment();return c.getSegments()},sampleXY:function(a,d){var e=g.Accumulator(d),f,h=d.min,i=a(h),j=[h,i],k;d&&(k=d.ytolerance||d.tolerance);var l=function(d,f){if(!isFinite(k)||k<=0)return;var g,h;h=b.mean(d[0],f[0]),g=c.bisectJump(d[0],d[1],h,a(h),f[0],f[1],a,k),g&&(e.addPoint(g[0]),e.breakSegment(),e.addPoint(g[1]))};isFinite(i)&&e.addPoint([h,i]);for(h+=d.step;h<=d.max+d.step/2;h+=d.step)i=a(h),isFinite(i)&&isFinite(j[1])?(l(j,[h,i]),e.addPoint([h,i])):isFinite(i)&&!isFinite(j[1])?(f=c.bisectFinite(j[0],j[1],h,i,a),f[0]!==h&&e.addPoint(f),l(f,[h,i]),e.addPoint([h,i])):!isFinite(i)&&isFinite(j[1])&&(f=c.bisectFinite(j[0],j[1],h,i,a),l(j,f),f[0]!==j[0]&&e.addPoint(f),e.breakSegment()),j=[h,i];return e.getSegments()},findPiPeriod:function(a,b,c){function l(a,b){var f=b%2===0?1:-1;if(!c&&f===-1)return!1;var h=b*(Math.PI/e._angleMultiplier),i=[d,d+1,d+2,d+3];for(var j=0,k=i.length;j<k;j++)if(isFinite(a(i[j]))!==isFinite(a(i[j]+h))||Math.abs(a(i[j])-f*a(i[j]+h))>g)return!1;return!0}var d=b.min,f=b.max-b.min,g=b.xtolerance&&b.ytolerance?Math.min(b.xtolerance,b.ytolerance):b.tolerance,h=Math.floor(f/(Math.PI/e._angleMultiplier)),i,j,k;for(i=1;i<=h;i++)if(l(a,i)){k=i;for(j=2;j*i<=h;j++)l(a,j*i)||(k=undefined);if(k)break}return k?k*(Math.PI/e._angleMultiplier):null},mapPolar:function(a){return[a[1]*Math.cos(a[0]),a[1]*Math.sin(a[0])]},samplePolar:function(a,b){return b.map=this.mapPolar,this.sampleXY(a,b)},eachStep:function(a,b){var c=a.min,d=a.max,e=a.step,f=d-c,g=Math.ceil(f/e),h=f/g;for(var i=0;i<g;i++)b(c+i*h);b(d)},sampleParametricRecursive:function(a,b){if(b.max<b.min)return[];var c=g.Accumulator(b),d,e;b?(d=b.xtolerance||b.tolerance||0,e=b.ytolerance||b.tolerance||0):d=e=0;var f=10,h=b.min,i=a(h);isFinite(i[0])&&isFinite(i[1])&&c.addPoint(i);var j;return this.eachStep(b,function(b){j=a(b),g.subsampleParametricRecursive(a,h,i,b,j,f,c,d,e),h=b,i=j}),c.getSegments()},subsampleParametricRecursive:function(a,c,d,e,f,h,i,j,k){if(e===c)return;var l=b.mean(c,e),m=a(l,!0),n=isFinite(d[0])&&isFinite(d[1]),o=isFinite(f[0])&&isFinite(f[1]),p=isFinite(m[0])&&isFinite(m[1]);if(h===0||l===c||l===e){i.breakSegment(),o&&i.addPoint(f);return}if(!n&&!o)return;if(n!=o){var q=c,r=e,s=d,t=f;while(c!==l&&l!==e)p==n?(c=l,d=m,n=p):(e=l,f=m,o=p),l=c+(e-c)/2,m=a(l,!0),p=isFinite(m[0])&&isFinite(m[1]);n?(g.subsampleParametricRecursive(a,q,s,c,d,h-1,i,j,k),i.breakSegment()):(i.breakSegment(),i.addPoint(f),g.subsampleParametricRecursive(a,e,f,r,t,h-1,i,j,k));return}if(n&&p&&o){var u=b.pointToSegmentParameter(m[0],m[1],d[0],d[1],f[0],f[1]);if(u>.2&&u<.8&&Math.abs(m[0]-(d[0]+u*(f[0]-d[0])))<=j&&Math.abs(m[1]-(d[1]+u*(f[1]-d[1])))<=k){i.addPoint(f);return}}(d[0]!==m[0]||d[1]!==m[1])&&g.subsampleParametricRecursive(a,c,d,l,m,h-1,i,j,k),(f[0]!==m[0]||f[1]!==m[1])&&g.subsampleParametricRecursive(a,l,m,e,f,h-1,i,j,k)},validateViewState:function(a){if(!a)return!1;var b=a.viewport.xmin,c=a.viewport.xmax,d=a.viewport.ymin,e=a.viewport.ymax;return c>b?e>d?a.screen.width>0?a.screen.height>0?!0:!1:!1:!1:!1},computeDomain:function(a,b,c){var f=a.viewport.xmin,h=a.viewport.xmax,i=a.viewport.ymin,j=a.viewport.ymax,k=a.oversample||4,l=1/k*(h-f)/a.screen.width,m=1/k*(j-i)/a.screen.height,n=b.isLinear,o;switch(b.graphMode){case d.X:o={min:i,max:j,xtolerance:m,ytolerance:l,step:n?j-i:m};break;case d.Y:o={min:f,max:h,xtolerance:l,ytolerance:m,step:n?h-f:l};break;case d.POLAR:o={min:0,max:2*Math.PI/e._angleMultiplier*6,step:2*Math.PI/e._angleMultiplier/1e3,tolerance:Math.min(l,m)};var p=g.findPiPeriod(c,o,b.operator==="=");p&&(o.max=o.min+p);break;case d.PARAMETRIC:o={min:b.domain.min,max:b.domain.max,step:b.domain.step,xtolerance:l,ytolerance:m}}return o},classifyBranchConic:function(a){if(!f.get("conic"))return;var c,d;if(a.length===1&&a[0].length===4)return"line";for(var e=0;e<a.length;e++){var g=a[e],h=g.length;if(h<12)return"unknown";try{d=b.classifyConic(g[0],g[1],g[2*Math.floor(1*h/12)],g[2*Math.floor(1*h/12)+1],g[2*Math.floor(2*h/12)],g[2*Math.floor(2*h/12)+1],g[2*Math.floor(3*h/12)],g[2*Math.floor(3*h/12)+1],g[2*Math.floor(4*h/12)],g[2*Math.floor(4*h/12)+1],g[h-2],g[h-1])}catch(i){return"unknown"}if(d==="none")return"none";if(c&&d!==c)return"none";c=d}return c},computeGraphData:function(a,b,e){var f=g.computeDomain(a,b,e);if(!f)return[];var h,i;switch(b.graphMode){case d.X:case d.Y:h=g.sampleXY(e,f);break;case d.POLAR:h=g.samplePolar(e,f);break;case d.PARAMETRIC:f.step||(f.step=(f.max-f.min)/1e3),h=g.sampleParametricRecursive(e,f)}var j=[];b.graphMode!==d.PARAMETRIC&&(j=c.findPOIs(h,e),h=g.interleaveExtrema(h,j));if(b.graphMode===d.X)for(var k in j){if(!j.hasOwnProperty(k))continue;i=j[k].y,j[k].y=j[k].x,j[k].x=i}var l={segments:h,graphMode:b.graphMode,color:b.color,style:b.style,operator:b.operator,poi:j,conic:g.classifyBranchConic(h),expr:null};return[l]},interleaveExtrema:function(a,b){var c=a.length,d,e=Array(c),f,g,h=b.extrema,i=0,j=h.x.length;for(var k=0;k<c;k++){d=a[k],g=d.length,f=[];for(var l=0;l<g;l+=2){while(i<j&&h.x[i]<=d[l])h.x[i]!==d[l]&&f.push(h.x[i],h.y[i]),i++;f.push(d[l],d[l+1])}e[k]=f}return e},polygonsFromSegments:function(a,b,c){var d=function(a){var b=a[a.length-1];return b[b.length-2]},e=[],f=0,h=0,i=[],j=[],k=-Infinity,l=-Infinity;for(;;){if(k<=l){if(f>=b.length)break;j.push(b[f++])}if(l<=k){if(h>=a.length)break;i.push(a[h++])}k=d(j),l=d(i),k==l&&(e.push(g.polygonFromSegments(i,j,c)),j=[],i=[])}return e},polygonFromSegments:function(a,b,c){var e,f,g,h,i=[],j;switch(c){case d.POLAR:j=this.mapPolar;break;case d.X:j=function(a){return[a[1],a[0]]}}for(e=0;e<a.length;e++){h=a[e];for(f=0;f<h.length;f+=2)g=[h[f],h[f+1]],j&&(g=j(g)),i.push(g[0],g[1])}for(e=b.length-1;e>=0;e--){h=b[e];for(f=h.length-2;f>=0;f-=2)g=[h[f],h[f+1]],j&&(g=j(g)),i.push(g[0],g[1])}return i}};return g}),define("main/fake_i18n",["require","underscore"],function(a){var b=a("underscore"),c=function(a,c){return b.each(c,function(b,c){a=a.split("__"+c+"__").join(b)}),a},d=function(){};return{t:c,init:d}}),define("math/evaluationstate",["require","pjs","graphing/graphmode","math/comparators"],function(a){var b=a("pjs"),c=a("graphing/graphmode"),d=a("math/comparators"),e=b(function(a){a.init=function(a,b,e){var f;this.error=a.error,this.is_graphable=e&&e.isGraphable(),this.is_graphable&&(f=a.graph_info.graphMode),this.is_evaluable=e&&e.isEvaluable(),this.is_evaluable&&(this.zero_values=e.getZeroValues()),this.is_point_list=f===c.XYPOINT||f===c.XYPOINT_MOVABLE,this.is_parametric=f===c.PARAMETRIC,this.is_shade_between=this.is_graphable&&!!e.shade_between,this.is_shade_between&&(this.shade_between_operators=e.getOperators()),this.is_double_inequality=this.is_shade_between&&e.getOperators().length==2,e?(this.operator=e.getOperator(),this.assignment=e.getAssignedVariable(),this.variables=e.getSlidableVariables(),this.simple_constant=e.getSliderValue(),this.is_inequality=this.is_double_inequality||d.table[this.operator].direction!==0):this.variables=[],this.is_slidable=!!a.slider,this.is_animatable=this.is_slidable&&!this.is_graphable,a.moveIds&&(this.move_ids=a.moveIds),this.is_tableable=this.is_graphable&&!this.is_parametric&&!e.is_solved_equation&&this.operator==="="&&!this.is_double_inequality;if(this.is_tableable){this.table_info=e.getTableInfo();var g=this.table_info.independent_variable;if(g==="y"||g==="theta")this.is_tableable=!1,delete this.table_info}}});return e}),define("graphing/columnmode",{POINTS:"POINTS",LINES:"LINES",POINTS_AND_LINES:"POINTS_AND_LINES"}),define("math/derivative",["require","./parser_util","./evalframe"],function(a){var b,c=a("./parser_util"),d=a("./evalframe"),e=c.DerivativeNode,f=c.ConstantNode,g=c.NegationNode,h=c.ParseNode,i=c.BinaryOperatorNode,j=c.FunctionNode,k=c.FunctionDeclarationNode,l=c.FunctionCallExponentNode,m=c.IdentifierNode,n=c.RepeatedOperatorNode,o=c.SummationNode,p=c.ChainedComparatorNode,q=c.PiecewiseNode,r=c.AssignmentNode;e.open(function(a){a.takeDerivative=function(a,b){var d;return this.freeOf(a,b)?f(0):(d=this.expression.takeDerivative(a,this.derivative_variable),d instanceof e?c.DerivativeNode(b,d):d.takeDerivative(a,b))},a.freeOf=function(a,b){return this.expression.freeOf(a,b)},a.substitute=function(a){var b=this.expression.takeDerivative(a,this.derivative_variable);if(b instanceof e){if(a.hasVariable(this.derivative_variable.identifier))throw"Can't substitute for derivative variable if derivative can't be taken symbolically";return e(this.derivative_variable,this.expression)}return b.substitute(a)}}),h.open(function(a){a.takeDerivative=function(a,b){return e(b,this)},a.freeOf=function(){return!1}}),b={},b.chain=function(a,b,c,d){return d.freeOf(a,b)?f(0):i.reduce("*",c,d.takeDerivative(a,b))},function(){var a,e,f=[],g=[];for(a=0;a<9;a++)f.push(m("a_{"+a+h.prototype.tmp()+"}")),g.push(RegExp("a_"+a,"g"));e=function(a){for(var b=0;b<f.length;b++)a=a.replace(g[b],f[b].toString());return a},b.substituteFn=function(a){var b=c.parse(e(a)),g=d();return function(a){var c,d=a.length;for(c=0;c<d;c++)g.setVariable(f[c].identifier,a[c]);return b.substitute(g)}}}(),i.reduce=function(a,b,c){switch(a){case"+":if(b instanceof f&&c instanceof f)return f(b.value+c.value);if(b instanceof f&&b.value===0)return c;if(c instanceof f&&c.value===0)return b;break;case"-":if(b instanceof f&&c instanceof f)return f(b.value-c.value);if(c instanceof f&&c.value===0)return b;break;case"*":if(b instanceof f&&c instanceof f)return f(b.value*c.value);if(b instanceof f&&b.value===1)return c;if(c instanceof f&&c.value===1)return b;break;case"/":if(c instanceof f&&c.value===1)return b;if(b instanceof f&&c instanceof f)return f(b/c);break;case"^":if(c instanceof f&&c.value===1)return b}return i(a,b,c)},g.reduce=function(a){return a instanceof f?f(-a.value):a instanceof g?a.expression:g(a)},i.open(function(a,c){var d=b.substituteFn("a_1*a_0^{a_1 - 1}"),e=b.substituteFn("a_0^{a_1}*\\ln(a_0)");a.takeDerivative=function(a,g){var h,j;if(this.freeOf(a,g))return f(0);h=this.args[0],j=this.args[1];switch(this.operator){case"+":return i.reduce("+",h.takeDerivative(a,g),j.takeDerivative(a,g));case"-":return i.reduce("-",h.takeDerivative(a,g),j.takeDerivative(a,g));case"*":return i.reduce("+",b.chain(a,g,j,h),b.chain(a,g,h,j));case"/":return i.reduce("/",i.reduce("-",b.chain(a,g,j,h),b.chain(a,g,h,j)),i.reduce("^",j,f(2)));case"^":return i.reduce("+",b.chain(a,g,d(this.args),h),b.chain(a,g,e(this.args),j));default:return c.takeDerivative.call(this,a,g)}},a.freeOf=function(a,b){return this.args[0].freeOf(a,b)&&this.args[1].freeOf(a,b)},a.substitute=function(a){return i.reduce(this.operator,this.args[0].substitute(a),this.args[1].substitute(a))}}),p.open(function(a){a.freeOf=function(a,b){return this.args.every(function(c){return c.freeOf(a,b)})},a.substitute=function(a){return p(this.comparators,this.args.map(function(b){return b.substitute(a)}))}}),f.open(function(a){a.takeDerivative=function(){return f(0)},a.freeOf=function(){return!0},a.substitute=function(){return this}}),j.open(function(a,c){var d,e,h,k,l={exp:["\\exp(a_0)"],sqrt:["\\frac{1}{2*\\sqrt{a_0}}"],sin:["\\angleMultiplier(1)*\\cos(a_0)"],cos:["-\\angleMultiplier(1)*\\sin(a_0)"],tan:["\\angleMultiplier(1)*(\\sec(a_0))^2"],arcsin:["\\frac{1}{\\angleMultiplier(1)*\\sqrt{1 - a_0^2}}"],arccos:["\\frac{-1}{\\angleMultiplier(1)*\\sqrt{1 - a_0^2}}"],arctan:["\\frac{1}{\\angleMultiplier(1)*(1 + a_0^2)}"],sinh:["\\cosh(a_0)"],cosh:["\\sinh(a_0)"],tanh:["(\\sech(a_0))^2"],arcsinh:["\\frac{1}{\\sqrt{a_0^2 + 1}}"],arccosh:["\\frac{1}{\\sqrt{a_0^2 - 1}}"],arctanh:["\\frac{1}{1 - a_0^2}"],factorial:["(a_0)!*\\polyGamma(0, a_0 + 1)"],floor:["\\left\\{ \\mod(a_0, 1) > 0: 0 \\right\\}"],ceil:["\\left\\{ \\mod(a_0, 1) > 0: 0 \\right\\}"],round:["\\left\\{ \\abs(\\mod(a_0, 1) - 0.5) > 0: 0 \\right\\}"],abs:["\\left\\{ \\abs(a_0) > 0: \\sign(a_0) \\right\\}"],sign:["\\left\\{ \\abs(a_0) > 0: 0 \\right\\}"],angleMultiplier:["0"],log:["\\left\\{a_0 > 0: \\frac{1}{a_0*\\ln(a_1)}\\right\\}","\\frac{-\\log_{a_1}(a_0)}{a_1*\\ln(a_1)}"],pow:["a_1*a_0^{a_1 - 1}","a_0^{a_1}*\\ln(a_0)"],nthroot:["a_0^{1/a_1 - 1}/a_1","-\\frac{a_0^{1/a_1}*\\ln(a_0)}{a_1^2}"],polyGamma:["0/0","\\polyGamma(1 + a_0, a_1)"],min:["\\left\\{ a_0 < a_1 : 1, a_0 > a_1 : 0 \\right\\}","\\left\\{ a_1 < a_0 : 1, a_1 > a_0 : 0 \\right\\}"],max:["\\left\\{ a_0 > a_1 : 1, a_0 < a_1 : 0 \\right\\}","\\left\\{ a_1 > a_0 : 1, a_1 < a_0 : 0 \\right\\}"],mod:["\\left\\{ \\abs(\\mod(a_0, a_1)) > 0: 1 \\right\\}","\\left\\{ \\mod(a_0/a_1, 1) > 0: -\\floor(a_0/a_1) \\right\\}"]},n={};(function(){var a,c=l,d=n,e=b.substituteFn;for(a in c){if(!c.hasOwnProperty(a))continue;d[a]=c[a].map(e)}})(),d=function(a,b){n[b]=[function(b){return g.reduce(i.reduce("/",n[a][0](b),i.reduce("^",j(m(a),b),f(2))))}]},[["sin","csc"],["cos","sec"],["tan","cot"],["sinh","csch"],["cosh","sech"],["tanh","coth"]].forEach(function(a){d(a[0],a[1])}),e=function(a,b){n[b]=[function(b){return g.reduce(i.reduce("/",n[a][0]([i.reduce("/",f(1),b[0])]),i.reduce("^",b[0],f(2))))}]},[["arcsin","arccsc"],["arccos","arcsec"],["arctan","arccot"],["arcsinh","arccsch"],["arccosh","arcsech"],["arctanh","arccoth"]].forEach(function(a){e(a[0],a[1])}),h=function(){return f(NaN)},k=function(a){n[a]=[h,h]},["lcm","gcd","nCr","nPr","mcm","mcd"].forEach(k),["quadraticFormula","quadraticInequalityRegions"].forEach(k),a.takeDerivative=function(a,d){function l(c,e){return e<0?c:l(i.reduce("+",c,b.chain(a,d,h[e](g),g[e])),e-1)}var e,g,h,j,k;if(this.freeOf(a,d))return f(0);e=this.identifier.identifier,g=this.args;if(n.hasOwnProperty(e))h=n[e];else{if(!a.hasFunction(e))return this.args.length===1&&a.hasVariable(e)?i("*",this.identifier,this.args[0]).takeDerivative(a,d):c.takeDerivative.call(this,a,d);h=a.getFunctionTree(e).computePartials(a)}return j=g.length,k=b.chain(a,d,h[j-1](g),g[j-1]),l(k,this.args.length-2)},a.freeOf=function(a,b){return this.args.every(function(c){return c.freeOf(a,b)})&&this.identifier.freeOf(a,b)},a.substitute=function(a){return j(this.identifier,this.args.map(function(b){return b.substitute(a)}))}}),k.open(function(a){a.computePartials=function(a){var b=this;return b.args.map(function(c){var e=b.expression.takeDerivative(a,c);return function(c){var f,g,h=d(a),i=d(a);for(g=0;g<b.args.length;g++)f=m(b.tmp()),h.setVariable(b.args[g].identifier,f),i.setVariable(f.identifier,c[g]);return e.substitute(h).substitute(i)}})}}),l.open(function(a){a.takeDerivative=function(a,b){return this.getEquivalentNode(a).takeDerivative(a,b)},a.freeOf=function(a,b){return this.getEquivalentNode(a).freeOf(a,b)},a.substitute=function(a){return l(this.identifier.substitute(a),this.arg.substitute(a),this.exponent.substitute(a))}}),m.open(function(a){a.takeDerivative=function(a,b){return b.identifier===this.identifier?f(1):a.hasVariable(this.identifier)?a.getVariable(this.identifier).takeDerivative(a,b):f(0)},a.freeOf=function(a,b){return b.identifier===this.identifier?!1:a.hasVariable(this.identifier)?a.getVariable(this.identifier).freeOf(a,b):!0},a.substitute=function(a){return a.hasVariable(this.identifier)?a.getVariable(this.identifier).substitute(a):this}}),g.open(function(a){a.takeDerivative=function(a,b){return this.freeOf(a,b)?f(0):g.reduce(this.expression.takeDerivative(a,b))},a.freeOf=function(a,b){return this.expression.freeOf(a,b)},a.substitute=function(a){return g.reduce(this.expression.substitute(a))}}),q.open(function(a){a.takeDerivative=function(a,b){var c;return this.freeOf(a,b)?f(0):(c=q(this.condition,this.if_expr.takeDerivative(a,b)),this.else_expr&&c.append_else(this.else_expr.takeDerivative(a,b)),c)},a.freeOf=function(a,b){return this.else_expr?this.condition.freeOf(a,b)&&this.if_expr.freeOf(a,b)&&this.else_expr.freeOf(a,b):this.condition.freeOf(a,b)&&this.if_expr.freeOf(a,b)},a.substitute=function(a){var b=q(this.condition.substitute(a),this.if_expr.substitute(a));return this.else_expr&&b.append_else(this.else_expr.substitute(a)),b}}),n.open(function(a){a.freeOf=function(a,b){return this.index.freeOf(a,b)&&this.lower_bound.freeOf(a,b)&&this.upper_bound.freeOf(a,b)&&this.summand.freeOf(a,b)},a.substitute=function(a){var b,c=this.index,e=d(a),f=m(this.tmp());return e.setVariable(c.identifier,f),b=this.constructor,b(f,this.lower_bound.substitute(a),this.upper_bound.substitute(a),this.summand
.substitute(e))}}),o.open(function(a){a.takeDerivative=function(a,b){return this.freeOf(a,b)?f(0):o(this.index,this.lower_bound,this.upper_bound,this.summand.takeDerivative(a,b))}}),function(){var a=function(a,b){return this.expression.takeDerivative(a,b)};r.open(function(b){b.substitute=function(a){return r(this.assigns,this.expression.substitute(a))},b.expressionDerivative=a}),k.open(function(b){b.substitute=function(a){return k(this.assigns,this.args,this.expression.substitute(a))},b.expressionDerivative=a})}();return}),define("math/evaluatorobject",["require","underscore","pjs","main/fake_i18n","./parser_util","./plotter","./comparators","./evalframe","./quadratic","./evaluationstate","graphing/graphmode","graphing/columnmode","./derivative"],function(a){function A(a){var b,c=[],d=[],e=a.length;for(b=0;b<e;b++)c.push(a[b][0]),d.push(a[b][1]);return{defined:{x:c,y:d}}}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=a("underscore"),q=a("pjs"),r=a("main/fake_i18n"),s=a("./parser_util"),t=a("./plotter"),u=a("./comparators"),v=a("./evalframe"),w=a("./quadratic"),x=a("./evaluationstate"),y=a("graphing/graphmode"),z=a("graphing/columnmode");return a("./derivative"),b={name:"ERROR"},c={name:"WARNING"},d={name:"EVALUABLE"},e={name:"GRAPHABLE"},f={name:"SILENT"},g={},h=s.ConstantNode,i=s.IdentifierNode,j=s.ErrorNode,k=s.BinaryOperatorNode,l=q(function(a){a.init=function(a){this._context=a,this._analysis=null,this.compiler=a.compiler},a.exportDefinitionsTo=function(a){},a.getAllIds=function(){return[]},a.cleanupId=function(a){throw"base analysis object can't cleanup ID"},a.invalidate=function(){this._analysis=null},a.getAnalysis=function(){return this._analysis||this._context.updateAnalysis(),this._analysis},a.setAnalysis=function(a){this._analysis=a},a.shouldIntersect=function(){return!1},a.isEvaluable=function(){return this.getAnalysis().status==d},a.isGraphable=function(){return this.getAnalysis().status==e},a.isGraphed=function(){return this.isGraphable()},a.graphModeFromVariables=function(a,b){return b==="x"||a==="y"?y.X:b==="r"&&a==="theta"||b==="r"&&a===undefined||b===undefined&&a==="theta"?y.POLAR:y.Y},a.setGraphMode=function(a,b,c){return c==="y"&&!b&&(b="x"),c==="x"&&!b&&(b="y"),c==="r"&&!b&&(b="theta"),a||(a=this.graphModeFromVariables(b,c)),this._analysis.graph_info={color:this._statement.color,style:this._statement.style,graphMode:a,independent:b,dependent:c,operator:this.getOperator(),domain:this._statement.domain},e},a.computeGraphData=function(a){},a.getStatus=function(){return this.getAnalysis().status},a.getAssignedVariable=function(){return null},a.compile=function(){return undefined},a.getSlidableVariables=function(){return[]},a.getSliderValue=function(){return NaN},a.getZeroValues=function(){return[]},a.addFreeVariables=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(this._analysis.free_variables.indexOf(c)>-1)continue;this._analysis.free_variables.push(c)}}}),m=q(l,function(a,c){a.init=function(a,b,d){c.init.call(this,a),this._statement=b,this._tree=d,this.id=b.id,this.color=b.color,this.style=b.style,this.domain=b.domain},a.isGraphed=function(){return this.isGraphable()&&this._statement.shouldGraph},a.getAllIds=function(){return[this.id]},a.getGraphInfo=function(){return this._analysis.graph_info},a.shouldIntersect=function(){if(!this.isGraphed())return!1;var a=this.getGraphInfo().graphMode;return a===y.Y||a===y.X},a.computeGraphData=function(a){var b={},c=this._context.getFrame(),d=this.compile(c);d.fn.derivative=this.compileDerivative(c).fn;var e=this._analysis.graph_info,f=this._tree.polynomialOrder(c,e.independent);return f===1&&(e.isLinear=!0),b[this.id]=t.computeGraphData(a,e,d.fn),b[this.id][0].compiled=d,b},a.getEvaluationState=function(){return x(this._analysis,this._context,this)},a.computeStatus=function(){return this.markError(r.t("Unimplemented status check"))},a.getZeroValues=function(){return[{val:this._tree.evaluateOnce(this._context.getFrame()),operator:"="}]},a.referencesSymbol=function(a){return this._tree.references(a)},a.referencedSymbols=function(a){return this._tree._referencedSymbols},a.getSlidableVariables=function(){var a=this._analysis.free_variables,b=[];for(var c=0;c<a.length;c++){var d=a[c];if(this._context.assignmentForbidden(d))continue;if(this._analysis.hasOwnProperty("solution")&&d==this._analysis.solution.variable)continue;b.push(d)}return b},a.exportedSymbols=function(){var a={};return this._tree.assigns&&(a[this._tree.assigns.identifier]=this._tree.arity),a},a.exportDefinitionsTo=function(a,b){if(!this._tree.assigns)return;var c=this._tree.assigns.identifier;if(this._context.assignmentForbidden(c))return;this._tree.exportDefinitionsTo(a,this.compiler),a.setDefinitionId(c,b)},a.shadowedSymbols=function(){return[]},a.getDependencies=function(){return this._tree.dependencies()},a.getType=function(){return this._tree.statementType},a.freeVariablesError=function(a){for(var b=0;b<a.length;b++){if(this._context.assignmentForbidden(a[b]))continue;var c=r.t("Too many free variables to graph.  Try defining '__variable__'",{variable:a[b]});return this.markError(c)}return this.markError(r.t("Too many free variables.  I don't know what to do with this"))},a.getParseError=function(){return this._tree.valid?undefined:this._tree.error_msg},a.markError=function(a){return this._analysis.error=a,this._analysis.status=b,b},a.evaluateOnce=function(a){return this._tree.evaluateOnce(a)},a.evalStrings=function(a){return this._tree.getEvalStrings(a)},a.compileAllBranches=function(a){return[this.compile(a)]},a.compile=function(a){var b=this.compile_to_strings(a,this.independent_variable());return b.fn=this.compiler.compile(b.args,b.function_string),b},a.compileDerivative=function(a){var b=this.independent_variable(),c=i(b),d;this._tree.expressionDerivative?d=this._tree.expressionDerivative(a,c):d=this._tree.takeDerivative(a,c);var e=m(this._context,this._statement,d),f=e.compile_to_strings(a,b);return f.fn=this.compiler.compile(f.args,f.function_string),f},a.independent_variable=function(){if(this._analysis.status===e)return this._analysis.graph_info.independent;if(this._analysis.free_variables.length===1)return this._analysis.free_variables[0]},a.compile_to_strings=function(a,b){var c=this._tree.getEvalStrings(a),d=c.statements+"return "+c.expression;return{args:[b],function_string:d}},a.getOperator=function(){return"="},a.getTableInfo=function(){return undefined},a.getTableInfo=function(){return{independent_variable:this._analysis.graph_info.independent,dependent_column:this._tree.getInputString(),by_reference:!1}}}),g[EXPRESSION]=q(m,function(a){a.computeStatus=function(){var a=this._analysis.free_variables;if(a.length===0)return d;if(a.length===1)switch(a[0]){case"x":return this.setGraphMode(y.Y,"x");case"y":return this.markError(r.t("Maybe you wanted to plot x as a function of y?"));case"r":case"theta":return this.markError(r.t("Maybe you wanted to plot r as a function of θ?"));default:return this.markError(r.t("Maybe you wanted to plot x or y as a function of __variable__ ?",{variable:a[0]}))}return this.freeVariablesError(a)}}),g[FUNCTION_DEFINITION]=q(m,function(a,b){a.init=function(a,c,d){b.init.call(this,a,c,d),this.arity=this._tree.arity},a.shadowedSymbols=function(){return this._tree.passed_variables},a.computeStatus=function(){if(this._tree.arity===1)return this._tree.assigns.identifier===this._tree.passed_variables[0]?this.markError(r.t("You can't use __identifier__ as both the function name and the argument",this._tree.assigns.identifier)):this._analysis.free_variables.length>0?this.markError(r.t("Every variable you use in the function must be defined.  Either define __variable__or pass it in as an argument",{variable:this._analysis.free_variables[0]})):this.setGraphMode(undefined,this._tree.passed_variables[0],this._tree.assigns.identifier);if(this._tree.arity>1)return c},a.addFreeVariables=function(a){var b,c,d=this._tree.passedVariables();for(b=0;b<a.length;b++){c=a[b];if(d.indexOf(c)>-1)continue;if(this._analysis.free_variables.indexOf(c)>-1)continue;this.markError(r.t("Every variable you use in the function must be defined.  Either define '__variable__' or pass it in as an argument",{variable:c})),this._analysis.free_variables.push(c)}},a.conflictError=function(a){var b=r.t("'__symbol__' is already defined, so you can't reuse it as one of the parameters of this function",{symbol:a});return this.markError(b)},a.getTableInfo=function(){return this._context.assignmentForbidden(this._tree.assigns.identifier)?{independent_variable:this._analysis.graph_info.independent,dependent_column:this._tree.expression.getInputString(),by_reference:!1}:{independent_variable:this._analysis.graph_info.independent,dependent_column:this._tree.getInputString(),by_reference:!0}},a.getSlidableVariables=function(){var a,b,c=this._analysis.free_variables,d=[];for(a=0;a<c.length;a++){b=c[a];if(this._context.assignmentForbidden(b))continue;d.push(b)}return d}}),g[VARIABLE_DEFINITION]=q(m,function(a,b){a.computeStatus=function(){var a,b=this._tree.assigns.identifier,c=this._analysis.free_variables;return b==="theta"?this.markError(r.t("Sorry - can't graph θ as a function of anything yet")):c.length===0?(a=this._tree.expression instanceof h,a&&(this._analysis.slider=!0),"xyr".indexOf(b)!==-1?this.setGraphMode(undefined,undefined,b):a?f:d):c.length===1?c[0]===b?this.markError(r.t("Cannot define __variable__ in terms of itself."),{variable:c[0]}):c[0]==="r"?this.markError(r.t("Maybe you wanted to plot r as a function of θ?")):this.setGraphMode(undefined,c[0],b):this.freeVariablesError(c)},a.getAssignedVariable=function(){return this._tree.assigns.identifier},a.getSliderValue=function(){return this._tree.expression instanceof h?this._tree.evaluateOnce():b.getSliderValue()},a.getTableInfo=function(){return this._context.assignmentForbidden(this._tree.assigns.identifier)?{independent_variable:this._analysis.graph_info.independent,dependent_column:this._tree.expression.getInputString(),by_reference:!1}:{independent_variable:this._analysis.graph_info.independent,dependent_column:this._analysis.graph_info.dependent,by_reference:!0}}}),g[IDENTIFIER]=q(m,function(a){a.computeStatus=function(){var a=this._analysis.free_variables;return a.length===1&&a[0]==="x"?this.setGraphMode(y.Y,"x"):a.length>0?f:d}}),g[CONSTANT]=q(m,function(a){a.computeStatus=function(){return f},a.getSliderValue=function(){return this._tree.evaluateOnce()}}),g[ORDERED_PAIR_LIST]=q(m,function(a,b){a.computeMovable=function(a){var b,c,d=this;if(d._analysis.status!=e)return;if(d._analysis.free_variables.length!==0)return;if(d._tree.elements.length!==1)return;c=[undefined,undefined],d._tree.elements[0].children.forEach(function(e,f){var g;if(!(e instanceof i))return;g=a.getDefinitionId(e.identifier);if(g===undefined)return;if(!d._context.statements[g]._analysis.slider)return;b=!0,c[f]=g}),b&&(d._analysis.movable=!0,d._analysis.graph_info.graphMode===y.XYPOINT&&(d._analysis.graph_info.graphMode=y.XYPOINT_MOVABLE),c[1]===c[0]&&(c[1]=undefined),d._analysis.moveIds=c)},a.computeStatus=function(){var a=this._analysis.free_variables;if(a.length===0)return this.setGraphMode(y.XYPOINT);if(a.length===1)return a[0]==="t"&&this._tree.elements.length==1?this.setGraphMode(y.PARAMETRIC,"t"):this.markError(r.t("Define '__variable__' to plot this point, or make each coordinate a function of 't' to plot it as a parametric function",{variable:a[0]}));if(a.length>1)return this.freeVariablesError(a)},a.getSlidableVariables=function(){var a=b.getSlidableVariables.call(this),c=a.indexOf("t");return c>-1&&a.splice(c,1),a},a.computeGraphData=function(a){var b,c,d,e,f=this._analysis.graph_info,g={};return f.graphMode===y.XYPOINT||f.graphMode===y.XYPOINT_MOVABLE?(b=this._tree.evaluateOnce(this._context.getFrame()),c={segments:[b],graphMode:f.graphMode,color:this._statement.color,style:this._statement.style,poi:A(b)},g[this.id]=[c],g):(d=this.compile(this._context.getFrame()),e=function(a){return d.fn(a)[0]},g[this.id]=t.computeGraphData(a,f,e),g)},a.getTableInfo=function(){var a=this._tree.evaluateOnce(this._context.getFrame());return{independent_variable:"x",dependent_column:"y",by_reference:!1,values:a}}}),g[DOUBLE_INEQUALITY]=q(m,function(a,b){a.init=function(a,c,d){var e,f;b.init.call(this,a,c,d),this._inequalities=[];for(e=0;e<2;e++)f=d.getInequality(e),this._inequalities.push(g[COMPARATOR](a,c,f))},a.shade_between=!0,a.computeStatus=function(a){var b,c;for(b=0;b<2;b++)this._inequalities[b].setAnalysis({free_variables:this._analysis.free_variables});return c=this._inequalities.map(function(b){return b._analysis.status=b.computeStatus(a),b._analysis.status}),c[0]===e&&c[1]===e?(this._analysis.graph_info=this._inequalities[0]._analysis.graph_info,this._analysis.graph_info.graphMode===y.POLAR?this.markError(r.t("Two-sided inequalities are only supported for x and y.  You can do one-sided polar inequalities.")):e):this.markError(r.t("One or more sub-inequality had an error"))},a.computeGraphData=function(a){var b,c,d,e,f,g=this.id,h={};h[g]=[],b=function(a){a.operator=u.get(u.table[a.operator].inclusive,0)};for(c=0;c<2;c++)d=this._inequalities[c].computeGraphData(a)[g].slice(0,4),d.forEach(b),h[g].push.apply(h[g],d);return e=h[g][0].graphMode,f=t.polygonsFromSegments(h[g][4].segments,h[g][0].segments,e),h[g].push({graphMode:y.POLYGONFILL,segments:f,poi:{}}),f=t.polygonsFromSegments(h[g][7].segments,h[g][3].segments,e),h[g].push({graphMode:y.POLYGONFILL,segments:f,poi:{}}),h},a.compileAllBranches=function(a){var b,c=[];for(b=0;b<2;b++)c.push.apply(c,this._inequalities[b].compileAllBranches(a));return c},a.getOperators=function(){return[this._inequalities[0].getOperator(),this._inequalities[1].getOperator()]}}),g[EQUATION]=q(m,function(a,b){a.init=function(a,c,d){b.init.call(this,a,c,d),this.temp_tree=k("-",this._tree.lhs,this._tree.rhs)},a.is_solved_equation=!0,a.computeStatus=function(a){var b,c,e,f=this._analysis.free_variables;if(f.length>2)return this.freeVariablesError(f);if(f.length===2)return f[0]==="x"&&f[1]==="y"||f[0]==="y"&&f[1]==="x"?(b=this.temp_tree.polynomialOrder(a,"x"),c=this.temp_tree.polynomialOrder(a,"y"),c<=2?this.setGraphMode(y.Y,"x","y"):b<=2?this.setGraphMode(y.X,"y","x"):this.markError(r.t("Equation is too complicated.  One variable needs to be quadratic."))):this.markError(r.t("You can only plot implicit equations of x and y"));if(f.length===1)return e=this.solveEvaluable(a),e?(this._analysis.solution=e,d):this.markError(r.t("Sorry - unable to solve this equation.  Try something like a quadratic?"));if(f.length===0)return this.markError(r.t("This equation has no variables in it - there's nothing to solve"))},a.solveEvaluable=function(a){var b,c,d,e;if(this._analysis.free_variables.length!=1)return!1;d=this._analysis.free_variables[0],e=this.temp_tree.polynomialOrder(a,d);switch(e){case 1:b=this.temp_tree.quadraticCoefficients(a,d),c=[-b[2]/b[1]];break;case 2:b=this.temp_tree.quadraticCoefficients(a,d),c=w.formula(b);break;default:return!1}return{roots:c,variable:d}},a.getZeroValues=function(){var a,b=[],c=this._analysis.solution.roots;for(a=0;a<c.length;a++)b.push({val:c[a],operator:"="});return b},a.getAssignedVariable=function(){switch(this._analysis.status){case d:return this._analysis.solution.variable;case e:return this._analysis.graph_info.dependent}},a.computeGraphData=function(a){var b,c,d={},e=this.compileAllBranches(this._context.getFrame()),f=this._analysis.graph_info;d[this.id]=[];for(b=0;b<e.length;b++)c=t.computeGraphData(a,f,e[b].fn)[0],c.compiled=e[b],d[this.id].push(c);return d},a.compileAllBranches=function(a){var b,c=[],d=this._analysis.graph_info.independent,e=this._analysis.graph_info.dependent,f=this.temp_tree.polynomialEvalStrings(a,e,d),g=w.formulaEvalStrings(f),h=[d];for(b=0;b<g.length;b++)c.push({fn:this.compiler.compile(h,g[b]),args:h,function_string:g[b]});return c}}),g[COMPARATOR]=q(m,function(a,b){a.init=function(a,c,d){var e;b.init.call(this,a,c,d),e=this._tree.operator,u.table[e].direction===1?this.temp_tree=k("-",this._tree.args[0],this._tree.args[1]):this.temp_tree=k("-",this._tree.args[1],this._tree.args[0])},a.getDependencies=function(){var a=this._tree.dependencies();return p.isEqual(a,{r:0,theta:0})?(this.addFreeVariables(["r","theta"]),[]):p.isEqual(a,{r:0})?(this.addFreeVariables(["r"]),[]):a},a.computeStatus=function(a){var b,c,e,f,g,h,i,j,k=this._analysis.free_variables;if(k.length===0)return d;b={x:!0,y:!0,r:!0},c=k[0],e=k[1];if(k.length===1)return b.hasOwnProperty(c)?(f=this.temp_tree.polynomialOrder(a,c),c==="r"&&f>1?this.markError(r.t("We only plot polar inequalities that are first order in r.")):f>2?this.markError(r.t("Equation too complicated. One variable needs to be quadratic")):this.setGraphMode(undefined,undefined,c)):this.markError(r.t("We only plot inequalities of x and y, or r and theta"));j={x:"y",y:"x",r:"theta",theta:"r"};if(k.length===2)return j[c]!==e?this.markError(r.t("We only plot inequalities of x and y, or r and theta")):c==="r"||e==="r"?(i=this.temp_tree.polynomialOrder(a,"r"),i>1?this.markError(r.t("We only plot polar inequalities that are first order in r.")):this.setGraphMode(y.POLAR,"theta","r")):(g=this.temp_tree.polynomialOrder(a,"x"),h=this.temp_tree.polynomialOrder(a,"y"),h<=2?this.setGraphMode(y.Y,"x","y"):g<=2?this.setGraphMode(y.X,"y","x"):this.markError(r.t("Equation is too complicated.  One variable needs to be quadratic.")))},a.computeGraphData=function(a){var b,c,d,e={},f=this.compileAllBranches(this._context.getFrame()),g=this._analysis.graph_info,h=this._tree.operator,i=e[this.id]=[],j=[-1,0,0,1];for(c=0;c<4;c++)b=t.computeGraphData(a,g,f[c].fn)[0],b.compiled=f[c],b.operator=u.get(u.table[h].inclusive,j[c]),i.push(b);return d=t.polygonsFromSegments(i[1].segments,i[2].segments,i[1].graphMode),i.push({graphMode:y.POLYGONFILL,segments:d,poi:{}}),e},a.compileAllBranches=function(a){var b,c=[],d=this._analysis.graph_info.independent,e=this._analysis.graph_info.dependent,f=this.temp_tree.polynomialEvalStrings(a,e,d),g=w.inequalityRegionEvalStrings(f),h=[d];for(b=0;b<g.length;b++)c.push({fn:this.compiler.compile(h,g[b]),args:h,function_string:g[b]});return c},a.getOperator=function(){return this._tree.operator},a.getSlidableVariables=function(){return b.getSlidableVariables.call(this).filter(function(a){return a!=="r"})}}),g[CHAINED_COMPARATOR]=q(m,function(a){a.computeStatus=function(){var a=this._analysis.free_variables;return a.length===0?d:this.markError(r.t("We only graph solved double inequalities. Try sin(x) < y < cos(x)."))}}),n=q(l,function(a,c){a.init=function(a,b){c.init.call(this,a),this._description=b,this.id=b.id,this.ids_to_clean=[],this.columns=[],this.cell_tree=[];for(var d=0;d<this._description.columns.length;d++){this._description.columns[d].latex===""&&d>0&&(this._description.columns[d].latex="\\emptycolumn_"+d);var e=o(this._context,this._description.columns[d]);this.columns.push(e),this.cell_tree[d]=[];var f=this._description.columns[d].values;for(var g=0;g<f.length;g++){if(f[g].trim()===""){this.cell_tree[d][g]=j("");continue}this.cell_tree[d][g]=s.tryParse(f[g])}}if(this.columns[0]._tree&&this.columns[0]._tree instanceof i){this.shadowed_symbols=[this.columns[0]._tree.identifier];var h=this.shadowed_symbols[0];h==="y"&&(this.parse_error=r.t("Sorry - can't make a table based on y yet.  Try x?")),h==="r"&&(this.parse_error=r.t("Sorry - can't make a table based on r yet.  Try x?"))}else this.parse_error=r.t("Tables need a single variable for their first independent column"),this.shadowed_symbols=[]},a.isGraphed=function(){return!0},a.cleanupId=function(a){this.ids_to_clean.push(a)},a.getAllIds=function(){var a=[this.id];for(var b=0;b<this.columns.length;b++)a.push(this.columns[b].id);return a},a.exportedSymbols=function(){return[]},a.shadowedSymbols=function(){return this.shadowed_symbols},a.getDependencies=function(){var a={},b;for(var c=0;c<this.columns.length;c++){var d=this.columns[c].getDependencies();for(b in d){if(!d.hasOwnProperty(b))continue;a[b]=d[b]}for(var e=0;e<this.cell_tree[c].length;e++){var f=this.cell_tree[c][e],g=f.dependencies();for(b in g)a[b]=g[b]}}return a},a.referencesSymbol=function(a){for(var b=0;b<this.columns.length;b++){if(this.columns[b].referencesSymbol(a))return!0;for(var c=0;c<this.cell_tree[b].length;c++)if(this.cell_tree[b][c].references(a))return!0}return!1},a.getParseError=function(){return this.parse_error?this.parse_error:this.columns[0].getParseError()},a.computeStatus=function(a){if(this.getParseError())return b;for(var c=0;c<this.columns.length;c++){this.columns[c]._analysis.free_variables=[];var d=this.columns[c].getDependencies();for(var f in d){if(!d.hasOwnProperty(f))continue;var g=d[f];g<=1&&!a.defines(f)&&this.columns[c].addFreeVariables([f])}this.columns[c]._analysis.status=this.columns[c].computeStatus(a)}return e},a.invalidate=function(){c.invalidate.call(this),this.columns.forEach(function(a){a.invalidate()})},a.setAnalysis=function(a){c.setAnalysis.call(this,a),this.columns.forEach(function(a){a.setAnalysis({})})},a.getEvaluationState=function(){var a,b=this._description.columns[0].values.length,c=[],d,e=[],f=v(this._context.getFrame()),g=v(this._context.getFrame()),j=v(this._context.getFrame()),k,l;for(var m=0;m<this.columns.length;m++){var n=!1,o=!1;k=null;if(this.columns[m]._tree instanceof i){d=this.columns[m]._tree.identifier,f.defines(d)||(n=!0);if(m===0){n||(k=r.t("First column must be independent"));if(d==="y"||d=="theta"||d=="r")k=r.t("We don't do the right thing for tables with independent __symbol__ yet",{symbol:d});k||g.setVariable(d,h(0))}k||f.setVariable(d,h(0)),e[m]=d}if(!n){k=this.columns[m].getParseError();if(!k){try{a=this.columns[m].evaluateOnce(g),o=!0}catch(p){o=!1}try{a=this.columns[m].evaluateOnce(f),typeof a!="number"&&(k=a)}catch(p){k=p}}}this.columns[m].getParseError()&&(this.error=this.columns[m].getParseError());var q=[];if(!k)for(var s=0;s<b;s++){j=v(this._context.getFrame());for(var t=0;t<m;t++)if(!c[t].dependent&&!c[t].error){var u=c[t].values[s];typeof u=="number"&&j.setVariable(e[t],h(u))}if(n){var w=this.cell_tree[m][s];if(w.hasOwnProperty("error_msg"))l=w.error_msg;else try{l=w.evaluateOnce(j)}catch(p){l=p}}else try{l=this.columns[m].evaluateOnce(j)}catch(p){l=""}q.push(l)}var x={dependent:!n,discrete:!o,error:k,values:q};c.push(x)}return c},a.computeGraphData=function(a){var b,c,g,h,i,j,k=this.getEvaluationState(),l={};while(this.ids_to_clean.length)l[this.ids_to_clean.pop()]={};for(var m=1;m<k.length;m++){var n=this._description.columns[m];b=this.columns[m].id,k[m].error&&(l[b]={}),l[b]=[];var o=n.columnMode,p=o===z.POINTS||o===z.POINTS_AND_LINES,q=o===z.LINES||o===z.POINTS_AND_LINES,r=n.hidden;if(p&&!r){var s=[];for(h=0;h<k[0].values.length;h++)c=k[0].values[h],g=k[m].values[h],typeof c=="number"&&typeof g=="number"&&s.push([c,g]);j={segments:[s],graphMode:y.XYPOINT,poi:A(s),color:n.color,style:n.style},l[b].push(j)}if(q&&!r&&k[m].discrete){var u=t.Accumulator();for(h=0;h<k[0].values.length;h++)c=k[0].values[h],g=k[m].values[h],typeof c=="number"&&typeof g=="number"?u.addPoint([c,g]):u.breakSegment();j={segments:u.getSegments(),graphMode:y.PARAMETRIC,poi:[],color:n.color,style:n.style},l[b].push(j)}if(q&&!r&&!k[m].discrete){if(this.columns[m].getStatus()===e){var v=this.columns[m].computeGraphData(a);if(v[b].length!==1)throw"Programming error - graphData for table columns must be singleton";l[b].push(v[b][0])}if(this.columns[m].getStatus()===d||this.columns[m].getStatus()===f)try{i=this.columns[m].evaluateOnce(this._context.getFrame());var w={graphMode:y.Y,independent:"x",dependent:"y",operator:"="},x=this.compileConstantFunction(i),B=t.computeGraphData(a,w,x.fn);B[0].compiled=x;if(B.length!==1)throw"Programming error - graphData for table columns must be singleton";l[b].push(B[0])}catch(C){}}}return l},a.compileConstantFunction=function(a){var b={args:[],function_string:"return "+String(a)};return b.fn=new Function(b.args,b.function_string),b},a.getGraphInfo=function(){return{graphMode:y.Y}},a.shouldIntersect=function(){return!0},a.compileAllBranches=function(a){return this.columns.slice(1).filter(function(a){return a.getStatus()===e}).map(function(b){return b.compile(a)})}}),o=function(a,b){switch(b.type){case"table":return n(a,b);case"statement":case undefined:var c=s.tryParse(b.latex),d=g[c.statementType];return d(a,b,c);default:throw"Unrecognized statement type "+b.type}},{createAnalysisObject:o,status:{ERROR:b,WARNING:c,EVALUABLE:d,GRAPHABLE:e,SILENT:f}}}),define("math/functions",["require","underscore","pjs"],function(a){var b=a("underscore"),c=a("pjs"),d=c(function(a){a.init=function(){var a={};this.compile=function(c,d){var e=new Function(c,d);return b.bind(e,a)},this.register=function(b,c){a[b]=c}},a.dehydrateGraphData=function(a){for(var b=0;b<a.length;b++)a[b].compiled&&delete a[b].compiled.fn},a.rehydrateGraphData=function(a){for(var b=0;b<a.length;b++)a[b].compiled&&(a[b].compiled.fn=this.compile(a[b].compiled.args,a[b].compiled.function_string))},a.updateFromFunctionMap=function(a){for(var b in a){if(!a.hasOwnProperty(b))continue;this.register(b,a[b])}},a.updateFromSourceMap=function(a){for(var b in a){if(!a.hasOwnProperty(b))continue;var c=a[b];this.register(b,this.compile(c.args,c.source))}}});return d}),define("math/evaluatorcontext",["require","pjs","underscore","./plotter","./evalframe","./evaluatorobject","./poi","./functions","config","graphing/graphmode","main/fake_i18n"],function(a){var b=a("pjs"),c=a("underscore"),d=a("./plotter"),e=a("./evalframe"),f=a("./evaluatorobject"),g=a("./poi"),h=a("./functions"),i=a("config"),j=a("graphing/graphmode"),k=a("main/fake_i18n"),l=b(function(a){a.triggerGraphComputed=function(){},a.triggerStatusChange=function(){},a.triggerRemoveGraph=function(){},a.triggerRender=function(){},a.triggerRenderSlowly=function(){},a.triggerDidAddStatement=function(){},a.triggerDidRemoveStatement=function(){},a.triggerDidSetCompleteState=function(){},a.triggerDidSetDegreeMode=function(){},a.triggerDidUpdateIntersections=function(){},a.triggerDidUpdateFunctionMap=function(){},a.init=function(a){a||(a=e()),this.parent_frame=a,this.statements={},this.analysis=null,this.current_state={},this.dirty={},this.graph_changed=[],this.compiler=h(),this.intersectIds={};var b=a.functionMap();for(var c in b)this.compiler.register(c,b[c])},a.eachStatement=function(a){for(var b in this.statements)a.apply(this,[this.statements[b]])},a.processChangeSet=function(a){var b,c;a.isCompleteState&&(this.statements={},this.invalidate()),a.viewState&&this.setViewState(a.viewState),a.hasOwnProperty("degreeMode")&&this.setDegreeMode(a.degreeMode),a.hasOwnProperty("intersectIds")&&(this.intersectIds=a.intersectIds);if(a.statements)for(var d in a.statements){var e=a.statements[d];if(e===null){!a.isCompleteState&&this.statements.hasOwnProperty(d)&&(b=this.statements[d].getAllIds()),this.removeStatement(d);if(!a.isCompleteState&&b){for(var f=0;f<b.length;f++)this.triggerRemoveGraph(b[f]);this.triggerDidRemoveStatement(d)}}else this.addStatement(e),a.isCompleteState||this.triggerDidAddStatement(e)}a.hasOwnProperty("intersectId")&&this.updateIntersections(a.intersectId),a.isCompleteState&&(this.triggerDidSetCompleteState(a.statements),c=this.triggerRender,this.triggerRender=this.triggerRenderSlowly,this.publishing_paused=!1),this.publishChanges(),a.isCompleteState&&(this.triggerRender=c)},a.setViewState=function(a){if(c.isEqual(a,this.viewState))return;this.viewState=a,this.invalidate()},a.setDegreeMode=function(a){this.parent_frame.setDegreeMode(a),this.invalidate(),this.triggerDidSetDegreeMode(a)},a.publishing_paused=!1,a.changes_pending=!1,a.pausePublishing=function(){this.publishing_paused=!0},a.resumePublishing=function(){this.publishing_paused=!1,this.changes_pending&&this.publishChanges()},a.publishChanges=function(){if(this.publishing_paused){this.changes_pending=!0;return}this.changes_pending=!1,this.publishAllStatuses(),d.validateViewState(this.viewState)&&this.graphAllChanged()},a.publishAllStatuses=function(){var a={},b=this.current_state;this.current_state={},this.eachStatement(function(c){var d=c.id,e=this.getEvaluationState(d);JSON.stringify(e)!==JSON.stringify(b[d])&&(a[d]=e),this.current_state[d]=e}),this.triggerStatusChange(a)},a.graphAllChanged=function(){if(!this.graph_changed.length)return;var a=this.viewState,b,c;for(c=0;c<this.graph_changed.length;c++){b=this.graph_changed[c];if(!this.statements.hasOwnProperty(b))continue;this.statements[b].isGraphed()?this.graph(b,a):this.triggerRemoveGraph(b)}var d={};for(c=0;c<this.graph_changed.length;c++)d[this.graph_changed[c]]=!0;this.graph_changed=[];for(b in this.intersectIds){if(!this.intersectIds.hasOwnProperty(b))continue;if(d.hasOwnProperty(b))continue;this.updateIntersections(b)}this.triggerRender()},a.graph=function(a,b){if(!b)return;var c=this.statements[a],d=c.computeGraphData(b);if(this.intersectIds.hasOwnProperty(a)&&c.shouldIntersect()&&d.hasOwnProperty(a)){var e=this.findSomeIntersectionsWith(a);for(var f=0;f<e.intersections.length;f++)d[a][f].poi.intersections=e.intersections[f];e.streamRest()}for(var g in d)this.triggerGraphComputed(g,d[g])},a.updateIntersections=function(a){var b=this.statements[a];if(!b||!b.shouldIntersect()){this.triggerDidUpdateIntersections(a,[]);return}this.findSomeIntersectionsWith(a).streamRest()};var b={};a.findSomeIntersectionsWith=function(a){this.cancelIntersectionStreaming(a);var c=20,e=60,f=this,h=Array.prototype.push,i=f.statements[a],k=i.getGraphInfo(),l=k.graphMode,m=f.statements[a].compileAllBranches(f.getFrame()),n=d.computeDomain(f.viewState,k,null),o=[];for(var p in f.statements){if(!f.statements.hasOwnProperty(p))continue;if(String(p)===String(a))continue;o.push(f.statements[p])}var q=[];for(var r=0;r<m.length;r++)q[r]={x:[],y:[],intersects:[]};var s=o.length-1,t=!1,u=function(){var i=new Date,k=!1,p,r,v,w,x,y,z;for(s;s>=0;s--){if(new Date-i>c){if(!t)return;b[a]=setTimeout(u,e);if(!k)return;f.triggerDidUpdateIntersections(a,q);return}w=o[s];if(!w.shouldIntersect())continue;if(w.getGraphInfo().graphMode!==l)continue;x=w.compileAllBranches(f.getFrame());for(var A=0;A<m.length;A++){p=m[A].fn;for(var B=0;B<x.length;B++){r=x[B].fn,z=d.sampleXY(function(a){return r(a)-p(a)},n),v=g.findIntersections(z,p,r),v.x.length&&(k=!0),v.intersects=Array(v.x.length);for(var C=0,D=v.x.length;C<D;C++)v.intersects[C]=w.id;l===j.X&&(y=v.y,v.y=v.x,v.x=y),h.apply(q[A].x,v.x),h.apply(q[A].y,v.y),h.apply(q[A].intersects,v.intersects)}}}if(!t||!k)return;f.triggerDidUpdateIntersections(a,q),f.cancelIntersectionStreaming(a)};return u(),{intersections:q,streamRest:function(){f.triggerDidUpdateIntersections(a,q),t=!0,u()}}},a.cancelIntersectionStreaming=function(a){clearTimeout(b[a]),delete b[a]},a.cancelAllIntersectionStreaming=function(){for(var a in b[a]){if(!b.hasOwnProperty(a))continue;this.cancelIntersectionStreaming(a)}},a.addStatement=function(a){if(!a)return;var b=a.id;this.markDirty(b);var c;this.statements.hasOwnProperty(b)&&(c=this.statements[b].getAllIds()),this.statements[b]=f.createAnalysisObject(this,a);if(c)for(var d=0;d<c.length;d++){var e=c[d];e!=b&&this.statements[b].cleanupId(e)}this.markClean(a.id),this.markDirty(a.id)},a.removeStatement=function(a){if(!this.statements.hasOwnProperty(a))return;this.markDirty(a),delete this.statements[a]},a.recompute=function(){this.invalidate(),this.publishChanges()},a.invalidate=function(){this.analysis=null,this.current_state={},this.cancelAllIntersectionStreaming()},a.markDirty=function(a){if(this.dirty[a])return;this.dirty[a]=!0,this.cancelIntersectionStreaming(a);if(!this.statements[a])return;for(var b in this.statements[a].exportedSymbols())this.markSymbolDirty(b)},a.markSymbolDirty=function(a){if(this.assignmentForbidden(a))return;this.eachStatement(function(b){b.referencesSymbol(a)&&this.markDirty(b.id)})},a.markClean=function(a){delete this.dirty[a]},a.isDirty=function(a){return this.dirty.hasOwnProperty(a)},a.getFrame=function(){return this.getAnalysis().frame},a.getAnalysis=function(){return this.updateAnalysis(),this.analysis},a.getType=function(a){return this.statements[a].getType()},a.updateAnalysis=function(){if(this.hasOwnProperty("partial_analysis"))throw"Programming error - two overlapping call to updateAnalysis";var a=[],b;if(this.analysis){for(b in this.dirty)a.push(b);if(a.length===0)return}else for(b in this.statements)a.push(b);delete this.analysis,this.partial_analysis={};var c=this.partial_analysis;try{c.frame=e(this.parent_frame),this.eachStatement(function(a){var b=a.id;c[b]={},a.setAnalysis(c[b]);var d=a.getParseError();d&&(c[b].error=d)}),c.assignments=this.analyzeAssignments(),this.markVariableConflicts(c.assignments),this.analyzeDependencies(c);for(var d=0;d<c.dependencyOrder.length;d++)b=c.dependencyOrder
[d],this.statements[b].exportDefinitionsTo(c.frame,b);this.graph_changed=a,this.dirty={};var f=c.frame.leafFunctionMap();for(var g in f)this.compiler.register(g,f[g]);this.triggerDidUpdateFunctionMap(c.frame),this.analyzeStatus(c),i.get("dragpoints")&&this.analyzeMovable(c),this.analysis=this.partial_analysis}catch(h){this.invalidate()}finally{delete this.partial_analysis}},a.evaluateOnce=function(a){if(!this.statements.hasOwnProperty(a))throw"Statement "+a+" not defined";return this.statements[a].evaluateOnce(this.getFrame())},a.compile=function(a){return this.statements[a].compile(this.getFrame())},a.evalStrings=function(a){return this.statements[a].evalStrings(this.getFrame())},a.analyzeStatus=function(a){this.eachStatement(function(b){var c=b.id,d=this.partial_analysis[c];d.error&&(d.status=f.status.ERROR);if(d.status)return;d.status=b.computeStatus(a.frame)})},a.assignmentForbidden=function(a){return a==="x"||a==="y"||a==="theta"},a.getStatus=function(a){return this.getAnalysis()[a]===undefined?undefined:this.getAnalysis()[a].status},a.getEvaluationState=function(a){return this.getAnalysis(),this.statements[a].getEvaluationState()},a.analyzeAssignments=function(){var a={};return this.eachStatement(function(b){var c=b.exportedSymbols();for(var d in c){if(this.assignmentForbidden(d))continue;if(this.parent_frame&&this.parent_frame.defines(d)){b.markError(k.t("Cannot redefine __symbol__",{symbol:d}));continue}a.hasOwnProperty(d)||(a[d]=[]),a[d].push({id:b.id,arity:c[d]})}}),a},a.markVariableConflicts=function(a){this.eachStatement(function(b){var c=b.shadowedSymbols();for(var d=0;d<c.length;d++){var e=c[d];a.hasOwnProperty(e)&&b.conflictError(e)}})},a.analyzeDependencies=function(a){var b=[],c=[],d={},e={};for(var f in this.statements){var g=a[f];g.free_variables=[];if(!this.statements.hasOwnProperty(f))continue;var h=this.statements[f].getDependencies();d[f]=0;for(var i in h){if(!h.hasOwnProperty(i))continue;var j=h[i];if(this.parent_frame){if(j<=1&&this.parent_frame.hasVariable(i))continue;if(j>=1&&this.parent_frame.hasFunctionWithArity(i,j))continue}var l=a.assignments[i];if(this.parent_frame&&this.parent_frame.defines(i)){var m=this.parent_frame.arity(i);m===0&&(g.error=k.t("Cannot call constant __dependency__ as a function",{dependency:i})),m>0?g.error=k.t("__dependency__ is a function that requires __real_arity__ arguments",{dependency:i,real_arity:m}):g.error=k.t("Something has gone wrong.  Please report this to desmos.com support");continue}if(!l||l.length===0)j<=1?this.statements[f].addFreeVariables([i]):g.error=k.t("Function __dependency__ isn't defined. Try defining it in a new expression",{dependency:i});if(l&&l.length===1){var n=l[0].arity;if(n===j||n===0&&j===1)e.hasOwnProperty(i)||(e[i]=[]),e[i].push(f),d[f]++;else if(n===0)g.error=k.t("'__dependency__' is a variable, so can't be used as a function",{dependency:i});else if(n==1)g.error=k.t("Function '__dependency__' requires an argument. ",{dependency:i})+k.t("For example, try typing: __dependency__(x)",{dependency:i});else{var o=[];for(var p=0;p<n;p++)o[p]=p+1;var q=i+"("+o.join(", ")+")";g.error=k.t("Function '__dependency__' requires __assignment_arity__ arguments. ",{dependency:i,assignment_arity:n})+k.t("For example, try typing: __recommendation__",{recommendation:q})}}l&&l.length>1&&(g.error=k.t("'__dependency__' is defined more than once. Try deleting all but one definition of '__dependency__'",{dependency:i}))}d[f]===0&&c.push(f)}while(c.length){var r=c.pop();if(a[r].error)continue;b.push(r);var s=this.statements[r].exportedSymbols();for(var t in s){var u=e[t];if(!u)continue;while(u.length){var v=u.pop();this.statements[v].addFreeVariables(a[r].free_variables),d[v]--,d[v]===0&&(delete d[v],c.push(v))}}}for(f in d)d.hasOwnProperty(f)&&d[f]!==0&&(a[f].unresolved=!0,a[f].error=k.t("Circular dependency"));a.dependencyOrder=b},a.analyzeMovable=function(a){this.eachStatement(function(b){b.computeMovable&&b.computeMovable(a.frame)})}});return l}),define("worker/workercore",["require","math/evaluatorcontext","math/builtinframe","math/derivative"],function(a){var b=a("math/evaluatorcontext"),c=a("math/builtinframe");return a("math/derivative"),function(a){var d=b(c);return d.triggerGraphComputed=function(b,c){var d;for(d=0;d<c.length;d++)c[d].compiled&&delete c[d].compiled.fn;a("graphComputed",{id:b,graphData:c})},d.triggerDidUpdateIntersections=function(b,c){a("updateIntersections",{id:b,intersections:c})},d.triggerDidUpdateFunctionMap=function(b){a("updateFunctionMap",b.leafFunctionSourceMap())},d.triggerRender=function(){a("render")},d.triggerRenderSlowly=function(){a("renderSlowly")},d.triggerRemoveGraph=function(b){a("removeGraph",b)},d.triggerDidSetDegreeMode=function(b){a("setDegreeMode",b)},d.triggerStatusChange=function(b){a("statusChange",b)},{processChangeSet:function(b){d.processChangeSet(b),a("processChangeSet",b)}}}}),define("worker/fakeworker",["require","worker/workercore"],function(a){var b=a("worker/workercore");return function(a){function e(b,c){a({data:{type:b,payload:c}})}var c={},d=b(e);return c.postMessage=function(a){setTimeout(function(){d.processChangeSet(a)},0)},c}}),define("api/cross_origin_worker",["require"],function(){return function(a,b){var c,d,e,f,g,h,i,j,k=window.location,l=document.createElement("a");l.href=a,c=JSON.stringify(b.all());if(l.protocol===k.protocol&&l.host===k.host)return a+"?desmos_config="+encodeURIComponent(c);d="Desmos = {}; Desmos.config = JSON.parse('"+c+"');",e="importScripts('"+a+"');",f=d+e;try{g=new Blob([f],{type:"application/javascript"})}catch(m){h=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,i=new h,i.append(f),g=i.getBlob("application/javascript")}return j=window.URL||window.webkitURL,j.createObjectURL(g)}}),define("main/evaluator",["require","pjs","math/builtinframe","worker/fakeworker","math/functions","api/cross_origin_worker","config"],function(a){var b=a("pjs"),c=a("math/builtinframe"),d=a("worker/fakeworker"),e=a("math/functions"),f=a("api/cross_origin_worker"),g=a("config"),h=b(function(a){a.triggerStatusChange=function(a){},a.triggerRemove=function(a){},a.triggerGraphComputed=function(a,b){},a.triggerUpdateIntersections=function(a,b){},a.triggerRender=function(){},a.triggerRenderSlowly=function(){},a.init=function(a){this.functions=e(),this.changeSet=null,this.jobsInWorker=0,this.syncId=1,this.processingDisabled=!1;var b=function(){this.worker=d(this.processMessage.bind(this)),this.spawnNewWorker=function(){}}.bind(this);if(a)try{this.workerPath=f(a,g),this.spawnNewWorker()}catch(h){b()}else console.log("No worker path specified. Not using workers"),b();this.syncRequests=[],this.listeners.setDegreeMode=function(a){c.setDegreeMode(a)},this.functions.updateFromFunctionMap(c.functionMap())},a.spawnNewWorker=function(){this.worker&&this.worker.terminate(),this.worker=new Worker(this.workerPath),this.worker.addEventListener("message",this.processMessage.bind(this)),this.worker.onerror=function(a){console.log(a)},this.jobsInWorker=0},a.processMessage=function(a){this.listeners[a.data.type].call(this,a.data.payload)},a.listeners={},a.listeners.processChangeSet=function(a){var b=a.syncId;while(this.syncRequests.length&&this.syncRequests[0].id<=b){var c=this.syncRequests.shift();c.callback()}this.jobsInWorker--,this.processChangeSet()},a.listeners.log=function(a){console.log(a)},a.listeners.removeGraph=function(a){this.triggerRemove(a)},a.listeners.graphComputed=function(a){this.functions.rehydrateGraphData(a.graphData),this.triggerGraphComputed(a.id,a.graphData)},a.listeners.updateFunctionMap=function(a){this.functions.updateFromSourceMap(a)},a.listeners.updateIntersections=function(a){this.triggerUpdateIntersections(a.id,a.intersections)},a.listeners.statusChange=function(a){this.triggerStatusChange(a)},a.listeners.render=function(){this.triggerRender()},a.listeners.renderSlowly=function(){this.triggerRenderSlowly()},a._disableProcessing=function(){this.processingDisabled=!0},a._enableProcessing=function(){this.processingDisabled=!1,this.processChangeSet()},a.batch=function(a){var b=this.processingDisabled;this._disableProcessing();try{a()}finally{b||this._enableProcessing()}},a.processChangeSet=function(){if(!this.changeSet)return;if(this.processingDisabled)return;if(this.jobsInWorker>0)return;var a=this.changeSet;this.jobsInWorker++,this.changeSet=null,this.worker.postMessage(a)};var b=function(a){return function(){this.changeSet||(this.changeSet={}),a.apply(this,arguments),this.processChangeSet()}};a.setViewState=b(function(a){this.changeSet.viewState=a}),a.setCompleteState=b(function(a){this.jobsInWorker>0&&this.spawnNewWorker(),this.changeSet.isCompleteState=!0,this.changeSet.statements=a}),a.addStatement=b(function(a){this.changeSet.statements||(this.changeSet.statements={}),this.changeSet.statements[a.id]=a}),a.addStatements=b(function(a){for(var b=0;b<a.length;b++)this.addStatement(a[b])}),a.removeStatement=b(function(a){this.changeSet.statements||(this.changeSet.statements={}),this.changeSet.statements[a]=null}),a.removeStatements=b(function(a){for(var b=0;b<a.length;b++)this.removeStatement(a[b])}),a.setIntersectIds=b(function(a){this.changeSet.intersectIds=a}),a.updateIntersections=b(function(a){this.changeSet.intersectId=a}),a.setDegreeMode=b(function(a){this.changeSet.degreeMode=a}),a.notifyWhenSynced=b(function(a){this.syncId++,this.syncRequests.push({id:this.syncId,callback:a}),this.changeSet.syncId=this.syncId})});return h}),define("lib/browser",["require","jquery"],function(a){var b=a("jquery"),c={IS_IE8:navigator.userAgent.match(/MSIE 8.0/i)!==null,IS_IE9:navigator.userAgent.match(/MSIE 9.0/i)!==null,IS_IE:navigator.userAgent.match(/MSIE/i)!==null,IS_IPAD:navigator.userAgent.match(/iPad/i)!==null,IS_MOBILE:navigator.userAgent.match(/Mobile|Android/i)!==null,IS_ANDROID:navigator.userAgent.match(/Android/i)!==null,IS_KINDLE:navigator.userAgent.match(/Kindle/i)!==null||navigator.userAgent.match(/Silk/i)!==null,IS_IN_IFRAME:window.parent!==window};return c.IS_OPERA_LT_12=function(){var a,b;return navigator.userAgent.match(/OPERA/i)?(a=navigator.userAgent.match(/Version\/(\d+)/),!a||!a[1]?!1:(b=parseInt(a[1],10),b<12)):!1}(),c.SUPPORTS_TRANSLATE3D=!1,b(document).ready(function(){var a,b,d,e=document.createElement("p"),f={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(e,null);for(d in f)if(e.style[d]!==undefined){e.style[d]="translate3d(1px,1px,1px)",b=window.getComputedStyle(e);if(!b)return;a=b.getPropertyValue(f[d])}document.body.removeChild(e),c.SUPPORTS_TRANSLATE3D=a!==undefined&&a.length>0&&a!=="none"}),c.translateRule=function(a,b){return c.SUPPORTS_TRANSLATE3D?"translate3d("+a+(a?"px":"")+","+b+(b?"px":"")+",0)":"translate("+a+(a?"px":"")+","+b+(b?"px":"")+")"},c.CAPABLE_BROWSER=function(){var a,b,d,e,f=!1;return window.matchMedia?(a=window.matchMedia("(max-device-width:480px)"),a&&a.matches&&(f=!0)):c.IS_ANDROID&&(f=!0),b=document.createElement("canvas"),d=!!b.getContext&&!!b.getContext("2d"),e=c.IS_IPAD&&navigator.userAgent.match(/OS 3/i)!==null,d&&!(f||c.IS_KINDLE||e)}(),c}),define("lib/rounding",["require","math/distance"],function(a){var b=a("math/distance"),c=function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},d={bestRound:function(a,b,d){d=d||1;var e=-Math.floor(Math.log(b)/Math.LN10),f=c(a,e),g=c(a,e-2);return Math.abs(g-a)<d*b&&(f=g),f},shortestDecimalBetween:function(a,c){if(a>c){var d=c;c=a,a=d}if(a===c)return a;if(a<=0&&0<=c)return 0;var e=b.mean(a,c),f=-8,g=e;while(f<309){var h=Math.pow(10,-f),i=Math.round(e*h),j=i/h,k=a<=j&&j<=c;if(!k)break;g=j,f+=1}return g}};return d}),define("graphing/viewport",["require","lib/rounding"],function(a){function c(a,b,c,d){this.xmin=a!==undefined?a:-10,this.xmax=b!==undefined?b:10,this.ymin=c!==undefined?c:-10,this.ymax=d!==undefined?d:10}var b=a("lib/rounding");return c.prototype.toObject=function(){return{xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax}},c.fromObject=function(a){return new c(a.xmin,a.xmax,a.ymin,a.ymax)},c.prototype.equals=function(a){return this.xmin!==a.xmin?!1:this.ymin!==a.ymin?!1:this.xmax!==a.xmax?!1:this.ymax!==a.ymax?!1:!0},c.prototype.isXValid=function(){return this.xmax-this.xmin>0},c.prototype.isYValid=function(){return this.ymax-this.ymin>0},c.prototype.isValid=function(){return this.isXValid()&&this.isYValid()},c.prototype.isSquare=function(a){return Math.abs(a.height-a.width*this.aspectRatio())<1},c.prototype.aspectRatio=function(){return(this.ymax-this.ymin)/(this.xmax-this.xmin)},c.prototype.squareXAxis=function(a){var b=this.xmax-this.xmin,c=this.ymax-this.ymin,d=this.xmin+b/2,e=c/a.height*a.width;this.xmin=d-e/2,this.xmax=d+e/2},c.prototype.squareYAxis=function(a){var b=this.xmax-this.xmin,c=this.ymax-this.ymin,d=this.ymin+c/2,e=b/a.width*a.height;this.ymin=d-e/2,this.ymax=d+e/2},c.prototype.squareCrop=function(a){this.aspectRatio()>a.height/a.width?this.squareYAxis(a):this.squareXAxis(a)},c.prototype.round=function(a){var c=this.xmax-this.xmin,d=this.ymax-this.ymin,e=c/a.width,f=d/a.height;this.xmin=b.bestRound(this.xmin,e/10),this.xmax=b.bestRound(this.xmin+c,e/10),this.ymin=b.bestRound(this.ymin,f/10),this.ymax=b.bestRound(this.ymin+d,f/10)},c.prototype.clone=function(){return new c(this.xmin,this.xmax,this.ymin,this.ymax)},c.prototype.polarDiameter=function(){var a=Math.abs(this.xmax),b=Math.abs(this.xmin),c=Math.abs(this.ymax),d=Math.abs(this.ymin);return 1.5*Math.max(a,b,c,d)},c.prototype.largestR=function(){return Math.sqrt(Math.pow(Math.max(-this.xmin,this.xmax),2)+Math.pow(Math.max(-this.ymin,this.ymax),2))},c.prototype.smallestR=function(){return this.xmin<=0&&this.xmax>=0&&this.ymin<=0&&this.ymax>=0?0:this.xmin<=0&&this.xmax>=0?Math.min(Math.abs(this.ymin),Math.abs(this.ymax)):this.ymin<=0&&this.ymax>=0?Math.min(Math.abs(this.xmin),Math.abs(this.xmax)):Math.sqrt(Math.pow(Math.max(this.xmin,-this.xmax),2)+Math.pow(Math.max(this.ymin,-this.ymax),2))},c}),define("graphing/projection",["require","./viewport"],function(a){var b=a("./viewport"),c=function(a,b,c){this.screen=a,this.viewport=b,this.settings=c};return c.prototype.calculateViewportForScreen=function(a){var c=this.viewport,d=(a.width/this.screen.width-1)*(c.xmax-c.xmin),e=(a.height/this.screen.height-1)*(c.ymax-c.ymin),f=new b(c.xmin-d/2,c.xmax+d/2,c.ymin-e/2,c.ymax+e/2);return f.round(a),f},c.prototype.mapx=function(a){return(a-this.viewport.xmin)*this.screen.width/(this.viewport.xmax-this.viewport.xmin)},c.prototype.mapy=function(a){return this.screen.height-(a-this.viewport.ymin)*this.screen.height/(this.viewport.ymax-this.viewport.ymin)},c.prototype.map_pt=function(a){return{x:this.mapx(a.x),y:this.mapy(a.y)}},c.prototype.reverse_mapx=function(a){return a*(this.viewport.xmax-this.viewport.xmin)/this.screen.width+this.viewport.xmin},c.prototype.reverse_mapy=function(a){return-(a-this.screen.height)*(this.viewport.ymax-this.viewport.ymin)/this.screen.height+this.viewport.ymin},c.prototype.reverse_map_pt=function(a){return{x:this.reverse_mapx(a.x),y:this.reverse_mapy(a.y)}},c}),define("graphing/viewporttransformation",["require","pjs","./viewport","./projection"],function(a){var b=a("pjs"),c=a("./viewport"),d=a("./projection"),e=b(function(a){a.init=function(a,b,c,d){this.xOffset=a!==undefined?a:0,this.yOffset=b!==undefined?b:0,this.xScale=c!==undefined?c:1,this.yScale=d!==undefined?d:this.xScale},a.compose=function(a){return new e(a.xScale*this.xOffset+a.xOffset,a.yScale*this.yOffset+a.yOffset,a.xScale*this.xScale,a.yScale*this.yScale)},a.lerp=function(a,b){return new e((1-b)*this.xOffset+b*a.xOffset,(1-b)*this.yOffset+b*a.yOffset,(1-b)*this.xScale+b*a.xScale,(1-b)*this.yScale+b*a.yScale)},a.transformProjection=function(a){var b=a.viewport,e=a.screen,f=(b.xmin+b.xmax)/2,g=(b.ymin+b.ymax)/2,h=f+(b.xmin-f)/this.xScale,i=f+(b.xmax-f)/this.xScale,j=g+(b.ymin-g)/this.yScale,k=g+(b.ymax-g)/this.yScale,l=this.xOffset*(i-h)/e.width,m=-this.yOffset*(k-j)/e.height;return new d(a.screen,new c(h-l,i-l,j-m,k-m),a.settings)}});return e}),define("graphing/screen",["require"],function(){function a(a,b){return this.width=a,this.height=b,this}return a}),define("text",["module"],function(a){var b,c,d,e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],f=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,g=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,h=typeof location!="undefined"&&location.href,i=h&&location.protocol&&location.protocol.replace(/\:/,""),j=h&&location.hostname,k=h&&(location.port||undefined),l={},m=a.config&&a.config()||{},n={version:"2.0.7",strip:function(a){var b;return a?(a=a.replace(f,""),b=a.match(g),b&&(a=b[1])):a="",a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var a,b,c;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(b=0;b<3;b+=1){c=e[b];try{a=new ActiveXObject(c)}catch(d){}if(a){e=[c];break}}return a},parseName:function(a){var b,c,d,e=!1,f=a.indexOf("."),g=a.indexOf("./")===0||a.indexOf("../")===0;return f!==-1&&(!g||f>1)?(b=a.substring(0,f),c=a.substring(f+1,a.length)):b=a,d=c||b,f=d.indexOf("!"),f!==-1&&(e=d.substring(f+1)==="strip",d=d.substring(0,f),c?c=d:b=d),{moduleName:b,ext:c,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,c,d){var e,f,g,h=n.xdRegExp.exec(a);return h?(e=h[2],f=h[3],f=f.split(":"),g=f[1],f=f[0],(!e||e===b)&&(!f||f.toLowerCase()===c.toLowerCase())&&(!g&&!f||g===d)):!0},finishLoad:function(a,b,c,d){c=b?n.strip(c):c,m.isBuild&&(l[a]=c),d(c)},load:function(a,b,c,d){var e,f,g,l;if(d.isBuild&&!d.inlineText){c();return}m.isBuild=d.isBuild,e=n.parseName(a),f=e.moduleName+(e.ext?"."+e.ext:""),g=b.toUrl(f),l=m.useXhr||n.useXhr,!h||l(g,i,j,k)?n.get(g,function(b){n.finishLoad(a,e.strip,b,c)},function(a){c.error&&c.error(a)}):b([f],function(a){n.finishLoad(e.moduleName+"."+e.ext,e.strip,a,c)})},write:function(a,b,c){var d;l.hasOwnProperty(b)&&(d=n.jsEscape(l[b]),c.asModule(a+"!"+b,"define(function () { return '"+d+"';});\n"))},writeFile:function(a,b,c,d,e){var f=n.parseName(b),g=f.ext?"."+f.ext:"",h=f.moduleName+g,i=c.toUrl(f.moduleName+g)+".js";n.load(h,c,function(){var b=function(a){return d(i,a)};b.asModule=function(a,b){return d.asModule(a,i,b)},n.write(a,h,b,e)},e)}};if(m.env==="node"||!m.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)b=require.nodeRequire("fs"),n.get=function(a,c,d){var e;try{e=b.readFileSync(a,"utf8"),e.indexOf("﻿")===0&&(e=e.substring(1)),c(e)}catch(f){d(f)}};else if(m.env==="xhr"||!m.env&&n.createXhr())n.get=function(a,b,c,d){var e,f=n.createXhr();f.open("GET",a,!0);if(d)for(e in d)d.hasOwnProperty(e)&&f.setRequestHeader(e.toLowerCase(),d[e]);m.onXhr&&m.onXhr(f,a),f.onreadystatechange=function(){var d,e;f.readyState===4&&(d=f.status,d>399&&d<600?(e=new Error(a+" HTTP status: "+d),e.xhr=f,c(e)):b(f.responseText),m.onXhrComplete&&m.onXhrComplete(f,a))},f.send(null)};else if(m.env==="rhino"||!m.env&&typeof Packages!="undefined"&&typeof java!="undefined")n.get=function(a,b){var c,d,e="utf-8",f=new java.io.File(a),g=java.lang.System.getProperty("line.separator"),h=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f),e)),i="";try{c=new java.lang.StringBuffer,d=h.readLine(),d&&d.length()&&d.charAt(0)===65279&&(d=d.substring(1)),d!==null&&c.append(d);while((d=h.readLine())!==null)c.append(g),c.append(d);i=String(c.toString())}finally{h.close()}b(i)};else if(m.env==="xpconnect"||!m.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)c=Components.classes,d=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),n.get=function(a,b){var e,f,g={},h=new FileUtils.File(a);try{e=c["@mozilla.org/network/file-input-stream;1"].createInstance(d.nsIFileInputStream),e.init(h,1,0,!1),f=c["@mozilla.org/intl/converter-input-stream;1"].createInstance(d.nsIConverterInputStream),f.init(e,"utf-8",e.available(),d.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),f.readString(e.available(),g),f.close(),e.close(),b(g.value)}catch(i){throw new Error((h&&h.path||"")+": "+i)}};return n}),define("loadcss",["text"],function(a){function c(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("link");c.href=a,c.rel="stylesheet",c.type="text/css",b.appendChild(c)}var b={};return{load:function(d,e,f,g){var h=e.toUrl(d)+".css";g.isBuild?a.get(h,function(a){b[d]=a,f()}):(c(h),f())},onLayerEnd:function(a,c){var d,e,f,g="";for(d in b)g+=b[d];e=require.nodeRequire("fs"),f=c.path.replace(/\.js/g,".required.css"),e.writeFileSync(f,g,"utf8")},write:function(a,c,d){c in b?d("define('"+a+"!"+c+"', function(){});"):console.log("ERROR - failed to find css "+c+" in buildMap")}}}),define("loadcss!css/poi",function(){}),function(a){a.fn.disableTextSelection=function(b){return b&&this.each(function(){a(this).bind("mousedown touchstart",function(){a(document.activeElement).focusout()})}),this.each(function(){a(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})})}}(jQuery),define("lib/jquery.disabletextselection",function(){}),define("graphing/canvaslayer",["require","jquery","pjs","lib/browser","lib/jquery.disabletextselection"],function(a){var b,c=a("jquery"),d=a("pjs"),e=a("lib/browser");return a("lib/jquery.disabletextselection"),b=d(function(a){a.init=function(a,b){this.$=c("<div class='graph-outer'></div>").css("position","absolute").css("overflow","hidden").disableTextSelection(e.IS_IE),this.canvas_node=c("<canvas class='graph-inner'></canvas>").css("position","relative").css("display","block").disableTextSelection(e.IS_IE),this.devicePixelRatio=window.devicePixelRatio||1,this.ctx=this.canvas_node[0].getContext("2d"),this.resize(a,b),this.unscaledCanvas=document.createElement("canvas"),this.unscaledCanvas.width=a,this.unscaledCanvas.height=b,this.transforming=!1,this.$.append(this.canvas_node)},a.resize=function(a,b){a===1024&&this.devicePixelRatio===2&&(a=1023);if(a===this.width&&b===this.height)return;this.width=a,this.height=b,this.$.css("width",a+"px").css("height",b+"px"),this.canvas_node.css("width",a+"px").css("height",b+"px").attr("width",a*this.devicePixelRatio).attr("height",b*this.devicePixelRatio),this.unscaledCanvas&&(this.unscaledCanvas.width=a,this.unscaledCanvas.height=b),this.ctx.scale(this.devicePixelRatio,this.devicePixelRatio)},a.redraw=function(){},a.saveUnscaledCanvas=function(a){if(this.transforming)return;this.transforming=!0;var b=this.unscaledCanvas.getContext("2d"),c=this.unscaledCanvas.width,d=this.unscaledCanvas.height;b.clearRect(0,0,c,d),b.drawImage(this.canvas_node[0],0,0,c,d)},a.releaseUnscaledCanvas=function(){this.transforming=!1},a.paintScaledCanvas=function(a){if(!this.unscaledCanvas)return;var b=a,c=this.ctx.canvas.width,d=this.ctx.canvas.height;this.ctx.save(),this.ctx.clearRect(0,0,c,d),this.ctx.setTransform(b.xScale,0,0,b.yScale,b.xOffset*this.devicePixelRatio-.5*(b.xScale-1)*c,b.yOffset*this.devicePixelRatio-.5*(b.yScale-1)*d),this.ctx.drawImage(this.unscaledCanvas,0,0,c,d),this.ctx.restore()}}),b}),define("graphing/clipping",[],function(){var a={TOP:1,BOTTOM:2,LEFT:4,RIGHT:8,ALL:15,X:12,Y:3,POLAR_RADIAN_EQUALITY:1,POLAR_RADIAN_INEQUALITY:2,POLAR_DEGREE_EQUALITY:3,POLAR_DEGREE_INEQUALITY:4,Y_EQUALS:5,X_EQUALS:6,mapSegmentToCanvas:function(b,c,d,e){var f=[],g=c.xmin,h=c.ymin,i=c.xmax-c.xmin,j=c.ymax-c.ymin,k=d.width,l=d.height,m=k/i,n=-l/j,o=b.length,p,q,r,s,t;if(e===a.Y_EQUALS)for(p=0;p<o;p+=2)q=(b[p]-g)*m-.5,r=(b[p+1]-h)*n+l-.5,f.push(q,r);else if(e===a.X_EQUALS)for(p=0;p<o;p+=2)q=(b[p+1]-g)*m-.5,r=(b[p]-h)*n+l-.5,f.push(q,r);else if(e===a.POLAR_RADIAN_EQUALITY)for(p=0;p<b.length;p+=2)s=b[p],t=b[p+1],q=(t*Math.cos(s)-g)*m-.5,r=(t*Math.sin(s)-h)*n+l-.5,f.push(q,r);else if(e===a.POLAR_RADIAN_INEQUALITY)for(p=0;p<b.length;p+=2)s=b[p],t=b[p+1],t<0&&(t=0),q=(t*Math.cos(s)-g)*m-.5,r=(t*Math.sin(s)-h)*n+l-.5,f.push(q,r);else if(e===a.POLAR_DEGREE_EQUALITY)for(p=0;p<b.length;p+=2)s=b[p]*Math.PI/180,t=b[p+1],q=(t*Math.cos(s)-g)*m-.5,r=(t*Math.sin(s)-h)*n+l-.5,f.push(q,r);else if(e===a.POLAR_DEGREE_INEQUALITY)for(p=0;p<b.length;p+=2)s=b[p]*Math.PI/180,t=b[p+1],t<0&&(t=0),q=(t*Math.cos(s)-g)*m-.5,r=(t*Math.sin(s)-h)*n+l-.5,f.push(q,r);return f},clipStrokeEdges:function(b,c){return a.clipFillEdges(b,c,a.ALL,!0)},clipFillEdge:function(a,b,c,d){var e=[],f=[].push,g;d?(l=a[0],m=a[1],g=2,n=b(l,m),n&&e.push(l,m)):(l=a[a.length-2],m=a[a.length-1],g=0,n=b(l,m));for(var h=g;h<a.length;h+=2){var i=l,j=m,k=n,l=a[h],m=a[h+1],n=b(l,m);if(!n&&!k)continue;n&&k&&e.push(l,m),n&&!k&&(f.apply(e,c(l,m,i,j)),e.push(l,m)),!n&&k&&f.apply(e,c(i,j,l,m))}return e},clipFillEdges:function(b,c,d,e){var f=c.xmin,g=c.xmax,h=c.ymin,i=c.ymax,j=function(a,b){return a>=f},k=function(a,b){return a<=g},l=function(a,b){return b>=h},m=function(a,b){return b<=i},n=function(a,b,c,d){var e=d-b;return[f,b+e*(f-a)/(c-a)]},o=function(a,b,c,d){var e=d-b;return[g,b+e*(g-a)/(c-a)]},p=function(a,b,c,d){var e=c-a;return[a+e*(h-b)/(d-b),h]},q=function(a,b,c,d){var e=c-a;return[a+e*(i-b)/(d-b),i]},r=b;return d&a.LEFT&&(r=a.clipFillEdge(b,j,n,e)),d&a.BOTTOM&&(r=a.clipFillEdge(r,l,p,e)),d&a.RIGHT&&(r=a.clipFillEdge(r,k,o,e)),d&a.TOP&&(r=a.clipFillEdge(r,m,q,e)),r},clipAllFillEdges:function(b,c){return a.clipFillEdges(b,c,a.ALL,!1)},computePolarFill:function(a,b,c){var d=[],e,f=a[0],g=f+c,h=[];d.push(h);for(var i=0;i<a.length;i+=2){e=a[i];var j=a[i+1];j<0&&(j=0);if(e>=g){h=[],d.push(h),f=a[i-2],g=f;while(e>=g)g+=c;i-=4}else h.push(e,j)}if(b===0)for(i=0;i<d.length;i++)d[i].push(0,0);else{var k=c/16,l=b;for(i=0;i<d.length;i++){var m=d[i];f=m[0],g=m[m.length-2];for(e=g;e>f;e-=k)m.push(e,l);m.push(f,l)}}return d},computeCartesianFill:function(a,b){return a=a.slice(),a.push(a[a.length-2],b),a.push(a[0],b),[a]}};return a}),define("graphing/constants",[],function(){return{ANIMATE_ZOOM_DURATION:500,DOUBLETAP_ZOOM:2,ZOOM_FACTOR:1.125,MAX_DOTTED_SEGMENTS:1e3,STROKE_ALPHA:.7,HIGHLIGHTED_STROKE_ALPHA:1,FILL_ALPHA:.4,POINT_ALPHA:.9,HIGHLIGHTED_POINT_ALPHA:.6,POLAR_ALPHA:.2,POI_ALPHA:.01}}),define("graphing/dasheddrawer",["require","./constants","math/distance"],function(a){function d(a,c){return this.pattern=[11,7],this.replen=this.pattern[0]+this.pattern[1],c!==null&&c/this.replen>b.MAX_DOTTED_SEGMENTS&&(this.pattern[0]=c*this.pattern[0]/this.replen/b.MAX_DOTTED_SEGMENTS,this.pattern[1]=c*this.pattern[1]/this.replen/b.MAX_DOTTED_SEGMENTS),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null,this.ctx=a,this}var b=a("./constants"),c=a("math/distance");return d.getTotalSegmentLength=function(a){var b,d,e,f,g,h;if(a.length<4)return 0;b=0,d=a[0],e=a[1];for(f=2;f<a.length;f+=2)g=a[f],h=a[f+1],b+=c.hypot(g-d,h-e),d=g,e=h;return b},d.prototype.start=function(a,b){this.ctx.desmos_batching||this.ctx.beginPath(),this.px=a,this.py=b},d.prototype.next=function(a,b){var c,d,e,f=this.pattern[this.pstate],g=Math.sqrt(Math.pow(a-this.px,2)+Math.pow(b-this.py,2));if(g>1e-5){while(g+this.dstaccum>=f)c=a-this.px,d=b-this.py,e=f-this.dstaccum,c*=e/g,d*=e/g,this.pstate===0&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(this.px+c,this.py+d)),this.dstaccum=0,this.px+=c,this.py+=d,this.pstate=1-this.pstate,f=this.pattern[this.pstate],g-=e;this.pstate===0&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(a,b))}this.px=a,this.py=b,this.dstaccum+=g},d.prototype.skip=function(a,b){this.px=a,this.py=b},d.prototype.close=function(){this.ctx.desmos_batching||this.ctx.stroke(),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null},d}),define("graphing/graphslayer",["require","pjs","underscore","./canvaslayer","./clipping","./dasheddrawer","./constants","./viewport","graphing/graphmode"],function(a){var b=a("pjs"),c=a("underscore"),d=a("./canvaslayer"),e=a("./clipping"),f=a("./dasheddrawer"),g=a("./constants"),h=a("./viewport"),i=a("graphing/graphmode"),j=function(a){return new h(-3,a.width+3,-3,a.height+3)},k=b(d,function(a){a.redraw=function(a,b,c){var d=a.screen;this.resize(d.width,d.height),this.ctx.clearRect(0,0,d.width,d.height),this.redrawToCtx(this.ctx,a,b,c)},a.redrawToCtx=function(a,b,d,e){if(e===undefined||e.length<c.size(d))e=c.keys(d);e.forEach(function(c){var e=d[c];e!==undefined&&e.visible&&k.drawSketchToCtx(d[c],a,b)})}});return k.eachSegment=function(a,b){var c,d,e,f;for(c=0;c<a.branches.length;c++){d=a.branches[c];for(e=0;e<d.segments.length;e++)f=d.segments[e],b(d,f)}},k.drawSketchToCtx=function(a,b,c){var d;if(!a.branches||!a.branches.length)return;b.lineWidth=c.settings.graphLineWidth,b.strokeStyle=a.color,b.fillStyle=a.color,b.lineJoin="round",b.lineCap="round",d=!!c.settings.takingScreenshot,b.desmos_batching=!0,b.beginPath(),b.save(),k.eachSegment(a,function(a,e){(a.graphMode===i.XYPOINT||a.graphMode===i.XYPOINT_MOVABLE&&d)&&k.drawPointsToCtx(b,c,e,a.style)}),b.globalAlpha=g.POINT_ALPHA,b.stroke(),b.restore(),b.desmos_batching=!1,k.eachSegment(a,function(a,d){var e,f,g,h;if(a.graphMode===i.XYPOINT||a.graphMode===i.XYPOINT_MOVABLE)return;e=i.Y,a.flip&&(e=i.X),a.graphMode&&(e=a.graphMode),e===i.POLYGONFILL?k.fillPolygonToCtx(b,c,d):(f=a.operator,g=f=="<"||f==">"||f=="<="||f==">="||f=="\\leq"||f=="\\le"||f=="\\geq"||f=="\\ge",h=f=="<="||f=="<"||f=="\\leq"||f=="\\le",g&&k.fillGraphStrokeToCtx(b,c,d,h,e))}),b.desmos_batching=!0,b.beginPath(),k.eachSegment(a,function(d,e){var f,g,h;if(d.graphMode===i.XYPOINT||d.graphMode===i.XYPOINT_MOVABLE)return;f=i.Y,d.flip&&(f=i.X),d.graphMode&&(f=d.graphMode),g=d.operator,h=g=="<"||g==">"||g=="!="||a.style==="dashed",k.drawGraphStrokeToCtx(b,c,e,h,f,g)}),b.globalAlpha=g.STROKE_ALPHA,b.stroke(),b.globalAlpha=1,b.desmos_batching=!1},k.drawGraphStrokeToCtx=function(a,b,c,d,h,i){var l,m,n,o,p;a.globalAlpha=b.settings.highlight?g.HIGHLIGHTED_STROKE_ALPHA:g.STROKE_ALPHA,l=k.getClippingGraphType(h,i!=="=",b.settings),m=e.mapSegmentToCanvas(c,b.viewport,b.screen,l),n=e.clipStrokeEdges(m,j(b.screen));if(!d){a.desmos_batching||a.beginPath(),a.moveTo(n[0],n[1]);for(o=0;o<n.length;o+=2)a.lineTo(n[o],n[o+1]);a.desmos_batching||a.stroke()}else{p=new f(a,f.getTotalSegmentLength(n)),p.start(n[0],n[1]);for(o=2;o<n.length;o+=2)p.next(n[o],n[o+1]);p.close()}a.globalAlpha=1},k.mapPointToScreen=function(a,b,c){var d,e=20,f=a.mapx(b)-.5;return f<-e||f>a.screen.width+e?null:(d=a.mapy(c)-.5,d<-e||d>a.screen.height+e?null:{x:f,y:d})},k.drawPointToCtx=function(a,b,c,d,e,f){var h,i=k.mapPointToScreen(b,c,d);return i?(a.globalAlpha=b.settings.highlight?g.HIGHLIGHTED_POINT_ALPHA:g.POINT_ALPHA,e&&(a.globalAlpha=e),a.globalAlpha=g.POINT_ALPHA,a.desmos_batching||a.beginPath(),f==="cross"?(h=b.settings.pointLineWidth*.4,a.moveTo(i.x-h,i.y-h),a.lineTo(i.x+h,i.y+h),a.moveTo(i.x+h,i.y-h),a.lineTo(i.x-h,i.y+h),a.lineWidth=b.settings.pointLineWidth*.3):f==="open"?(h=b.settings.pointLineWidth*.5,a.arc(i.x,i.y,h,0,Math.PI*2,!0),a.closePath(),a.fillStyle="white",a.lineWidth=b.settings.pointLineWidth*.25,a.fill()):(a.moveTo(i.x-.1,i.y-.1),a.lineTo(i.x-.1,i.y+.1),a.lineTo(i.x+.1,i.y+.1),a.lineTo(i.x+.1,i.y-.1)),a.desmos_batching||a.stroke(),a.globalAlpha=1,!0):!1},k.drawPointsToCtx=function(a,b,c,d){var e;a.lineWidth=b.settings.pointLineWidth;for(e=0;e<c.length;e++)k.drawPointToCtx(a,b,c[e][0],c[e][1],!1,d)},k.fillGraphStrokeToCtx=function(a,b,c,d,f){var h,l,m,n,o,p,q,r,s,t,u;a.globalAlpha=f===i.POLAR?g.POLAR_ALPHA:g.FILL_ALPHA,h=null,l=null,f===i.POLAR?(l=e.ALL,n=d?0:b.viewport.polarDiameter(),o=b.settings.degreeMode?180:2*Math.PI,h=e.computePolarFill(c,n,o)):f===i.Y?(l=e.Y,m=d?b.viewport.ymin:b.viewport.ymax,h=e.computeCartesianFill(c,m)):f===i.X&&(l=e.X,m=d?b.viewport.xmin:b.viewport.xmax,h=e.computeCartesianFill(c,m)),p=j(b.screen);for(q=0;q<h.length;q++){r=k.getClippingGraphType(f,!0,b.settings),s=e.mapSegmentToCanvas(h[q],b.viewport,b.screen,r),t=e.clipFillEdges(s,p,l);if(t.length>=6){a.beginPath(),a.moveTo(t[0],t[1]);for(u=2;u<t.length;u+=2)a.lineTo(t[u],t[u+1]);a.closePath(),a.fill()}}a.globalAlpha=1},k.fillPolygonToCtx=function(a,b,c){var d,f,h,i;a.globalAlpha=g.FILL_ALPHA,d=j(b.screen),f=e.mapSegmentToCanvas(c,b.viewport,b.screen,e.Y_EQUALS),h=e.clipFillEdges(f,d,e.ALL);if(h.length>=6){a.beginPath(),a.moveTo(h[0],h[1]);for(i=2;i<h.length;i+=2)a.lineTo(h[i],h[i+1]);a.closePath(),a.fill()}a.globalAlpha=1},k.getClippingGraphType=function(a,b,c){switch(a){case i.X:return e.X_EQUALS;case i.PARAMETRIC:case i.Y:return e.Y_EQUALS;case i.POLAR:return c.degreeMode?b?e.POLAR_DEGREE_INEQUALITY:e.POLAR_DEGREE_EQUALITY:b?e.POLAR_RADIAN_INEQUALITY
:e.POLAR_RADIAN_EQUALITY}},k}),define("graphing/poidotslayer",["require","loadcss!css/poi","pjs","./graphslayer","./canvaslayer","math/poi","./constants"],function(a){var b,c,d,e,f,g;return a("loadcss!css/poi"),b=a("pjs"),c=a("./graphslayer"),d=a("./canvaslayer"),e=a("math/poi"),f=a("./constants"),g=b(d,function(a,b){a.init=function(){b.init.apply(this,arguments),this.$.addClass("poi-dots-layer")},a.redraw=function(a,b){this.resize(a.screen.width,a.screen.height),this.ctx.clearRect(0,0,a.screen.width,a.screen.height);var c=[];for(var d in b){var f=b[d];if(f.visible){f.showHighlight&&g.drawSketchHighlight(f,this.ctx,a);var h=f.getPOI();(f.showPOI||h.length&&h[0].type===e.DEFINITION)&&c.push.apply(c,g.drawPOIs(h,this.ctx,"#AAAAAA",a))}}this.savedPOI=c},a.getDrawnPOI=function(){return this.savedPOI||[]}}),g.drawSketchHighlight=function(a,b,d){d.settings.setProperty("highlight",!0),c.drawSketchToCtx(a,b,d),d.settings.setProperty("highlight",!1)},g.drawPOIs=function(a,b,d,g){var h,i,j,k,l;b.lineWidth=g.settings.pointLineWidth,b.strokeStyle=d||"#AAAAAA",b.fillStyle=d||"#AAAAAA",b.lineJoin="round",b.lineCap="round",h=b.globalAlpha,b.globalAlpha=f.POI_ALPHA,i=[],k=a.length;if(k&&a[0].type===e.DEFINITION)for(j=0;j<k;j++)l=a[j],c.mapPointToScreen(g,l.x,l.y)&&i.push(l);else for(j=0;j<k;j++)l=a[j],c.drawPointToCtx(b,g,l.x,l.y,f.POI_ALPHA)&&i.push(l);return b.globalAlpha=h,i},g}),define("graphing/domlayer",["require","pjs","jquery","lib/browser","lib/jquery.disabletextselection"],function(a){var b,c=a("pjs"),d=a("jquery"),e=a("lib/browser");return a("lib/jquery.disabletextselection"),b=c(function(a){a.init=function(a,b){this.$=d("<div class='graph-outer'></div>").css("position","absolute").css("overflow","hidden").disableTextSelection(e.IS_IE),this.dom_node=d("<div></div>").css("position","relative").css("display","block").disableTextSelection(e.IS_IE),this.resize(a,b),this.$.append(this.dom_node)},a.resize=function(a,b){if(a===this.width&&b===this.height)return;this.width=a,this.height=b,this.$.css("width",a+"px").css("height",b+"px"),this.dom_node.css("width",a+"px").css("height",b+"px")},a.redraw=function(){}}),b}),define("graphing/label",["math/builtin"],function(a){function d(b,c){var d,e,j,k,l,m,n;return isNaN(b)?{string:"undefined",value:b}:b===0?{string:"0",value:b}:(c||(c=b),d=a.toFraction(b/Math.PI,24),h(c)&&a.approx(d.n/d.d*Math.PI,b,3)?(d.n===0?e="0":d.n===1?e="π":d.n===-1?e="-π":e=d.n.toString()+"π",d.d===1?j="":j="/"+d.d.toString(),{string:e+j,value:d.n/d.d*Math.PI}):(h(c)?(m=f(b.toFixed(i(c))),l=null,k=null):(n=g(b.toExponential(i(c/b))).split("e"),k=n[0]+"×"+"10",l=n[1].replace("+",""),m=g(b.toExponential(i(c/b))).replace("+","")),{string:m,mantissa:k,superscript:l,value:b}))}function e(a,b,c,e){var f=d(a,b),g=d(e(f.value),c);return[f,g]}function f(a){return a.indexOf(".")===-1?a:a.replace(b,"")}function g(a){return a.replace(c,"e")}function h(a){return a=Math.abs(a),1e-4<a&&a<1e7}function i(a){return a=Math.abs(a),a=Math.max(a,1e-16),Math.max(0,Math.floor(4.5-Math.log(a)/Math.LN10))}var b,c;return b=/\.?0+$/,c=/\.?0+e/,{value:d,point:e}}),define("graphing/poilabelslayer",["require","pjs","jquery","./domlayer","./label","graphing/graphmode","math/poi"],function(a){var b=a("pjs"),c=a("jquery"),d=a("./domlayer"),e=a("./label"),f=a("graphing/graphmode"),g=a("math/poi"),h=b(d,function(a,b){function e(a){d.hasClass(a)||d.addClass(a)}function f(a){d.hasClass(a)&&d.removeClass(a)}var d=c("body");a.init=function(){b.init.call(this,arguments),this.$.addClass("poi-labels-layer")},a.redraw=function(a,b){this.resize(a.screen.width,a.screen.height),this.dom_node.find(".poi").remove();var c=this.hoveredPOI,d=c?c.sketch:null,g=!1,i=[];for(var j in b){var k=b[j];k===d&&(g=!0);if(!k.visible)continue;var l=h.drawOpenPOI(k,this.dom_node,a);l.length&&i.push.apply(i,l)}g||(c=this.hoveredPOI=null),c&&c.sketch.visible?c.isOpen()?e("mouse-over-opened-poi"):(h.drawHoveredPOI(this.dom_node,c,a),e("mouse-over-closed-poi")):(f("mouse-over-closed-poi"),f("mouse-over-opened-poi")),this.savedPOI=i},a.getDrawnPOI=function(){return this.savedPOI||[]}});return h.getPointLabel=function(a,b){var c,d,g,h,i,j,k,l=b.xmax-b.xmin,m=b.ymax-b.ymin,n=a.getGraphMode();return n===f.XYPOINT||n===f.XYPOINT_MOVABLE?c=[e.value(a.x,l),e.value(a.y,m)]:(d=n===f.X,g=d?a.y:a.x,h=a.getCompiledFunction(),c=e.point(g,l,m,h),d&&(i=c[0],c[0]=c[1],c[1]=i)),j=c[0].superscript?c[0].mantissa+"<sup>"+c[0].superscript+"</sup>":c[0].string,k=c[1].superscript?c[1].mantissa+"<sup>"+c[1].superscript+"</sup>":c[1].string,{x:c[0].value,x_label:j,y:c[1].value,y_label:k,is_hole:!isFinite(c[1].value)}},h.createSinglePOI=function(a,b){var d=h.getPointLabel(a,b),e=d.is_hole?" hole":"",f=a.type===g.DEFINITION?" real":"",i=d.x_label.replace("π","<span class='pi'>π</span>"),j=d.y_label.replace("π","<span class='pi'>π</span>");return c('<div class="tracept poi'+e+f+'">'+'  <div class="pt"></div>'+'  <div class="label">'+i+", "+j+"</div>"+'  <div class="arrow""></div>'+"</div>")},h.drawHoveredPOI=function(a,b,c){var d,e=c.mapx(b.x),f=c.mapy(b.y);e>-20&&f>-20&&e<c.screen.width+20&&f<c.screen.height+20&&(d=h.createSinglePOI(b,c.viewport),d.css({left:e+"px",top:f+"px"}),d.addClass("mouseover"),a.append(d))},h.drawOpenPOI=function(a,b,c){var d,e,f,g,i,j,k=a.openPOI;if(!k.length)return[];d=[];for(e=0;e<k.length;e++)f=k[e],g=c.mapx(f.x),i=c.mapy(f.y),g>-20&&i>-20&&g<c.screen.width+20&&i<c.screen.height+20&&(j=h.createSinglePOI(f,c.viewport),j.css({left:g+"px",top:i+"px"}),j.addClass("opened"),b.append(j),d.push(f));return d},h}),define("graphing/gridlayer",["jquery","pjs","./canvaslayer","./label"],function(a,b,c,d){var e=b(c,function(a){a.redraw=function(a,b){var c=a.screen;this.resize(c.width,c.height),this.ctx.clearRect(0,0,c.width,c.height),this.redrawToCtx(this.ctx,a,b)},a.redrawToCtx=function(a,b,c){b.settings.showGrid&&(b.settings.polarMode?this.drawPolarGrid(a,b):this.drawCartesianGrid(a,b)),b.settings.showAxes&&this.drawAxes(a,b,c),b.settings.showLabels&&(b.settings.polarMode?this.drawPolarLabels(a,b):this.drawCartesianLabels(a,b))};var b=function(a,b,c,d){var e=Math.ceil(a/c),f=Math.floor(b/c),g=1/c;if(e>f)return;if(f-e>1e4)return;for(var h=e;h<=f;h++)d(h/g)},c=function(a,b,c){return a<b?b:a>c?c:a};a.drawPolarGrid=function(a,c){var d=k(c),e=c.settings.minorAxisOpacity,f=c.settings.majorAxisOpacity,g=1-(1-f)/(1-e),h=c.mapx(0),i=c.mapy(0),j=c.screen.height/(c.viewport.ymax-c.viewport.ymin),l=c.screen.width/(c.viewport.xmax-c.viewport.xmin),m=j/l,n=i/m,o=c.viewport.smallestR(),p=c.viewport.largestR(),q=d.minorStepX*Math.max(1,Math.floor(o/d.minorStepX)),r=d.majorStepX*Math.max(1,Math.floor(o/d.majorStepX));a.save(),a.scale(1,m),a.beginPath(),b(q,p,d.minorStepX,function(b){var d=c.mapx(b)-h;a.moveTo(h+d,n),a.arc(h,n,d,0,2*Math.PI)}),a.restore(),a.lineWidth=1,a.strokeStyle="rgba(0, 0 , 0, "+e+")",a.stroke(),a.beginPath();var s=o>0?5:15;b(0,359,s,function(b){a.moveTo(h,i);var d=c.mapx(p*Math.cos(b*Math.PI/180)),e=c.mapy(p*Math.sin(b*Math.PI/180));a.lineTo(d,e)}),a.stroke(),a.save(),a.scale(1,m),a.beginPath(),b(r,p,d.majorStepX,function(b){var d=c.mapx(b)-h;a.moveTo(h+d,n),a.arc(h,n,d,0,2*Math.PI)}),a.restore(),a.lineWidth=1,a.strokeStyle="rgba(0, 0 , 0, "+g+")",a.stroke(),a.beginPath(),b(0,345,90,function(b){a.moveTo(h,i);var d=c.mapx(p*Math.cos(b*Math.PI/180)),e=c.mapy(p*Math.sin(b*Math.PI/180));a.lineTo(d,e)}),a.stroke()},a.drawCartesianGrid=function(a,c){var d=c.viewport.xmin,e=c.viewport.ymin,f=c.viewport.xmax,g=c.viewport.ymax,h=k(c),i=c.screen.width,j=c.screen.height,l=c.settings.minorAxisOpacity,m=c.settings.majorAxisOpacity;a.lineWidth=1,a.beginPath(),a.strokeStyle="rgba(0, 0 , 0, "+l+")",b(d,f,h.minorStepX,function(b){var d=Math.round(c.mapx(b));if(d===i)return;a.moveTo(d-.5,0),a.lineTo(d-.5,j)}),b(e,g,h.minorStepY,function(b){var d=Math.round(c.mapy(b));if(d===j)return;a.moveTo(0,d-.5),a.lineTo(i,d-.5)}),a.stroke(),a.beginPath();var n=1-(1-m)/(1-l);a.strokeStyle="rgba(0, 0 , 0, "+n+")",b(d,f,h.majorStepX,function(b){var d=Math.round(c.mapx(b));if(d===i)return;a.moveTo(d-.5,0),a.lineTo(d-.5,j)}),b(e,g,h.majorStepY,function(b){var d=Math.round(c.mapy(b));if(d===j)return;a.moveTo(0,d-.5),a.lineTo(i,d-.5)}),a.stroke()},a.drawAxes=function(a,b,c){var d=b.settings.axisLineOffset,e=b.settings.axisOpacity.toString(),f="rgba(127,205,230,"+e+")",g="rgba(0,0,0,"+e+")",h=3,i=Math.round(b.mapx(0))-d,j=Math.round(b.mapy(0))-d,k=b.screen.height,l=b.screen.width;a.lineWidth=b.settings.axisLineWidth*(c==="y"?h:1),a.strokeStyle=c==="y"?f:g,a.beginPath(),a.moveTo(i,0),a.lineTo(i,k),a.stroke(),a.lineWidth=b.settings.axisLineWidth*(c==="x"?h:1),a.strokeStyle=c==="x"?f:g,a.beginPath(),a.moveTo(0,j),a.lineTo(l,j),a.stroke()},a.drawPolarLabels=function(a,g){function v(a,b,c){var d=Math.sqrt(a*a-b*b);n<=d&&d<=o&&c.push([g.mapx(b),g.mapy(d)]),n<=-d&&-d<=o&&c.push([g.mapx(b),g.mapy(-d)])}function w(a,b,c){var d=Math.sqrt(a*a-b*b);l<=d&&d<=m&&c.push([g.mapx(d),g.mapy(b)]),l<=-d&&-d<=m&&c.push([g.mapx(-d),g.mapy(b)])}var h=k(g),i=g.viewport.largestR(),j=g.viewport.smallestR(),l=g.viewport.xmin,m=g.viewport.xmax,n=g.viewport.ymin,o=g.viewport.ymax,p=g.screen.width,q=g.screen.height,r=g.settings.labelHangingColor,s=g.settings.labelNormalColor,t=g.settings.labelSize,u=t;a.textAlign="center",a.textBaseline="middle",a.font=t.toString()+"px Arial";var x=g.mapx(0),y=g.mapy(0),z=n<=0&&0<=o,A=l<=0&&0<=m,B="";if(!z&&!A){var C=Math.abs(x),D=Math.abs(x-p),E=Math.abs(y),F=Math.abs(y-q),G,H,I,J;C<=D?(G="left",I=C):(G="right",I=D),E<=F?(H="top",J=E):(H="bottom",J=F),B=I<=J?G:H}b(h.majorStepX,i,h.majorStepX,function(b){var h=[],j=d.value(b,i),k=e(a,t,j);A&&n<=b&&b<=o&&h.push([x-k.main-k.superscript-5,g.mapy(b)]),A&&n<=-b&&-b<=o&&h.push([x-k.main-k.superscript-5,g.mapy(-b)]),z&&l<=b&&b<=m&&h.push([g.mapx(b),y+u*.6+3]),z&&l<=-b&&-b<=m&&h.push([g.mapx(-b),y+u*.6+3]);switch(B){case"top":w(b,o,h);break;case"bottom":w(b,n,h);break;case"left":v(b,l,h);break;case"right":v(b,m,h)}for(var r=0;r<h.length;r++){var C=c(h[r][0],3+k.main,p-3-k-k.superscript),D=c(h[r][1],3+u,q-3-u);a.fillStyle=s,f(a,t,j,C,D,k)}});var K=Math.ceil(j/h.majorStepX),L=Math.floor(i/h.majorStepX),M=Math.ceil((K+L)/2),N=M*h.majorStepX,O=j>0?15:30;b(0,359,O,function(b){var e;g.settings.degreeMode?e=b.toString()+"°":e=d.value(b*Math.PI/180,2*Math.PI).string;var f=a.measureText(e).width/2,h=N/1.05,i=h*Math.cos(b*Math.PI/180),j=h*Math.sin(b*Math.PI/180);if(i<l||i>m||j<n||j>o)return;var k=g.mapx(i),s=g.mapy(j);if(b===0||b===180)s-=u;else if(b===90||b===270)k+=f+3;var v=c(k,3+f,p-3-f),w=c(s,3+u,q-3-u);a.fillStyle=r,a.font=t.toString()+"px Arial",a.fillText(e,v,w)})};var e=function(a,b,c){var d=0,e;return c.superscript&&c.string!=="0"?(a.font=b.toString()+"px Arial",e=a.measureText(c.mantissa).width/2,a.font=Math.round(.8*b).toString()+"px Arial",d=a.measureText(c.superscript).width):(a.font=b.toString()+"px Arial",e=a.measureText(c.string).width/2),{main:e,superscript:d}},f=function(a,b,c,d,e,f){c.superscript?(a.font=b.toString()+"px Arial",a.fillText(c.mantissa,d,e+Math.round(b/5)),a.font=Math.round(.8*b).toString()+"px Arial",a.fillText(c.superscript,d+f.main+f.superscript/2,e-Math.round(b/4))):(a.font=b.toString()+"px Arial",a.fillText(c.string,d,e))};a.drawCartesianLabels=function(a,g){var h=g.viewport.xmin,i=g.viewport.xmax,j=g.viewport.ymin,l=g.viewport.ymax,m=k(g),n=g.screen.width,o=g.screen.height,p=g.settings.labelHangingColor,q=g.settings.labelNormalColor,r=g.mapx(0),s=g.mapy(0),t=g.settings.labelSize,u=t;a.textAlign="center",a.textBaseline="middle",a.font=t.toString()+"px Arial";var v=(a.measureText("-1").width-a.measureText("1").width)/2;b(h,i,m.majorStepX,function(b){var j=d.value(b,i-h),k=e(a,t,j),l=g.mapx(b),m=s+u*.6+3;b<0&&(l-=v);var w=c(l,3+k.main,n-3-k.main-k.superscript),x=c(m,3+u,o-3-u);a.fillStyle=m===x?q:p;if(j.string==="0"){a.fillStyle=q,a.fillText("0",r-5-k.main,m);return}f(a,t,j,w,x,k)}),b(j,l,m.majorStepY,function(b){var h=d.value(b,l-j),i=e(a,t,h),k=g.mapy(b),m=r-3-i.main-i.superscript,s=c(m,3+i.main,n-3-i.main-i.superscript),v=c(k,3+u,o-3-u);a.fillStyle=m===s?q:p;if(h.string==="0")return;f(a,t,h,s,v,i)})};var g={base:10,major:[1,2,5],minor:[4,4,5]},h={base:10,major:[Math.PI,2*Math.PI,5*Math.PI],minor:[4,4,5]},i={base:2,major:[Math.PI/3],minor:[3]},j=function(a,b){var c,d=Infinity,e,f,g;for(var h=0;h<b.major.length;h++)c=b.major[h],f=Math.ceil(Math.log(a/c)/Math.log(b.base)),g=c*Math.pow(b.base,f),g<d&&(d=g,e=d/b.minor[h]);return{major:d,minor:e}},k=function(a){var b=a.screen.width,c=a.screen.height,d=b/a.settings.pixelsPerLabel+1,e=c/a.settings.pixelsPerLabel+1,f=a.viewport.xmax-a.viewport.xmin,k=a.viewport.ymax-a.viewport.ymin,l=f/(d-1),m=k/(e-1),n,o;!a.settings.xAxisPiLabels||a.settings.polarMode?n=g:l>=1?n=h:n=i;var p=j(l,n);!a.settings.yAxisPiLabels||a.settings.polarMode?o=g:m>=1?o=h:o=i;var q=j(m,o);if(n===o){var r=a.settings.polarMode?Infinity:2,s=b/f/(c/k);s>=1&&s<=r?p=q:s<=1&&s>=1/r&&(q=p)}return{majorStepX:p.major,minorStepX:p.minor,majorStepY:q.major,minorStepY:q.minor}}});return e}),define("graphing/poi",[],function(){function a(a,b,c,d,e){this.x=a,this.y=b,this.type=c,this.sketch=d,this.branch=e}return a.prototype.getGraphMode=function(){return this.sketch.branches[this.branch].graphMode},a.prototype.getCompiledFunction=function(){return this.sketch.branches[this.branch].compiled.fn},a.prototype.isOpen=function(){return this.sketch.openPOI.indexOf(this)>=0},a.prototype.close=function(){var a=this.sketch.openPOI.indexOf(this);return a===-1?!1:(this.sketch.openPOI.splice(a,1),!0)},a.prototype.open=function(){return this.isOpen()?!1:(this.sketch.openPOI.push(this),!0)},a}),define("graphing/graphsketch",["require","math/poi","./poi","math/distance","graphing/graphmode"],function(a){function f(a,b){this.color="#000000",this.style="normal",this.visible=!0,this.showPOI=!1,this.showHighlight=!1,this.openPOI=[],this.hiddenOpenPOI=[],this.id=a,this.branches=b!==undefined?b:[]}var b=a("math/poi"),c=a("./poi"),d=a("math/distance"),e=a("graphing/graphmode");return f.prototype.getPOI=function(){var a,c,d,f;if(this.__cachedPOI)return this.__cachedPOI;this.__cachedPOI=[];for(d=0;d<this.branches.length;d++)a=this.branches[d],c=a.graphMode,f=a.poi,c===e.X||c===e.Y?(this._pushPOI(f.zeros,d,b.ZERO),this._pushPOI(f.intercept,d,b.INTERCEPT),this._pushPOI(f.extrema,d,b.EXTREMUM),this._pushPOI(f.intersections,d,b.INTERSECTION)):(c===e.XYPOINT||c===e.XYPOINT_MOVABLE)&&this._pushPOI(f.defined,d,b.DEFINITION);return this.__cachedPOI},f.prototype._pushPOI=function(a,b,d){var e,f,g;if(!a)return;for(e=0,f=a.x.length;e<f;e++)g=new c,g.type=d,g.x=a.x[e],g.y=a.y[e],g.branch=b,g.sketch=this,a.intersects&&(g.intersects=a.intersects[e]),this.__cachedPOI.push(g)},f.prototype.updateIntersections=function(a){var b,c;for(b=0,c=this.branches.length;b<c;b++)this.branches[b].poi.intersections=a[b];this.__cachedPOI=undefined,this.getPOI(),this.reopenPOIFrom(this)},f.prototype.updateFrom=function(a){if(!a)return;this.visible=!0,(a.openPOI.length||a.hiddenOpenPOI.length)&&this.reopenPOIFrom(a),this.showPOI=a.showPOI,this.showHighlight=a.showHighlight},f.prototype.reopenPOIFrom=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o=[],p=[],q={},r={},s=this.getPOI();for(k=0;k<s.length;k++)i=s[k],j=i.type,q[j]?q[j].push(i):q[j]=[i];s=a.openPOI.concat(a.hiddenOpenPOI);for(k=0;k<s.length;k++)i=s[k],j=i.type,r[j]?r[j].push(i):r[j]=[i];for(m in r){h=r[m],b=q[m]||[];for(k=h.length-1;k>=0;k--){f=h[k],c=Infinity,e=-1;for(l=b.length-1;l>=0;l--){g=b[l];if(!g)continue;if(g.intersects!==f.intersects)continue;n=d.hypot(f.x-g.x,f.y-g.y),n<c&&(e=l,c=n)}e!=-1?(o.push(b[e]),b[e]=null):p.push(f)}}this.openPOI=o,this.hiddenOpenPOI=p},f}),define("graphing/tracelayer",["require","pjs","./domlayer","./poi","./poilabelslayer"],function(a){var b=a("pjs"),c=a("./domlayer"),d=a("./poi"),e=a("./poilabelslayer"),f=b(c,function(a,b){a.init=function(){b.init.apply(this,arguments),this.$.addClass("trace-layer")},a.redraw=function(a){this.resize(a.screen.width,a.screen.height),this.dom_node.find(".tracept").remove();var b=this.traceInfo?this.traceInfo.pt:null;if(!b)return;var c=a.mapx(b.x),f=a.mapy(b.y);if(c>-20&&f>-20&&c<a.screen.width+20&&f<a.screen.height+20){var g=new d(b.x,b.y,d.ZERO,this.traceInfo.branchInfo.sketch,this.traceInfo.branchInfo.branch),h=e.createSinglePOI(g,a.viewport);h.css({left:c+"px",top:f+"px"}),h.addClass("temp"),h.removeClass("poi"),h.find(".pt").css("background-color",g.sketch.color),h.find(".pt").css("border-color",g.sketch.color),this.dom_node.append(h)}}});return f}),define("graphing/movablepointslayer",["require","pjs","jquery","./domlayer","graphing/graphmode"],function(a){var b=a("pjs"),c=a("jquery"),d=a("./domlayer"),e=a("graphing/graphmode"),f={},g=b(d,function(a,b){function e(a){d.hasClass(a)||d.addClass(a)}function g(a){d.hasClass(a)&&d.removeClass(a)}var d=c("body");a.redraw=function(a,b){this.resize(a.screen.width,a.screen.height);var c=b[this.hoveredSketchId];c||(this.hoveredSketchId=null);var d=b[this.pressedSketchId];d||(this.pressedSketchId=null);var i=[];for(var j in f)f[j].shouldGarbageCollect=!0;for(j in b){var k=b[j];if(!k.visible)continue;var l={hovered:k===c,pressed:k===d},m=h(k,this.dom_node,a,l);m&&i.push(m)}for(j in f)f[j].shouldGarbageCollect&&(f[j].$.remove(),delete f[j]);c&&c.visible?e("mouse-over-movable-point"):g("mouse-over-movable-point"),d&&d.visible?e("dragging-movable-point"):g("dragging-movable-point"),this.savedPOI=i},a.getDrawnPOI=function(){return this.savedPOI}}),h=function(a,b,d,g){if(!a.branches||a.branches.length!==1||a.branches[0].graphMode!==e.XYPOINT_MOVABLE)return;var h=a.getPOI()[0],i=d.mapx(h.x),j=d.mapy(h.y);if(!(a.id in f)){var k=c("<div class='movable-point'><div class='background'></div><div class='dot'></div></div>");b.append(k),f[a.id]={$:k,shouldGarbageCollect:!0}}var l=f[a.id].$;return i>-20&&j>-20&&i<d.screen.width+20&&j<d.screen.height+20&&(l.css({left:i+"px",top:j+"px",backgroundColor:a.color}),l.toggleClass("highlight",!!a.showHighlight),l.toggleClass("simulate-hovered",!!g.hovered),l.toggleClass("simulate-active",!!g.pressed),f[a.id].shouldGarbageCollect=!1),h};return g}),define("graphing/grapher",["require","jquery","lib/browser","./viewport","./viewporttransformation","./screen","./poidotslayer","./poilabelslayer","./gridlayer","./graphsketch","./canvaslayer","./graphslayer","./projection","./tracelayer","./movablepointslayer","math/poi"],function(a){function q(a,j){return this.container=a,this.$=b(a),this.viewport=new d,this.screen=new f(this.$.width(),this.$.height()),this.settings=j,this.$.css("overflow","hidden"),this.gridLayer=i(this.screen.width,this.screen.height),this.$.append(this.gridLayer.$),this.poiDotsLayer=g(this.screen.width,this.screen.height),this.$.append(this.poiDotsLayer.$),this.graphsLayer=l(this.screen.width,this.screen.height),this.$.append(this.graphsLayer.$),this.$.append('<div class="screenshot"></div>'),this.movablePointsLayer=o(this.screen.width,this.screen.height),this.movablePointsLayer.$.css("z-index","0"),this.$.append(this.movablePointsLayer.$),this.poiLabelsLayer=h(this.screen.width,this.screen.height),this.poiLabelsLayer.$.css("z-index","0"),this.$.append(this.poiLabelsLayer.$),this.traceLayer=n(this.screen.width,this.screen.height),this.traceLayer.$.css("z-index","0"),this.$.append(this.traceLayer.$),c.IS_IE9&&this.traceLayer.$.addClass("transparent-bg"),this.transformation=new e,this.scaleAxis=undefined,this.__transient=!1,this.graphSketches={},this.__sketchOrder=[],this.selectedId=null,this}var b=a("jquery"),c=a("lib/browser"),d=a("./viewport"),e=a("./viewporttransformation"),f=a("./screen"),g=a("./poidotslayer"),h=a("./poilabelslayer"),i=a("./gridlayer"),j=a("./graphsketch"),k=a("./canvaslayer"),l=a("./graphslayer"),m=a("./projection"),n=a("./tracelayer"),o=a("./movablepointslayer"),p=a("math/poi");return q.prototype.setSketchOrder=function(a){this.__sketchOrder=a,this.redrawGraphsLayer()},q.prototype.clear=function(){this.graphSketches={}},q.prototype.getGraphSketch=function(a){return a in this.graphSketches?this.graphSketches[a]:null},q.prototype.addGraphSketch=function(a){this.graphSketches[a.id]=a},q.prototype.removeGraphSketch=function(a){delete this.graphSketches[a]},q.prototype.createProjection=function(){var a=new m(this.screen,this.viewport,this.settings);return this.isInTransientState()?this.transformation.transformProjection(a):a},q.prototype.computeDefaultViewport=function(){var a=new d(-10,10,-10,10);return a.squareYAxis(this.screen),a.round(this.screen),a},q.prototype.updateScreenSize=function(a,b){if(a<=0||b<=0)return;return this.screen.width===a&&this.screen.height===b?!1:(this.$.width(a),this.$.height(b),this.screen.width=a,this.screen.height=b,!0)},q.prototype.beginTransientState=function(){var a;if(this.isInTransientState())return;a=this.createProjection(),this.graphsLayer.saveUnscaledCanvas(a),this.__transient=!0},q.prototype.endTransientState=function(){var a;if(!this.isInTransientState())return;a=this.createProjection(),this.viewport=a.viewport,this.viewport.round(a.screen),this.settings.setProperty("squareAxes",this.viewport.isSquare(a.screen)),this.transformation=new e,this.graphsLayer.releaseUnscaledCanvas(),this.__transient=!1},q.prototype.isInTransientState=function(){return this.__transient},q.prototype.hide=function(a){var b=this.getGraphSketch(a);b&&(b.visible=!1)},q.prototype.select=function(a){var b,c=this.getGraphSketch(this.selectedId);c&&(c.showPOI=c.showHighlight=!1),b=this.getGraphSketch(a),b&&(b.showPOI=b.showHighlight=!0),this.selectedId=a},q.prototype.updateSketch=function(a,b){var c,d;if(this.isInTransientState())return;c=this.getGraphSketch(a);if(!b.length)return this.hide(a);d=new j(a,b),d.color=b[0].color,d.style=b[0].style,d.updateFrom(c),d.showPOI=d.showHighlight=String(a)===String(this.selectedId),this.addGraphSketch(d)},q.prototype.updateIntersections=function(a,b){var c=this.getGraphSketch(a);c&&c.updateIntersections(b)},q.prototype.redrawAllLayers=function(){this.cancelRedrawSlowly(),this.redrawGridLayer(),this.redrawContentLayers()},q.prototype.redrawContentLayers=function(){this.cancelRedrawSlowly(),this.redrawGraphsLayer(),this.redrawPOILayer(),this.redrawTraceLayer(),this.redrawMovablePointsLayer()},q.prototype.cancelRedrawSlowly=function(){clearTimeout(this.redraw_slowly_timeout),this.redraw_slowly_timeout=null},q.prototype.redrawSlowly=function(a,b,c){var d,e,f,g,h;typeof a=="undefined"&&(a=30),typeof b=="undefined"&&(b=1),typeof c=="undefined"&&(this.cancelRedrawSlowly(),c=0),this.redrawGridLayer(),d={},e=!1,f=0;for(g in this.graphSketches){if(f++>c){e=!0;break}d[g]=this.graphSketches[g]}this.graphsLayer.redraw(this.createProjection(),d,this.__sketchOrder),e?(h=this,this.redraw_slowly_timeout=setTimeout(function(){h.redrawSlowly(a,b,c+b)},a)):(this.redrawPOILayer(),this.redrawTraceLayer(),this.redrawMovablePointsLayer(),this.redraw_slowly_timeout=null)},q.prototype.redrawGridLayer=function(){if(!this.screen.height||!this.screen.width)return;this.gridLayer.redraw(this.createProjection(),this.scaleAxis)},q.prototype.redrawGraphsLayer=function(){if(!this.screen.height||!this.screen.width)return;this.isInTransientState()?this.graphsLayer.paintScaledCanvas(this.transformation):this.graphsLayer.redraw(this.createProjection(),this.graphSketches,this.__sketchOrder)},q.prototype.redrawMovablePointsLayer=function(){if(!this.screen.height||!this.screen.width)return;this.movablePointsLayer.redraw(this.createProjection(),this.graphSketches)},q.prototype.redrawPOILayer=function(){if(!this.screen.height||!this.screen.width)return;this.poiDotsLayer.redraw(this.createProjection(),this.graphSketches),this.poiLabelsLayer.redraw(this.createProjection(),this.graphSketches)},q.prototype.redrawTraceLayer=function(){if(!this.screen.height||!this.screen.width)return;this.traceLayer.redraw(this.createProjection())},q.prototype.screenshot=function(){var a=this.screen,b=k(a.width,a.height),c=b.ctx,d=this.createProjection();return c.fillStyle="white",c.fillRect(0,0,a.width,a.height),this.settings.takingScreenshot=!0,this.gridLayer.redrawToCtx(c,d),this.graphsLayer.redrawToCtx(c,d,this.graphSketches),this.settings.takingScreenshot=!1,b.canvas_node.get(0).toDataURL("image/png")},q.prototype.thumbnail=function(a,b){var c,d,e=new f(a,b),g=k(a,b),h=g.ctx,i=this.settings.clone();return i.setProperty("showLabels",!1),c=this.viewport.clone(),c.isSquare(this.screen)&&c.squareCrop(e),d=new m(e,c,i),h.fillStyle="white",h.fillRect(0,0,e.width,e.height),this.settings.takingScreenshot=!0,this.gridLayer.redrawToCtx(h,d),this.graphsLayer.redrawToCtx(h,d,this.graphSketches),this.settings.takingScreenshot=!1,g.canvas_node.get(0).toDataURL("image/png")},q.prototype.getOpenIntersectionIds=function(){var a,b,c,d,e={};for(d in this.graphSketches){if(!this.graphSketches.hasOwnProperty(d))continue;a=this.graphSketches[d].openPOI;for(c=a.length-1;c>=0;c--)a[c].type===p.INTERSECTION&&(e[d]=!0);b=this.graphSketches[d].hiddenOpenPOI;for(c=b.length-1;c>=0;c--)b[c].type===p.INTERSECTION&&(e[d]=!0)}return e},q}),define("graphing/poicontroller",["require","jquery","math/distance","lib/rounding","graphing/graphmode"],function(a){function f(a){this.manager=a,this.$=this.manager.$,this.triggerMovePoint=function(){},this.triggerStartTracingBranch=function(){},this.triggerEmptyTouchStart=function(){},this.triggerStartMovingPoint=function(){},this.triggerStopMovingPoint=function(){},this.triggerPointSelected=function(){},this.addTouchEventHandlers(),this.addHoverEventHandler()}var b=a("jquery"),c=a("math/distance"),d=a("lib/rounding"),e=a("graphing/graphmode");return f.prototype.getToleranceByDevice=function(a){return a==="touch"?20:10},f.prototype.addHoverEventHandler=function(){b(document).on("tapmove",function(a){var b,c,d,f,g,h;if(a.device==="touch")return;b=this.getMouseRelativeToGrapher(a),c=this.getToleranceByDevice(a.device),d=this.getPointUnderPoint(b,c),f=null,g=null,d?(h=d.sketch.branches[d.branch].graphMode===e.XYPOINT_MOVABLE,g=h?d.sketch.id:null):f=this.getPOIUnderPoint(b,c),f!=this.manager.poiLabelsLayer.hoveredPOI&&(this.manager.poiLabelsLayer.hoveredPOI=f,this.manager.redrawPOILayer()),g!=this.manager.movablePointsLayer.hoveredSketchId&&(this.manager.movablePointsLayer.hoveredSketchId=g,this.manager.redrawMovablePointsLayer())}.bind(this))},f.prototype.addTouchEventHandlers=function(){this.$.on("dblclick",function(a){var b=this.getMouseRelativeToGrapher(a),c=this.getToleranceByDevice(a.device);if(this.getPointUnderPoint(b,c)||this.getPOIUnderPoint(b,c)||this.getBranchInfoUnderPoint(b,c))a.preventDefault(),a.handle()}.bind(this)),this.$.on("tapstart",function(a){var c,d,e=this.getMouseRelativeToGrapher(a),f=this.getToleranceByDevice(a.device);b(document.activeElement).blur(),c=this.getPointUnderPoint(e,f);if(c){this.triggerStartMovingPoint(c.id),this.startMovingPoint(c),a.handle();return}if(this.togglePOIUnderPoint(e,f)){a.handle();return}d=this.getBranchInfoUnderPoint(e,f);if(d){this.triggerStartTracingBranch(d.id),this.startTracingBranch(d,e),a.handle();return}this.triggerEmptyTouchStart()}.bind(this))},f.prototype.getMouseRelativeToGrapher=function(a){var b=this.$.offset(),c=a.touches?a.touches[0]:a;return{x:c.pageX-b.left,y:c.pageY-b.top}},f.prototype.getPointUnderPoint=function(a,b){var d,f,g,h,i,j,k,l,m,n,o=b,p=null,q=!1,r=this.manager.graphSketches,s=this.manager.createProjection();for(d in r){f=r[d];if(!f||!f.visible)continue;g=f.branches;if(!g||!g.length)continue;for(h=0;h<g.length;h++){i=g[h].graphMode===e.XYPOINT_MOVABLE;if(i||!q&&g[h].graphMode===e.XYPOINT){j=g[h].segments[0];for(k=0;k<j.length;k++){l=j[k],m=s.map_pt({x:l[0],y:l[1]}),n=c.hypot(m.x-a.x,m.y-a.y);if(n<o||!q&&i&&n<b)o=n,p={id:d,branch:h,sketch:f,x:l[0],y:l[1]}}}}}return p},f.prototype.getPOIUnderPoint=function(a,b){var d,e,f,g,h,i,j=this.manager.createProjection(),k=this.manager.poiLabelsLayer.getDrawnPOI();k=k.concat(this.manager.poiDotsLayer.getDrawnPOI());if(!k.length)return null;d=k[0],e=j.map_pt(d),f=b,g=null,h=c.hypot(e.x-a.x,e.y-a.y),h<f&&(g=d,f=h);for(i=1;i<k.length;i++)d=k[i],e=j.map_pt(d),h=c.hypot(e.x-a.x,e.y-a.y),h<f&&(f=h,g=d);return g},f.prototype.getAllPOIAtSameLocation=function(a){var b,c,d,e,f,g;if(!a)return[];b=[],c=this.manager.poiLabelsLayer.getDrawnPOI(),d=this.manager.poiDotsLayer.getDrawnPOI(),e=c.concat(d);if(!e.length)return[];for(f=0;f<e.length;f++)g=e[f],g.x===a.x&&g.y===a.y&&b.push(g);return b},f.prototype.togglePOIUnderPoint=function(a,b){var c,d,e=this.getPOIUnderPoint(a,b),f=this.getAllPOIAtSameLocation(e);if(f.length){c=f[0].isOpen();for(d=0;d<f.length;d++)c?(f[d].close(),this.manager.poiLabelsLayer.hoveredPOI=null):f[d].open();return this.manager.redrawPOILayer(),!0}return!1},f.prototype.getBranchInfoUnderPoint=function(a,b){var c,d,e,g,h,i=null,j=b,k=this.manager.createProjection(),l=k.reverse_map_pt(a);for(c in this.manager.graphSketches){d=this.manager.graphSketches[c];if(!d||!d.visible)continue;e=d.branches;if(!e||!e.length)continue;for(g=0;g<e.length;g++)h=f.calculateDistanceFromBranch(e[g],l,k),h<j&&(j=h,i={id:c,branch:g,sketch:d})}return i},f.calculateDistanceFromBranch=function(a,b,d){var e,g,h=f.getBranchesClosestPoint(a,b,d);return!h||isNaN(h.x)||isNaN(h.y)?Infinity:(e=d.screen.width/(d.viewport.xmax-d.viewport.xmin),g=d.screen.height/(d.viewport.ymax-d.viewport.ymin),c.hypot((b.x-h.x)*e,(b.y-h.y)*g))},f.getBranchesClosestPoint=function(a,b,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;if(!a||!a.compiled||!a.compiled.fn)return;h=g.screen.width/(g.viewport.xmax-g.viewport.xmin),i=g.screen.height/(g.viewport.ymax-g.viewport.ymin),j=b.x,k=b.y;switch(a.graphMode){case e.Y:break;case e.X:l=j,j=k,k=l,l=h,h=i,i=l;break;default:return null}m=a.compiled.fn,n=j,o=n-3/h,p=n+3/h,q=k,r=m(o),s=m(p),isNaN(r)||isNaN(s)?t=n:(u=c.closestPointOnSegment(j,k,o,r,p,s),t=u[0]),v=f.fillHole(m,t,h,i,n,q),w=10,x=20,y=c.hypot((t-n)*h,(v-q)*i),y>w&&(y-=w,z=Math.min(1,y/(x-w)),t=n*z+t*(1-z)),t=d.shortestDecimalBetween(t-1/(2*h),t+1/(2*h)),v=f.fillHole(m,t,h,i,n,q);switch(a.graphMode){case e.Y:return{x:t,y:v};case e.X:return{y:t,x:v}}},f.prototype.startMovingPoint=function(a){var c=!1,e={x:a.x,y:a.y},f=a.id;this.manager.movablePointsLayer.pressedSketchId=a.sketch.id,this.manager.redrawMovablePointsLayer(),b(document).on("tapmove.movepoint",function(a){var b,e,g,h;c=!0,b=this.manager.createProjection(),e=this.getMouseRelativeToGrapher(a),g=b.reverse_map_pt({x:e.x-.5,y:e.y-.5}),h=b.reverse_map_pt({x:e.x+.5,y:e.y+.5}),this.triggerMovePoint(f,[d.shortestDecimalBetween(g.x,h.x),d.shortestDecimalBetween(g.y,h.y)])}.bind(this)),b(document).on("tapend.movepoint tapcancel.movepoint",function(a){var d,g,h,i,j,k;b(document).off(".movepoint"),this.manager.movablePointsLayer.pressedSketchId=null,this.manager.redrawMovablePointsLayer(),this.triggerStopMovingPoint(f),c||(d=this.manager.createProjection(),g=this.getToleranceByDevice(a.device),h=d.map_pt({x:e.x,y:e.y}),i=this.manager.getGraphSketch(f),j=i.openPOI.length,this.togglePOIUnderPoint(h,g),k=i.openPOI.length,k>j&&this.triggerPointSelected(f))}.bind(this))},f.prototype.startTracingBranch=function(a,c){var d,e,g,h,i;this.last_screen_pt=c,d=this.manager.createProjection(),e=d.reverse_map_pt(c),g=a.sketch,h=g.branches[a.branch],i=f.getBranchesClosestPoint(h,e,d),this.manager.traceLayer.traceInfo={pt:i,branchInfo:a},this.manager.redrawTraceLayer(),b(document).on("tapmove.tracing",this.handleTraceUpdate.bind(this)),b(document).on("tapend.tracing tapcancel.tracing",this.stopTracingBranch.bind(this))},f.prototype.stopTracingBranch=function(){var a=this.manager.poiLabelsLayer.hoveredPOI;a&&!a.isOpen()&&(a.open(),this.manager.redrawPOILayer()),this.manager.traceLayer.traceInfo=null,this.manager.redrawTraceLayer(),b(document).off(".tracing")},f.prototype.handleTraceUpdate=function(a){var b,c,d,e,g,h,i,j,k,l,m,n;if(!this.manager.traceLayer.traceInfo)return;b=this.manager.createProjection(),a?(c=this.getMouseRelativeToGrapher(a),this.last_screen_pt=c):c=this.last_screen_pt,d=b.reverse_map_pt(c),e=Infinity,g=-1,h=this.manager.traceLayer.traceInfo,i=this.manager.graphSketches[h.branchInfo.sketch.id],h.branchInfo.sketch=i,j=h.branchInfo.sketch.branches;for(k=0;k<j.length;k++)l=f.calculateDistanceFromBranch(j[k],d,b),l<e&&(g=k,e=l);m=j[g],n=m?f.getBranchesClosestPoint(m,d,b):null,this.manager.traceLayer.traceInfo.pt=n,this.manager.redrawTraceLayer()},f.fillHole=function(a,b,d,e,f,g){var h,i,j,k,l,m,n,o,p=a(b);return isFinite(p)?p:(h=b-1e-11,i=b+1e-11,j=a(h),k=a(i),isNaN(j)&&isNaN(k)?NaN:isNaN(j)?k:isNaN(k)?j:(l=(f-h)*d,m=(f-i)*d,n=(g-j)*e,o=(g-k)*e,c.hypot(l,n)<c.hypot(m,o)?j:k))},f}),define("loadcss!vendor_css/tipsy/tipsy",function(){}),define("tipsy",["require","loadcss!vendor_css/tipsy/tipsy","jquery"],function(a){function f(a,b){return typeof a=="function"?a.call(b):a}function g(a,c){this.$element=
b(a),this.options=c,this.fixTitle()}function h(){return e!==0}function i(){e--}function j(){e++}var b,c,d,e;return a("loadcss!vendor_css/tipsy/tipsy"),b=a("jquery"),c=null,d=!1,b(document).on("tap",".tipsy-sticky",function(a){var e,f,h;if(d){d=!1;return}e=a.currentTarget,f=b(e),f.attr("tooltip")||(f=f.find("[tooltip]").filter(':not([tooltip=""])'));if(f.length!==1)return;if(f.css("display")==="none")return;if(f.parents().filter(function(){return b(this).css("display")==="none"}).length)return;h=b.extend({},b.fn.tipsy.defaults),h.title="tooltip",h.gravity="nw",c=new g(f[0],h),c.show(),c.opener=e}),b(document).on("tapstart keydown",function(a){var e;c&&(c.hide(),e=c.opener,a.type==="tapstart"&&b(a.target).closest(e).length&&b(document).one("tapend",function(a){b(a.target).closest(e).length&&(d=!0)}),c=null)}),g.prototype={show:function(){var a,c,d,e,g,i,j,k,l=this.getTitle();if(l&&!h()){a=this.tip(),a.find(".tipsy-inner")[this.options.html?"html":"text"](l),a[0].className="tipsy",a.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body),c=b.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),e=a[0].offsetWidth,g=a[0].offsetHeight,i=f(this.options.gravity,this.$element[0]);switch(i.charAt(0)){case"n":d={top:c.top+c.height+this.options.offset,left:c.left+c.width/2-e/2};break;case"s":d={top:c.top-g-this.options.offset,left:c.left+c.width/2-e/2};break;case"e":d={top:c.top+c.height/2-g/2,left:c.left-e-this.options.offset};break;case"w":d={top:c.top+c.height/2-g/2,left:c.left+c.width+this.options.offset}}i.length==2&&(i.charAt(1)=="w"?d.left=c.left+c.width/2-15:d.left=c.left+c.width/2-e+15),a.css(d).addClass("tipsy-"+i),a.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+i.charAt(0),this.options.className&&a.addClass(f(this.options.className,this.$element[0])),this.options.fadeIn?a.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity},this.options.fadeIn):a.css({visibility:"visible",opacity:this.options.opacity}),this.options.sticky&&a.addClass("sticky"),j=this,k=function(){j.validate(),j.validateTimeout=setTimeout(k,100)},k()}},hide:function(){clearTimeout(this.validateTimeout),this.options.fadeOut?this.tip().stop().fadeOut(this.options.fadeOut,function(){b(this).remove()}):this.tip().remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("original-title")!="string")&&a.attr("original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var a,b=this.$element,c=this.options;return this.fixTitle(),c=this.options,typeof c.title=="string"?a=b.attr(c.title=="title"?"original-title":c.title):typeof c.title=="function"&&(a=c.title.call(b[0])),a&&(a=(""+a).replace(/(^\s*|\s*$)/,"")),a||c.fallback},tip:function(){return this.$tip||(this.$tip=b('<div class="tipsy"><div class="tipsy-arrow"></div><div class="tipsy-inner"></div></div>')),this.$tip},validate:function(){var a,b=!!this.getTitle(),c=!1;if(b)try{a=this.$element[0];while(a){if(a===document){c=!0;break}a=a.parentNode}}catch(d){}c||this.hide()}},b.fn.tipsy=function(a){function i(c){var d=b.data(c,"tipsy");return d||(d=new g(c,b.fn.tipsy.elementOptions(c,a)),b.data(c,"tipsy",d)),d}function j(b){var d;if(b.type==="tipsyshow"&&b.target!==this)return;if(c===this)return;d=i(this),d.hoverState="in",a.delayIn===0?d.show():(d.fixTitle(),setTimeout(function(){d.hoverState=="in"&&d.show()},a.delayIn))}function k(b){var c;if(b.type==="tipsyhide"&&b.target!==this)return;c=i(this);if(b.type==="tapstart"&&c.options.sticky)return;c.hoverState="out",a.delayOut===0?c.hide():setTimeout(function(){c.hoverState=="out"&&c.hide()},a.delayOut)}var d,e,f,h;return a===!0?this.data("tipsy"):typeof a=="string"?(d=this.data("tipsy"),d&&d[a](),this):(a=b.extend({},b.fn.tipsy.defaults,a),a.fadeIn=a.fadeIn||a.fade,a.fadeOut=a.fadeOut||a.fade,a.live||this.each(function(){i(this)}),a.trigger!="manual"&&(e=a.trigger=="hover"?"tipsyshow":"focus",f=a.trigger=="hover"?"tipsyhide tapstart tapend tapcancel":"blur",a.live&&a.delegate?this.on(e,a.delegate,j).on(f,a.delegate,k):(h=a.live?"on":"bind",this[h](e,j)[h](f,k))),this)},b.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fadeIn:!1,fadeOut:!1,fallback:"",gravity:"n",html:!1,live:!0,offset:0,opacity:1,title:"title",trigger:"hover"},b.fn.tipsy.elementOptions=function(a,c){var d,e;return c=b.extend({},c),d=b(a).attr("tipsy-gravity"),d&&(c.gravity=d),e=parseInt(b(a).attr("tipsy-offset"),10),isNaN(e)||(c.offset=e),c},b.fn.tipsy.autoNS=function(){return b(this).offset().top>b(document).scrollTop()+b(window).height()/2?"s":"n"},b.fn.tipsy.autoWE=function(){return b(this).offset().left>b(document).scrollLeft()+b(window).width()/2?"e":"w"},b.fn.tipsy.autoBounds=function(a,c){return function(){var d={ns:c[0],ew:c.length>1?c[1]:!1},e=b(document).scrollTop()+a,f=b(document).scrollLeft()+a,g=b(this);return g.offset().top<e&&(d.ns="n"),g.offset().left<f&&(d.ew="w"),b(window).width()+b(document).scrollLeft()-g.offset().left<a&&(d.ew="e"),b(window).height()+b(document).scrollTop()-g.offset().top<a&&(d.ns="s"),d.ns+(d.ew?d.ew:"")}},b(document).tipsy({title:"tooltip",wait:0,live:!0,delegate:".tipsy-sticky",gravity:"nw",sticky:!0,fade:!1}),e=0,{isDisabled:h,removeDisableLock:i,addDisableLock:j}}),define("lib/ipad.ghostevents",["require"],function(){function d(a){b&&(a.stopPropagation(),a.stopImmediatePropagation())}function e(a){b&&(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation())}var a,b=!1,c=null;return a={isGhostEvent:function(a){return!1}},document.addEventListener("mousedown",function(e){c=document.activeElement,b=a.isGhostEvent(e),d(e)},!0),document.addEventListener("mouseup",d,!0),document.addEventListener("click",function(a){e(a),b&&document.activeElement!==c&&(document.activeElement&&document.activeElement.blur(),c&&c.focus()),b=!1},!0),document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),a}),define("lib/touchtracking",["require","jquery","tipsy","lib/ipad.ghostevents"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=a("jquery");return a("tipsy"),b=a("lib/ipad.ghostevents"),b.isGhostEvent=function(a){return f!==d&&!p()?!1:a.target===k?!1:a.target&&t.contains(a.target,k)?!1:k&&t.contains(k,a.target)?!1:!0},c=0,d=1,e=2,f=c,g={},h=[],i=0,j=null,k=null,l=null,m=function(a){var b=[];while(a)b.push(a),a=t(a).parent()[0];return b},n=function(a){k=null,a.type==="mousedown"?(f=e,h=m(a.target)):(f=d,h=m(a.originalEvent.touches[0].target)),t(h).addClass("depressed"),t(h).each(function(){var a=t(this);a.data({originalScrollTop:a.scrollTop(),originalScrollLeft:a.scrollLeft()})}),g={}},o=function(a){k=null,t(".depressed").removeClass("depressed"),t(h).each(function(){var a=t(this),b=a.data("originalScrollTop")-a.scrollTop(),c=a.data("originalScrollLeft")-a.scrollLeft();if(b||c)g.scroll=!0});if(g.tapstart===1&&g.tapend===1&&!g.tapcancel&&!g.scroll){var b=a.device==="mouse"?a.pageX:a.originalEvent.changedTouches[0].pageX,e=a.device==="mouse"?a.pageY:a.originalEvent.changedTouches[0].pageY,l=!1;for(var m=0;m<h.length&&!l;m++){var n=t(h[m]),o=n.offset();n.attr("tapboundary")==="true"&&(l=!0);if(o){if(b<o.left||e<o.top)continue;if(b>o.left+n.outerWidth())continue;if(e>o.top+n.outerHeight())continue}k=n[0],r("tap",a,k);break}}f===d&&(j=setTimeout(function(){clearTimeout(j),i=(new Date).getTime()},1e3)),h=[],f=c},p=function(){return j||(new Date).getTime()-i<500},q=function(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c];b.push({identifier:d.identifier,x:d.pageX,y:d.pageY,screenX:d.screenX,screenY:d.screenY,pageX:d.pageX,pageY:d.pageY,clientX:d.clientX,clientY:d.clientY})}return b},r=function(a,b,c){g[a.toLowerCase()]===undefined?g[a.toLowerCase()]=1:g[a.toLowerCase()]++;var e=t.event.fix(b.originalEvent);e.type=a,e.device=f===d?"touch":"mouse",e.touches=q(b.originalEvent.touches),e.changedTouches=q(b.originalEvent.changedTouches),e.target=c?c:b.target;var h=g.longhold>0;e.wasLongheld=function(){return h},clearTimeout(l),e.type==="tapstart"&&e.touches.length===1&&(l=setTimeout(function(){r("longhold",b,c)},500)),t(e.target).trigger(e)},s=function(a){var b=h,c=!!h.length,d=t.makeArray(t(".hovered")),e=[],f=[],g=[];while(a&&a!==document){if(!c||b.indexOf(a)!==-1)d.indexOf(a)===-1&&g.push(a),e.push(a);a=t(a).parent()[0]}for(var i=0;i<d.length;i++)a=d[i],e.indexOf(a)===-1&&f.push(a);t(f).removeClass("hovered").trigger("tipsyhide"),t(g).addClass("hovered").trigger("tipsyshow")},t(document).on("touchstart",function(a){if(f===e)return;f===c&&n(a),s(null),r("tapstart",a)}),t(document).on("touchmove",function(a){if(f!==d)return;r("tapmove",a)}),t(document).on("touchcancel",function(a){if(f!==d)return;r("tapcancel",a),a.originalEvent.touches.length===0&&o(a)}),t(document).on("touchend",function(a){if(f!==d)return;r("tapend",a),a.originalEvent.touches.length===0&&o(a)}),t(document).on("mousedown",function(a){if(a.button===1||a.button===2)return;if(f===d||p()){t(a.target).is("input, textarea, select")||a.preventDefault();return}n(a),a.originalEvent.touches=[a],a.originalEvent.changedTouches=[a],r("tapstart",a)}),t(document).ready(function(){t(document).on("mousedown",function(a){var b,c,d=!!t(a.target).closest(".do-not-blur").length,e=!!t(a.target).closest(".do-blur").length;d&&!e&&a.preventDefault(),b=window.getSelection(),b.rangeCount===1&&(c=b.getRangeAt(0),c.startContainer===c.endContainer&&t(c.startContainer).closest(".text-selectable").length&&b.removeAllRanges())})}),t(document).on("mouseleave",function(){if(f!==c)return;if(p())return;s(null)}),t(document).on("mousemove",function(a){if(a.button===1||a.button===2)return;if(f===d)return;if(p())return;s(a.target),a.originalEvent.touches=[a],a.originalEvent.changedTouches=[a],r("tapmove",a)}),t(document).on("mouseup",function(a){if(a.button===1||a.button===2)return;if(f!==e)return;a.originalEvent.touches=[],a.originalEvent.changedTouches=[a],r("tapend",a),o(a)}),{isTapActive:function(){return f!==c}}}),function(a){var b="_*_";a.Event.prototype.wasHandled=function(c){var d,e,f;return c=c?c:b,d=this.originalEvent,e=d&&d.handledBy,e&&e[c]?!0:c!==b?!1:(f=a(this.target).closest("[handleEvent]"),f.length&&f[0]!==this.currentTarget?f.attr("handleEvent")!=="false":!1)},a.Event.prototype.handle=function(a){var c,d;a=a?a:b,c=this.originalEvent;if(!c)return;d=c.handledBy,d||(d=c.handledBy={}),d[a]=!0}}(jQuery),define("lib/jquery.handleevent",function(){}),function(a){var b=navigator.userAgent.toLowerCase();a.browser.chrome=/chrome/.test(b)}(jQuery),function(a){function c(b){var c,d=b||window.event,e=[].slice.call(arguments,1),f=0,g=!0,h=0,i=0;b=a.event.fix(d),b.type="mousewheel",b.originalEvent?b.originalEvent.wheelDelta?f=b.originalEvent.wheelDelta/120:b.originalEvent.detail&&(f=-b.originalEvent.detail/3):b.wheelDelta?f=b.wheelDelta/120:b.detail&&(f=-b.detail/3),i=f,d.axis!==undefined&&d.axis===d.HORIZONTAL_AXIS&&(i=0,h=-1*f),c=1;if(a.browser.msie||a.browser.webkit&&!a.browser.chrome)c=40;return d.wheelDeltaY!==undefined&&(i=d.wheelDeltaY/120/c),d.wheelDeltaX!==undefined&&(h=-1*d.wheelDeltaX/120/c),f>0?f=1:f<0&&(f=-1),e.unshift(b,f,h,i),a.event.handle.apply(this,e)}var b=["DOMMouseScroll","mousewheel"];a.event.special.mousewheel={setup:function(){var a;if(this.addEventListener)for(a=b.length;a;)this.addEventListener(b[--a],c,!1);else this.onmousewheel=c},teardown:function(){var a;if(this.removeEventListener)for(a=b.length;a;)this.removeEventListener(b[--a],c,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery),define("vendor/jquery.mousewheel",function(){}),define("graphing/graphcontroller",["require","jquery","pjs","./viewport","./viewporttransformation","math/distance","./constants","config","lib/touchtracking","lib/jquery.handleevent","vendor/jquery.mousewheel"],function(a){var b,c=a("jquery"),d=a("pjs"),e=a("./viewport"),f=a("./viewporttransformation"),g=a("math/distance"),h=a("./constants"),i=a("config");return a("lib/touchtracking"),a("lib/jquery.handleevent"),a("vendor/jquery.mousewheel"),b=d(function(a){a.init=function(a){this.manager=a,this.$=this.manager.$,this.triggerViewportStable=function(){},this.$animation=c("<div></div>"),this.addMouseWheelEventHandler(),this.addTouchEventHandler()},a.getViewport=function(){return this.manager.viewport.clone()},a.setViewport=function(a){if(!a.isValid())return;if(!this.manager.isInTransientState()&&a.equals(this.manager.viewport)){this.triggerViewportStable();return}this.manager.viewport=a.clone(),this.endTransientState()},a.setTransformation=function(a){this.manager.beginTransientState(),this.manager.transformation=a,this.manager.redrawAllLayers(),clearTimeout(this.endTransientTimeout),this.endTransientTimeout=setTimeout(this.endTransientState.bind(this),250)},a.endTransientState=function(){clearTimeout(this.endTransientTimeout),this.manager.endTransientState(),this.manager.redrawAllLayers(),this.triggerViewportStable()},a.animateTransformation=function(a){var b=this,c=this.manager.transformation,d=c.compose(a);this.cancelAnimation(),this.$animation.css("percent",0),this.$animation.animate({percent:100},{duration:h.ANIMATE_ZOOM_DURATION,step:function(a){b.setTransformation(c.lerp(d,a/100))}})},a.cancelAnimation=function(){this.$animation.stop()},a.addMouseWheelEventHandler=function(){var a=0,b=function(b,c){b.preventDefault();if(a>0)return;a+=1,setTimeout(function(){a--},50),c=c>0?1:-1;var d=this.manager.transformation;this.setTransformation(d.compose(f(0,0,c>0?h.ZOOM_FACTOR:1/h.ZOOM_FACTOR)))};this.$.mousewheel(b.bind(this))},a.handleDoubleClick=function(a){if(i.get("disable_dblclick_zooming"))return;if(a.wasHandled())return;a.preventDefault();var b=this.$.offset(),c=this.manager.screen,d=a.pageX-(b.left+.5*c.width),e=a.pageY-(b.top+.5*c.height),g=h.DOUBLETAP_ZOOM;this.animateTransformation(f(d*(1-g),e*(1-g),g))},a.applyPanTouchChanges=function(a,b){var c=b[0].x-a[0].x,d=b[0].y-a[0].y,e=this.manager.transformation.compose(f(c,d,1));this.setTransformation(e)},a.applyScaleTouchChanges=function(a,b,c){var d=g.mean(b[0].x-a[0].x,b[1].x-a[1].x),e=g.mean(b[0].y-a[0].y,b[1].y-a[1].y),h=this.manager.screen,i=this.manager.$.offset(),j=g.mean(a[0].x,a[1].x)-(i.left+.5*h.width),k=g.mean(a[0].y,a[1].y)-(i.top+.5*h.height),l=Math.abs(b[1].x-b[0].x),m=Math.abs(b[1].y-b[0].y),n=Math.abs(a[1].x-a[0].x),o=Math.abs(a[1].y-a[0].y),p,q,r=50;c==="x"?(q=1,p=Math.max(r,l)/Math.max(r,n)):c==="y"?(p=1,q=Math.max(r,m)/Math.max(r,o)):p=q=Math.max(r,g.hypot(l,m))/Math.max(r,g.hypot(n,o));var s=this.manager.transformation.compose(f(d+j*(1-p),e+k*(1-q),p,q));this.setTransformation(s)},a.addTouchEventHandler=function(){var a=this,b=[],d=!1,e=function(a){if(a.wasHandled())return;if(d)return;if(a.touches.length!==a.changedTouches.length)return;d=!0,c(document).on("tapmove.graphdrag",i),c(document).on("tapstart.graphdrag tapend.graphdrag tapcancel.graphdrag",j)},f=function(b){if(b.length<2)return undefined;var c=a.manager.createProjection(),d=a.manager.$.offset(),e=c.mapx(0),f=c.mapy(0);e=Math.min(Math.max(0,e),c.screen.width)+d.left,f=Math.min(Math.max(0,f),c.screen.height)+d.top;var g=function(a){return 10*Math.abs(a-e)<c.screen.width},h=function(a){return 10*Math.abs(a-f)<c.screen.height},i=b[1].x-b[0].x,j=b[1].y-b[0].y;return g(b[0].x)&&g(b[1].x)&&Math.abs(j)>3*Math.abs(i)?"y":h(b[0].y)&&h(b[1].y)&&Math.abs(i)>3*Math.abs(j)?"x":"both"},g=function(b){return a.manager.scaleAxis||(a.manager.scaleAxis=f(b)),a.manager.scaleAxis},h=function(){a.manager.scaleAxis=undefined},i=function(c){if(!d)return;var e=c.touches;b.length===2&&e.length===2?a.applyScaleTouchChanges(b,e,g(e)):h(),b.length===1&&a.applyPanTouchChanges(b,e),b=e},j=function(e){if(!d)return;a.cancelAnimation(),b=e.touches,e.touches.length===0&&(d=!1,c(document).off(".graphdrag")),e.touches.length<2&&h()};this.$.on("tapstart",e),this.$.on("dblclick",this.handleDoubleClick.bind(this))},a.getSetting=function(a,b){var c=this.manager.settings.getProperty(a);return c!==undefined?c:b},a.setSetting=function(a,b,c){this.manager.settings.setProperty(a,b!==undefined?b:c)},a.getState=function(){return{viewport:this.getViewport().toObject(),showLabels:this.getSetting("showLabels"),degreeMode:this.getSetting("degreeMode"),showGrid:this.getSetting("showGrid"),polarMode:this.getSetting("polarMode"),showAxes:this.getSetting("showAxes"),squareAxes:this.getSetting("squareAxes"),labelXMode:this.getSetting("xAxisPiLabels")?"pi":"",labelYMode:this.getSetting("yAxisPiLabels")?"pi":""}},a.setState=function(a){this.setSetting("showLabels",a.showLabels,!0),this.setSetting("showGrid",a.showGrid,!0),this.setSetting("polarMode",a.polarMode,!1),this.setSetting("showAxes",a.showAxes,!0),this.setSetting("squareAxes",a.squareAxes,!0),this.setSetting("xAxisPiLabels",a.labelXMode==="pi"),this.setSetting("yAxisPiLabels",a.labelYMode==="pi"),this.setSetting("degreeMode",a.degreeMode,!1);if("viewport"in a){var b=e.fromObject(a.viewport);this.getSetting("squareAxes")&&!b.isSquare(this.manager.screen)&&(b.squareYAxis(this.manager.screen),b.round(this.manager.screen)),this.setViewport(b)}},a.zoom=function(a){a==="in"?this.animateTransformation(f(0,0,2)):a==="out"?this.animateTransformation(f(0,0,.5)):a==="default"&&(this.manager.settings.setProperty("squareAxes",!0),this.setViewport(this.manager.computeDefaultViewport()))},a.isZoomRestored=function(){return this.manager.viewport.equals(this.manager.computeDefaultViewport())},a.enforceSquareAxes=function(){var a=this.manager.settings;if(!a.squareAxes)return;var b=a.lastChangedAxis,c=this.manager.viewport.clone();b=="y"?c.squareXAxis(this.manager.screen):c.squareYAxis(this.manager.screen),c.round(this.manager.screen),this.setViewport(c)}}),b}),function(){Function.prototype.bind||(Function.prototype.bind=function(a){var b,c,d,e;if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");return b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))},d.prototype=this.prototype,e.prototype=new d,e})}(),define("lib/function.bind",function(){}),define("lib/underscore_model",["require","underscore","pjs","lib/function.bind"],function(a){var b,c=a("underscore"),d=a("pjs");return a("lib/function.bind"),b=d(function(a){var b=0,d="guid_"+Math.round(Math.random()*1e6)+"_"+(new Date).getTime()+"_";a.init=function(){this.__observers={},this.__oldProperties={},this.__propertyComparators={},this.guid=d+ ++b},a.getProperty=function(a){return this[a]},a.getOldProperty=function(a){return this.__oldProperties[a]},a.setProperty=function(a,b){var d=this[a],e=this.__propertyComparators[a];if(e){if(e(d,b))return}else if(c.isEqual(d,b))return;this.__oldProperties[a]=d,this[a]=b,this.notifyPropertyChange(a)},a.setProperties=function(a){for(var b in a)a.hasOwnProperty(b)&&this.setProperty(b,a[b])},a.setPropertyComparator=function(a,b){this.__propertyComparators[a]=b},a.notifyPropertyChange=function(a){var b=this.__observers[a];if(b)for(var c=0;c<b.length;c++)b[c].callback(a,this)},a.unobserve=function(a){if(!a){this.__observers={};return}var b=a.split(" ");for(var c=0;c<b.length;c++){var d=b[c].split("."),e=d[0],f=d[1];if(e&&f){var g=this.__observers[e],h=[];if(!g)continue;for(var i=0;i<g.length;i++){var j=g[i];j.namespace!==f&&h.push(j)}this.__observers[e]=h}else if(e)this.__observers[e]&&(this.__observers[e]=[]);else if(f)for(e in this.__observers)this.unobserve(e+"."+f)}},a.observe=function(a,b){var c=a.split(" ");for(var d=0;d<c.length;d++){var e=c[d].split("."),f=e[0];if(!f)throw"Must supply a property to observe";var g=e[1],h={namespace:g,callback:b},i=this.__observers[f];i?i.push(h):this.__observers[f]=[h]}}}),b}),define("main/graph_settings",["require","jquery","pjs","lib/underscore_model"],function(a){var b=a("jquery"),c=a("pjs"),d=a("lib/underscore_model"),e=c(d,function(a,c){a.init=function(){function b(b,c,d){function e(){a.setProperty(b,a.projectorMode?d:c)}a.observe("projectorMode",e),e()}function d(b,c,d,e,f){function g(){var g;a.projectorMode?g=a.highlight?f:e:g=a.highlight?d:c,a.setProperty(b,g)}a.observe("projectorMode highlight",g),g()}c.init.call(this),this.squareAxes=!0,this.showLabels=!0,this.showGrid=!0,this.polarMode=!1,this.showAxes=!0,this.xAxisPiLabels=!1,this.yAxisPiLabels=!1,this.degreeMode=!1,this.labelHangingColor="rgba(150,150,150,1)",this.labelNormalColor="rgba(0,0,0,1)",this.lastChangedAxis="x",this.projectorMode=!1;var a=this;b("labelSize",12,18),b("majorAxisOpacity",.2,.5),b("minorAxisOpacity",.08,.15),b("axisOpacity",.7,.9),b("axisLineWidth",1,2),b("axisLineOffset",.5,0),b("pixelsPerLabel",70,100),d("graphLineWidth",2,3,6,9),d("pointLineWidth",7,11,15,22)},a.clone=function(){var a=e(this.grapher);return a.setProperty("squareAxes",this.squareAxes),a.setProperty("showLabels",this.showLabels),a.setProperty("showGrid",this.showGrid),a.setProperty("polarMode",this.polarMode),a.setProperty("squareAxes",this.showAxes),a.setProperty("xAxisPiLabels",this.xAxisPiLabels),a.setProperty("yAxisPiLabels",this.yAxisPiLabels),a.setProperty("degreeMode",this.degreeMode),a.setProperty("projectorMode",this.projectorMode),a},a.registerCallbacks=function(a,c){var d=function(){a.manager.redrawGridLayer()};this.observe("showLabels",d),this.observe("showAxes",d),this.observe("showGrid",d),this.observe("polarMode",d),this.observe("xAxisPiLabels",d),this.observe("yAxisPiLabels",d),this.observe("degreeMode",d),this.observe("squareAxes",function(){a.enforceSquareAxes()});var e=this;this.observe("projectorMode",function(){a.manager.redrawAllLayers(),b("body").toggleClass("PROJECTOR-MODE",!!e.projectorMode),c.onProjectorModeChange()})}});return e}),define("main/timermodules",[],function(){var a,b={},c={},d={},e={};return e.add=function(a,c){b[a]=c},e.load=function(a){b[a]&&(c[a]=b[a].apply(this,Array.prototype.slice.call(arguments,1)),c[a]&&(d[a]=c[a]))},a=function(){for(var b in d)d.hasOwnProperty(b)&&d[b]();setTimeout(a,100)},a(),e}),define("undoredo",["require","underscore","pjs"],function(a){var b=a("underscore"),c=a("pjs"),d=c(function(a,c){a.CAUSE_OF_CHANGE=1,a.RESPONSE_TO_CHANGE=2,a.triggerFlash=function(){},a.init=function(){this.undos=[],this.redos=[],this.changesCallbacks=[],this.__isApplyingTransaction=0,this.markAsSaved()},a.handleKeydown=function(a){if(a.ctrlKey||a.metaKey)switch(a.which){case 90:return a.shiftKey?this.redo():this.undo(),!1;case 89:return this.redo(),!1}},a.clear=function(){this.undos=[],this.redos=[],this.markAsSaved()},a.pushUndo=function(a){this.undos.push(a),a.recordChange!==!1&&(this.__changesSinceSave++,this.triggerChanges())},a.pushRedo=function(a){this.redos.push(a),a.recordChange!==!1&&(this.__changesSinceSave--,this.triggerChanges())},a.canUndo=function(){return this.undos.length>0},a.canRedo=function(){return this.redos.length>0},a.undo=function(){if(!this.canUndo())return;var a=this.undos.pop();this.applyTransaction(a,!0),this.pushRedo(a)},a.redo=function(){if(!this.canRedo())return;var a=this.redos.pop();this.applyTransaction(a),this.pushUndo(a)},a.markAsSaved=function(){this.__changesSinceSave=0,this.triggerChanges()},a.changedSinceSave=function(){return this.__changesSinceSave!==0},a.isApplyingTransaction=function(){return!!this.__isApplyingTransaction},a.__applyTransaction=function(a,b){var c,d=a.__batched__?a.__batched__:[];if(b){for(c=d.length-1;c>=0;c--)this.__applyTransaction(d[c],b);a.undo()}else{a.redo();for(c=0;c<d.length;c++)this.__applyTransaction(d[c],b)}},a.applyTransaction=function(a,b){this.__isApplyingTransaction++;try{this.__applyTransaction(a,b)}finally{this.__isApplyingTransaction--}},a.oneTransaction=function(a){this.__oneTransactionDepth||(this.__oneTransactionDepth=0),this.__oneTransactionDepth++,a(),this.__oneTransactionDepth--,this.__oneTransactionDepth||(this.__oneTransaction=null)},a.isApplyingOneTransaction=function(){return this.__oneTransactionDepth>0},a.addTransaction=function(a){var b;if(this.isApplyingTransaction())return;a.type===this.CAUSE_OF_CHANGE&&this.applyTransaction(a);if(a.ensureChangeOccured&&a.ensureChangeOccured())return;this.redos.splice(0);if(this.isApplyingOneTransaction()){if(!!this.__oneTransaction){b=this.__oneTransaction.__batched__,b||(b=this.__oneTransaction.__batched__=[]),b.push(a);return}this.__oneTransaction=a}this.pushUndo(a)},a.triggerChanges=function(){b.each(this.changesCallbacks,function(a){a()})}});return d()}),define("expressions/abstractitem",["require","pjs","lib/underscore_model","undoredo"],function(a){var b=a("pjs"),c=a("lib/underscore_model"),d=a("undoredo"),e=b(c,function(a,b){var c=1;a.init=function(a,d){b.init.call(this),this.index=-1,this.selected=!1,this.list=d;for(var e in a)a.hasOwnProperty(e)&&(this[e]=a[e]);this.hasOwnProperty("id")?this.id>=c&&(c=this.id+1):this.id=c++,this.observe("folder",this.updateFolder.bind(this)),this.observe("selected",this.onSelectedChange.bind(this))},a.onAddedToList=function(){},a.onRemovedFromList=function(){},a.onStateDidChange=function(a){var b=this.id,c=this.getOldProperty(a),e=this.getProperty(a),f=this.list;d.addTransaction({type:d.RESPONSE_TO_CHANGE,undo:function(){f.getItemById(b).setProperty(a,c)},redo:function(){f.getItemById(b).setProperty(a,e)}})},a.updateCollapsed=function(){this.setProperty("inCollapsedFolder",this.folder?this.folder.collapsed:!1)},a.updateFolder=function(){this.getOldProperty("folder")&&this.getOldProperty("folder").unobserve("."+this.id),this.folder&&this.folder.observe("collapsed."+this.id,this.updateCollapsed.bind(this)),this.updateCollapsed()},a.onSelectedChange=function(){this.selected&&this.folder&&this.folder.collapsed&&this.folder.setProperty("collapsed",!1)}});return e}),define("expressions/domain",["require","lib/underscore_model","pjs"],function(a){var b=a("lib/underscore_model"),c=a("pjs"),d=c(b,function(a,b){a.init=function(a,c){b.init.call(this),this.min=a,this.max=c},a.isValid=function(){return isFinite(this.min)&&isFinite(this.max)&&this.max>this.min},a.serialize=function(){return{min:this.min,max:this.max}}});return d.deserialize=function(a){return a?d(a.min,a.max):d()},d}),function(a){function i(a){var b,c,d,e=this;if(!(e instanceof i))return new i(a);if(a instanceof i){e.s=a.s,e.e=a.e,e.c=a.c.slice();return}if(a===0&&1/a<0)a="-0";else if(!g.test(a+=""))throw NaN;e.s=a.charAt(0)=="-"?(a=a.slice(1),-1):1,(b=a.indexOf("."))>-1&&(a=a.replace(".","")),(c=a.search(/e/i))>0?(b<0&&(b=c),b+=+a.slice(c+1),a=a.substring(0,c)):b<0&&(b=a.length);for(c=0;a.charAt(c)=="0";c++);if(c==(d=a.length))e.c=[e.e=0];else{for(;a.charAt(--d)=="0";);e.e=b-c-1,e.c=[];for(b=0;c<=d;e.c[b++]=+a.charAt(c++));}}function j(a,b,c,d){var e=a.c,f=a.e+b+1;if(c!==0&&c!==1&&c!==2)throw"!Big.RM!";c=c&&(e[f]>5||e[f]==5&&(c==1||d||f<0||e[f+1]!=null||e[f-1]&1));if(f<1||!e[0])a.c=c?(a.e=-b,[1]):[a.e=0];else{e.length=f--;if(c)for(;++e[f]>9;)e[f]=0,f--||(++a.e,e.unshift(1));for(f=e.length;!e[--f];e.pop());}return a}function k(a,b,c){var e=b-(a=new i(a)).e,f=a.c;f.length>++b&&j(a,e,i.RM),e=f[0]?c?b:(f=a.c,a.e+e+1):e+1;for(;f.length<e;f.push(0));return e=a.e,c==1||c==2&&(b<=e||e<=d)?(a.s<0&&f[0]?"-":"")+(f.length>1?(f.splice(1,0,"."),f.join("")):f[0])+(e<0?"e":"e+")+e:a.toString()}var b,c,d,e,f,g,h;i.DP=20,i.RM=1,b=1e6,c=1e6,d=-7,e=21,f=i.prototype,g=/^-?\d+(?:\.\d+)?(?:e[+-]?\d+)?$/i,h=new i(1),f.cmp=function(a){var b,c=this,d=c.c,e=(a=new i(a)).c,f=c.s,g=a.s,h=c.e,j=a.e;if(!d[0]||!e[0])return d[0]?f:e[0]?-g:0;if(f!=g)return f;b=f<0;if(h!=j)return h>j^b?1:-1;for(f=-1,g=(h=d.length)<(j=e.length)?h:j;++f<g;)if(d[f]!=e[f])return d[f]>e[f]^b?1:-1;return h==j?0:h>j^b?1:-1},f.div=function(a){var c,d,e,f,g,k,l,m,n,o,p,q,r,s,t=this,u=t.c,v=(a=new i(a)).c,w=t["s"]==a["s"]?1:-1,x=i.DP;if(x!==~~x||x<0||x>b)throw"!Big.DP!";if(!u[0]||!v[0]){if(u[0]==v[0])throw NaN;if(!v[0])throw w/0;return new i(w*0)}k=v.slice(),l=c=v.length,m=u.length,n=u.slice(0,c),o=n.length,p=new i(h),q=p.c=[],r=0,s=x+(p.e=t.e-a.e)+1,p.s=w,w=s<0?0:s,k.unshift(0);for(;o++<c;n.push(0));do{for(e=0;e<10;e++){if(c!=(o=n.length))f=c>o?1:-1;else for(g=-1,f=0;++g<c;)if(v[g]!=n[g]){f=v[g]>n[g]?1:-1;break}if(!(f<0))break;for(d=o==c?v:k;o;){if(n[--o]<d[o]){for(g=o;g&&!n[--g];n[g]=9);--n[g],n[o]+=10}n[o]-=d[o]}for(;!n[0];n.shift());}q[r++]=f?e:++e,n[0]&&f?n[o]=u[l]||0:n=[u[l]]}while((l++<m||n[0]!=null)&&w--);return!q[0]&&r!=1&&(q.shift(),p.e--),r>s&&j(p,x,i.RM,n[0]!=null),p},f.minus=function(a){var b,c,d,e,f,g,h,j,k=this,l=k.s,m=(a=new i(a)).s;if(l!=m)return a.s=-m,k.plus(a);f=k.c,g=k.e,h=a.c,j=a.e;if(!f[0]||!h[0])return h[0]?(a.s=-m,a):new i(f[0]?k:0);if(f=f.slice(),l=g-j){b=(e=l<0)?(l=-l,f):(j=g,h);for(b.reverse(),m=l;m--;b.push(0));b.reverse()}else{d=((e=f.length<h.length)?f:h).length;for(l=m=0;m<d;m++)if(f[m]!=h[m]){e=f[m]<h[m];break}}e&&(b=f,f=h,h=b,a.s=-a.s);if((m=-((d=f.length)-h.length))>0)for(;m--;f[d++]=0);for(m=h.length;m>l;){if(f[--m]<h[m]){for(c=m;c&&!f[--c];f[c]=9);--f[c],f[m]+=10}f[m]-=h[m]}for(;f[--d]==0;f.pop());for(;f[0]==0;f.shift(),--j);return f[0]||(f=[j=0]),a.c=f,a.e=j,a},f.mod=function(a){var b,c,d,e;a=new i(a),c=this,d=c.s,e=a.s;if(!a.c[0])throw NaN;return c.s=a.s=1,b=a["cmp"](c)==1,c.s=d,a.s=e,b?new i(c):(d=i.DP,e=i.RM,i.DP=i.RM=0,c=c.div(a),i.DP=d,i.RM=e,this.minus(c.times(a)))},f.plus=function(a){var b,c,d,e,f,g=this,h=g.s,j=(a=new i(a)).s;if(h!=j)return a.s=-j,g.minus(a);c=g.e,d=g.c,e=a.e,f=a.c;if(!d[0]||!f[0])return f[0]?a:new i(d[0]?g:h*0);if(d=d.slice(),h=c-e){b=h>0?(e=c,f):(h=-h,d);for(b.reverse();h--;b.push(0));b.reverse()}d.length-f.length<0&&(b=f,f=d,d=b);for(h=f.length,j=0;h;j=(d[--h]=d[h]+f[h]+j)/10^0,d[h]%=10);j&&(d.unshift(j),++e);for(h=d.length;d[--h]==0;d.pop());return a.c=d,a.e=e,a},f.pow=function(a){var b=a<0,d=new i(this),e=h;if(a!==~~a||a<-c||a>c)throw"!pow!";for(a=b?-a:a;;){a&1&&(e=e.times(d)),a>>=1;if(!a)break;d=d.times(d)}return b?h.div(e):e},f.round=function(a,c){var d=new i(this);if(a==null)a=0;else if(a!==~~a||a<0||a>b)throw"!round!";return j(d,a,c==null?i.RM:c),d},f.sqrt=function(){var a,b,c,d=this,e=d.c,f=d.s,g=d.e,h=new i("0.5");if(!e[0])return new i(d);if(f<0)throw NaN;f=Math.sqrt(d.toString()),f==0||f==1/0?(a=e.join(""),a.length+g&1||(a+="0"),b=new i(Math.sqrt(a).toString()),b.e=((g+1)/2|0)-(g<0||g&1)):b=new i(f.toString()),f=b.e+(i.DP+=4);do c=b,b=h.times(c.plus(d.div(c)));while(c.c.slice(0,f).join("")!==b.c.slice(0,f).join(""));return j(b,i.DP-=4,i.RM),b},f.times=function(a){var b,c=this,d=c.c,e=(a=new i(a)).c,f=d.length,g=e.length,h=c.e,j=a.e;a.s=c["s"]==a["s"]?1:-1;if(!d[0]||!e[0])return new i(a.s*0);a.e=h+j,f<g&&(b=d,d=e,e=b,j=f,f=g,g=j);for(j=f+g,b=[];j--;b.push(0));for(h=g-1;h>-1;h--){for(g=0,j=f+h;j>h;g=b[j]+e[h]*d[j-h-1]+g,b[j--]=g%10|0,g=g/10|0);g&&(b[j]=(b[j]+g)%10)}g&&++a.e,!b[0]&&b.shift();for(j=b.length;!b[--j];b.pop());return a.c=b,a},f.toString=f.valueOf=function(){var a=this,b=a.e,c=a.c.join(""),f=c.length;if(b<=d||b>=e)c=c.charAt(0)+(f>1?"."+c.slice(1):"")+(b<0?"e":"e+")+b;else if(b<0){for(;++b;c="0"+c);c="0."+c}else if(b>0)if(++b>f)for(b-=f;b--;c+="0");else b<f&&(c=c.slice(0,b)+"."+c.slice(b));else f>1&&(c=c.charAt(0)+"."+c.slice(1));return a.s<0&&a.c[0]?"-"+c:c},f.toExponential=function(a){if(a==null)a=this.c.length-1;else if(a!==~~a||a<0||a>b)throw"!toExp!";return k(this,a,1)},f.toFixed=function(a){var c,f=this,g=d,h=e;d=-(e=1/0),a==null?c=f.toString():a===~~a&&a>=0&&a<=b&&(c=k(f,f.e+a),f.s<0&&f.c[0]&&c.indexOf("-")<0&&(c="-"+c)),d=g,e=h;if(!c)throw"!toFix!";return c},f.toPrecision=function(a){if(a==null)return this.toString();if(a!==~~a||a<1||a>b)throw"!toPre!";return k(this,a-1,2)},typeof module!="undefined"&&module.exports?module.exports=i:typeof define=="function"&&define.amd?define("vendor/big",[],function(){return i}):a.Big=i}(this),define("big",["require","vendor/big"],function(a){var b=a("vendor/big");return b.prototype.equals=function(a){return this.cmp(a)===0},b}),define("expressions/slider",["require","pjs","lib/underscore_model","big","lib/rounding"],function(a){var b=a("pjs"),c=a("lib/underscore_model"),d=a("big"),e=a("lib/rounding"),f=b(c,function(a,b){a.init=function(a,c,d,e){b.init.call(this),this.min=c!==undefined?c:-10,this.max=d!==undefined?d:10,this.step=e,this.value=a!==undefined?a:0,this.animationSpeed=1,this.playDirection=1,this.isPlaying=!1,this.observe("isPlaying",function(){this.isPlaying&&(this.animationTargetValue=this.value)}.bind(this)),this.observe("stepper isPlaying",this.updateObservedStepper.bind(this))},a.updateObservedStepper=function(){var a=this.isPlaying&&this.stepper,b=(!a||this.stepper!==this._observedStepper)&&this._observedStepper,c=a&&this._observedStepper!==this.stepper;b&&(this._observedStepper.unobserve("playStep."+this
.guid),this._observedStepper=undefined),c&&(this._observedStepper=this.stepper,this._observedStepper.observe("playStep."+this.guid,this.playStep.bind(this)))},a.playStep=function(){this.animationTargetValue>=this.max?this.playDirection=-1:this.animationTargetValue<=this.min&&(this.playDirection=1);var a=(this.max-this.min)/200;a*=this.animationSpeed,this.animationTargetValue+=a*this.playDirection;var b=this.computeSnappedValue(this.animationTargetValue);this.step||(b=e.shortestDecimalBetween(b-a*.1,b+a*.1)),b=Math.max(this.min,Math.min(this.max,b)),this.setProperty("value",b)},a.serialize=function(){return{min:this.min,max:this.max,step:this.step,value:this.value,playDirection:this.playDirection}},a.computeSnappedValue=function(a){if(!this.step)return a;var b=Math.round((a-this.min)/this.step),c=(new d(this.step)).times(b).plus(this.min);return parseFloat(c.toString())}});return f.deserialize=function(a){var b,c=f();return a&&(b=["value","min","max","step","playDirection"],b.forEach(function(b){a.hasOwnProperty(b)&&(c[b]=a[b])})),c},f}),define("expressions/colors",["require"],function(){function i(){var a=g[h];return h=(h+1)%g.length,a}function j(){h=0}var a="#C0504D",b="#4F81BD",c="#9BBB59",d="#8064A2",e="#F79646",f="#000000",g=[a,b,c,d,e,f],h=0;return{all:g,next:i,reset:j,RED:a,BLUE:b,GREEN:c,PURPLE:d,ORANGE:e,BLACK:f}}),define("expressions/expression",["require","pjs","math/evaluationstate","undoredo","./abstractitem","./domain","./slider","./colors"],function(a){var b=a("pjs"),c=a("math/evaluationstate"),d=a("undoredo"),e=a("./abstractitem"),f=a("./domain"),g=a("./slider"),h=a("./colors"),i=b(e,function(a,b){a._computeNewLatex=function(a,b){var c=/=(.*?)([-\.0-9]+)/,d=a.match(c);return parseFloat(d[2])===b?a:a.replace(c,"=$1"+b)},a.isExpression=!0,a.init=function(a,e){b.init.call(this,a,e),this.loading=!0,this.formula=c({error:""}),delete this.slider,this.color?typeof this.color=="object"&&(this.color=this.color.value):this.color=h.next(),this.style===undefined&&(this.style="normal"),this.userRequestedGraphing===undefined&&(this.userRequestedGraphing="default"),this.latex===undefined&&(this.latex="");var g=this.domain?this.domain:{min:0,max:1};this.domain=f.deserialize(g),this.domain.observe("min max",function(a){this.onExpressionDidChange();var b=this.id,c=this.domain.getOldProperty(a),f=this.domain.getProperty(a);d.addTransaction({type:d.RESPONSE_TO_CHANGE,undo:function(){e.getItemById(b).domain.setProperty(a,c)},redo:function(){e.getItemById(b).domain.setProperty(a,f)}})}.bind(this)),this.computeShouldGraph(),this.observe("formula",this.onFormulaUpdate.bind(this)),this.observe("latex color userRequestedGraphing style",this.onStateDidChange.bind(this)),this.observe("latex shouldGraph color style",this.onExpressionDidChange.bind(this)),this.observe("userRequestedGraphing",this.computeShouldGraph.bind(this))},a.onStateDidChange=function(a){if(a==="latex"&&this.slider&&this.slider.transient)return;b.onStateDidChange.call(this,a)},a.updateFolder=function(){b.updateFolder.call(this),this.getOldProperty("folder")&&this.getOldProperty("folder").unobserve("."+this.id),this.folder&&this.folder.observe("hidden."+this.id,this.computeShouldGraph.bind(this)),this.computeShouldGraph()},a.computeShouldGraph=function(){var a;this.folder&&this.folder.hidden?a=!1:a=this.userRequestedGraphing==="default"||this.userRequestedGraphing==="always",this.setProperty("shouldGraph",a)},a.onExpressionDidChange=function(){this.domain.isValid()&&this.requestParse()},a.getParsableObject=function(){return this.latex===undefined?undefined:{type:"statement",id:this.id,latex:this.latex,domain:this.domain.serialize(),shouldGraph:this.shouldGraph,color:this.color,style:this.style}},a.requestParse=function(){this.list.triggerAddExp(this.getParsableObject())},a.requestUnparse=function(){this.list.triggerRemoveExp(this.id)},a.onAddedToList=function(){this.requestParse()},a.onRemovedFromList=function(){this.slider&&this.slider.setProperty("isPlaying",!1),this.requestUnparse()},a.getState=function(){var a={id:this.id,latex:this.latex,domain:this.domain.serialize(),userRequestedGraphing:this.userRequestedGraphing,color:this.color,style:this.style};return this.slider&&(a.sliderMin=this.slider.min,a.sliderMax=this.slider.max,a.sliderInterval=this.slider.step),a},a.onFormulaUpdate=function(){var a=this.formula;this.setProperty("error",a.error?a.error:""),this.setProperty("isGraphable",a.is_graphable),this.setProperty("dependent",a.assignment),this.setProperty("isTableable",a.is_tableable),this.validateStyle(),a.is_slidable&&!this.slider&&this.createSliderModel()},a.validateStyle=function(){var a=this.formula;if(a.error)return;a.is_point_list?this.style!=="point"&&this.style!=="open"&&this.style!=="cross"&&this.setProperty("style","point"):a.is_inequality?this.setProperty("style","normal"):this.style!=="normal"&&this.style!=="dashed"&&this.setProperty("style","normal")},a.createSliderModel=function(){this.slider=g.deserialize({min:this.sliderMin!==undefined?this.sliderMin:-10,max:this.sliderMax!==undefined?this.sliderMax:10,step:this.sliderInterval,value:this.formula.simple_constant});var a=this.id,b=this.list;this.slider.observe("step",function(){if(this.slider.transient)return;var c=this.slider.getOldProperty("step"),e=this.slider.getProperty("step");d.addTransaction({type:d.RESPONSE_TO_CHANGE,undo:function(){b.getItemById(a).slider.setProperty("step",c)},redo:function(){b.getItemById(a).slider.setProperty("step",e)}})}.bind(this)),this.slider.observe("min",function(){if(this.slider.transient)return;var c=this.slider.getOldProperty("min"),e=this.slider.getProperty("min"),f=this.slider.getProperty("value"),g=e>f?this.latex:null,h=e>f?this._computeNewLatex(g,e):null;d.addTransaction({type:d.CAUSE_OF_CHANGE,undo:function(){var d=b.getItemById(a);d.slider.setProperty("min",c),g&&d.setProperty("latex",g)},redo:function(){var c=b.getItemById(a);c.slider.setProperty("min",e),h&&c.setProperty("latex",h)}})}.bind(this)),this.slider.observe("max",function(){if(this.slider.transient)return;var c=this.slider.getOldProperty("max"),e=this.slider.getProperty("max"),f=this.slider.getProperty("value"),g=e<f?this.latex:null,h=e<f?this._computeNewLatex(g,e):null;d.addTransaction({type:d.CAUSE_OF_CHANGE,undo:function(){var d=b.getItemById(a);d.slider.setProperty("max",c),g&&d.setProperty("latex",g)},redo:function(){var c=b.getItemById(a);c.slider.setProperty("max",e),h&&c.setProperty("latex",h)}})}.bind(this)),this.slider.observe("transient",function(){var c=this.slider.getOldProperty("transient"),e=this.slider.getProperty("transient");if(!c&&e){var f=this.slider.serialize(),g=this.slider.serialize();this.transientEndingValues=g,d.addTransaction({type:d.RESPONSE_TO_CHANGE,recordChange:!1,undo:function(){var c=b.getItemById(a);c.slider.setProperty("isPlaying",!1);for(var d in f)f.hasOwnProperty(d)&&c.slider.setProperty(d,f[d])},redo:function(){var c=b.getItemById(a);c.slider.setProperty("isPlaying",!1);for(var d in g)g.hasOwnProperty(d)&&c.slider.setProperty(d,g[d])}})}else if(c&&!e){var h=this.slider.serialize();for(var i in h)h.hasOwnProperty(i)&&(this.transientEndingValues[i]=h[i])}}.bind(this)),this.slider.observe("value",function(){var a=this.slider.getProperty("value");a<this.slider.min&&this.slider.setProperty("min",a),a>this.slider.max&&this.slider.setProperty("max",a);var b=this._computeNewLatex(this.latex,a);this.setProperty("latex",b)}.bind(this)),this.slider.setProperty("stepper",this.list),this.notifyPropertyChange("slider")},a.isEmpty=function(){var a=this.latex;return!a||a.split(" ").join("")===""}});return i}),define("expressions/text",["require","pjs","./abstractitem"],function(a){var b=a("pjs"),c=a("./abstractitem"),d=b(c,function(a,b){a.isText=!0,a.init=function(a,c){b.init.call(this,a,c),this.text||(this.text=""),this.observe("text",this.onStateDidChange.bind(this))},a.isEmpty=function(){return this.text.split(" ").join("")===""},a.getState=function(){return{id:this.id,text:this.text}},a.markedUpText=function(){var a=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;return this.text.replace(a,"<a href='$1' target ='_blank'>$1</a>")}});return d}),_kmq=_kmq||[],window._kmk&&(_kms=function(a){setTimeout(function(){var b=document,c=b.getElementsByTagName("script")[0],d=b.createElement("script");d.type="text/javascript",d.async=!0,d.src=a,c.parentNode.insertBefore(d,c)},1)},_kms("//i.kissmetrics.com/i.js"),_kms("//doug1izaerwt3.cloudfront.net/"+_kmk+".1.js")),define("analytics/kissmetrics",function(){}),define("lib/track_feature",["require","analytics/kissmetrics"],function(a){var b,c,d,e;return a("analytics/kissmetrics"),b={},c=function(a){if(b.hasOwnProperty(a))return;b[a]=!0,_kmq.push(["record","Discovered "+a])},d=function(a){e(a,1)},e=function(a,b){c(a);if(Math.random()>1/b)return;var d={};d["E("+a+")"]=b,_kmq.push(["record","Used "+a,d])},{discover:c,use:d,sample_usage:e}}),define("expressions/table",["require","underscore","pjs","lib/underscore_model","graphing/columnmode","lib/track_feature","big","./abstractitem","./colors","undoredo"],function(a){var b=a("underscore"),c=a("pjs"),d=a("lib/underscore_model"),e=a("graphing/columnmode"),f=a("lib/track_feature"),g=a("big"),h=a("./abstractitem"),i=a("./colors"),j=a("undoredo"),k=c(d,function(a,b){a.init=function(a,c){b.init.call(this),this.column=a,c&&(this.value=c.value,this.error=c.error)},a.isEmpty=function(){return this.value.split(" ").join("")===""}}),l=c(h,function(a,c){function d(a){var c=[];for(var d=0;d<a.length;d++){var e=a[d],f="";b.isNumber(e)&&(f=String(Number(Number(e).toFixed(4))),f=f.replace("NaN","Undefined")),c.push(f)}return c}a.init=function(a,b,d){if(d.showPoints!==undefined||d.showLine!==undefined)d=JSON.parse(JSON.stringify(d)),d.showPoints&&d.showLine?d.columnMode=e.POINTS_AND_LINES:d.showPoints?d.columnMode=e.POINTS:d.showLine?d.columnMode=e.LINES:(d.hidden=!0,d.columnMode=e.POINTS);this.latex="",this.hidden=!1,this.columnMode=e.POINTS,this.values=[],this.error="",c.init.call(this,d),this.color||(this.color=i.next()),this.style||(this.style="point");if(b!==0&&this.values.length===0&&a.columns[0].cells){this.values=[];var f=a.columns[0].cells.length;for(var g=0;g<f;g++)this.values.push("")}var h=this;this.cells=this.values.map(function(a){return k(h,{value:String(a)})}),delete this.values,this.table=a,this.index=b,b===0&&(this.hidden=!0),this.isGraphable=!this.error,this.observe("error",function(){this.setProperty("isGraphable",!this.error)}.bind(this)),this.observe("color columnMode hidden latex style",this.onStateChange.bind(this)),this.observe("hidden hiddenByTable",this.computeShouldGraph.bind(this)),this.computeShouldGraph(),this.observe("shouldGraph",this.table.requestParse.bind(this.table))},a.computeShouldGraph=function(){this.setProperty("shouldGraph",!this.hiddenByTable&&!this.hidden)},a.onStateChange=function(a){function e(){return d.getItemById(b).columns[c]}this.table.requestParse();var b=this.table.id,c=this.index,d=this.table.list,f=this.getOldProperty(a),g=this.getProperty(a);j.addTransaction({type:j.RESPONSE_TO_CHANGE,undo:function(){e().setProperty(a,f)},redo:function(){e().setProperty(a,g)}})},a.isEmpty=function(){return this.latex.split(" ").join(" ")===""},a.getValues=function(){var a=[],b=this.cells.length;for(var c=0;c<b;c++){var d=this.cells[c].value;d===null||d===undefined?a.push(""):a.push(String(d))}return a},a.triggerRowChange=function(){},a.insertCell=function(a,b){var c=k(this,{value:b});this.cells.splice(a,0,c)},a.removeCell=function(a){this.cells.splice(a,1)},a.setComputedValues=function(a){!a.error&&a.dependent&&f.discover("dependent table columns");if(a.values.length===0&&a.error)for(var b=0;b<this.cells.length-1;b++)a.values[b]=null;this.setProperty("error",a.error),this.setProperty("discrete",a.discrete),this.setProperty("disabled",a.dependent),this.setErrors(a.values),a.dependent?(this.independentValues||(this.independentValues=this.getValues()),this.setValues(d(a.values))):this.independentValues&&(this.setValues(this.independentValues),this.independentValues=null,this.table.requestParse())},a.setValues=function(a){for(var b=0;b<a.length;b++)this.cells[b].setProperty("value",String(a[b]))},a.setErrors=function(a){for(var b=0;b<a.length;b++)typeof a[b]=="string"?this.cells[b].setProperty("error",a[b]):this.cells[b].setProperty("error","")},a.serialize=function(){return{values:this.getValues(),columnMode:this.columnMode,hidden:this.hidden,id:this.id,color:this.color,style:this.style,latex:this.latex}}}),m=c(h,function(a,c){a.isTable=!0,a.init=function(a,d){var e,f;c.init.call(this,a,d),this.list=d,this.selectedCell=null,this.headings&&(this.columns=this.headings,delete this.headings);if(this.rows){for(f=0;f<this.columns.length;f++){var g=this.columns[f];g.values=[];for(e=0;e<this.rows.length;e++)g.values.push(this.rows[e][f])}delete this.rows}var h=this;this.columns||(this.columns=[]),this.columns=this.columns.map(function(a,b){return l(h,b,a)}),this.columns.push(l(this,this.columns.length,{disabled:!0}));var i=this.columns[0].cells.length;b.each(this.columns,function(a){a.insertCell(i,"")}),this.observe("selected",this.onSelectedChange.bind(this))},a.updateFolder=function(){c.updateFolder.call(this),this.getOldProperty("folder")&&this.getOldProperty("folder").unobserve("."+this.id),this.folder&&this.folder.observe("hidden."+this.id,this.computeColumnsHidden.bind(this)),this.computeColumnsHidden()},a.computeColumnsHidden=function(){var a=this.folder&&this.folder.hidden;b.each(this.columns,function(b){b.setProperty("hiddenByTable",a)})},a.onSelectedChange=function(){this.selected||this.setProperty("selectedCell",null)},a.insertColumn=function(a,b){var c=this.id,d=this.list;j.addTransaction({type:j.CAUSE_OF_CHANGE,undo:function(){var b=d.getItemById(c);b.__removeColumn(a)},redo:function(){var e=d.getItemById(c);e.__insertColumn(a,b),b=e.columns[a].serialize()}})},a.removeColumn=function(a){var b=this.id,c=this.columns[a].serialize(),d=this.list;j.addTransaction({type:j.CAUSE_OF_CHANGE,undo:function(){var e=d.getItemById(b);e.__insertColumn(a,c)},redo:function(){var c=d.getItemById(b);c.__removeColumn(a)}})},a.moveColumn=function(a,b){var c=this.id,d=this.list;j.addTransaction({type:j.CAUSE_OF_CHANGE,undo:function(){var e=d.getItemById(c);e.__moveColumn(b,a)},redo:function(){var e=d.getItemById(c);e.__moveColumn(a,b)}})},a.triggerColumnAdded=function(a){},a.__insertColumn=function(a,b){b||(b={});var c=l(this,a,b);this.columns.splice(a,0,c);for(var d=a+1;d<this.columns.length;d++)this.columns[d].setProperty("index",d);this.triggerColumnAdded(a),this.requestParse()},a.triggerColumnRemoved=function(a){},a.__removeColumn=function(a){this.requestUnparseColumn(a),this.columns.splice(a,1);for(var b=a;b<this.columns.length;b++)this.columns[b].setProperty("index",b);this.triggerColumnRemoved(a),this.requestParse()},a.triggerColumnMoved=function(a,b){},a.__moveColumn=function(a,b){if(a===b)return;var c=this.columns.length,d=this.columns[a];if(a<1||b<1||a>=c-1||b>=c-1)return;this.columns.splice(a,1),this.columns.splice(b,0,d);for(var e=0;e<c;e++)this.columns[e].setProperty("index",e);this.triggerColumnMoved(a,b)},a.getAutofillValues=function(a){var b,c=this.columns.length,d=[];for(b=0;b<c;b++)d.push("");var e=this.columns[0].getValues(),f;try{a>1&&(f=g(e[1]).minus(e[0]));for(b=2;b<a&&f!==undefined;b++){var h=g(e[b]).minus(e[b-1]);f.equals(h)||(f=undefined)}}catch(i){f=undefined}return f!==undefined&&(d[0]=f.plus(e[a-1]).toString()),d},a.setComputedValues=function(a){for(var b=0;b<a.length;b++)this.columns[b].setComputedValues(a[b])},a.triggerRowAdded=function(a){},a.insertRow=function(a,b){for(var c=0;c<this.columns.length;c++)this.columns[c].insertCell(a,b[c]);this.triggerRowAdded(a);var d=this.id,e=this.list;j.addTransaction({type:j.RESPONSE_TO_CHANGE,undo:function(){e.getItemById(d).removeRow(a)},redo:function(){e.getItemById(d).insertRow(a,b)}}),this.requestParse()},a.triggerRowRemoved=function(a){},a.removeRow=function(a){var b=[];if(!this.columns.length||this.columns[0].cells.length<=2)return;for(var c=0;c<this.columns.length;c++)b.push(this.columns[c].cells[a].value),this.columns[c].removeCell(a);this.triggerRowRemoved(a);var d=this.id,e=this.list;j.addTransaction({type:j.RESPONSE_TO_CHANGE,undo:function(){e.getItemById(d).insertRow(a,b)},redo:function(){e.getItemById(d).removeRow(a)}})},a.getParsableObject=function(){var a=this.columns.map(function(a){var b=a.serialize();return b.hidden=!a.shouldGraph,b.values.pop(),b});return a.pop(),{type:"table",id:this.id,columns:a}},a.requestParse=function(){this.list.triggerAddExp(this.getParsableObject())},a.requestUnparse=function(){var a=[this.id];for(var b=0;b<this.columns.length;b++)a.push(this.columns[b].id);this.list.triggerRemoveExps(a)},a.onAddedToList=function(){this.requestParse()},a.onRemovedFromList=function(){this.requestUnparse()},a.requestUnparseColumn=function(a){this.list.triggerRemoveExp(this.columns[a].id)},a.getState=function(){var a=this.columns.map(function(a){var b=a.serialize();return b.values.pop(),a.disabled&&(b.values=b.values.map(function(){return""})),b});return a.pop(),{id:this.id,columns:a}},a.isEmpty=function(){return!1}});return m}),define("loadcss!css/folder",function(){}),define("expressions/folder",["require","loadcss!css/folder","pjs","underscore","./abstractitem","undoredo"],function(a){var b,c,d,e,f;return a("loadcss!css/folder"),b=a("pjs"),c=a("underscore"),d=a("./abstractitem"),e=a("undoredo"),f=b(d,function(a,b){a.isFolder=!0,a.init=function(a,c){b.init.call(this,a,c),this.title||(this.title=""),this.memberIds||(this.memberIds={}),this.hidden=!!this.hidden,this.collapsed=!!this.collapsed,this.updateCount(),this.observe("title hidden",this.onStateDidChange.bind(this))},a.updateCount=function(){this.setProperty("count",c.size(this.memberIds))},a.getState=function(){return{id:this.id,type:"folder",title:this.title,memberIds:this.memberIds,hidden:this.hidden,collapsed:this.collapsed}},a._addItem=function(a){var b=this.list,c=b.getItemById(a);this.memberIds[a]=!0,c&&c.setProperty("folder",this),this.updateCount()},a._removeItem=function(a){var b=this.list,c=b.getItemById(a);c&&c.setProperty("folder",undefined),this.memberIds.hasOwnProperty(a)&&delete this.memberIds[a],this.updateCount()},a.addItem=function(a){var b=this.list,c=this.id,d=a.id;e.addTransaction({type:e.CAUSE_OF_CHANGE,redo:function(){b.getItemById(c)._addItem(d)},undo:function(){b.getItemById(c)._removeItem(d)}})},a.removeItem=function(a){var b=this.list,c=this.id,d=a.id;e.addTransaction({type:e.CAUSE_OF_CHANGE,redo:function(){b.getItemById(c)._removeItem(d)},undo:function(){b.getItemById(c)._addItem(d)}})}}),f}),define("expressions/list",["require","pjs","underscore","lib/underscore_model","./expression","./text","./table","./folder","undoredo"],function(a){var b=a("pjs"),c=a("underscore"),d=a("lib/underscore_model"),e=a("./expression"),f=a("./text"),g=a("./table"),h=a("./folder"),i=a("undoredo"),j=b(d,function(a,b){a.init=function(){b.init.call(this),this.__items=[],this.__itemIds={},this.drawOrder=[];var a=this,c=function(){a.batchEvaluation(function(){a.notifyPropertyChange("playStep")}),setTimeout(function(){c()},40)};c()},a.getItemByIndex=function(a){return this.__items[a]},a.updateDrawOrder=function(){var a=[],b=c.sortBy(this.__itemIds,function(a){return a.index});c.each(b,function(b){b.hasOwnProperty("columns")?c.each(b.columns,function(b){a.push(b.id)}):a.push(b.id)}),this.setProperty("drawOrder",a)},a.getItemById=function(a){return this.__itemIds[a]},a._insertItemAt=function(a,b){var c=String(b.id);if(this.__itemIds.hasOwnProperty(c))throw Error("Item with id '"+c+"' is already in list");this.__itemIds[c]=b,this.__items.splice(a,0,b),b.onAddedToList()},a.triggerItemInserted=function(a,b){},a.insertItemAt=function(a,b){this._insertItemAt(a,b),this.triggerItemInserted(a,b);var c=this,d=b.constructor,e=b.getState();i.addTransaction({type:i.RESPONSE_TO_CHANGE,undo:function(){c.removeItemAt(a)},redo:function(){c.insertItemAt(a,d(e,c))}}),this.updateDrawOrder()},a.addItem=function(a){var b=this.getItemByIndex(this.getItemCount()-1);b&&!(b.text||b.columns||b.headings)&&b.latex===""&&this.removeItemAt(this.getItemCount()-1),this.insertItemAt(this.getItemCount(),a)},a.updateItemById=function(a,b){this.getItemById(a).setProperties(b),this.updateDrawOrder()},a._removeItemAt=function(a){var b=this.__items[a];if(!b)return;var c=this;if(b.isFolder)for(var d in b.memberIds)c.removeItemAt(c.getItemById(d).index);this.__items.splice(a,1);var e=String(b.id);return delete this.__itemIds[e],b.onRemovedFromList(),b},a._removeAllItems=function(){for(var a=0;a<this.__items.length;a++)this.__items[a].onRemovedFromList();this.__items=[],this.__itemIds={}},a.triggerItemRemoved=function(a,b){},a.removeItemAt=function(a){var b=this;i.oneTransaction(function(){var c=this._removeItemAt(a);this.triggerItemRemoved(a,c);var d=c.constructor,e=c.getState();c.folder&&c.folder.removeItem(c),i.addTransaction({type:i.RESPONSE_TO_CHANGE,undo:function(){var c=d(e,b);b.insertItemAt(a,c)},redo:function(){b.removeItemAt(a)}})}.bind(this)),this.updateDrawOrder()},a.triggerItemMoved=function(a,b){},a.moveItemTo=function(a,b){var c=this,d=function(a,b){if(a===b)return;var d=c.getItemCount(),e=c.__items[a];if(a<0||b<0||a>=d||b>=d)return;c.__items.splice(a,1),c.__items.splice(b,0,e),c.triggerItemMoved(a,b),c.updateDrawOrder()};i.addTransaction({type:i.CAUSE_OF_CHANGE,undo:function(){d(b,a)},redo:function(){d(a,b)}})},a.moveItemsTo=function(a,b,c){i.oneTransaction(function(){var d;if(b>=a&&b<a+c)return;if(a<b)for(d=0;d<c;d++)this.moveItemTo(a,b);else for(d=0;d<c;d++)this.moveItemTo(a+d,b+d)}.bind(this))},a.getItemCount=function(){return this.__items.length},a.isEmpty=function(){var a=this.getItemCount();return a===0?!0:a>1?!1:this.getItemByIndex(0).latex===""},a.getState=function(){var a=[],b=this.getItemCount();for(var c=0;c<b;c++)a.push(this.getItemByIndex(c).getState());return{list:a}},a.batchEvaluation=function(a){a()},a.triggerSetState=function(a){},a.setState=function(a){var b,c=[],d=[],e;for(b=0;b<a.list.length;b++){var f=a.list[b];f.renderShell=!0,e=this.fromState(f);if(!e)continue;e.isFolder&&d.push(e),c.push(e)}var g=this;this.batchEvaluation(function(){g._removeAllItems();for(b=0;b<c.length;b++)g._insertItemAt(b,c[b])}),d.forEach(function(a){for(var b in a.memberIds)g.getItemById(b).setProperty("folder",a)}),this.triggerSetState(c),this.updateDrawOrder()},a.fromState=function(a){if(a.text!==undefined)return f(a,this);if(a.columns!==undefined||a.headings!==undefined)return g(a,this);if(a.type==="folder")return h(a,this);var b=["default","always","never"];return b.indexOf(a.userRequestedGraphing)===-1&&(a.hasOwnProperty("graphed")?a.userRequestedGraphing=a.graphed?"always":"never":a.userRequestedGraphing="default"),e(a,this)},a.triggerRemoveExps=function(){},a.triggerRemoveExp=function(){},a.triggerAddExp=function(){}});return j}),function(a,b){typeof exports=="object"?module.exports=b():typeof define=="function"&&define.amd&&define("i18next",[],b)}(this,function(){function r(a,b){var c;if(!b||typeof b=="function")return a;for(c in b)a[c]=b[c];return a}function s(a,b,c){var d,e=0,f=a.length,g=f===undefined||typeof a=="function";if(c){if(g){for(d in a)if(b.apply(a[d],c)===!1)break}else for(;e<f;)if(b.apply(a[e++],c)===!1)break}else if(g){for(d in a)if(b.call(a[d],d,a[d])===!1)break}else for(;e<f;)if(b.call(a[e],e,a[e++])===!1)break;return a}function t(a){return typeof a=="string"?a.replace(/[&<>"'\/]/g,function(a){return h[a]}):a}function u(a){var b=function(a){if(window.XMLHttpRequest)return a(null,new XMLHttpRequest);if(window.ActiveXObject)try{return a(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(b){return a(null,new ActiveXObject("Microsoft.XMLHTTP"))}return a(new Error)},c=function(a){if(typeof a=="string")return a;var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},d=function(a){a=a.replace(/\r\n/g,"\n");var b="";for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(d&63|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(d&63|128))}return b},e=function(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a=d(a);var c="",e,f,g,h,i,j,k,l=0;do e=a.charCodeAt(l++),f=a.charCodeAt(l++),g=a.charCodeAt(l++),h=e>>2,i=(e&3)<<4|f>>4,j=(f&15)<<2|g>>6,k=g&63,isNaN(f)?j=k=64:isNaN(g)&&(k=64),c+=b.charAt(h)+b.charAt(i)+b.charAt(j)+b.charAt(k),e=f=g="",h=i=j=k="";while(l<a.length);return c},f=function(){var a=arguments[0];for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a},g=function(a,d,e,h){typeof e=="function"&&(h=e,e={}),e.cache=e.cache||!1,e.data=e.data||{},e.headers=e.headers||{},e.jsonp=e.jsonp||!1,e.async=e.async===undefined?!0:e.async;var i=f({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},g.headers,e.headers),j;i["content-type"]==="application/json"?j=JSON.stringify(e.data):j=c(e.data);if(a==="GET"){var k=[];j&&(k.push(j),j=null),e.cache||k.push("_="+(new Date).getTime()),e.jsonp&&(k.push("callback="+e.jsonp),k.push("jsonp="+e.jsonp)),k=k.join("&"),k.length>1&&(d.indexOf("?")>-1?d+="&"+k:d+="?"+k);if(e.jsonp){var l=document.getElementsByTagName("head")[0],m=document.createElement("script");m.type="text/javascript",m.src=d,l.appendChild(m);return}}b(function(b,c){if(b)return h(b);c.open(a,d,e.async);for(var f in i)i.hasOwnProperty(f)&&c.setRequestHeader(f,i[f]);c.onreadystatechange=function(){if(c.readyState===4){var a=c.responseText||"";if(!h)return;h(c.status,{text:function(){return a},json:function(){return JSON.parse(a)}})}},c.send(j)})},h={authBasic:function(a,b){g.headers.Authorization="Basic "+e(a+":"+b)},connect:function(a,b,c){return g("CONNECT",a,b,c)},del:function(a,b,c){return g("DELETE",a,b,c)},get:function(a,b,c){return g("GET",a,b,c)},head:function(a,b,c){return g("HEAD",a,b,c)},headers:function(a){g.headers=a||{}},isAllowed:function(a,b,c){this.options(a,function(a,d){c(d.text().indexOf(b)!==-1)})},options:function(a,b,c){return g("OPTIONS",a,b,c)},patch:function(a,b,c){return g("PATCH",a,b,c)},post:function(a,b,c){return g("POST",a,b,c)},put:function(a,b,c){return g("PUT",a,b,c)},trace:function(a,b,c){return g("TRACE",a,b,c)}},i=a.type?a.type.toLowerCase():"get";h[i](a.url,a,function(b,c){b===200?a.success(c.json(),b,null):a.error(c.text(),b,null)})}function v(e,h){var i,j,l,n,o,p,q;typeof e=="function"&&(h=e,e={}),e=e||{},k.extend(g,e),typeof g.ns=="string"&&(g.ns={namespaces:[g.ns],defaultNs:g.ns}),typeof g.fallbackNS=="string"&&(g.fallbackNS=[g.fallbackNS]),g.interpolationPrefixEscaped=k.regexEscape(g.interpolationPrefix),g.interpolationSuffixEscaped=k.regexEscape(g.interpolationSuffix),g.lng||(g.lng=k.detectLanguage()),g.lng?g.useCookie&&k.cookie.create(g.cookieName,g.lng,g.cookieExpirationTime):(g.lng=g.fallbackLng,g.useCookie&&k.cookie.remove(g.cookieName)),f=k.toLanguages(g.lng),d=f[0],k.log("currentLng set to: "+d),m.setCurrentLng(d),a&&g.setJqueryExt&&D(),a&&a.Deferred&&(i=a.Deferred());if(g.resStore){c=g.resStore,h&&h(J),i&&i.resolve();if(i)return i.promise();return}j=k.toLanguages(g.lng),typeof g.preload=="string"&&(g.preload=[g.preload]);for(l=0,n=g.preload.length;l<n;l++){o=k.toLanguages(g.preload[l]);for(p=0,q=o.length;p<q;p++)j.indexOf(o[p])<0&&j.push(o[p])}b.sync.load(j,g,function(a,b){c=b,h&&h(J),i&&i.resolve()});if(i)return i.promise()}function w(a,b){var c,d;typeof a=="string"&&(a=[a]);for(c=0,d=a.length;c<d;c++)g.preload.indexOf(a[c])<0&&g.preload.push(a[c]);return v(b)}function x(a,b,d){typeof b!="string"?(d=b,b=g.ns.defaultNs):g.ns.namespaces.indexOf(b)<0&&g.ns.namespaces.push(b),c[a]=c[a]||{},c[a][b]=c[a][b]||{},k.extend(c[a][b],d)}function y(a){g.ns.defaultNs=a}function z(a,b){A([a],b)}function A(a,d){var e,f,h,i,j,l,m,n,o,p,q,r,s={dynamicLoad:g.dynamicLoad,resGetPath:g.resGetPath,getAsync:g.getAsync,customLoad:g.customLoad,ns:{namespaces:a,defaultNs:""}},t=k.toLanguages(g.lng);typeof g.preload=="string"&&(g.preload=[g.preload]);for(e=0,f=g.preload.length;e<f;e++){h=k.toLanguages(g.preload[e]);for(i=0,j=h.length;i<j;i++)t.indexOf(h[i])<0&&t.push(h[i])}l=[];for(m=0,n=t.length;m<n;m++){o=!1,p=c[t[m]];if(p)for(q=0,r=a.length;q<r;q++)p[a[q]]||(o=!0);else o=!0;o&&l.push(t[m])}l.length?b.sync._fetch(l,s,function(e,f){var h=a.length*l.length;k.each(a,function(a,e){g.ns.namespaces.indexOf(e)<0&&g.ns.namespaces.push(e),k.each(l,function(a,i){c[i]=c[i]||{},c[i][e]=f[i][e],h--,h===0&&d&&(g.useLocalStorage&&b.sync._storeLocal(c),d())})})}):d&&d()}function B(a,b){return v({lng:a},b)}function C(){return d}function D(){function b(b,c,d){var e,f,h;if(c.length===0)return;e="text",c.indexOf("[")===0&&(f=c.split("]"),c=f[1],e=f[0].substr(1,f[0].length-1)),c.indexOf(";")===c.length-1&&(c=c.substr(0,c.length-2)),e==="html"?(h=g.defaultValueFromContent?a.extend({defaultValue:b.html()},d):d,b.html(a.t(c,h))):e==="text"?(h=g.defaultValueFromContent?a.extend({defaultValue:b.text()},d):d,b.text(a.t(c,h))):(h=g.defaultValueFromContent?a.extend({defaultValue:b.attr(e)},d):d,b.attr(e,a.t(c,h)))}function c(c,d){var e,f,h,i=c.attr(g.selectorAttr);if(!i)return;e=c,f=c.data("i18n-target"),f&&(e=c.find(f)||c),!d&&g.useDataAttrOptions===!0&&(d=c.data("i18n-options")),d=d||{},i.indexOf(";")>=0?(h=i.split(";"),a.each(h,function(a,c){c!==""&&b(e,c,d)})):b(e,i,d),g.useDataAttrOptions===!0&&c.data("i18n-options",d)}a.t=a.t||J,a.fn.i18n=function(b){return this.each(function(){var d;c(a(this),b),d=a(this).find("["+g.selectorAttr+"]"),d.each(function(){c(a(this),b)})})}}function E(a,b,c,d){var e,f,h;return a?(d=d||b,a.indexOf(d.interpolationPrefix||g.interpolationPrefix)<0?a:(e=d.interpolationPrefix?k.regexEscape(d.interpolationPrefix):g.interpolationPrefixEscaped,f=d.interpolationSuffix?k.regexEscape(d.interpolationSuffix):g.interpolationSuffixEscaped,h="HTML"+f,k.each(b,function(b,i){var j=c?c+g.keyseparator+b:b;typeof i=="object"&&i!==null?a=E(a,i,j,d):d.escapeInterpolation||g.escapeInterpolation?(a=a.replace(new RegExp([e,j,h].join(""),"g"),i),a=a.replace(new RegExp([e,j,f].join(""),"g"),k.escape(i))):a=a.replace(new RegExp([e,j,f].join(""),"g"),i)}),a)):a}function F(a,b){var c,d,f,h,i,j,l,m,n=",",o="{",p="}",q=k.extend({},b);delete q.postProcess;while(a.indexOf(g.reusePrefix)!=-1){e++;if(e>g.maxRecursion)break;c=a.lastIndexOf(g.reusePrefix),d=a.indexOf(g.reuseSuffix,c)+g.reuseSuffix.length,f=a.substring(c,d),h=f.replace(g.reusePrefix,"").replace(g.reuseSuffix,"");if(h.indexOf(n)!=-1){i=h.indexOf(n);if(h.indexOf(o,i)!=-1&&h.indexOf(p,i)!=-1){j=h.indexOf(o,i),l=h.indexOf(p,j)+p.length;try{q=k.extend(q,JSON.parse(h.substring(j,l))),h=h.substring(0,i)}catch(r){}}}m=L(h,q),a=a.replace(f,m)}return a}function G(a){return a.context&&typeof a.context=="string"}function H(a){return a.count!==undefined&&typeof a.count!="string"&&a.count!==1}function I(a,b){var c,d;return b=b||{},c=b.defaultValue||a,d=M(a,b),d!==undefined||d===c}function J(){return e=0,L.apply(null,arguments)}function K(){var a,b=[];for(a=1;a<arguments.length;a++)b.push(arguments[a]);return{postProcess:"sprintf",sprintf:b}}function L(a,b){var c,d,e,h,i,j,m,o;return typeof b=="string"?b=K.apply(null,arguments):b=b||{},c=b.defaultValue||a,d=M(a,b),e=b.lng?k.toLanguages(b.lng):f,h=b.ns||g.ns.defaultNs,a.indexOf(g.nsseparator)>-1&&(i=a.split(g.nsseparator),h=i[0],a=i[1]),d===undefined&&g.sendMissing&&(b.lng?l.postMissing(e[0],h,a,c,e):l.postMissing(g.lng,h,a,c,e)),j=b.postProcess||g.postProcess,d!==undefined&&j&&n[j]&&(d=n[j](d,a,b)),m=c,c.indexOf(g.nsseparator)>-1&&(i=c.split(g.nsseparator),m=i[1]),m===a&&g.parseMissingKey&&(c=g.parseMissingKey(c)),d===undefined&&(c=E(c,b),c=F(c,b),j&&n[j]&&(o=b.defaultValue||a,d=n[j](o,a,b))),d!==undefined?d:c}function M(a,d){var e,h,i,j,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,I;d=d||{},i=d.defaultValue||a,j=f;if(!c)return i;d.lng&&(j=k.toLanguages(d.lng),c[j[0]]||(l=g.getAsync,g.getAsync=!1,b.sync.load(j,g,function(a,b){k.extend(c,b),g.getAsync=l}))),n=d.ns||g.ns.defaultNs,a.indexOf(g.nsseparator)>-1&&(o=a.split(g.nsseparator),n=o[0],a=o[1]);if(G(d)){e=k.extend({},d),delete e.context,e.defaultValue=g.contextNotFound,p=n+g.nsseparator+a+"_"+d.context,h=J(p,e);if(h!=g.contextNotFound)return E(h,{context:d.context})}if(H(d)){e=k.extend({},d),delete e.count,e.defaultValue=g.pluralNotFound,q=n+g.nsseparator+a+g.pluralSuffix,r=m.get(j[0],d.count),r>=0?q=q+"_"+r:r===1&&(q=n+g.nsseparator+a),h=J(q,e);if(h!=g.pluralNotFound)return E(h,{count:d.count,interpolationPrefix:d.interpolationPrefix,interpolationSuffix:d.interpolationSuffix
})}t=a.split(g.keyseparator);for(u=0,v=j.length;u<v;u++){if(s!==undefined)break;w=j[u],x=0,y=c[w]&&c[w][n];while(t[x])y=y&&y[t[x]],x++;if(y!==undefined){if(typeof y=="string")y=E(y,d),y=F(y,d);else if(Object.prototype.toString.apply(y)==="[object Array]"&&!g.returnObjectTrees&&!d.returnObjectTrees)y=y.join("\n"),y=E(y,d),y=F(y,d);else if(y===null&&g.fallbackOnNull===!0)y=undefined;else if(y!==null)if(!g.returnObjectTrees&&!d.returnObjectTrees)y="key '"+n+":"+a+" ("+w+")' "+"returned a object instead of string.",k.log(y);else{z={};for(A in y)z[A]=L(n+g.nsseparator+a+g.keyseparator+A,d);y=z}s=y}}if(s===undefined&&!d.isFallbackLookup&&(g.fallbackToDefaultNS===!0||g.fallbackNS&&g.fallbackNS.length>0)){d.isFallbackLookup=!0;if(g.fallbackNS.length)for(B=0,C=g.fallbackNS.length;B<C;B++){s=M(g.fallbackNS[B]+g.nsseparator+a,d);if(s){D=s.indexOf(g.nsseparator)>-1?s.split(g.nsseparator)[1]:s,I=i.indexOf(g.nsseparator)>-1?i.split(g.nsseparator)[1]:i;if(D!==I)break}}else s=M(a,d)}return s}function N(){var a,b,c=[];return typeof window!="undefined"&&(function(){var a,b,d,e,f=window.location.search.substring(1),g=f.split("&");for(a=0;a<g.length;a++)b=g[a].indexOf("="),b>0&&(d=g[a].substring(0,b),e=g[a].substring(b+1),c[d]=e)}(),c[g.detectLngQS]&&(a=c[g.detectLngQS])),!a&&typeof document!="undefined"&&g.useCookie&&(b=k.cookie.read(g.cookieName),b&&(a=b)),!a&&typeof navigator!="undefined"&&(a=navigator.language?navigator.language:navigator.userLanguage),a}var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b,c,d,e;if(this==null)throw new TypeError;b=Object(this),c=b.length>>>0;if(c===0)return-1;d=0,arguments.length>0&&(d=Number(arguments[1]),d!=d?d=0:d!=0&&d!=Infinity&&d!=-Infinity&&(d=(d>0||-1)*Math.floor(Math.abs(d))));if(d>=c)return-1;e=d>=0?d:Math.max(c-Math.abs(d),0);for(;e<c;e++)if(e in b&&b[e]===a)return e;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){var b,c,d,e;if(this==null)throw new TypeError;b=Object(this),c=b.length>>>0;if(c===0)return-1;d=c,arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:d!=0&&d!=1/0&&d!=-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),e=d>=0?Math.min(d,c-1):c-Math.abs(d);for(;e>=0;e--)if(e in b&&b[e]===a)return e;return-1}),a=undefined,b={},c={},e=0,f=[],g={lng:undefined,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:"dev",fallbackNS:[],detectLngQS:"setLng",ns:"translation",fallbackOnNull:!0,fallbackToDefaultNS:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:undefined,useLocalStorage:!1,localStorageExpirationTime:6048e5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),escapeInterpolation:!1,setJqueryExt:!0,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:undefined,useCookie:!0,cookieName:"i18next",postProcess:undefined,parseMissingKey:undefined},h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},i={create:function(a,b,c){var d;if(c){var e=new Date;e.setTime(e.getTime()+c*60*1e3),d="; expires="+e.toGMTString()}else d="";document.cookie=a+"="+b+d+"; path=/"},read:function(a){var b=a+"=",c=document.cookie.split(";");for(var d=0;d<c.length;d++){var e=c[d];while(e.charAt(0)==" ")e=e.substring(1,e.length);if(e.indexOf(b)===0)return e.substring(b.length,e.length)}return null},remove:function(a){this.create(a,"",-1)}},j={create:function(a,b,c){},read:function(a){return null},remove:function(a){}},k={extend:a?a.extend:r,each:a?a.each:s,ajax:a?a.ajax:u,cookie:typeof document!="undefined"?i:j,detectLanguage:N,escape:t,log:function(a){g.debug&&typeof console!="undefined"&&console.log(a)},toLanguages:function(a){var b=[];if(typeof a=="string"&&a.indexOf("-")>-1){var c=a.split("-");a=g.lowerCaseLng?c[0].toLowerCase()+"-"+c[1].toLowerCase():c[0].toLowerCase()+"-"+c[1].toUpperCase(),g.load!=="unspecific"&&b.push(a),g.load!=="current"&&b.push(c[0])}else b.push(a);return b.indexOf(g.fallbackLng)===-1&&g.fallbackLng&&b.push(g.fallbackLng),b},regexEscape:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},k.applyReplacement=E,l={load:function(a,b,c){b.useLocalStorage?l._loadLocal(a,b,function(d,e){var f=[];for(var g=0,h=a.length;g<h;g++)e[a[g]]||f.push(a[g]);f.length>0?l._fetch(f,b,function(a,b){k.extend(e,b),l._storeLocal(b),c(null,e)}):c(null,e)}):l._fetch(a,b,function(a,b){c(null,b)})},_loadLocal:function(a,b,c){var d={},e=(new Date).getTime();if(window.localStorage){var f=a.length;k.each(a,function(a,g){var h=window.localStorage.getItem("res_"+g);h&&(h=JSON.parse(h),h.i18nStamp&&h.i18nStamp+b.localStorageExpirationTime>e&&(d[g]=h)),f--,f===0&&c(null,d)})}},_storeLocal:function(a){if(window.localStorage)for(var b in a)a[b].i18nStamp=(new Date).getTime(),window.localStorage.setItem("res_"+b,JSON.stringify(a[b]));return},_fetch:function(a,b,c){var d=b.ns,e={};if(!b.dynamicLoad){var f=d.namespaces.length*a.length,g;k.each(d.namespaces,function(d,h){k.each(a,function(a,d){var i=function(a,b){a&&(g=g||[],g.push(a)),e[d]=e[d]||{},e[d][h]=b,f--,f===0&&c(g,e)};typeof b.customLoad=="function"?b.customLoad(d,h,b,i):l._fetchOne(d,h,b,i)})})}else{var h=function(a,b){c(null,b)};if(typeof b.customLoad=="function")b.customLoad(a,d.namespaces,b,h);else{var i=E(b.resGetPath,{lng:a.join("+"),ns:d.namespaces.join("+")});k.ajax({url:i,success:function(a,b,c){k.log("loaded: "+i),h(null,a)},error:function(a,b,c){k.log("failed loading: "+i),h("failed loading resource.json error: "+c)},dataType:"json",async:b.getAsync})}}},_fetchOne:function(a,b,c,d){var e=E(c.resGetPath,{lng:a,ns:b});k.ajax({url:e,success:function(a,b,c){k.log("loaded: "+e),d(null,a)},error:function(a,b,c){k.log("failed loading: "+e),d(c,{})},dataType:"json",async:c.getAsync})},postMissing:function(a,b,d,e,f){var h={};h[d]=e;var i=[];if(g.sendMissingTo==="fallback"&&g.fallbackLng!==!1)i.push({lng:g.fallbackLng,url:E(g.resPostPath,{lng:g.fallbackLng,ns:b})});else if(g.sendMissingTo==="current"||g.sendMissingTo==="fallback"&&g.fallbackLng===!1)i.push({lng:a,url:E(g.resPostPath,{lng:a,ns:b})});else if(g.sendMissingTo==="all")for(var j=0,l=f.length;j<l;j++)i.push({lng:f[j],url:E(g.resPostPath,{lng:f[j],ns:b})});for(var m=0,n=i.length;m<n;m++){var o=i[m];k.ajax({url:o.url,type:g.sendType,data:h,success:function(a,f,g){k.log("posted missing key '"+d+"' to: "+o.url);var h=d.split("."),i=0,j=c[o.lng][b];while(h[i])i===h.length-1?j=j[h[i]]=e:j=j[h[i]]=j[h[i]]||{},i++},error:function(a,b,c){k.log("failed posting missing key '"+d+"' to: "+o.url)},dataType:"json",async:g.postAsync})}}},m={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(a){return Number(a>1)}},af:{name:"Afrikaans",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ak:{name:"Akan",numbers:[1,2],plurals:function(a){return Number(a>1)}},am:{name:"Amharic",numbers:[1,2],plurals:function(a){return Number(a>1)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(a){return Number(a===0?0:a==1?1:a==2?2:a%100>=3&&a%100<=10?3:a%100>=11?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(a){return Number(a>1)}},ast:{name:"Asturian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ay:{name:"Aymará",numbers:[1],plurals:function(a){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(a){return Number(a!=1)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},bg:{name:"Bulgarian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(a){return Number(a!=1)}},bo:{name:"Tibetan",numbers:[1],plurals:function(a){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(a){return Number(a>1)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(a){return Number(a!=1)}},cgg:{name:"Chiga",numbers:[1],plurals:function(a){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(a){return Number(a==1?0:a>=2&&a<=4?1:2)}},csb:{name:"Kashubian",numbers:[1,2,5],plurals:function(a){return Number(a==1?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(a){return Number(a==1?0:a==2?1:a!=8&&a!=11?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},de:{name:"German",numbers:[1,2],plurals:function(a){return Number(a!=1)}},dz:{name:"Dzongkha",numbers:[1],plurals:function(a){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(a){return Number(a!=1)}},en:{name:"English",numbers:[1,2],plurals:function(a){return Number(a!=1)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(a){return Number(a!=1)}},es:{name:"Spanish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},et:{name:"Estonian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},eu:{name:"Basque",numbers:[1,2],plurals:function(a){return Number(a!=1)}},fa:{name:"Persian",numbers:[1],plurals:function(a){return 0}},fi:{name:"Finnish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(a){return Number(a>1)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(a){return Number(a!=1)}},fr:{name:"French",numbers:[1,2],plurals:function(a){return Number(a>1)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(a){return Number(a==1?0:a==2?1:a<7?2:a<11?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(a){return Number(a==1||a==11?0:a==2||a==12?1:a>2&&a<20?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(a){return Number(a!=1)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(a){return Number(a!=1)}},gun:{name:"Gun",numbers:[1,2],plurals:function(a){return Number(a>1)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(a){return Number(a!=1)}},he:{name:"Hebrew",numbers:[1,2],plurals:function(a){return Number(a!=1)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(a){return Number(a!=1)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(a){return Number(a!=1)}},id:{name:"Indonesian",numbers:[1],plurals:function(a){return 0}},is:{name:"Icelandic",numbers:[1,2],plurals:function(a){return Number(a%10!=1||a%100==11)}},it:{name:"Italian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ja:{name:"Japanese",numbers:[1],plurals:function(a){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(a){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(a){return Number(a!==0)}},ka:{name:"Georgian",numbers:[1],plurals:function(a){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(a){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(a){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ko:{name:"Korean",numbers:[1],plurals:function(a){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(a){return Number(a==1?0:a==2?1:a==3?2:3)}},ky:{name:"Kyrgyz",numbers:[1],plurals:function(a){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(a){return Number(a>1)}},lo:{name:"Lao",numbers:[1],plurals:function(a){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&(a%100<10||a%100>=20)?1:2)}},lv:{name:"Latvian",numbers:[0,1,2],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a!==0?1:2)}},mai:{name:"Maithili",numbers:[1,2],plurals:function(a){return Number(a!=1)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(a){return Number(a>1)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(a){return Number(a>1)}},mi:{name:"Maori",numbers:[1,2],plurals:function(a){return Number(a>1)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(a){return Number(a==1||a%10==1?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(a){return Number(a!=1)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(a){return Number(a==1?1:2)}},mr:{name:"Marathi",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ms:{name:"Malay",numbers:[1],plurals:function(a){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(a){return Number(a==1?0:a===0||a%100>1&&a%100<11?1:a%100>10&&a%100<20?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(a){return Number(a!=1)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(a){return Number(a!=1)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ne:{name:"Nepali",numbers:[1,2],plurals:function(a){return Number(a!=1)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(a){return Number(a!=1)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(a){return Number(a!=1)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(a){return Number(a!=1)}},oc:{name:"Occitan",numbers:[1,2],plurals:function(a){return Number(a>1)}},or:{name:"Oriya",numbers:[2,1],plurals:function(a){return Number(a!=1)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(a){return Number(a!=1)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(a){return Number(a!=1)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(a){return Number(a==1?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ps:{name:"Pashto",numbers:[1,2],plurals:function(a){return Number(a!=1)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(a){return Number(a!=1)}},pt_br:{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(a){return Number(a!=1)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(a){return Number(a==1?0:a===0||a%100>0&&a%100<20?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(a){return 0}},sco:{name:"Scots",numbers:[1,2],plurals:function(a){return Number(a!=1)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(a){return Number(a!=1)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(a){return Number(a!=1)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(a){return Number(a==1?0:a>=2&&a<=4?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(a){return Number(a%100==1?1:a%100==2?2:a%100==3||a%100==4?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(a){return Number(a!=1)}},son:{name:"Songhay",numbers:[1,2],plurals:function(a){return Number(a!=1)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(a){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ta:{name:"Tamil",numbers:[1,2],plurals:function(a){return Number(a!=1)}},te:{name:"Telugu",numbers:[1,2],plurals:function(a){return Number(a!=1)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(a){return Number(a>1)}},th:{name:"Thai",numbers:[1],plurals:function(a){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(a){return Number(a>1)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(a){return Number(a!=1)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(a){return Number(a>1)}},tt:{name:"Tatar",numbers:[1],plurals:function(a){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(a){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(a){return Number(a!=1)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(a){return Number(a>1)}},vi:{name:"Vietnamese",numbers:[1],plurals:function(a){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(a){return Number(a>1)}},wo:{name:"Wolof",numbers:[1],plurals:function(a){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(a){return Number(a!=1)}},zh:{name:"Chinese",numbers:[1],plurals:function(a){return 0}}},addRule:function(a,b){m.rules[a]=b},setCurrentLng:function(a){if(!m.currentRule||m.currentRule.lng!==a){var b=a.split("-");m.currentRule={lng:a,rule:m.rules[b[0]]}}},get:function(a,b){function d(b,c){var d;m.currentRule&&m.currentRule.lng===a?d=m.currentRule.rule:d=m.rules[b];if(d){var e=d.plurals(c),f=d.numbers[e];return d.numbers.length===2&&d.numbers[0]===1&&(f===2?f=-1:f===1&&(f=1)),f}return c===1?"1":"-1"}var c=a.split("-");return d(c[0],b)}},n={},o=function(a,b){n[a]=b},p=function(){function a(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function b(a,b){for(var c=[];b>0;c[--b]=a);return c.join("")}var c=function(){return c.cache.hasOwnProperty(arguments[0])||(c.cache[arguments[0]]=c.parse(arguments[0])),c.format.call(null,c.cache[arguments[0]],arguments)};return c.format=function(c,d){var e=1,f=c.length,g="",h,i=[],j,k,l,m,n,o;for(j=0;j<f;j++){g=a(c[j]);if(g==="string")i.push(c[j]);else if(g==="array"){l=c[j];if(l[2]){h=d[e];for(k=0;k<l[2].length;k++){if(!h.hasOwnProperty(l[2][k]))throw p('[sprintf] property "%s" does not exist',l[2][k]);h=h[l[2][k]]}}else l[1]?h=d[l[1]]:h=d[e++];if(/[^s]/.test(l[8])&&a(h)!="number")throw p("[sprintf] expecting number but found %s",a(h));switch(l[8]){case"b":h=h.toString(2);break;case"c":h=String.fromCharCode(h);break;case"d":h=parseInt(h,10);break;case"e":h=l[7]?h.toExponential(l[7]):h.toExponential();break;case"f":h=l[7]?parseFloat(h).toFixed(l[7]):parseFloat(h);break;case"o":h=h.toString(8);break;case"s":h=(h=String(h))&&l[7]?h.substring(0,l[7]):h;break;case"u":h=Math.abs(h);break;case"x":h=h.toString(16);break;case"X":h=h.toString(16).toUpperCase()}h=/[def]/.test(l[8])&&l[3]&&h>=0?"+"+h:h,n=l[4]?l[4]=="0"?"0":l[4].charAt(1):" ",o=l[6]-String(h).length,m=l[6]?b(n,o):"",i.push(l[5]?h+m:m+h)}}return i.join("")},c.cache={},c.parse=function(a){var b=a,c=[],d=[],e=0;while(b){if((c=/^[^\x25]+/.exec(b))!==null)d.push(c[0]);else if((c=/^\x25{2}/.exec(b))!==null)d.push("%");else{if((c=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b))===null)throw"[sprintf] huh?";if(c[2]){e|=1;var f=[],g=c[2],h=[];if((h=/^([a-z_][a-z_\d]*)/i.exec(g))===null)throw"[sprintf] huh?";f.push(h[1]);while((g=g.substring(h[0].length))!=="")if((h=/^\.([a-z_][a-z_\d]*)/i.exec(g))!==null)f.push(h[1]);else{if((h=/^\[(\d+)\]/.exec(g))===null)throw"[sprintf] huh?";f.push(h[1])}c[2]=f}else e|=2;if(e===3)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";d.push(c)}b=b.substring(c[0].length)}return d},c}(),q=function(a,b){return b.unshift(a),p.apply(null,b)},o("sprintf",function(a,b,c){return c.sprintf?Object.prototype.toString.apply(c.sprintf)==="[object Array]"?q(a,c.sprintf):typeof c.sprintf=="object"?p(a,c.sprintf):a:a}),b.init=v,b.setLng=B,b.preload=w,b.addResourceBundle=x,b.loadNamespace=z,b.loadNamespaces=A,b.setDefaultNamespace=y,b.t=J,b.translate=J,b.exists=I,b.detectLanguage=k.detectLanguage,b.pluralExtensions=m,b.sync=l,b.functions=k,b.lng=C,b.addPostProcessor=o,b.options=g,b}),define("i18n",["require","i18next","config"],function(a){var b=a("i18next"),c=a("config"),d={getAsync:!1,fallbackLng:!1,resGetPath:"/assets/generated/locales/__lng__/__ns__.json",detectLngQS:"lang",useCookie:!1,resStore:{en:{translation:{}}}};return c.get("lang")&&delete d.resStore,b.init(d),b}),define("lib/underscore_view",["require","jquery","underscore","./underscore_model","pjs","i18n"],function(a){var b=a("jquery"),c=a("underscore"),d=a("./underscore_model"),e=a("pjs"),f=a("i18n"),g=e(d,function(a){a.$=function(a){var c=b(this.__domNode);return a?c.filter(a).add(c.find(a)):c};var d=function(a){return function(c){return this.__domNode||e.call(this),b(c)[a](this.$()),this.didInsertElement(),this.$()}};a.appendTo=d("append"),a.replace=d("replaceWith"),a.prependTo=d("prepend"),a.insertAfter=d("after"),a.insertBefore=d("before"),a.remove=function(){this.$().remove(),this.destruct()},a.destruct=function(){},a.didCreateElement=function(){},a.didInsertElement=function(){},a.getTemplateParams=function(){return{}},a.beforeRerender=function(){},a.afterRerender=function(){},a.rerender=function(){var a=this.__domNode,d=this.getTemplateParams();if(c.isEqual(d,this.__lastRenderParams))return;this.beforeRerender(),e.call(this),a&&b.contains(document,a)&&this.replace(a),this.afterRerender()},a.setDomNode=function(a){this.__domNode=a[0]?a[0]:a,this.didInsertElement()};var e=function(){var a=this.getTemplateParams(),d={t:function(a,b){return f.t(a,b)}},e=c.extend({},a,d),g=this.template(e),h=b(g);this.__domNode=h[0],this.__lastRenderParams=a,this.didCreateElement()}});return g}),define("expressions/dragdrop",["require","jquery","pjs","tipsy"],function(a){var b=a("jquery"),c=a("pjs"),d=a("tipsy"),e=c(function(a){a.toggleStyling=function(a){},a.onDragStart=function(a,b){},a.onDragStop=function(a){},a.commitDragState=function(a){},a.updateScroll=function(){},a.computeDragPosition=function(a,b){return{x:a,y:b}},a.computeDragState=function(a,b){return{}},a.previewDragState=function(a){},a.buildDragList=function(){},a.init=function(a){this.expressions=a,this.active=!1},a.start=function(a,b){if(a.touches.length!==1)return;if(a.wasHandled("longhold"))return;this.active=!0,this.exppanel=this.expressions.$("#exppanel"),this.setupEventListeners(a),this.onDragStart(a,b),this.dragList=this.buildDragList(),this.toggleStyling(!0),this.drag(a.touches[0].x,a.touches[0].y),d.addDisableLock()},a.setupEventListeners=function(a){function d(a){for(var b=0;b<a.touches.length;b++){var d=a.touches[b];if(d.identifier===c)return d}}var c=a.touches[0].identifier,e=this;b(document).on("tapmove.dragdrop",function(a){var b=d(a);if(!b)return;e.drag(b.x,b.y)}),b(document).on("tapend.dragdrop",function(a){var b=d(a);if(b)return;e.stop(),a.handle("dragdrop")}),this.exppanel.on("scroll.dragdrop",this.drag.bind(this))},a.stop=function(a){this.active=!1,b(document).off(".dragdrop"),this.toggleStyling(!1),this.commitDragState(this.dragState),this.onDragStop(a),d.removeDisableLock()},a.drag=function(a,b){if(!this.active)return;typeof a=="number"&&(this.mouseX=a),typeof b=="number"&&(this.mouseY=b),this.updateScroll();var c=this.computeDragPosition(this.mouseX,this.mouseY);this.dragState=this.computeDragState(this.dragList,c),this.previewDragState(this.dragState)}});return e}),define("expressions/dragdrop_expressions",["require","jquery","underscore","lib/browser","pjs","undoredo","./dragdrop"],function(a){var b=a("jquery"),c=a("underscore"),d=a("lib/browser"),e=a("pjs"),f=a("undoredo"),g=a("./dragdrop"),h=e(g,function(a,e){a.toggleStyling=function(a){this.exppanel.toggleClass("isDragging",a),this.draggedView.$().toggleClass("dragging",a),a||(this.draggedView.$().removeClass("overFolder"),b(".expressionitem").css("transform","none"))},a.onDragStart=function(a,d){this.expressions.setSelected(null),this.exppanel=this.expressions.$("#exppanel"),b(document.activeElement).blur(),a.preventDefault(),this.draggedView=d,this.draggedViewHeight=d.$().outerHeight()-1,this.panelTop=this.exppanel.offset().top,this.panelHeight=this.exppanel.height(),this.panelBottom=this.panelTop+this.panelHeight,this.grabOffset=d.$().offset().top-a.touches[0].y,this.grabY=this.computeDragPosition(a.touches[0].x,a.touches[0].y).y,this.grabIndex=d.model.index,this.draggedViewCount=1,d.model.isFolder&&(this.draggedViewCount+=c.size(d.model.memberIds),this.dropCollapsed=d.model.collapsed,d.model.setProperty("collapsed",!0))},a.onDragStop=function(a){clearTimeout(this.scrollTimeout),this.expressions.setSelected(this.draggedView.model)},a.buildDragList=function(){var a=this,b=this.expressions.getItemsByIndexRange(0,Infinity),c=[{y:-Infinity,index:0,folder:undefined}],d=[{y:Infinity,index:0,folder:undefined}];return b.forEach(function(b){if(b.id===a.draggedView.model.id)return;if(b.folder&&b.folder.collapsed)return;if(b.folder&&a.draggedView.model.isFolder)return;var e=a.expressions.getItemView(b.id),f=b.index>a.grabIndex,g=e.$();if(b.isFolder&&(b.collapsed||a.draggedView.model.isFolder))for(var h in b.memberIds)g.push(a.expressions.getItemView(h).$()[0]);var i=f?-a.draggedViewHeight:0,j=e.$().height(),k=e.$().position().top+i,l=f?-1:0,m=b.index+l,n=m+g.length,o,p;a.draggedView.model.isFolder||(o=b.folder,p=b.isFolder?b:b.folder),c.push({y:k,index:m,folder:o}),c.push({y:k+j/2,index:n,folder:p,elements:g,offset:i}),d={y:k+j,index:n,folder:undefined}}),c.push(d),c},a.updateScroll=function(){clearTimeout(this.scrollTimeout);if(!this.active)return;var a=0;a=Math.min(a,this.mouseY-this.panelTop),a=Math.max(a,this.mouseY-this.panelBottom+30),a=a*this.panelHeight/900,a&&(this.exppanel.scrollTop(this.exppanel.scrollTop()+a),this.scrollTimeout=setTimeout(this.updateScroll.bind(this),30))},a.computeDragPosition=function(a,b){return b=Math.max(b,Math.min(b,this.panelBottom),this.panelTop),b-=this.panelTop,b+=this.grabOffset,{x:NaN,y:b+this.exppanel.scrollTop()}},a.computeDragState=function(a,b){function d(a){return a.y}var e=c.sortedIndex(a,{y:b.y},d)-1;return{list:a,index:a[e].index,folder:a[e].folder,dragY:b.y}},a.commitDragState=function(a){var b=this;f.oneTransaction(function(){var c=b.draggedView.model;b.expressions.model.moveItemsTo(b.grabIndex,a.index,b.draggedViewCount);var d=a.folder,e=c.folder;d!==e&&(e&&e.removeItem(c),d&&d.addItem(c)),c.isFolder&&c.setProperty("collapsed",b.dropCollapsed)})},a.previewDragState=function(a){var b=this;this.draggedView.$().css("transform",d.translateRule(0,a.dragY-this.grabY)),this.draggedView.$().toggleClass("overFolder",!!a.folder),c.each(a.list,function(c){if(c.elements){var e=c.offset+(c.index>a.index?b.draggedViewHeight:0);c.elements.css("transform",d.translateRule(0,e))}})}});return h}),define("expressions/dragdrop_columns",["require","jquery","underscore","lib/browser","pjs","./dragdrop"],function(a){var b=a("jquery"),c=a("underscore"),d=a("lib/browser"),e=a("pjs"),f=a("./dragdrop"),g=e(f,function(a,e){a.toggleStyling=function(a){this.draggedCells.toggleClass("dragging",a),a||b(".expressiontable .cell").css("transform","none")},a.onDragStart=function(a,c){this.draggedView=c,this.draggedCells=b(),this.tableView=c.tableView,this.tableView.model.setProperty("selectedCell",null),c.tableView.model.setProperty("selected",!0),this.draggedViewWidth=c.$().outerWidth()-1;var d=this.tableView.$(".column:first-child"),e=this.tableView.$(".column:last-child");this.minDragX=d.offset().left+d.outerWidth(),this.maxDragX=e.offset().left-this.draggedViewWidth,this.grabOffset=c.$().offset().left-a.touches[0].x,this.grabX=this.computeDragPosition(a.touches[0].x,a.touches[0].y).x,this.grabIndex=c.model.index},a.onDragStop=function(a){},a.buildDragList=function(){var a=this,c=this.tableView.columnViews.slice(1);c.pop();var d=0,e=[{x:-Infinity,index:1}],f=[{x:Infinity,index:1}];return c.forEach(function(c){var g=c[0],h=b(c.map(function(a){return a.$()[0]}));if(g===a.draggedView){a.draggedCells=h;return}var i=g.model,j=i.index>a.grabIndex,k=j?-a.draggedViewWidth:0,l=g.$().outerWidth(),m=g.$().offset().left+d+k,n=j?-1:0,o=i.index+n,p=o+1;e.push({x:m,index:o}),e.push({x:m+l/2,index:p,offset:k,views:h}),f={x:m+l,index:p}}),e.push(f),e},a.computeDragPosition=function(a,b){return a+=this.grabOffset,a=Math.max(this.minDragX,Math.min(this.maxDragX,a)),{x:a,y:NaN}},a.computeDragState=function(a,b){function d(a){return a.x}var e=c.sortedIndex(a,{x:b.x},d)-1;return{list:a,index:a[e].index,dragX:b.x}},a.commitDragState=function(a){var b=this.tableView.model;b.moveColumn(this.grabIndex,a.index)},a.previewDragState=function(a){var b=this;this.draggedCells.css("transform",d.translateRule(a.dragX-this.grabX,0)),c.each(a.list,function(c){if(c.views){var e=c.offset+(c.index>a.index?b.draggedViewWidth:0);c.views.css("transform",d.translateRule(e,0))}})}});return g}),define("loadcss!css/add_expression",function(){}),define("main/popover_view",["require","jquery","pjs","lib/underscore_view"],function(a){function g(a){a.isVisible?(f.forEach(function(b){b!==a&&b.closePopover()}),c(document).on("tapstart.popover-"+a.popoverNumber,function(b){a.setProperty("isVisible",!a.eventShouldClosePopover(b))})):c(document).off("tapstart.popover-"+a.popoverNumber)}var b,c=a("jquery"),d=a("pjs"),e=a("lib/underscore_view"),f=[];return b=d(e,function(a,b){a.init=function(){b.init.call(this),this.isVisible=!1,f.push(this),this.popoverNumber=f.length,this.observe("isVisible",function(){g(this),this.renderIsVisible()}.bind(this))},a.setupOpenButton=function(a,b){this.openButton=a,this.openButton.on(b,this.onBtnPressed.bind(this))},a.didInsertElement=function(){this.renderIsVisible()},a.renderIsVisible=function(){this.$().toggle(this.isVisible),this.openButton&&this.openButton.toggleClass("active",this.isVisible)},a.eventShouldClosePopover=function(a){return!this.eventIsWithinPopover(a)},a.eventIsWithinPopover=function(a){var b=c(a.target);return b.closest(this.$()).length||b.closest(this.openButton).length},a.onBtnPressed=function(a){var b=c(a.target);if(b.closest("[popover]").length)return;if(b.closest(this.openButton).length){this.togglePopover();return}},a.togglePopover=function(){this.setProperty("isVisible",!this.isVisible)},a.closePopover=function(){this.setProperty("isVisible",!1)}}),b}),define("template",["underscore","text"],function(a,b){var c={};return{load:function(d,e,f,g){var h="template_src/"+d+".underscore";b.get(e.toUrl(h),function(b){var e=a.template(b);g.isBuild&&(c[d]=e.source),f(e)})},write:function(a,b,d){var e;b in c?(e=c[b],d("define('"+a+"!"+b+"', "+"['underscore'], "+"function(_) {return "+e+";}"+");")):console.log("ERROR - failed to find template "+b+" in buildMap")}}}),define("template!add_expression",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div class="add-expression-dropdown popover bottom" popover="true">\n <span class="arrow"></span>\n\n ',_.each(expression_types,function(a){__p+="\n   <div class='new-item do-not-blur action-new"+a+"' id='new-"+a+"'>\n      <i class='icon-new-"+a+" expression-icon'></i>\n      "+t(a)+"\n    </div>\n "}),__p+="\n\n</div>\n";return __p}}),define("expressions/add_expression",["require","loadcss!css/add_expression","pjs","config","main/popover_view","lib/track_feature","template!add_expression","./expression","./table","./text","./folder","lib/browser","undoredo"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m;return a("loadcss!css/add_expression"),b=a("pjs"),c=a("config"),d=a("main/popover_view"),e=a("lib/track_feature"),f=a("template!add_expression"),g=a("./expression"),h=a("./table"),i=a("./text"),j=a("./folder"),k=a("lib/browser"),l=a("undoredo"),m=b(d,function(a,b){a.template=f,a.init=function(a){b.init.call(this),this.listView=a,this.list=a.model},a.getTemplateParams=function(){var a=b.getTemplateParams(),d=["expression","text","table"];return c.get("folders")&&d.push("folder"),a.expression_types=d,a},a.didInsertElement=function(){b.didInsertElement.call(this),k.IS_IPAD&&k.IS_IN_IFRAME&&this.$().on("tapstart",function(a){a.preventDefault()}),this.$(".action-newexpression").on("tap",this.newMath.bind(this)),this.$(".action-newtext").on("tap",this.newText.bind(this)),this.$(".action-newfolder").on("tap",this.newFolder.bind(this)),this.$(".action-newtable").on("tap",this.newTable.bind(this))},a.newMath=function(){this.insertItem(g({selected
:!0,latex:""},this.list))},a.newText=function(){this.insertItem(i({selected:!0,text:""},this.list))},a.newFolder=function(){this.insertItem(j({selected:!0},this.list))},a.newTable=function(){var a={selected:!0,latex:""};a.columns=[{latex:"x",values:[1]},{latex:"y",values:[""]}];var b=h(a,this.list);this.insertItem(b),this.listView.getSelectedView().addFocus("cell",1,1),e.use("create table")},a.insertItem=function(a){var b=this;this.setProperty("isVisible",!1);var c=this.listView.getSelected();if(c&&c.isExpression&&!c.latex&&!c.folder&&!a.isExpression){l.oneTransaction(function(){b.list.insertItemAt(c.index+1,a),b.list.removeItemAt(c.index)}),this.listView.getSelectedView().addFocus();return}if(c&&c.isExpression&&!c.latex&&c.folder&&!a.isExpression&&!a.isFolder){l.oneTransaction(function(){b.list.insertItemAt(c.index+1,a),c.folder.addItem(a),b.list.removeItemAt(c.index)}),this.listView.getSelectedView().addFocus();return}if(c&&!c.folder&&!c.isFolder){this.list.insertItemAt(c.index+1,a),this.listView.getSelectedView().addFocus();return}if(c&&c.folder&&!a.isFolder){l.oneTransaction(function(){b.list.insertItemAt(c.index+1,a),c.folder.addItem(a)}),this.listView.getSelectedView().addFocus();return}if(c&&c.isFolder&&!c.collapsed&&!a.isFolder){l.oneTransaction(function(){b.list.insertItemAt(c.index+1,a),c.addItem(a)}),this.listView.getSelectedView().addFocus();return}c||(c=this.listView.getFirstVisibleItem()),c.isFolder&&(c=this.list.getItemByIndex(c.index+1));while(c&&c.folder)c=this.list.getItemByIndex(c.index+1);var d=c?c.index:this.list.getItemCount();this.list.insertItemAt(d,a),this.listView.getSelectedView().addFocus()}}),m}),define("template!toast",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div class="toast-container">\n  <span class="toast">\n    <span class="msg variable-msg"></span>\n    <a class="undo action-undo">'+t("undo")+"</a>\n  </span>\n</div>";return __p}}),define("main/toast",["require","jquery","pjs","lib/underscore_view","undoredo","template!toast"],function(a){var b=a("jquery"),c=a("pjs"),d=a("lib/underscore_view"),e=a("undoredo"),f=a("template!toast"),g=c(d,function(a,c){a.template=f,a.didCreateElement=function(){var a=this;e.changesCallbacks.push(function(){a.hide()}),this.$(".action-undo").on("tap",function(){e.undo(),a.hide(),a.callback&&a.callback()}),this.$().toggle(!1)},a.show=function(a,c){clearTimeout(this.hideTimeout),b(".toast-container").fadeOut("fast"),this.$().fadeIn("fast"),this.$(".variable-msg").text(a),this.callback=c;var d=this;this.hideTimeout=setTimeout(function(){d.hide()},6e3)},a.hide=function(){clearTimeout(this.hideTimeout),this.$().fadeOut("fast"),this.cb=undefined}}),h=new g;return b(function(){h.appendTo("#sliding-interior")}),h}),define("main/resize",["require","lib/browser","jquery"],function(a){function l(){return k!==0}function m(a,b){function k(){clearTimeout(g),c.off(f),o(),j.resolve()}function l(c){if(c){if(c.target!==a)return;if(b&&!c.originalEvent.propertyName.match(b))return}k()}var c,d,e,f,g,j=i.Deferred();return h.IS_IE9?(p(),j.resolve()):(c=i(a),d=c.css("transition-duration"),d[d.length-1]!=="s"?(console.log("Unexpected transition-duration format. Expected a number followed by 's' but saw "+d),p(),j.resolve()):(e=1e3*parseFloat(d.slice(0,-1)),c.closest("body").length?(a=c[0],n(),p(),f="transitionend webkitTransitionEnd MSTransitionEnd",c.on(f,l),g=setTimeout(function(){console.log("Expected transition failed to fire. Target is ",a),k()},e+100),j):(p(),j.resolve())))}function n(){k++}function o(){k--,!l()&&j&&(j=!1,p())}function p(){var a;if(l()){j=!0;return}for(a=0;a<b.length;a++)b[a]()}function q(a){b.push(a),g&&a()}function r(){var a=i(document.activeElement);if(a.filter("input, textarea").length===0)return;i("<input />").prependTo("body").focus().attr({readonly:"readonly",disabled:"true"}).blur().remove()}function s(){var a,b,j;h.IS_MOBILE?(a=i(document.activeElement),a.filter("input,textarea").length===0&&i(window).scrollTop(0).scrollLeft(0),a.filter("input:hidden, textarea:hidden").length&&r()):i(window).scrollTop(0).scrollLeft(0),b=window.innerWidth+i(window).scrollLeft(),j=window.innerHeight+i(window).scrollTop();if(b!==c.width||j!==c.height){c.width=b,c.height=j;if(!f||!d.width||!d.height)d.width=b,d.height=j;g&&(h.IS_MOBILE?p():(clearTimeout(e),e=setTimeout(p,100)))}}function t(a){f=a&&a.stickyFullScreen,s(),setInterval(s,100),i(window).resize(function(){s()})}function u(){g=!0,p()}var b,c,d,e,f,g,h=a("lib/browser"),i=a("jquery"),j=!1,k=0;return b=[],c={},d={},f=!1,g=!1,{trigger:p,register:q,fullScreen:d,currentScreen:c,init:t,monitor:u,defocusMobile:r,animationIsRunning:l,animationStarted:n,animationEnded:o,waitForCSSAnimation:m}}),define("lib/keys",["require"],function(){var a=function(){var a={8:this.BACKSPACE="Backspace",9:this.TAB="Tab",13:this.ENTER="Enter",16:this.SHIFT="Shift",17:this.CONTROL="Control",18:this.ALT="Alt",20:this.CAPSLOCK="CapsLock",27:this.ESCAPE="Esc",32:this.SPACEBAR="Space",33:this.PAGEUP="PageUp",34:this.PAGEDOWN="PageDown",35:this.END="End",36:this.HOME="Home",37:this.LEFT="Left",38:this.UP="Up",39:this.RIGHT="Right",40:this.DOWN="Down",46:this.DELETE="Del"};this.lookup=function(b){return a[b.which]}};return new a}),function(a){a.fn.extend({scrollVisible:function(b,c,d){var e,f,g,h,i,j,k;return b&&b.length&&(c=c||0,d=d||0,e=this.offset().top+c,f=this.outerHeight()+d-c,g=a(b[0]).offset().top,h=a(b).outerHeight()+g,b.each(function(){var b=a(this),c=b.offset().top,d=b.outerHeight()+c;c<g&&(g=c),d>h&&(h=d)}),i=-this.scrollTop(),g-=e+i,h-=e+i,j=-g,k=f-h,i>k&&i<j||h-g>f||(i>k?this.scrollTop(-k):i<j&&this.scrollTop(-j))),this}})}(jQuery),define("lib/jquery.scrollvisible",function(){}),define("loadcss!css/new_expression",function(){}),define("template!new_expression",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+="<div class=\"expressionitem new-expression opened\">\n  <div class='new-math-div do-not-blur action-newmath'>\n    <div class='new-expression-fade'></div>\n  </div>\n\n  <span\n     class=\"tab\"\n  >\n     <span class='num variable-index'>2</span>\n     <div class='tab-interior'></div>\n  </span>\n\n</div>\n";return __p}}),define("expressions/new_expression",["require","loadcss!css/new_expression","pjs","lib/underscore_view","template!new_expression","./expression"],function(a){var b,c,d,e,f;return a("loadcss!css/new_expression"),b=a("pjs"),c=a("lib/underscore_view"),d=a("template!new_expression"),e=a("./expression"),f=b(c,function(a,b){a.template=d,a.init=function(a){b.init.call(this),this.observe("index",this.updateIndex.bind(this)),this.listView=a},a.didInsertElement=function(){this.updateIndex(),this.$(".action-newmath").on("tap",this.newMath.bind(this))},a.updateIndex=function(){this.$(".variable-index").text(this.index)},a.newMath=function(){var a=e,b={selected:!0,latex:""},c=a(b,this.listView.model);this.listView.model.insertItemAt(this.listView.model.getItemCount(),c),this.listView.getSelectedView().addFocus()}}),f}),define("expressions/renderviewport",["require","jquery","main/timermodules","lib/browser"],function(a){var b=a("jquery"),c=a("main/timermodules"),d=a("lib/browser");c.add("expressions.renderviewport",function(a,c){function j(){var c,d,j,k,l,m;return e=b("#exppanel"),e.length?(f=e.offset().top,c=[],d=e.scrollTop(),j=e.height(),d==i&&j==h?(k=(new Date).getTime(),g===0?g=k:k-g>300&&(l=a.expressionAtPoint(5,f),m=a.expressionAbovePoint(5,f+j),l&&m&&a.getItemsByIndexRange(l.index,m.index).forEach(function(a){a.renderShell&&c.push(a)}))):(i=d,h=j,g=0),c):(e=null,[])}function k(b){var e,f,g;if(b.length)e=0,b.forEach(function(a){(function(a){setTimeout(function(){a.setProperty("renderShell",!1)},e*10)})(a,e++)});else if(!d.IS_MOBILE&&!c.redraw_slowly_timeout){f=a.model.getItemCount();for(e=0;e<f;++e){g=a.model.getItemByIndex(e);if(g.renderShell){g.setProperty("renderShell",!1);break}}}}var e=null,f=null,g=0,h=0,i=0;return function(){k(j())}})}),define("expressions/list_view",["require","jquery","underscore","pjs","config","tipsy","lib/underscore_view","lib/touchtracking","expressions/dragdrop_expressions","expressions/dragdrop_columns","./add_expression","main/toast","undoredo","main/resize","lib/keys","lib/browser","lib/jquery.scrollvisible","./new_expression","./renderviewport","./expression"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o=a("jquery"),p=a("underscore"),q=a("pjs"),r=a("config");return a("tipsy"),b=a("lib/underscore_view"),c=a("lib/touchtracking"),d=a("expressions/dragdrop_expressions"),e=a("expressions/dragdrop_columns"),f=a("./add_expression"),g=a("main/toast"),h=a("undoredo"),i=a("main/resize"),j=a("lib/keys"),k=a("lib/browser"),a("lib/jquery.scrollvisible"),l=a("./new_expression"),a("./renderviewport"),m=a("./expression"),n=q(b,function(a,b){a.__itemViews={},a.__latexChangeCallbacks=[],a.keypadView=null,a.isTransient=!1,a.transientChildren=[],a.isTablet=r.get("tablet"),a.triggerClearGraph=function(){},a.getTemplateParams=function(){return{IS_TABLET:this.isTablet}},a.getAllSliders=function(){var a=[];for(var b in this.__itemViews)this.__itemViews[b].hasOwnProperty("sliderView")&&this.__itemViews[b].sliderView&&a.push(this.__itemViews[b].sliderView.slider);return a},a.toggleAllSliders=function(){var a=this.getAllSliders();for(var b=0;b<a.length;b++)if(a[b].isPlaying){this.stopAllSliders();return}this.playAllSliders()},a.playAllSliders=function(){var a=this.getAllSliders();h.oneTransaction(function(){for(var b=0;b<a.length;b++)a[b].setProperty("isPlaying",!0)}.bind(this))},a.stopAllSliders=function(){var a=this.getAllSliders();h.oneTransaction(function(){for(var b=0;b<a.length;b++)a[b].setProperty("isPlaying",!1)}.bind(this))},a.onStartMovingPoint=function(a){var b=this.model.getItemById(a),c=b&&b.formula&&b.formula.move_ids;if(!c)return;for(var d=0;d<c.length;d++){if(c[d]===undefined)continue;this.getItemView(c[d]).sliderView.setProperty("isMoving",!0),this.getItemView(c[d]).sliderView.slider.setProperty("isPlaying",!1)}},a.onStopMovingPoint=function(a){var b=this.model.getItemById(a),c=b&&b.formula&&b.formula.move_ids;if(!c)return;for(var d=0;d<c.length;d++){if(c[d]===undefined)continue;this.getItemView(c[d]).sliderView.setProperty("isMoving",!1)}},a.onMovePoint=function(a,b){var c=this.model.getItemById(a),d=c.formula&&c.formula.move_ids;if(!d)return;var e,f;for(var g=0;g<b.length;g++){if(d[g]===undefined)continue;e=this.model.getItemById(d[g]),e&&e.slider&&(f=e.slider.computeSnappedValue(b[g]),e.slider.setProperty("value",f))}this.setSelected(null)},a.onLatexChange=function(a){p.each(this.__latexChangeCallbacks,function(b){b(a)})},a.init=function(a){b.init.call(this),this.model=a,this.model.triggerItemInserted=this.onItemInserted.bind(this),this.model.triggerItemRemoved=this.onItemRemoved.bind(this),this.model.triggerItemMoved=this.onItemMoved.bind(this),this.model.triggerSetState=this.onSetState.bind(this),this.setPropertyComparator("selectedItem",function(a,b){return a===b}),this.observe("itemFocused",this.renderItemFocused.bind(this)),this.observe("editListMode",this.renderEditListMode.bind(this)),this.observe("selectedItem",this.selectedItemChanged.bind(this)),o(document).on("keypress","#exppanel",this.ensureActiveChildIsVisible.bind(this)),this.dragdrop_expressions=d(this),this.dragdrop_columns=e(this)},a.computeTransient=function(){this.setProperty("transient",this.transientChildren.length>0)},a.padLastExpression=function(a){var b=this.$(".expressionitem.new-expression");b.removeClass("animating").css("margin-bottom",+a+"px")},a.unpadLastExpression=function(){var a=this.$(".expressionitem.new-expression");a.addClass("animating").css("margin-bottom","0")},a.padLastExpressionUntilTapEnd=function(a){var b=this;this.padLastExpression(a),o(document).on("tap.animating-bottom",function(){o(".exp-options-menu").length===0&&(b.unpadLastExpression(),o(document).off("tap.animating-bottom"))})},a.updateWidth=function(){function d(a){var c=a.find(".main");if(!c.length)return;var d=c.outerWidth()+c.offset().left+5;d>b&&(b=d)}var a=this.$("#exppanel"),b=0,c=parseInt(a.css("min-width"),10);this.$(".disable-horizontal-scroll-to-cursor").scrollLeft(0);var e=this.getSelectedView();e&&(this.itemFocused||e.model.isTable)&&d(e.$()),this.editListMode&&this.$(".expressiontable").each(function(){d(o(this))}),b<c&&(b=c);var f=parseInt(a.css("max-width"),10)>b;f?(a.addClass("collapse-slowly"),setTimeout(function(){a.removeClass("collapse-slowly")},.5)):a.removeClass("collapse-slowly"),a.css("max-width",b)},a.onItemInserted=function(a,b){this.newExpressionView&&this.newExpressionView.setProperty("index",this.model.getItemCount()+1);if(this.$items){var c=this.createItemView(b);c&&(a===0?c.prependTo(this.$items):a===this.model.getItemCount()-1?c.appendTo(this.$items):c.insertAfter(this.$items.children(":nth-child("+a+")")),this.editListMode&&(c.$().css({transform:"scale(0,0)",opacity:0}),setTimeout(function(){c.$().css({transition:".2s",opacity:1,transform:"scale(1,1)"})},1),setTimeout(function(){c.$().css({transition:"none"})},300))),b.observe("selected.listview",this.observeItemSelected.bind(this)),b.selected&&this.observeItemSelected("selected",b);var d=this.model.getItemCount();for(var e=a;e<d;e++)this.model.getItemByIndex(e).setProperty("index",e);this.updateWidth()}},a.onItemRemoved=function(a,b){var c=String(b.id);this.selectedItem===b&&this.setProperty("selectedItem",null),b.unobserve(".listview"),this.newExpressionView&&this.newExpressionView.setProperty("index",this.model.getItemCount()+1);var d=this.__itemViews[c];if(d){d.remove(),delete this.__itemViews[c];var e=this.model.getItemCount();for(var f=a;f<e;f++)this.model.getItemByIndex(f).setProperty("index",f)}this.updateWidth()},a.onItemMoved=function(a,b){var c=Math.min(a,b),d=Math.max(a,b);for(var e=c;e<=d;e++)this.model.getItemByIndex(e).setProperty("index",e);var f=this.getItemView(this.model.getItemByIndex(b).id);if(f){var g=this.$items;if(b===0)g.prepend(f.$());else if(b===this.model.getItemCount()-1)g.append(f.$());else{var h=b+(b>a?1:0);f.$().insertAfter(g.children(":nth-child("+h+")"))}}},a.onSetState=function(a){for(var b in this.__itemViews)this.__itemViews.hasOwnProperty(b)&&this.__itemViews[b].remove();this.__itemViews={},this.selectedItem=null,this.newExpressionView&&this.newExpressionView.setProperty("index",this.model.getItemCount()+1),this.createAllItemViews()},a.renderItemFocused=function(){o("body").toggleClass("ITEM-FOCUSED",!!this.itemFocused)},a.instantiateItemView=function(a){},a.createItemView=function(a){var b=this.instantiateItemView(a),c=String(a.id);if(b){this.__itemViews[c]=b;var d=this;b.triggerDelete=function(){d.onDelete(b)},b.triggerEnterPressed=function(){d.onEnterPressed(b)},b.triggerUpPressed=function(){d.onUpPressed(b)},b.triggerDownPressed=function(){d.onDownPressed(b)},b.triggerBackspacePressed=function(){d.onBackspacePressed(b)},b.triggerDelPressed=function(){d.onDelPressed(b)},b.observe("transient",function(a,b){b.transient?d.transientChildren.push(b):d.transientChildren=p(d.transientChildren).without(b),d.computeTransient()})}return b},a.createAllItemViews=function(){if(!this.$items)return;var a=this.model.getItemCount();for(var b=0;b<a;b++){var c=this.model.getItemByIndex(b),d=this.createItemView(c);d&&(d.appendTo(this.$items),c.setProperty("index",b),c.observe("selected.listview",this.observeItemSelected.bind(this)),c.selected&&this.observeItemSelected("selected",c))}var e=this.getSelectedView();e&&e.addFocus(),this.updateWidth()},a.getItemView=function(a){return this.__itemViews[String(a)]},a.onDelete=function(a){var b=this,c=.2;a.$().css({transition:c+"s",opacity:"0",transform:"scale(.1, .1)"}),setTimeout(function(){h.oneTransaction(function(){b.model.removeItemAt(a.model.index);if(b.model.getItemCount()===0){var c=m(undefined,b.model);b.model.insertItemAt(0,c)}})},1e3*c)},a.onUpPressed=function(a){if(a.model.index===0)return;this.selectPrevExpression(a.model),this.getSelectedView().addFocus("end")},a.onDownPressed=function(a){this.selectNextExpression(a.model),this.getSelectedView().addFocus("start")},a.onBackspacePressed=function(a){var b=a.model.isText,c=this.getItemByIndex(a.model.index+1);if(a.model.folder&&(!c||!c.folder)){a.model.folder.removeItem(a.model);return}this.upwardDeleteExpression(a.model);if(b&&k.IS_IPAD&&k.IS_IN_IFRAME){this.setSelected(null);return}this.getSelectedView().addFocus("end")},a.onDelPressed=function(a){this.downwardDeleteExpression(a.model),this.getSelectedView().addFocus("start")},a.onEnterPressed=function(a){if(a.model.isText&&k.IS_IPAD&&k.IS_IN_IFRAME){o(document.activeElement).blur(),this.setSelected(null);return}var b=m({selected:!0},this.model),c=this;h.oneTransaction(function(){c.model.insertItemAt(a.model.index+1,b),a.model.isFolder&&!a.model.collapsed&&a.model.addItem(b),a.model.folder&&a.model.folder.addItem(b)}),this.getSelectedView().addFocus()},a.expressionsVisible=!0,a.hideExpressions=function(){this.setSelected(null),o("#show-expressions-tab").show(),this.setProperty("expressionsVisible",!1),o("#hide-expressions-tab").hide(),o(document.activeElement).blur(),o("body").addClass("fullscreen"),o("body").addClass("shift-grapher"),i.trigger()},a.showExpressions=function(){this.setProperty("expressionsVisible",!0),o(document.activeElement).blur(),o("#show-expressions-tab").hide(),o("body").removeClass("fullscreen"),setTimeout(function(){o("body").removeClass("shift-grapher"),i.trigger()},500)},a.renderEditListMode=function(){var a=this.$(".edit-list-btn"),b=o("body"),c=this;this.editListMode?(a.addClass("btn-primary"),a.text("done"),a.removeClass("tooltip"),b.addClass("EDIT-LIST-MODE"),this.setSelected(null),this.stopAllSliders(),o(document).on("tapstart.edit-list-mode",function(a){o(a.target).closest("#exppanel").length===0&&o(a.target).closest(".options-menu").length===0&&o(a.target).closest("#expression-top-bar").length===0&&c.setProperty("editListMode",!1)})):(a.removeClass("btn-primary"),a.addClass("tooltip"),a.html('<i class="icon-settings" />'),b.removeClass("EDIT-LIST-MODE"),o(document).off(".edit-list-mode"))},a.onFocusIn=function(a){this.expressionsVisible||this.showExpressions();var b=o(a.target),c=b.closest(".mathquill-rendered-math").length!==0,d=b.closest(".mathquill-editable").length!==0,e=b.closest(".expressiontext").length!==0;c||d||e?(this.setProperty("editListMode",!1),this.setProperty("itemFocused",!0)):this.setProperty("itemFocused",!1),this.setProperty("needFakeKeypad",c||d),this.setProperty("editDisabled",c&&!d),clearTimeout(this.fakeKeypadTimeout)},a.onFocusOut=function(){clearTimeout(this.fakeKeypadTimeout),this.fakeKeypadTimeout=setTimeout(function(){var a=this.getSelectedView();if(a&&a.isFocused())return;this.setProperty("itemFocused",!1),this.setProperty("needFakeKeypad",!1),this.setProperty("editDisabled",!1)}.bind(this),0)},a.offset=function(){return this.$().offset()},a.setBottom=function(a){var b=this.$().height()-this.$().offset().top;this.$().css("bottom",a+"px"),a<b&&c.isTapActive()&&this.padLastExpressionUntilTapEnd(b-a)},a.didInsertElement=function(){var a=this;b.didInsertElement.call(this),this.addExpressionView=f(this),this.addExpressionView.appendTo(this.$()),this.addExpressionView.setupOpenButton(this.$(".action-add-expression"),"tap"),this.$items=this.$(".template-expressioneach"),i.trigger(),this.$("#exppanel").scroll(function(a){o("#expression-top-bar").toggleClass("expressions-scrolled",o(a.target).scrollTop()>0)}),this.$("#exppanel").on("tapstart",function(a){if(a.device==="mouse")return;o(a.target).closest(".expressionitem").length===0&&o(document.activeElement).blur()}),o("#expression-top-bar").on("tapstart",function(b){if(b.wasHandled())return;a.setSelected(null)}),this.$().on("tap",".action-clearall",function(){a.triggerClearGraph(),g.show("Graph cleared.",function(){a.setProperty("editListMode",!0)})}),this.$().on("tap",".action-undo",function(){h.undo()}),this.$().on("tap",".action-redo",function(){h.redo()}),this.$().on("focusout",this.onFocusOut.bind(this)),this.$().on("focusin",this.onFocusIn.bind(this)),this.$(".action-toggleeditlistmode").on("tap",function(){a.setProperty("editListMode",!a.editListMode)}),this.$(".action-hideexpressions").on("tap",this.hideExpressions.bind(this)),this.$(".action-showexpressions").on("tap",this.showExpressions.bind(this)),o(document.documentElement).on("keydown",this.handleKeyDown.bind(this)),this.$().on("tapstart",".action-hamburger",function(){o("body").toggleClass("resources-open"),i.waitForCSSAnimation("#sliding-interior",/transform/)}),this.renderItemFocused(),this.renderEditListMode(),this.newExpressionView=l(this),this.newExpressionView.replace(this.$(".template-newexpression")),this.newExpressionView.setProperty("index",this.model.getItemCount()+1),this.$().on("render",function(b){a.updateWidth()}),this.observe("editListMode itemFocused selectedItem",function(){a.updateWidth()}),this.$().on("focusin",function(){setTimeout(function(){a.updateWidth()},0)}),this.createAllItemViews()},a.selectedItemChanged=function(){this.ensureActiveChildIsVisible()},a.getFirstVisibleItem=function(){var a=this.$("#exppanel").offset().top,b=this.expressionAtPoint(0,a);return b?(this.getItemView(b.id).$().offset().top<a-2&&(b=this.getItemByIndex(b.index+1)),b):this.getItemByIndex(0)},a.appendBlankExpression=function(){this.newExpressionView.newMath()},a.ensureActiveChildIsVisible=function(){if(this.selectedItem){var a=this.getItemView(this.selectedItem.id);a&&this.$("#exppanel").scrollVisible(a.$(),0,-75)}else{var b=o(document.activeElement),c=b.closest(".expressionitem");c.length&&this.$("#exppanel").scrollVisible(c,0,-20)}},a.handleKeyDown=function(a){if(o.contains(document.body,document.activeElement))return;if(o(a.target).closest("#exppanel").length)return;if(!o.contains(document.documentElement,a.target))return;var b=this.getSelectedView();if(b&&b.isFocused()){b.processMissedKeyEvent(a);return}if(!b)return;var c=j.lookup(a);switch(c){case j.UP:a.preventDefault(),this.selectPrevExpression(b.model);break;case j.DOWN:a.preventDefault(),this.selectNextExpression(b.model,!0);break;case j.ESCAPE:a.preventDefault(),this.setSelected(null);break;case j.RIGHT:case j.TAB:a.preventDefault(),b&&(b.model.isTable?b.addFocus("cell",0,0):b.addFocus("start"));break;case j.LEFT:a.preventDefault(),b&&(b.model.isTable?b.addFocus("cell",0,b.model.columns.length-1):b.addFocus("end"));break;case j.BACKSPACE:a.preventDefault(),b&&this.upwardDeleteExpression(b.model);break;case j.DELETE:a.preventDefault(),b&&this.downwardDeleteExpression(b.model);break;case j.ENTER:a.preventDefault(),b&&this.onEnterPressed(b);break;default:if(a.metaKey||a.ctrlKey||c===j.SHIFT||c===j.SPACEBAR)return;b&&(b.model.isTable||b.addFocus("end"))}},a.observeItemSelected=function(a,b){var c=b.selected;!c&&this.selectedItem===b?this.setProperty("selectedItem",null):c&&!this.selectedItem?this.setProperty("selectedItem",b):c&&this.selectedItem!==b&&(this.selectedItem.setProperty("selected",!1),this.setProperty("selectedItem",b))},a.isSelected=function(a){var b=this.getSelected();if(b&&b.isTable){var c=b.selectedCell;c?b=b.columns[c.column]:b=null}return b&&b.id.toString()},a.getSelected=function(){return this.selectedItem},a.getSelectedView=function(){var a=this.getSelected();if(a){var b=this.getItemView(a.id);return b}return null},a.setSelected=function(a){var b=a;typeof a=="number"&&(b=this.model.getItemByIndex(a));if(b)b.setProperty("selected",!0);else{var c=this.getSelected();c&&c.setProperty("selected",!1)}},a.upwardDeleteExpression=function(a){var b=a.index,c=this.model.getItemByIndex(this.findPrevSelectableIndex(b)),d=this;h.oneTransaction(function(){d.model.removeItemAt(b),d.model.getItemCount()===0&&(c=m(undefined,d.model),d.model.insertItemAt(0,c)),c||(c=d.model.getItemByIndex(d.findNextSelectableIndex(b-1))),c&&c.setProperty("selected",!0)})},a.findPrevSelectableIndex=function(a){var b;do a--,b=this.model.getItemByIndex(a);while(b&&b.inCollapsedFolder);return b?a:undefined},a.findNextSelectableIndex=function(a){var b;do a++,b=this.model.getItemByIndex(a);while(b&&b.inCollapsedFolder);return b?a:undefined},a.downwardDeleteExpression=function(a){var b=a.index,c=this.model.getItemByIndex(this.findNextSelectableIndex(b)),d=this;c?(this.setSelected(c),this.model.removeItemAt(b)):this.model.getItemCount()>1?(this.setSelected(b-1),this.model.removeItemAt(b)):h.oneTransaction(function(){d.model.removeItemAt(0),d.model.insertItemAt(0,m(undefined,d.model)),d.setSelected(0)})},a.selectPrevExpression=function(a){if(!a)return;var b=a.index,c=this.model.getItemByIndex(this.findPrevSelectableIndex(b));c&&(c.setProperty("selected",!0),b===this.model.getItemCount()-1&&a.isEmpty()&&this.model.removeItemAt(b))},a.selectNextExpression=function(a,b){if(!a)return;var c=a.index,d=this.model.getItemByIndex(this.findNextSelectableIndex(c));if(d)d.setProperty("selected",!0);else if(!b){var e=m({selected:!0},this.model);this.model.insertItemAt(this.model.getItemCount(),e)}},a.getItemsByIndexRange=function(a,b){a=Math.max(0,a),b=Math.min(this.model.getItemCount()-1,b);var c=[];for(var d=a;d<=b;d++)c.push(this.model.getItemByIndex(d));return c},a.getItemByIndex=function(a){var b=this.getItemsByIndexRange(a,a);return b.length?b[0]:null},a.getItemById=function(a){return this.model.getItemById(a)},a.getChildItemById=function(a){if(a===null)return null;var b=this.model.getItemCount();for(var c=0;c<b;c++){var d=this.model.getItemByIndex(c);if(d.isTable){var e=d.columns;for(var f=0;f<e.length;f++)if(String(e[f].id)===String(a))return e[f]}}return null},a.expressionAtPoint=function(a,b){var c=0,d=this.model.getItemCount()-1;while(c<=d){var e=c+Math.floor((d-c)/2),f=this.model.getItemByIndex(e),g=this.getItemView(f.id),h=g&&g.getBounds();if(!h||h.top>b)d=e-1;else{if(!(h.bottom<b))return f;c=e+1}}return null},a.expressionAbovePoint=function(a,b,c,d){var e=0,f=this.model.getItemCount()-1,g=null;while(e<=f){var h=e+Math.floor((f-e)/2);if(d&&h===d)if(h<f)h++;else{if(!(h>e))return c?o():null;h--}var i=this.model.getItemByIndex(h),j=this.getItemView(i.id),k=j&&j.getBounds();!k||k.top>b?f=h-1:(e=h+1,g=i)}return g?c?this.getItemView(g.id).$():g:c?o():null},a.getActiveMathquill=function(){return o(document.activeElement).closest(".mathquill-editable")},a.onProjectorModeChange=function(){for(var a in this.__itemViews)this.__itemViews.hasOwnProperty(a)&&this.__itemViews[a].onProjectorModeChange()},a.onChange=function(a){var b;for(b in a){if(!a.hasOwnProperty(b))continue;var c=this.getItemById(b);if(c)if(c.constructor===m){var d=a[b];if(!d)continue;var e=this.getItemView(c.id);c.loading===!1&&e&&e.doAnimate===undefined&&e.setProperty("doAnimate",!0),c.setProperty("loading",!1),c.setProperty("formula",d)}else if(c.isTable){var f=a[b],g=this.getItemView(b),h=!1,i;try{i=g.syncRowHeight,g.syncRowHeight=function(){h=!0},c.setComputedValues(f)}finally{g.syncRowHeight=i}h&&g.syncAllRowHeights()}}}}),n}),define("expressions/abstract_icon",["require","jquery","lib/underscore_view","pjs","lib/keys"],function(a){var b=a("jquery"),c=a("lib/underscore_view"),d=a("pjs"),e=a("lib/keys"),f=0,g=d(c,function(a,c){a.init=function(a){this.parentView=a,this.model=a.model,c.init.call(this),this.optionsmenu_guid=++f,this.model.observe("error.iconview",this.renderErrorTooltip.bind(this)),this.observe("error",this.renderErrorTooltip.bind(this)),this.observe("error errorStable",this.computeErrorShown.bind(this)),this.observe("errorShown",this.renderErrorShown.bind(this))},a.destruct=function(){this.model.unobserve(".iconview")},a.computeErrorShown=function(){this.setProperty("errorShown",this.error&&this.errorStable)},a.renderErrorTooltip=function(){var a=this.error?this.model.error:"";this.$().closest(".variable-errortooltip").attr("tooltip",a)},a.renderErrorShown=function(){this.$().toggleClass("error",!!this.errorShown)},a.didInsertElement=function(){this.renderErrorShown(),this.renderErrorTooltip()},a.createOptionsMenuView=function(){},a.toggleOptions=function(){if(this.error){this.hideOptions();return}if(this.optionsShown){this.hideOptions();return}this.optionsShown=!0,this.optionsMenu=this.createOptionsMenuView(),window.opened_options_menu=this;var a=this.optionsmenu_guid;setTimeout(function(){this.optionsShown&&b("#exppanel").on("scroll.options-menu-"+a,function(a){this.hideOptions()}.bind(this))}.bind(this),0),b(document).on("keydown.options-menu-"+a,function(a){e.lookup(a)===e.ESCAPE&&this.hideOptions()}.bind(this)),b(document).on("tapstart.options-menu-"+a,function(a){if(b(a.target).closest(".options-menu").length)return;if(b(a.target).closest(this.$()).length)return;this.hideOptions()}.bind(this))},a.hideOptions=function(){var a=this.optionsmenu_guid;b(document).off("tapstart.options-menu-"+a),b(document).off("keydown.options-menu-"+a),b("#exppanel").off("scroll.options-menu-"+a),this.optionsShown=!1,this.optionsMenu&&(this.optionsMenu.remove(),this.optionsMenu=null),window.opened_options_menu===this&&(window.opened_options_menu=null)},a.onDisplayChange=function(){var a=this.model.error?!0:!1;this.model.isEmpty()&&(a=!1),a!==this.error?(this.setProperty("errorStable",!1),this.__errorTime=(new Date).getTime(),setTimeout(this.onDisplayChange.bind(this),100)):this.__errorTime+500<(new Date).getTime()?this.setProperty("errorStable",!0):this.errorStable||setTimeout(this.onDisplayChange.bind(this),100),this.setProperty("error",a)}});return g}),define("template!expression_options_menu",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+="<div class='exp-options-menu options-menu ",styles.length===0&&(__p+="colors-only"),__p+="'>\n  <div class='triangle'></div>\n  ",styles.length>0&&(__p+="\n    <div class='styles-div'>\n      <div class='styles-menu'>\n        <div class='title'>style:</div>\n        <div class='styles-menu'>\n        ",_.each(styles,function(a){__p+='\n          <span class="style-option graph-icon graph-'+a+'"\n            draw-style="'+a+'"\n            style=""\n            handleevent="true">\n          </span>\n        '}),__p+="\n        </div>\n      </div>\n    </div>\n  "),__p+="\n  <div class='colors-div'>\n    <div class='title'>color:</div>\n    <div class=\"template-colorsview\"></div>\n  </div>\n</div>";return __p}}),define("loadcss!css/color_menu",function(){}),define("template!color_menu",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div class="color-menu do-not-blur">\n  ',_.each(colors,function(a){__p+='\n    <span class="color-option"\n          color="'+a+'"\n          style="background: '+a+'"\n          handleevent="true">\n          <i class=\'icon-check\'></i>\n    </span>\n  '}),__p+="\n</div>";return __p}}),define("expressions/color_menu_view",["require","loadcss!css/color_menu","jquery","pjs","lib/underscore_view","./colors","template!color_menu"],function(a){var b,c,d,e,f,g;return a("loadcss!css/color_menu"),b=a("jquery"),c=a("pjs"),d=a("lib/underscore_view"),e=a("./colors"),f=a("template!color_menu"),g=c(d,function(a,c){a.template=f,a.init=function(a){c.init.call(this),this.expression=a,this.expression.observe("color.colorview",this.renderSelectedColor.bind(this)),this.expression.observe("userRequestedGraphing.colorview",this.renderSelectedColor.bind(this))},a.destruct=function(){this.expression.unobserve(".colorview")},a.renderSelectedColor=function(){var a=this.expression.color;this.$(".color-option").removeClass("selected"),this.$('.color-option[color="'+a+'"]').addClass("selected")},a.didInsertElement=function(){this.$().on("tap tapstart",".color-option",this.onSelectColor.bind(this)),this.renderSelectedColor()},a.getTemplateParams=function(){return{colors:e.all}},a.onSelectColor=function(a){if(a.type==="tap"&&a.device==="mouse")return;if(a.type==="tapstart"&&a.device==="touch")return;var c=b(a.target).closest(".color-option").attr("color");this.expression.setProperty("color",c)}}),g}),define("expressions/expression_options_view",["require","pjs","jquery","underscore","lib/underscore_view","template!expression_options_menu","./colors","./color_menu_view"],function(a){var b=a("pjs"),c=a("jquery"),d=a("underscore"),e=a("lib/underscore_view"),f=a("template!expression_options_menu"),g=a("./colors"),h=a("./color_menu_view"),i=b(e,function(a,b){a.template=f,a.init=function(a){this.expression=a,this.expression.observe("color.colorview",this.renderSelectedColor.bind(this)),this.expression.observe("userRequestedGraphing",this.renderSelectedStyle.bind(this))},a.destruct=function(){this.colorsView&&(this.colorsView
.remove(),this.colorsView=null)},a.getTemplateParams=function(){var a={colors:g.all,styles:[]};return this.expression.formula.is_point_list&&!this.expression.formula.move_ids?a.styles=["point","open"]:!this.expression.table&&!this.expression.formula.move_ids&&(this.expression.formula.is_inequality||(a.styles=["normal","dashed"])),a},a.renderSelectedColor=function(){var a=this.expression.color;d.each(this.$(".style-option"),function(b){c(b).css("background",a)})},a.onSelectStyle=function(a){if(a.type==="tap"&&a.device==="mouse")return;if(a.type==="tapstart"&&a.device==="touch")return;var b=c(a.target).closest(".style-option").attr("draw-style");b===this.expression.style&&this.expression.userRequestedGraphing!=="never"?(this.$(".style-option").removeClass("selected"),this.expression.setProperty("userRequestedGraphing","never")):(this.expression.setProperty("userRequestedGraphing","default"),this.$(".style-option").removeClass("selected"),c('.style-option[draw-style="'+b+'"]').addClass("selected"),this.expression.setProperty("style",b))},a.renderSelectedStyle=function(){var a=this.expression.style;this.$(".style-option").removeClass("selected"),this.expression.userRequestedGraphing!=="never"&&this.$('.style-option[draw-style="'+a+'"]').addClass("selected")},a.didInsertElement=function(){this.colorsView=h(this.expression),this.colorsView.replace(this.$(".template-colorsview")),this.$().on("tap tapstart",".style-option",this.onSelectStyle.bind(this)),this.renderSelectedColor(),this.renderSelectedStyle()}});return i}),define("template!expression_icon",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+="<span class=\"icon graph-icon variable-colorcss variable-errortooltip tipsy-sticky\">\n	<i class='icon-play'></i>\n	<i class='icon-pause'></i>\n	<i class='icon-hidden'></i>\n</span>\n";return __p}}),define("expressions/expression_icon_view",["require","pjs","expressions/abstract_icon","./expression_options_view","math/comparators","template!expression_icon"],function(a){var b=a("pjs"),c=a("expressions/abstract_icon"),d=a("./expression_options_view"),e=a("math/comparators"),f=a("template!expression_icon"),g=b(c,function(a,b){a.template=f,a.init=function(a){b.init.call(this,a),this.expression=this.model,this.expression.observe("slider.iconview",function(){this.expression.slider.observe("isPlaying.iconview",this.onDisplayChange.bind(this))}.bind(this)),this.expression.observe("formula.iconview",this.onDisplayChange.bind(this)),this.expression.observe("shouldGraph.iconview",this.onDisplayChange.bind(this)),this.expression.observe("isGraphable.iconview",this.renderUngraphable.bind(this)),this.expression.observe("loading.iconview",this.renderLoading.bind(this)),this.expression.observe("color.iconview",this.renderColorCSS.bind(this)),this.expression.observe("style.iconview",this.onDisplayChange.bind(this))},a.destruct=function(){b.destruct.call(this),this.expression.unobserve(".iconview"),this.expression.slider&&this.expression.slider.unobserve(".iconview")},a.renderUngraphable=function(){this.$().toggleClass("ungraphable",!this.expression.isGraphable)},a.renderLoading=function(){this.$().toggleClass("loading",!!this.expression.loading)},a.renderColorCSS=function(){this.$(".variable-colorcss").css({"border-color":this.expression.color,background:this.expression.color})},a.didInsertElement=function(){var a=this;b.didInsertElement.call(this),this.renderLoading(),this.renderUngraphable(),this.renderColorCSS(),this.onDisplayChange(),this.$icon=this.$(".icon");var c=function(b,c){if(b.wasHandled("dragdrop"))return;if(b.wasLongheld())return;if(b.device!==c)return;if(a.optionsShown)return a.toggleOptions(),!1;a.parentView.listView.editListMode?a.expression.isGraphable&&a.toggleOptions():a.expression.formula.is_animatable?a.toggleSliderIsPlaying():a.toggleGraphShown()},d=function(b,c){if(b.device!==c)return;if(!a.model.isGraphable)return;b.handle("longhold"),a.toggleOptions()};this.$().closest(".action-icon-mouse").on("tap",function(a){c(a,"mouse")}),this.$().closest(".action-icon-touch").on("tap",function(a){c(a,"touch")}),this.$().closest(".action-icon-mouse").on("longhold",function(a){d(a,"mouse")}),this.$().closest(".action-icon-touch").on("longhold",function(a){d(a,"touch")})},a.isGraphShown=function(){return this.expression.userRequestedGraphing!=="never"},a.toggleSliderIsPlaying=function(){var a=this.expression.slider;a&&a.setProperty("isPlaying",!a.isPlaying)},a.toggleGraphShown=function(){if(!this.model.isGraphable)return;if(this.errorShown)return;if(this.model.folder&&this.model.folder.hidden){this.model.folder.setProperty("hidden",!1),this.expression.setProperty("userRequestedGraphing","always");return}this.isGraphShown()?this.expression.setProperty("userRequestedGraphing","never"):this.expression.setProperty("userRequestedGraphing","always")},a.createOptionsMenuView=function(){var a=d(this.expression);return a.appendTo(this.$().closest(".expressionitem")),a},a.onDisplayChange=function(){b.onDisplayChange.call(this);if(!this.$icon)return;var a=this.expression.formula,c="";if(a.is_animatable)this.expression.slider.isPlaying?c="animate-pause":c="animate-play";else if(this.error||!a.is_graphable)c="";else{var d=this.expression.shouldGraph,f=this.expression.style,g=a.operator,h=e.table[g].direction!==0,i=e.table[g].inclusive===!1;d?a.move_ids?c="graph-movable-point":a.is_point_list?f==="open"?c="graph-open":f==="cross"?c="graph-cross":c="graph-point":a.is_shade_between?c="graph-shaded-inequality":!i&&!h?f==="normal"?c="graph-normal":f==="dashed"&&(c="graph-dashed"):!i&&h?c="graph-shaded-inequality":i&&!h?c="graph-inequality":i&&h&&(c="graph-shaded-inequality"):c="graph-hidden"}if(this.rendered_icon_class===c)return;this.rendered_icon_class&&this.$icon.removeClass(this.rendered_icon_class),this.rendered_icon_class=c,c&&this.$icon.addClass(c)}});return g}),define("template!evaluation_view",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div class="evaluation do-blur" handleEvent="true">\n  <table>\n    <tr>\n      <th class="action-selectevaluation">\n        <span class="template-dependentlabelhtml"></span>\n        <span class="equals">=</span>\n      </th>\n      <td class="text-selectable template-evaluationshtml"></td>\n    </tr>\n  </table>\n</div>';return __p}}),define("expressions/evaluation",["require","pjs","lib/underscore_view","template!evaluation_view","i18n"],function(a){var b=a("pjs"),c=a("lib/underscore_view"),d=a("template!evaluation_view"),e=a("i18n"),f=b(c,function(a,b){a.template=d,a.init=function(a){b.init.call(this),this.evaluations=[],this.observe("dependentLabel",this.renderDependent.bind(this)),this.observe("evaluations",this.renderEvaluations.bind(this))},a.renderDependent=function(){this.$(".template-dependentlabelhtml").html(this.dependentLabel)},a.renderEvaluations=function(){var a=this.evaluations,b=[];for(var c=0;c<a.length;c++){var d=a[c];d.val===!1?d.val="false":isNaN(d.val)?d.val="undefined":d.val===!0?d.val="true":Math.abs(d.val)<1e-15?d.val=0:a.length===1?d.val=Number(d.val.toPrecision(8)):d.val=Number(d.val.toPrecision(6)),b.push(d.val)}if(b.length===0)return"";var f=b.join('<span class="or">'+e.t("or")+"</span>");this.$(".template-evaluationshtml").html(f)},a.didInsertElement=function(){this.renderDependent(),this.renderEvaluations(),this.$(".action-selectevaluation").on("tap",this.onSelectEvaluation.bind(this))},a.onSelectEvaluation=function(){var a=this.$("td")[0],b=document.createRange();b.selectNodeContents(a),window.getSelection().removeAllRanges(),window.getSelection().addRange(b)}});return f}),define("template!domain_view",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div class="domain do-blur" handleEvent="true">\n  \n  <div class="edit-domain variable-invalid desmos-input-container">\n    <table>\n      <tr>\n        <td>\n          <span class="before-input"></span>\n          <input type="number" limit="min" />\n          <span class="after-input"></span>\n        </td>\n        <td class="text">≤</td>\n        <td class="text">t</td>\n        <td class="text">≤</td>\n        <td>\n          <span class="before-input"></span>\n          <input type="number" limit="max" />\n          <span class="after-input"></span>\n        </td>\n      </tr>\n    </table>\n  </div>\n  \n  <div class="display-domain">\n    <span class="variable-min"></span> ≤ t ≤ <span class="variable-max"></span>    \n  </div>\n\n</div>';return __p}}),define("expressions/domain_view",["require","jquery","lib/underscore_view","pjs","template!domain_view","lib/keys"],function(a){var b=a("jquery"),c=a("lib/underscore_view"),d=a("pjs"),e=a("template!domain_view"),f=a("lib/keys"),g=d(c,function(a,c){a.template=e,a.init=function(a){c.init.call(this),this.domain=a,this.domain.observe("min.domainview",this.renderMin.bind(this)),this.domain.observe("max.domainview",this.renderMax.bind(this)),this.setProperty("editing",!1),this.setProperty("invalid",!this.domain.isValid()),this.observe("invalid",this.renderInvalid.bind(this)),this.observe("editing",this.renderEditing.bind(this)),this.storeLastValidDomain()},a.checkInvalid=function(){var a=parseFloat(this.$("input[limit=min]").attr("value")),b=parseFloat(this.$("input[limit=max]").attr("value")),c=!isFinite(a)||!isFinite(b)||a>=b;this.setProperty("invalid",c)},a.destruct=function(){this.domain.unobserve(".domainview")},a.storeLastValidDomain=function(){this.domain.isValid()&&(this.lastValidDomain=this.domain.serialize())},a.renderInvalid=function(){this.$(".edit-domain").toggleClass("invalid",!!this.invalid)},a.renderEditing=function(){var a=this.getProperty("editing");this.$().toggleClass("editing-domain",!!a)},a.renderMin=function(){var a=this.domain.min;this.$("input[limit=min]").val(a),this.$(".variable-min").text(a)},a.renderMax=function(){var a=this.domain.max;this.$("input[limit=max]").val(a),this.$(".variable-max").text(a)},a.didInsertElement=function(){this.$("input").on("focusin",this.focusIn.bind(this)).on("focusout",this.focusOut.bind(this)).on("keydown keyup keypress",this.handleUserInput.bind(this)),this.$(".display-domain").on("tap",this.onEditLimit.bind(this)),this.renderEditing(),this.renderMin(),this.renderMax()},a.onEditLimit=function(a){a.preventDefault();var c=b(a.toElement);this.setProperty("editing",!0),c.hasClass("variable-max")?this.$('input[limit="max"]').focus().select():this.$('input[limit="min"]').focus().select()},a.stopEditing=function(){!this.domain.isValid()&&this.lastValidDomain&&(this.domain.setProperty("min",this.lastValidDomain.min),this.domain.setProperty("max",this.lastValidDomain.max)),this.setProperty("editing",!1)},a.handleUserInput=function(a){f.lookup(a)===f.ENTER?b(document.activeElement).blur():(this.checkInvalid(),this.invalid||this.save(a.target))},a.focusIn=function(a){clearTimeout(this.saveAfterBlurTimeout),this.checkInvalid()},a.focusOut=function(a){var b=this;this.save(a.target),this.saveAfterBlurTimeout=setTimeout(function(){clearTimeout(b.saveAfterBlurTimeout),b.stopEditing()},1),this.checkInvalid()},a.save=function(a){if(a){var c=b(a),d=parseFloat(c.attr("value"));c.attr("limit")==="min"?d<this.domain.max?this.domain.setProperty("min",d):c.attr("value",this.domain.min):c.attr("limit")==="max"&&(d>this.domain.min?this.domain.setProperty("max",d):c.attr("value",this.domain.max)),this.storeLastValidDomain()}}});return g}),define("loadcss!css/slider",function(){}),define("main/focus",["require"],function(){return{takeFocus:function(){}}}),define("template!slider_view",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<span class="slider-container" tapboundary="true">\n\n  <div class="do-blur slider" handleEvent="true">\n    <div class="minLabel template-minlabelhtml">\n    </div>\n    <div class="maxLabel">\n      <span class="template-maxlabelhtml"></span>\n    </div>\n    <div class="track action-moveslider">\n      <div class="ticks template-tickmarkhtml"></div>\n      <div class="graphic"></div>\n    </div>\n    <div class="zeroMarker action-moveslider">\n      <div class="graphic"></div>\n    </div>\n    <div class="thumb action-startdragging" disablescroll="true">\n      <div class="graphic"></div>\n      <div class="center"></div>\n    </div>\n  </div>\n  \n  <div class="slider-speed-container do-not-blur" handleEvent="true">\n    <span class="action-slower" >&laquo;</span>\n    <span class="variable-speed"></span>\n    <span class="action-faster">&raquo;</span>\n  </div>\n\n  <div class="slider_menu do-blur desmos-input-container" handleEvent="true">\n    <table>\n      <tr>\n        <td>\n          <span class="before-input"></span>\n            <input class="slider_min" limit="min" type="number">\n          <span class="after-input"></span>\n    ',__p+='\n        </td>\n        <td class="text">\n          ≤\n        </td>\n        <td class="template-dependentlabelhtml text"></td>\n        <td class="text">≤</td>\n        <td>\n          <span class="before-input"></span>\n            <input class="slider_max" limit="max" type="number">\n          <span class="after-input"></span>\n        \n        </td>\n        <td class="step text">'+t("step:")+'</td>\n        <td> \n          <span class="before-input"></span>\n            <input class="slider_interval" limit="step" type="number">\n          <span class="after-input"></span>\n        </td>\n      </tr>\n    </table>\n  </div>\n  \n</span>';return __p}}),define("expressions/slider_view",["require","loadcss!css/slider","jquery","pjs","lib/rounding","lib/underscore_view","main/focus","template!slider_view","config","underscore","lib/keys"],function(a){var b,c,d,e,f,g,h,i,j,k,l;return a("loadcss!css/slider"),b=a("jquery"),c=a("pjs"),d=a("lib/rounding"),e=a("lib/underscore_view"),f=a("main/focus"),g=a("template!slider_view"),h=a("config"),i=a("underscore"),j=a("lib/keys"),k=function(a){var b=a,c=String(a).split("-").join("");if(c.length>4||c.indexOf("e")!=-1){var d=Math.floor(Math.log(Math.abs(a))/Math.LN10);return a/=Math.pow(10,d),a=Math.round(a),Math.abs(a)>=10&&(d++,a<0?a=-1:a=1),d>=-3&&d<=3?(c=String(b),c.indexOf("0.")===0?c=c.substr(1):c.indexOf("-0.")===0&&(c="-"+c.substr(2)),c.substr(0,5)):a+"×"+"10<span class='sup'>"+d+"</span> "}return String(a)},l=c(e,function(a,c){a.template=g,a.animationSpeeds=[.05,.1,.15,.2,.35,.5,.75,1,1.5,2,3.5,5,7.5,10,15,20],a.init=function(a,b){c.init.call(this),this.slider=a,this.parentView=b,this.value=this.slider.value,this.slider.observe("value",function(){this.setProperty("value",this.slider.value)}.bind(this)),this.editing=!1,this.slider.observe("min.sliderview max.sliderview",this.renderThumbPosition.bind(this)),this.observe("value",this.renderThumbPosition.bind(this)),this.slider.observe("min.sliderview max.sliderview",this.renderZeroMarker.bind(this)),this.slider.observe("min.sliderview max.sliderview step.sliderview",this.renderTickMarks.bind(this)),this.slider.observe("min.sliderview",this.renderMin.bind(this)),this.slider.observe("max.sliderview",this.renderMax.bind(this)),this.slider.observe("step.sliderview",this.renderStep.bind(this)),this.observe("dependentLabel",this.renderDependent.bind(this)),this.observe("editing",this.renderEditing.bind(this)),this.observe("editing",function(){this.slider.setProperty("isPlaying",!1)}.bind(this)),this.observe("invalid",this.renderInvalid.bind(this)),this.observe("dragging",this.renderDragging.bind(this)),this.slider.observe("isPlaying.sliderview",this.renderIsPlaying.bind(this)),this.slider.observe("isPlaying.sliderview",this.setTransient.bind(this)),this.observe("dragging isMoving",this.setTransient.bind(this)),this.slider.observe("animationSpeed",this.renderAnimationSpeed.bind(this))},a.renderAnimationSpeed=function(){var a=this.slider.animationSpeed,b=a+"x";this.$(".variable-speed").text(b),this.$(".action-slower").toggleClass("disabled",i.min(this.animationSpeeds)>=a),this.$(".action-faster").toggleClass("disabled",i.max(this.animationSpeeds)<=a)},a.setTransient=function(){this.slider.setProperty("transient",this.dragging||this.slider.isPlaying||this.isMoving)},a.destruct=function(){this.slider.unobserve(".sliderview")},a.renderDependent=function(){this.$(".template-dependentlabelhtml").html(this.dependentLabel)},a.renderDragging=function(){this.$(".thumb").toggleClass("down",!!this.dragging)},a.renderStep=function(){this.$("input[limit=step]").val(this.slider.step)},a.renderMin=function(){this.$(".template-minlabelhtml").html(k(this.slider.min)),this.$("input[limit=min]").val(this.slider.min)},a.renderMax=function(){this.$(".template-maxlabelhtml").html(k(this.slider.max)),this.$("input[limit=max]").val(this.slider.max)},a.renderEditing=function(){this.$().toggleClass("editing-limits",this.editing)},a.renderInvalid=function(){this.$(".slider_menu").toggleClass("invalid",!!this.invalid)},a.renderThumbPosition=function(){var a,b=this.slider.min,c=this.slider.max,d=this.value;d<=b?a=0:d>=c?a=100:a=(d-b)/(c-b)*100,this.$(".thumb").css("left",a+"%")},a.renderZeroMarker=function(){var a=(0-this.slider.min)/(this.slider.max-this.slider.min),b={};if(a>=0&&a<=1){var c=a*100;b.display="block",b.left=c+"%"}else b.display="none";this.$(".zeroMarker").css(b)},a.renderTickMarks=function(){var a=this.slider.step,b=this.slider.min,c=this.slider.max,d=100*a/(c-b);d<3&&(d=0);var e="";if(d>0&&d<100)for(var f=d;f<100;f+=d)e+='<div class="tick" style="left:'+f+'%"></div>';this.$(".template-tickmarkhtml").html(e)},a.getDimensions=function(){var a=this.$(".track"),b=a.offset().left,c=b+a.width();return{trackLeft:b,trackRight:c}},a.animateSlower=function(){var a=this.slider.animationSpeed,b=i.filter(this.animationSpeeds,function(b){return b<a});if(b.length===0)return;this.slider.setProperty("animationSpeed",i.max(b))},a.animateFaster=function(){var a=this.slider.animationSpeed,b=i.filter(this.animationSpeeds,function(b){return b>a});if(b.length===0)return;this.slider.setProperty("animationSpeed",i.min(b))},a.didInsertElement=function(){this.$(".action-startdragging").on("tapstart",this.onStartDragging.bind(this)),this.$(".action-moveslider").on("tap",function(a){var b=a.changedTouches[0];this.slider.setProperty("isPlaying",!1),this.setValueByTouch(b),this.commitSliderValue()}.bind(this)),this.$().on("focusout",this.focusOut.bind(this)),this.$().on("focusin",this.focusIn.bind(this)),this.$().on("keydown",this.keyDown.bind(this)),this.$("input[limit]").on("keypress keydown keyup",this.checkInvalid.bind(this)),this.$(".action-play").on("tap",function(){this.slider.setProperty("isPlaying",!0)}.bind(this)),this.$(".action-faster").on("tap",this.animateFaster.bind(this)),this.$(".action-slower").on("tap",this.animateSlower.bind(this)),this.$().on("tap",".minLabel",this.onEditMin.bind(this)),this.$().on("tap",".maxLabel",this.onEditMax.bind(this)),this.renderTickMarks(),this.renderThumbPosition(),this.renderZeroMarker(),this.renderDependent(),this.renderMin(),this.renderMax(),this.renderStep(),this.renderAnimationSpeed(),this.checkInvalid()},a.setValueByTouch=function(a){var b=this.slider.min,c=this.slider.max,e=this.getDimensions(),f=e.trackLeft,g=e.trackRight,h=g-f,i=(c-b)/h,j=Math.min(1,Math.max(0,(a.pageX-f)/h)),k=b*(1-j)+c*j;k<=b?k=b:k>=c?k=c:(k=d.bestRound(k,i),k=this.slider.computeSnappedValue(k),k<b?k=b:k>c&&(k=c)),this.setProperty("value",k)},a.onStartDragging=function(a){if(a.touches.length!==1)return;f.takeFocus();var c=this;this.slider.setProperty("isPlaying",!1);var d=function(a,b){var c=a.touches,d=null;for(var e=0;e<c.length;e++)c[e].identifier===b&&(d=c[e]);return d},e=h.get("platform")==="ios"?30:10,g=i.throttle(c.commitSliderValue.bind(c),e);c.setProperty("dragging",!0);var j=a.changedTouches[0].identifier,k=function(a){var b=d(a,j);if(!b)return;c.setValueByTouch(b),g()},l=function(){b(document).off("tapmove",k),b(document).off("tapend tapcancel",m),c.setProperty("dragging",!1)},m=function(a){var b=d(a,j);if(b)return;l(),c.commitSliderValue()};b(document).on("tapmove",k),b(document).on("tapend tapcancel",m)},a.commitSliderValue=function(){this.slider.setProperty("value",this.value)},a.checkInvalid=function(){var a=parseFloat(this.$("input[limit=min]").attr("value")),b=parseFloat(this.$("input[limit=max]").attr("value")),c=this.$("input[limit=step]").attr("value");c=c===""?0:parseFloat(c);var d=!isFinite(a)||!isFinite(b)||a>=b||c<0||c>b-a;this.setProperty("invalid",d)},a.keyDown=function(a){j.lookup(a)===j.ENTER?b(document.activeElement).blur():this.checkInvalid()},a.focusIn=function(a){this.slider.setProperty("isPlaying",!1),clearTimeout(this.saveAfterBlurTimeout),this.checkInvalid()},a.focusOut=function(a){var b=this;this.save(a.target),this.saveAfterBlurTimeout=setTimeout(function(){clearTimeout(b.saveAfterBlurTimeout),b.onClose()},1),this.checkInvalid()},a.save=function(a){if(a){var c=b(a),d=parseFloat(c.attr("value")),e=this.$(".slider_interval").attr("value")===""?0:this.slider.step;c.hasClass("slider_min")?d<this.slider.max&&this.slider.max-d>e?this.slider.setProperty("min",d):c.attr("value",this.slider.min):c.hasClass("slider_max")?d>this.slider.min&&d-this.slider.min>e?this.slider.setProperty("max",d):c.attr("value",this.slider.max):c.hasClass("slider_interval")&&(d>=0&&d<this.slider.max-this.slider.min?this.slider.setProperty("step",d):c.attr("value")===""?this.slider.setProperty("step",undefined):e===undefined?c.attr("value",""):c.attr("value",this.slider.step))}},a.onClose=function(){this.setProperty("editing",!1)},a.onEditMin=function(a){this.setProperty("editing",!0),a.preventDefault(),this.$(".slider_min").focus().select()},a.onEditMax=function(a){this.setProperty("editing",!0),a.preventDefault(),this.$(".slider_max").focus().select()},a.renderIsPlaying=function(){if(this.slider.step<0){this.slider.setProperty("isPlaying",!1);return}this.parentView.$().toggleClass("isPlaying",!!this.slider.isPlaying)}}),l}),define("template!prompt_sliders",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div class="create_sliders action-createslider" handleEvent="true">\n  <span class="msg">'+t("add slider:")+'</span>\n  <span class="btns">\n    ',_.each(variables,function(a){__p+='\n      <div class="slider_btn_container" var_name="'+a.name+'" >\n        <div class="btn btn-primary btn-small">'+a.label+"</div>\n      </div>\n    "}),__p+="\n              \n    ",variables.length>1&&(__p+='\n      <div class="slider_btn_container all">\n        <div class="btn btn-small btn-success all">all!</div>\n      </div>\n    '),__p+="\n  </span>\n</div>";return __p}}),define("expressions/promptslider_view",["require","jquery","pjs","lib/underscore_view","main/focus","template!prompt_sliders"],function(a){var b=a("jquery"),c=a("pjs"),d=a("lib/underscore_view"),e=a("main/focus"),f=a("template!prompt_sliders"),g=c(d,function(a,c){a.template=f,a.init=function(a){c.init.call(this),this.variables=[],this.expressionView=a,this.observe("variables",this.rerender.bind(this))},a.didInsertElement=function(){this.$(".action-createslider").on("tap",this.onCreateSlider.bind(this))},a.getTemplateParams=function(){var a=this.variables,b=[];for(var c=0;c<4&&c<a.length;c++){var d=a[c],e,f=d.split("{").join("").split("}").join("").split("_");f.length>1?(e=f[0]+"_{"+f[1]+"}",f=f[0]+"<sub>"+f[1]+"</sub>"):(e=f[0],f=f[0]),b.push({name:e,label:f})}return{variables:b}},a.onCreateSlider=function(a){e.takeFocus();var c=b(a.target).closest(".slider_btn_container");if(!c.length)return;var d;c.hasClass("all")?d=this.variables.slice():d=[c.attr("var_name")];if(!d.length)return;this.expressionView.createSliders(d)}});return g}),define("loadcss!vendor_css/mathquill/mathquill",function(){}),function(){function jb(){}function kb(a){var b=ib.call(arguments,1);return function(){return a.apply(this,b)}}function lb(a,b){if(!b)throw new Error("prayer failed: "+a)}function mb(b,d,e,f){function r(){var b;l=a,b=g.selection?"$"+g.selection.latex()+"$":"";if(b===m)return;p.select(b),m=b,d.triggerSpecialEvent("selectionChanged")}function t(a){return function(b){var b,c,d,e;b.preventDefault(),b=b.originalEvent,c=db(b.target);if(b.changedTouches.length<b.touches.length)return;d=b.changedTouches[0],e=a(d)||0,e.touchmove&&c.bind("touchmove",function(a){var b=a.originalEvent.changedTouches[0];if(b.id!==d.id)return;e.touchmove.call(this,b)}),c.bind("touchend",function(a){var b=a.originalEvent.changedTouches[0];if(b.id!==d.id)return;e.touchend&&e.touchend.call(this,b),c.unbind("touchmove touchend")})}}var g,h,i,j,k,l,m,n,o,p,q=b.contents().detach();e||b.addClass("mathquill-rendered-math"),d.jQ=db('<span class="mathquill-root-block"/>').appendTo(b.attr(fb,d.id)),d.revert=function(){b.empty().unbind(".mathquill").removeClass("mathquill-rendered-math mathquill-editable mathquill-textbox").append(q)},g=d.cursor=bb(d),d.renderLatex(q.text()),h=navigator.userAgent.match(/(iPad|iPhone|iPod)/i)!==null,i=navigator.userAgent.match(/(Android|Silk|Kindle)/i)!==null,j=d.textarea=h||i?db('<span class="textarea"><span tabindex=0></span></span>'):db('<span class="textarea"><textarea></textarea></span>'),k=j.children(),d.selectionChanged=function(){l===a&&(l=setTimeout(r)),s(b[0])},b.bind("selectstart.mathquill",function(a){a.target!==k[0]&&a.preventDefault(),a.stopPropagation()}),o=g.blink,b.bind("mousedown.mathquill",function(c){function h(a){g.seek(db(a.target),a.clientX,a.clientY,e),(g.prev!==n.prev||g.parent!==n.parent)&&g.selectFrom(n),a.preventDefault()}function i(a){return delete a.target,h(a)}function l(c){n=a,g.blink=o,g.selection||(f?g.show():j.detach()),b.unbind("mousemove",h),db(c.target.ownerDocument).unbind("mousemove",i).unbind("mouseup",l)}var e;c.preventDefault();if(d.ignoreMousedownTimeout!==a){clearTimeout(d.ignoreMousedownTimeout),d.ignoreMousedownTimeout=a;return}e=ob(),setTimeout(function(){d.blurred&&k.focus()}),g.blink=jb,g.hideHandle().seek(db(c.target),c.clientX,c.clientY,e),n={parent:g.parent,prev:g.prev,next:g.next},f||b.prepend(j),b.mousemove(h),db(c.target.ownerDocument).mousemove(i).mouseup(l)}),g.jQ.delegate(".handle","touchstart",t(function(a){var b,c,e,f;return g.blink=jb,b=g.jQ[0].getBoundingClientRect(),c=a.clientX-b.left,e=a.clientY-(b.top+b.bottom)/2,f=ob(),{touchmove:function(a){var b,h,i,j,k,l,m,n,o=a.clientX-c,p=a.clientY-e;g.seek(nb(o,p,d),o,p,f,!0),b=g.jQ[0].getBoundingClientRect(),h=o-b.left,i=p-(b.top+b.bottom)/2,j=Math.sqrt(h*h+i*i),k=(Math.log(j)+1)/j,l=Math.atan2(k*h,e),m=(k*i+e)/e,n=2*(m-1)+1,g.handle.css({WebkitTransform:"translateX(.5px) skewX("+l+"rad) scaleY("+m+")",opacity:1-n*.5})},touchend:function(){g.handle.css({WebkitTransform:"",opacity:""}),g.blink=o,g.show(!0)}}}));if(!f){p=c(k,{container:b}),b.bind("cut paste",!1).bind("copy",r).prepend('<span class="selectable">$'+d.latex()+"$</span>"),k.blur(function(){g.clearSelection(),setTimeout(u)});function u(){j.detach()}return}p=c(k,{container:b,key:function(a,b){g.parent.bubble("onKey",a,b)},text:function(a){g.parent.bubble("onText",a)},cut:function(a){g.selection&&setTimeout(function(){g.prepareEdit(),g.parent.bubble("redraw"),d.triggerSpecialEvent("render")}),a.stopPropagation(),d.triggerSpecialEvent("render")},paste:function(a){a.slice(0,1)==="$"&&a.slice(-1)==="$"&&(a=a.slice(1,-1)),g.writeLatex(a).show(),d.triggerSpecialEvent("render")}}),b.prepend(j),b.addClass("mathquill-editable"),e&&b.addClass("mathquill-textbox"),k.focus(function(){d.blurred=!1,g.parent||g.appendTo(d),g.parent.jQ.addClass("hasCursor"),g.selection?(g.selection.jQ.removeClass("blur"),setTimeout(d.selectionChanged)):g.show()}).blur(function(){d.blurred=!0,g.hide().parent.blur(),g.selection&&g.selection.jQ.addClass("blur")}).blur(),b.bind("select_all",function(){g.prepareMove().appendTo(d);while(g.prev)g.selectLeft()}).bind("custom_paste",function(a,b){b.slice(0,1)==="$"&&b.slice(-1)==="$"&&(b=b.slice(1,-1)),g.writeLatex(b).show(),d.triggerSpecialEvent("render")})}function nb(a,b,c){var d=document.elementFromPoint(a,b);return db.contains(c.jQ[0],d)?db(d):c.jQ}function ob(){function b(b,c){return a[c]||(a[c]=b.getBoundingClientRect())}function c(a){return b(a.jQ[0],a.id)}var a={};return c.elById=b,c}function pb(a,c,d){return b(L,{ctrlSeq:a,htmlTemplate:"<"+c+" "+d+">&0</"+c+">"})}var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db=jQuery,eb="mathquill-command-id",fb="mathquill-block-id",gb=Math.min,hb=Math.max,ib=[].slice;b=function(a,b,c){function d(a){return typeof a=="object"}function e(a){return typeof a=="function"}function f(g,h){function i(a){var b=this;if(!(b instanceof i))return new i(arguments);a&&e(b.init)&&b.init.apply(b,a)}h===c&&(h=g,g=Object);var j=i[a]=new g,k=g[a],l;return j.constructor=i,i.mixin=function(b){return i[a]=f(i,b)[a],i},(i.open=function(a){l={},e(a)?l=a.call(i,j,k,i,g):d(a)&&(l=a);if(d(l))for(var c in l)b.call(l,c)&&(j[c]=l[c]);return e(j.init)||(j.init=function(){g.apply(this,arguments)}),i})(h)}return f}("prototype",{}.hasOwnProperty),c=function(){function c(a){var c=a.which||a.keyCode,d=b[c],e,f=[];return a.ctrlKey&&f.push("Ctrl"),a.originalEvent&&a.originalEvent.metaKey&&f.push("Meta"),a.altKey&&f.push("Alt"),a.shiftKey&&f.push("Shift"),e=d||String.fromCharCode(c),!f.length&&!d?e:(f.push(e),f.join("-"))}var b={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(d,e){function p(a){n=setTimeout(a),o=a}function q(){n&&(clearTimeout(n),n=a,o())}function r(a){q(),l.val(a),a&&l[0].select()}function s(){var a=l[0];return"selectionStart"in a?a.selectionStart!==a.selectionEnd:!1}function t(a){var b=l.val();l.val(""),b&&a(b)}function u(){i(c(f),f)}function v(a){f=a,g=null,u()}function w(a){f&&g&&u(),g=a,p(function(){s()?setTimeout(function(){s()||t(h)}):t(h);if(s())return;t(h)})}function x(){f=g=null}function y(a){l.focus(),p(function(){t(j)})}if(!d.is("textarea"))return{select:jb};var f=null,g=null;e||(e={});var h=e.text||jb,i=e.key||jb,j=e.paste||jb,k=e.cut||jb,l=db(d),m=db(e.container||l),n,o;return m.bind("keydown keypress input keyup focusout paste",q),m.bind({keydown:v,keypress:w,focusout:x,cut:k,paste:y}),{select:r}}}(),d=b(function(a,b,c){function d(a,b){throw a?a="'"+a+"'":a="EOF","Parse Error: "+b+" at "+a}a.init=function(a){this._=a},a.parse=function(a){function b(a,b){return b}return this.skip(q)._(a,b,d)},a.or=function(a){lb("or is passed a parser",a instanceof c);var b=this;return c(function(c,d,e){function f(b){return a._(c,d,e)}return b._(c,d,f)})},a.then=function(a){var b=this;return c(function(d,e,f){function g(b,d){var g=a instanceof c?a:a(d);return lb("a parser is returned",g instanceof c),g._(b,e,f)}return b._(d,g,f)})},a.many=function(){var a=this;return c(function(b,c,d){function f(a,c){return b=a,e.push(c),!0}function g(){return!1}var e=[];while(a._(b,f,g));return c(b,e)})},a.times=function(a,b){arguments.length<2&&(b=a);var d=this;return c(function(c,e,f){function k(a,b){return g.push(b),c=a,!0}function l(a,b){return i=b,c=a,!1}function m(a,b){return!1}var g=[],h=!0,i;for(var j=0;j<a;j+=1){h=d._(c,k,l);if(!h)return f(c,i)}for(;j<b&&h;j+=1)h=d._(c,k,m);return e(c,g)})},a.result=function(a){return this.then(g(a))},a.atMost=function(a){return this.times(0,a)},a.atLeast=function(a){var b=this;return b.times(a).then(function(a){return b.many().map(function(b){return a.concat(b)})})},a.map=function(a){return this.then(function(b){return g(a(b))})},a.skip=function(a){return this.then(function(b){return a.result(b)})};var e=this.string=function(a){var b=a.length,d="expected '"+a+"'";return c(function(c,e,f){var g=c.slice(0,b);return g===a?e(c.slice(b),g):f(c,d)})},f=this.regex=function(a){lb("regexp parser is anchored",a.toString().charAt(1)==="^");var b="expected "+a;return c(function(c,d,e){var f=a.exec(c);if(f){var g=f[0];return d(c.slice(g.length),g)}return e(c,b)})},g=c.succeed=function(a){return c(function(b,c){return c(b,a)})},h=c.fail=function(a){return c(function(b,c,d){return d(b,a)})},i=c.letter=f(/^[a-z]/i),j=c.letters=f(/^[a-z]*/i),k=c.digit=f(/^[0-9]/),l=c.digits=f(/^[0-9]*/),m=c.whitespace=f(/^\s+/),n=c.optWhitespace=f(/^\s*/),o=c.any=c(function(a,b,c){return a?b(a.slice(1),a.charAt(0)):c(a,"expected any character")}),p=c.all=c(function(a,b,c){return b("",a)}),q=c.eof=c(function(a,b,c){return a?c(a,"expected EOF"):b(a,a)})}),e=b(function(
a){a.prev=0,a.next=0,a.parent=0,a.firstChild=0,a.lastChild=0,a.children=function(){return f(this.firstChild,this.lastChild)},a.eachChild=function(a){return this.children().each(a)},a.foldChildren=function(a,b){return this.children().fold(a,b)},a.adopt=function(a,b,c){return f(this,this).adopt(a,b,c),this},a.disown=function(){return f(this,this).disown(),this}}),f=b(function(a){function b(a,b,c){lb("a parent is always present",a),lb("prev is properly set up",function(){return b?b.next===c&&b.parent===a:a.firstChild===c}()),lb("next is properly set up",function(){return c?c.prev===b&&c.parent===a:a.lastChild===b}())}a.first=0,a.last=0,a.init=function(a,b){lb("no half-empty fragments",!a==!b);if(!a)return;lb("first node is passed to Fragment",a instanceof e),lb("last node is passed to Fragment",b instanceof e),lb("first and last have the same parent",a.parent===b.parent),this.first=a,this.last=b},a.adopt=function(a,c,d){b(a,c,d);var e=this;e.disowned=!1;var f=e.first;if(!f)return this;var g=e.last;return c||(a.firstChild=f),d?d.prev=g:a.lastChild=g,e.last.next=d,e.each(function(b){b.prev=c,b.parent=a,c&&(c.next=b),c=b}),e},a.disown=function(){var a=this,c=a.first;if(!c||a.disowned)return a;a.disowned=!0;var d=a.last,e=c.parent;return b(e,c.prev,c),b(e,d,d.next),c.prev?c.prev.next=d.next:e.firstChild=d.next,d.next?d.next.prev=c.prev:e.lastChild=c.prev,a},a.each=function(a){var b=this,c=b.first;if(!c)return b;for(;c!==b.last.next;c=c.next)if(a.call(b,c)===!1)break;return b},a.fold=function(a,b){return this.each(function(c){a=b.call(this,a,c)}),a}}),g=function(){var a=0;return function(){return a+=1}}(),h=b(e,function(a){a.init=function(a){this.id=g(),h[this.id]=this},a.toString=function(){return"[MathElement "+this.id+"]"},a.bubble=function(a){var b=ib.call(arguments,1);for(var c=this;c;c=c.parent){var d=c[a]&&c[a].apply(c,b);if(d===!1)break}return this},a.postOrder=function(a){if(typeof a=="string"){var b=a;a=function(a){b in a&&a[b].apply(a,arguments)}}(function c(b){b.eachChild(c),a(b)})(this)},a.jQ=db(),a.jQadd=function(a){this.jQ=this.jQ.add(a)},this.jQize=function(a){function c(a){if(a.getAttribute){var b=a.getAttribute("mathquill-command-id"),c=a.getAttribute("mathquill-block-id");b&&h[b].jQadd(a),c&&h[c].jQadd(a)}}function d(a){for(a=a.firstChild;a;a=a.nextSibling)c(a),a.firstChild&&d(a)}var b=db(a);for(var e=0;e<b.length;e+=1)c(b[e]),d(b[e]);return b},a.finalizeInsert=function(){var a=this;a.postOrder("finalizeTree"),a.postOrder("blur"),a.postOrder("respace"),a.next.respace&&a.next.respace(),a.prev.respace&&a.prev.respace(),a.postOrder("redraw"),a.bubble("redraw"),a.bubble("redraw")},a.seek=function(a,b,c,d,e){function g(){var a,b=Infinity;for(var c=0;c<f.length;c+=1){if(!f[c])continue;var d=f[c].sqDist;d<b&&(a=c,b=d)}var e=f[a];return f[a]=null,e}function h(a){var d=a.seekPoint(b,c,e);if(!d)return;var g=b-d.x,h=c-d.y;f.push({point:d,sqDist:g*g+h*h})}function i(a){if(!a)return;var d=e(a),g=hb(d.left,gb(d.right,b)),h=hb(d.top,gb(d.bottom,c)),i=b-g,j=c-h;f.push({node:a,sqDist:i*i+j*j})}function j(a){if(a===d)return;var g=e(a),h=hb(0,gb(b-g.left,c-g.top,g.right-b,g.bottom-c));f.push({container:a,sqDist:h*h})}var f=[];h(this),this.eachChild(i),j(this);for(var k=g();!k.point;k=g())if(k.container){var l=k.container,m=l.parent;h(m),m.eachChild(function(a){a!==l&&i(a)}),j(m)}else h(k.node),k.node.eachChild(i);k.point.next?a.insertBefore(k.point.next):a.appendTo(k.point.parent)}}),i=b(h,function(a,b){a.init=function(a,c,d){var e=this;b.init.call(e),e.ctrlSeq||(e.ctrlSeq=a),c&&(e.htmlTemplate=c),d&&(e.textTemplate=d)},a.replaces=function(a){a.disown(),this.replacedFragment=a},a.isEmpty=function(){return this.foldChildren(!0,function(a,b){return a&&b.isEmpty()})},a.parser=function(){var a=ab.block,b=this;return a.times(b.numBlocks()).map(function(a){b.blocks=a;for(var c=0;c<a.length;c+=1)a[c].adopt(b,b.lastChild,0);return b})},a.createBefore=function(a){var b=this,c=b.replacedFragment;b.createBlocks(),h.jQize(b.html()),c&&(c.adopt(b.firstChild,0,0),c.jQ.appendTo(b.firstChild.jQ)),a.jQ.before(b.jQ),a.prev=b.adopt(a.parent,a.prev,a.next),b.finalizeInsert(a),b.placeCursor(a)},a.createBlocks=function(){var a=this,b=a.numBlocks(),c=a.blocks=Array(b);for(var d=0;d<b;d+=1){var e=c[d]=k();e.adopt(a,a.lastChild,0)}},a.respace=jb,a.placeCursor=function(a){a.appendTo(this.foldChildren(this.firstChild,function(a,b){return a.isEmpty()?a:b}))},a.seekPoint=jb,a.expectedCursorYNextTo=function(a){return this.firstChild.expectedCursorYInside(a)},a.remove=function(){return this.disown(),this.jQ.remove(),this.postOrder(function(a){delete h[a.id]}),this},a.numBlocks=function(){var a=this.htmlTemplate.match(/&\d+/g);return a?a.length:0},a.html=function(){var a=this,b=a.blocks,c=" mathquill-command-id="+a.id,d=a.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);lb("no unmatched angle brackets",d.join("")===this.htmlTemplate);for(var e=0,f=d[0];f;e+=1,f=d[e])if(f.slice(-2)==="/>")d[e]=f.slice(0,-2)+c+"/>";else if(f.charAt(0)==="<"){lb("not an unmatched top-level close tag",f.charAt(1)!=="/"),d[e]=f.slice(0,-1)+c+">";var g=1;do e+=1,f=d[e],lb("no missing close tags",f),f.slice(0,2)==="</"?g-=1:f.charAt(0)==="<"&&f.slice(-2)!=="/>"&&(g+=1);while(g>0)}return d.join("").replace(/>&(\d+)/g,function(a,c){return" mathquill-block-id="+b[c].id+">"+b[c].join("html")})},a.latex=function(){return this.foldChildren(this.ctrlSeq,function(a,b){return a+"{"+(b.latex()||" ")+"}"})},a.textTemplate=[""],a.text=function(){var a=0;return this.foldChildren(this.textTemplate[a],function(b,c){a+=1;var d=c.text();return b&&this.textTemplate[a]==="("&&d[0]==="("&&d.slice(-1)===")"?b+d.slice(1,-1)+this.textTemplate[a]:b+c.text()+(this.textTemplate[a]||"")})}}),j=b(i,function(a,b){a.init=function(a,c,d){d||(d=a&&a.length>1?a.slice(1):a),b.init.call(this,a,c,[d])},a.parser=function(){return d.succeed(this)},a.numBlocks=function(){return 0},a.replaces=function(a){a.remove()},a.createBlocks=jb,a.seek=function(a,b,c,d,e){var f=e(this),g=f.left,h=f.right;b-g<h-b?a.insertBefore(this):a.insertAfter(this)},a.expectedCursorYNextTo=function(a){return(a(this).top+a(this).bottom)/2},a.latex=function(){return this.ctrlSeq},a.text=function(){return this.textTemplate},a.placeCursor=jb,a.isEmpty=function(){return!0}}),k=b(h,function(a){a.join=function(a){return this.foldChildren("",function(b,c){return b+c[a]()})},a.latex=function(){return this.join("latex")},a.text=function(){return this.firstChild===this.lastChild?this.firstChild.text():"("+this.join("text")+")"},a.isEmpty=function(){return this.firstChild===0&&this.lastChild===0},a.seekPoint=function(a,b,c){if(!this.firstChild)var d={next:0,x:(c(this).left+c(this).right)/2};else{function e(a){return{next:a,x:c(a).left}}var d=e(this.firstChild);if(a>d.x){d=e(this.lastChild);var f={next:0,x:c(d.next).right};while(a<d.x)f=d,d=e(d.next.prev);f.x-a<a-d.x&&(d=f)}}return{parent:this,next:d.next,x:d.x,y:this.expectedCursorYInside(c)}},a.expectedCursorYInside=function(a){return this.firstChild?this.firstChild.expectedCursorYNextTo(a):(a(this).top+a(this).bottom)/2},a.focus=function(){return this.jQ.addClass("hasCursor"),this.jQ.removeClass("empty"),this},a.blur=function(){return this.jQ.removeClass("hasCursor"),this.isEmpty()&&this.jQ.addClass("empty"),this}}),l=b(f,function(a,b){a.init=function(a,c){b.init.call(this,a,c||a),this.jQ=this.fold(db(),function(a,b){return b.jQ.add(a)})},a.latex=function(){return this.fold("",function(a,b){return a+b.latex()})},a.remove=function(){return this.jQ.remove(),this.each(function(a){a.postOrder(function(a){delete h[a.id]})}),this.disown()}}),m=b(k,function(a,b){a.latex=function(){return b.latex.call(this).replace(/(\\[a-z]+) (?![a-z])/ig,"$1")},a.text=function(){return this.foldChildren("",function(a,b){return a+b.text()})},a.renderLatex=function(a){var b=d.all,c=d.eof,e=ab.skip(c).or(b.result(!1)).parse(a);this.firstChild=this.lastChild=0,e&&e.children().adopt(this,0,0);var f=this.jQ;if(e){var g=e.join("html");f.html(g),h.jQize(f),this.focus().finalizeInsert()}else f.empty();this.cursor.parent=this,this.cursor.prev=this.lastChild,this.cursor.next=0},a.renderSliderLatex=function(a){function b(a){var b,c=a.charCodeAt(0);return 65<=c&&c<=90||97<=c&&c<=122?b=R(a):p[a]||q[a]?b=(p[a]||q[a])(a):b=X(a),b}var c=/^([a-z])(?:_([a-z0-9]|\{[a-z0-9]+\}))?=([-0-9.]+)$/i.exec(a);lb("valid restricted slider LaTeX",c);var d=c[1],e=c[2],f=c[3];this.firstChild=this.lastChild=0,d=R(d);if(e){var g=q._("_"),i=k().adopt(g,0,0);g.blocks=[i];if(e.length===1)b(e).adopt(i,i.lastChild,0);else for(var j=1;j<e.length-1;j+=1)b(e.charAt(j)).adopt(i,i.lastChild,0)}d.adopt(this,this.lastChild,0),g&&g.adopt(this,this.lastChild,0),q["="]("=").adopt(this,this.lastChild,0);for(var j=0,l=f.length;j<l;j+=1){var m=f.charAt(j),n=b(m);n.adopt(this,this.lastChild,0)}var o=this.jQ,r=this.join("html");o.html(r),h.jQize(o),this.cursor.parent=this,this.cursor.prev=this.lastChild,this.cursor.next=0},a.up=function(){this.triggerSpecialEvent("upPressed")},a.down=function(){this.triggerSpecialEvent("downPressed")},a.moveOutOf=function(a){this.triggerSpecialEvent(a+"Pressed")},a.onKey=function(a,b){switch(a){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":while(this.cursor.prev||this.cursor.selection)this.cursor.backspace();break;case"Shift-Backspace":case"Backspace":this.cursor.backspace(),this.triggerSpecialEvent("render");break;case"Esc":case"Tab":var c=this.cursor.parent;if(c===this.cursor.root)return;this.cursor.prepareMove(),c.next?this.cursor.prependTo(c.next):this.cursor.insertAfter(c.parent);break;case"Shift-Tab":case"Shift-Esc":var c=this.cursor.parent;if(c===this.cursor.root)return;this.cursor.prepareMove(),c.prev?this.cursor.appendTo(c.prev):this.cursor.insertBefore(c.parent);break;case"Enter":this.triggerSpecialEvent("enterPressed");break;case"End":this.cursor.prepareMove().appendTo(this.cursor.parent);break;case"Ctrl-End":this.cursor.prepareMove().appendTo(this);break;case"Shift-End":while(this.cursor.next)this.cursor.selectRight();break;case"Ctrl-Shift-End":while(this.cursor.next||this.cursor.parent!==this)this.cursor.selectRight();break;case"Home":this.cursor.prepareMove().prependTo(this.cursor.parent);break;case"Ctrl-Home":this.cursor.prepareMove().prependTo(this);break;case"Shift-Home":while(this.cursor.prev)this.cursor.selectLeft();break;case"Ctrl-Shift-Home":while(this.cursor.prev||this.cursor.parent!==this)this.cursor.selectLeft();break;case"Left":this.cursor.moveLeft();break;case"Shift-Left":this.cursor.selectLeft();break;case"Ctrl-Left":break;case"Meta-Left":break;case"Right":this.cursor.moveRight();break;case"Shift-Right":this.cursor.selectRight();break;case"Ctrl-Right":break;case"Meta-Right":break;case"Up":this.cursor.moveUp();break;case"Down":this.cursor.moveDown();break;case"Shift-Up":if(this.cursor.prev)while(this.cursor.prev)this.cursor.selectLeft();else this.cursor.selectLeft();case"Shift-Down":if(this.cursor.next)while(this.cursor.next)this.cursor.selectRight();else this.cursor.selectRight();case"Ctrl-Up":break;case"Meta-Up":break;case"Ctrl-Down":break;case"Meta-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":while(this.cursor.next||this.cursor.selection)this.cursor.deleteForward();this.triggerSpecialEvent("render");break;case"Shift-Del":case"Del":this.cursor.deleteForward(),this.triggerSpecialEvent("render");break;case"Meta-A":case"Ctrl-A":if(this!==this.cursor.root)return;this.cursor.prepareMove().appendTo(this);while(this.cursor.prev)this.cursor.selectLeft();break;default:return!1}return b.preventDefault(),!1},a.onText=function(a){return this.cursor.write(a),this.triggerSpecialEvent("render"),!1},a.triggerSpecialEvent=function(a){var b=this.jQ;setTimeout(function(){b.trigger(a)},1)}}),n=b(i,function(a,b){a.init=function(a){b.init.call(this,"$"),this.cursor=a},a.htmlTemplate='<span class="mathquill-rendered-math">&0</span>',a.createBlocks=function(){this.firstChild=this.lastChild=m(),this.blocks=[this.firstChild],this.firstChild.parent=this;var a=this.firstChild.cursor=this.cursor;this.firstChild.onText=function(b){return b!=="$"||a.parent!==this?a.write(b):this.isEmpty()?a.insertAfter(this.parent).backspace().insertNew(X("\\$","$")).show():a.next?a.prev?a.write(b):a.insertBefore(this.parent):a.insertAfter(this.parent),!1}},a.latex=function(){return"$"+this.firstChild.latex()+"$"}}),o=b(k,function(a){a.renderLatex=function(a){var b=this,c=b.cursor;b.jQ.children().slice(1).remove(),b.firstChild=b.lastChild=0,c.show().appendTo(b);var e=d.regex,f=d.string,g=d.eof,i=d.all,j=f("$").then(ab).skip(f("$").or(g)).map(function(a){var b=n(c);b.createBlocks();var d=b.firstChild;return a.children().adopt(d,0,0),b}),k=f("\\$").result("$"),l=k.or(e(/^[^$]/)).map(X),m=j.or(l).many(),o=m.skip(g).or(i.result(!1)).parse(a);if(o){for(var p=0;p<o.length;p+=1)o[p].adopt(b,b.lastChild,0);var q=b.join("html");h.jQize(q).appendTo(b.jQ),this.finalizeInsert()}},a.onKey=m.prototype.onKey,a.onText=function(a){return this.cursor.prepareEdit(),a==="$"?this.cursor.insertNew(n(this.cursor)):this.cursor.insertNew(X(a)),!1}}),p={},q={},s=jb,t=document.createElement("div"),u=t.style,v={transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1};for(x in v)if(x in u){w=x;break}w?r=function(a,b,c){a.css(w,"scale("+b+","+c+")")}:"filter"in u?(s=function(a){a.className=a.className},r=function(a,b,c){function f(){a.css("marginRight",(d.width()-1)*(b-1)/b+"px")}var d,e;b/=1+(c-1)/2,a.css("fontSize",c+"em"),a.hasClass("matrixed-container")||a.addClass("matrixed-container").wrapInner('<span class="matrixed"></span>'),d=a.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+b+",SizingMethod='auto expand')"),f(),e=setInterval(f),db(window).load(function(){clearTimeout(e),f()})}):r=function(a,b,c){a.css("fontSize",c+"em")},y=b(i,function(a,b){a.init=function(a,c,d){b.init.call(this,a,"<"+c+" "+d+">&0</"+c+">")}}),q.mathrm=kb(y,"\\mathrm","span",'class="roman font"'),q.mathit=kb(y,"\\mathit","i",'class="font"'),q.mathbf=kb(y,"\\mathbf","b",'class="font"'),q.mathsf=kb(y,"\\mathsf","span",'class="sans-serif font"'),q.mathtt=kb(y,"\\mathtt","span",'class="monospace font"'),q.underline=kb(y,"\\underline","span",'class="non-leaf underline"'),q.overline=q.bar=kb(y,"\\overline","span",'class="non-leaf overline"'),z=b(i,function(a,b){function c(a){var b=this.parent,c=a;do{if(c.next)return a.insertBefore(b),!1;c=c.parent.parent}while(c!==b);return a.insertAfter(b),!1}a.init=function(a,c,d){b.init.call(this,a,"<"+c+' class="non-leaf"><span class="non-leaf '+c+'">&0</span></'+c+">",[d])},a.finalizeTree=function(){lb("SupSub is only _ and ^",this.ctrlSeq==="^"||this.ctrlSeq==="_"),this.ctrlSeq==="_"?(this.down=this.firstChild,this.firstChild.up=c):(this.up=this.firstChild,this.firstChild.down=c)},a.latex=function(){if(this.ctrlSeq==="_"&&this.respaced)return"";var a="";if(this.ctrlSeq==="^"&&this.next.respaced){var b=this.next.firstChild.latex();b.length===1?a+="_"+b:a+="_{"+b+"}"}var b=this.firstChild.latex();return b.length===1?a+=this.ctrlSeq+b:a+=this.ctrlSeq+"{"+(b||" ")+"}",a},a.redraw=function(){this.prev&&this.prev.respace(),this.prev instanceof z||(this.respace(),this.next&&!(this.next instanceof z)&&this.next.respace())},a.respace=function(){this.prev.ctrlSeq==="\\int "||this.prev instanceof z&&this.prev.ctrlSeq!=this.ctrlSeq&&this.prev.prev&&this.prev.prev.ctrlSeq==="\\int "?this["int"]||(this["int"]=!0,this.jQ.addClass("int")):this["int"]&&(this["int"]=!1,this.jQ.removeClass("int")),this.respaced=this.prev instanceof z&&this.prev.ctrlSeq!=this.ctrlSeq&&!this.prev.respaced;if(this.respaced){var a=+this.jQ.css("fontSize").slice(0,-2),b=this.prev.jQ.outerWidth(),d=this.jQ.outerWidth();this.jQ.css({left:(this["int"]&&this.ctrlSeq==="_"?-0.25:0)-b/a+"em",marginRight:.1-gb(d,b)/a+"em"})}else this["int"]&&this.ctrlSeq==="_"?this.jQ.css({left:"-.25em",marginRight:""}):this.jQ.css({left:"",marginRight:""});return this.respaced?this.ctrlSeq==="^"?this.down=this.firstChild.down=this.prev.firstChild:this.up=this.firstChild.up=this.prev.firstChild:this.next.respaced?this.ctrlSeq==="_"?this.up=this.firstChild.up=this.next.firstChild:this.down=this.firstChild.down=this.next.firstChild:this.ctrlSeq==="_"?(delete this.up,this.firstChild.up=c):(delete this.down,this.firstChild.down=c),this.next instanceof z&&this.next.respace(),this},a.onKey=function(a,b){if(this.getCursor().parent.parent!==this)return;switch(a){case"Tab":if(this.next.respaced)return this.getCursor().prepareMove().prependTo(this.next.firstChild),b.preventDefault(),!1;break;case"Shift-Tab":if(this.respaced)return this.getCursor().prepareMove().appendTo(this.prev.firstChild),b.preventDefault(),!1;break;case"Left":if(!this.getCursor().prev&&this.respaced)return this.getCursor().prepareMove().insertBefore(this.prev),!1;break;case"Right":if(!this.getCursor().next&&this.next.respaced)return this.getCursor().prepareMove().insertAfter(this.next),!1}},a.getCursor=function(){var a;for(var b=this.parent;!a;b=b.parent)a=b.cursor;return this.getCursor=function(){return a},this.getCursor()},a.expectedCursorYNextTo=function(a){return this.ctrlSeq==="_"?a(this).top:a(this).bottom}}),q.subscript=q._=kb(z,"_","sub","_"),q.superscript=q.supscript=q["^"]=kb(z,"^","sup","**"),A=b(i,function(a,b){function c(a){var b=this.parent,c=a;do{if(c.prev)return a.insertAfter(b),!1;c=c.parent.parent}while(c!==b);return a.insertBefore(b),!1}a.init=function(a,b){var c='<span class="large-operator non-leaf"><span class="to"><span>&1</span></span><big>'+b+"</big>"+'<span class="from"><span>&0</span></span>'+"</span>";j.prototype.init.call(this,a,c)},a.placeCursor=function(a){a.appendTo(this.firstChild).writeLatex("n=").show()},a.latex=function(){function a(a){return a.length===1?a:"{"+(a||" ")+"}"}return this.ctrlSeq+"_"+a(this.firstChild.latex())+"^"+a(this.lastChild.latex())},a.parser=function(){var a=d.string,b=d.optWhitespace,c=d.succeed,e=ab.block,f=this,g=f.blocks=[k(),k()];for(var h=0;h<g.length;h+=1)g[h].adopt(f,f.lastChild,0);return b.then(a("_").or(a("^"))).then(function(a){var b=g[a==="_"?0:1];return e.then(function(a){return a.children().adopt(b,b.lastChild,0),c(f)})}).many().result(f)},a.finalizeTree=function(){this.down=this.firstChild,this.firstChild.up=c,this.up=this.lastChild,this.lastChild.down=c}}),q["∑"]=q.sum=q.summation=kb(A,"\\sum ","&sum;"),q["∏"]=q.prod=q.product=kb(A,"\\prod ","&prod;"),B=q.frac=q.dfrac=q.cfrac=q.fraction=b(i,function(a,b){a.ctrlSeq="\\frac",a.htmlTemplate='<span class="fraction non-leaf"><span class="numerator">&0</span><span class="denominator">&1</span><span style="display:inline-block;width:0;overflow:hidden">&nbsp;</span></span>',a.textTemplate=["(","/",")"],a.finalizeTree=function(){this.up=this.lastChild.up=this.firstChild,this.down=this.firstChild.down=this.lastChild},a.expectedCursorYNextTo=function(a){return a.elById(this.jQ[0].lastChild,this.id+.5).top}}),C=q.over=p["/"]=b(B,function(a,b){a.createBefore=function(a){if(!this.replacedFragment){var c=a.prev;if(c instanceof L||c instanceof B)c=c.prev;else{while(c&&!(c instanceof $||c instanceof L||c instanceof A||c instanceof B||c.ctrlSeq===","||c.ctrlSeq===":"||c.ctrlSeq==="\\space "))c=c.prev;c instanceof A&&c.next instanceof z&&(c=c.next,c.next instanceof z&&c.next.ctrlSeq!=c.ctrlSeq&&(c=c.next))}c!==a.prev&&(this.replaces(l(c.next||a.parent.firstChild,a.prev)),a.prev=c)}b.createBefore.call(this,a)}}),D=q.sqrt=q["√"]=b(i,function(a,b){a.ctrlSeq="\\sqrt",a.htmlTemplate='<span class="non-leaf"><span class="scaled sqrt-prefix">&radic;</span><span class="non-leaf sqrt-stem">&0</span></span>',a.textTemplate=["sqrt(",")"],a.parser=function(){return ab.optBlock.then(function(a){return ab.block.map(function(b){var c=E();return c.blocks=[a,b],a.adopt(c,0,0),b.adopt(c,a,0),c})}).or(b.parser.call(this))},a.redraw=function(){var a=this.lastChild.jQ;r(a.prev(),1,a.innerHeight()/+a.css("fontSize").slice(0,-2)-.1)}}),E=q.nthroot=b(D,function(a,b){a.htmlTemplate='<sup class="nthroot non-leaf">&0</sup><span class="scaled"><span class="sqrt-prefix scaled">&radic;</span><span class="sqrt-stem non-leaf">&1</span></span>',a.textTemplate=["sqrt[","](",")"],a.latex=function(){return"\\sqrt["+this.firstChild.latex()+"]{"+this.lastChild.latex()+"}"},a.onKey=function(a,b){if(this.getCursor().parent.parent!==this)return;switch(a){case"Right":if(this.getCursor().next)return;case"Tab":if(this.getCursor().parent===this.firstChild)return this.getCursor().prepareMove().prependTo(this.lastChild),b.preventDefault(),!1;break;case"Left":if(this.getCursor().prev)return;case"Shift-Tab":if(this.getCursor().parent===this.lastChild)return this.getCursor().prepareMove().appendTo(this.firstChild),b.preventDefault(),!1}},a.getCursor=z.prototype.getCursor,a.expectedCursorYNextTo=function(a){return a.elById(this.jQ[0],this.id+.5).bottom}}),F=b(i,function(a,b){a.init=function(a,c,d,e){b.init.call(this,"\\left"+d,'<span class="non-leaf"><span class="scaled paren">'+a+"</span>"+'<span class="non-leaf">&0</span>'+'<span class="scaled paren">'+c+"</span>"+"</span>",[a,c]),this.end="\\right"+e},a.jQadd=function(){b.jQadd.apply(this,arguments);var a=this.jQ;this.bracketjQs=a.children(":first").add(a.children(":last"))},a.finalizeTree=function(){if(this.firstChild.isEmpty()&&this.next){var a=l(this.next,this.parent.lastChild).disown();a.adopt(this.firstChild,0,0),a.jQ.appendTo(this.firstChild.jQ)}},a.placeCursor=function(a){a.prependTo(this.firstChild)},a.latex=function(){return this.ctrlSeq+this.firstChild.latex()+this.end},a.redraw=function(){var a=this.firstChild.jQ,b=a.outerHeight()/+a.css("fontSize").slice(0,-2);r(this.bracketjQs,gb(1+.2*(b-1),1.2),1.05*b)}}),q.left=b(i,function(a){a.parser=function(){var a,b,c,e=d.regex,f=d.string;return e=d.regex,a=d.succeed,b=ab.block,c=d.optWhitespace,c.then(e(/^(?:[([|]|\\\{)/)).then(function(b){var g;return b.charAt(0)==="\\"&&(b=b.slice(1)),g=p[b](),ab.map(function(a){g.blocks=[a],a.adopt(g,0,0)}).then(f("\\right")).skip(c).then(e(/^(?:[\])|]|\\\})/)).then(function(b){return b.slice(-1)!==g.end.slice(-1)?d.fail("open doesn't match close"):a(g)})})}}),q.right=b(i,function(a){a.parser=function(){return d.fail("unmatched \\right")}}),q.lbrace=p["{"]=kb(F,"{","}","\\{","\\}"),q.langle=q.lang=kb(F,"&lang;","&rang;","\\langle ","\\rangle "),G=b(F,function(a,b){a.createBefore=function(a){if(this.replacedFragment)return b.createBefore.call(this,a);var c=a.parent.parent;if(c.ctrlSeq===this.ctrlSeq){if(a.next){var d=l(a.next,c.firstChild.lastChild).disown();d.adopt(c.parent,c,c.next),d.jQ.insertAfter(c.jQ),a.next.respace&&a.next.respace()}a.insertAfter(c),c.bubble("redraw")}else b.createBefore.call(this,a),a.appendTo(this.firstChild)},a.finalizeTree=jb,a.placeCursor=function(a){this.firstChild.blur(),a.insertAfter(this)}}),q.rbrace=p["}"]=kb(G,"{","}","\\{","\\}"),q.rangle=q.rang=kb(G,"&lang;","&rang;","\\langle ","\\rangle "),H=function(a,b){a.init=function(a,c){b.init.call(this,a,c,a,c)}},I=b(F,H),q.lparen=p["("]=kb(I,"(",")"),q.lbrack=q.lbracket=p["["]=kb(I,"[","]"),J=b(G,H),q.rparen=p[")"]=kb(J,"(",")"),q.rbrack=q.rbracket=p["]"]=kb(J,"[","]"),K=q.lpipe=q.rpipe=p["|"]=b(I,function(a,b){a.init=function(){b.init.call(this,"|","|")},a.createBefore=function(a){!a.next&&a.parent.parent&&a.parent.parent.end===this.end&&!this.replacedFragment?a.insertAfter(a.parent.parent):i.prototype.createBefore.call(this,a)},a.finalizeTree=jb}),L=q.text=q.textnormal=q.textrm=q.textup=q.textmd=b(i,function(a,b){a.ctrlSeq="\\text",a.htmlTemplate='<span class="text">&0</span>',a.replaces=function(a){a instanceof l?this.replacedText=a.remove().jQ.text():typeof a=="string"&&(this.replacedText=a)},a.textTemplate=['"','"'],a.parser=function(){var a=d.string,b=d.regex,c=d.optWhitespace;return c.then(a("{")).then(b(/^[^}]*/)).skip(a("}")).map(function(a){var b=L();b.createBlocks();var c=b.firstChild;for(var d=0;d<a.length;d+=1){var e=X(a.charAt(d));e.adopt(c,c.lastChild,0)}return b})},a.createBlocks=function(){this.firstChild=this.lastChild=M(),this.blocks=[this.firstChild],this.firstChild.parent=this},a.finalizeInsert=function(){this.firstChild.blur=function(){return delete this.blur,this},b.finalizeInsert.call(this)},a.createBefore=function(a){b.createBefore.call(this,this.cursor=a);if(this.replacedText)for(var c=0;c<this.replacedText.length;c+=1)this.write(this.replacedText.charAt(c))},a.write=function(a){this.cursor.insertNew(X(a))},a.onKey=function(a,b){if(!this.cursor.selection&&(a==="Backspace"&&!this.cursor.prev||a==="Del"&&!this.cursor.next))return this.isEmpty()&&this.cursor.insertAfter(this),!1},a.onText=function(a){this.cursor.prepareEdit();if(a!=="$")this.write(a);else if(this.isEmpty())this.cursor.insertAfter(this).backspace().insertNew(X("\\$","$"));else if(!this.cursor.next)this.cursor.insertAfter(this);else if(!this.cursor.prev)this.cursor.insertBefore(this);else{var b=L(l(this.cursor.next,this.firstChild.lastChild));b.placeCursor=function(a){this.prev=0,delete this.placeCursor,this.placeCursor(a)},b.firstChild.focus=function(){return this},this.cursor.insertAfter(this).insertNew(b),b.prev=this,this.cursor.insertBefore(b),delete b.firstChild.focus}return this.cursor.root.triggerSpecialEvent("render"),!1}}),M=b(k,function(a,b){a.blur=function(){this.jQ.removeClass("hasCursor");if(this.isEmpty()){var a=this.parent,b=a.cursor;b.parent===this?this.jQ.addClass("empty"):(b.hide(),a.remove(),b.next===a?b.next=a.next:b.prev===a&&(b.prev=a.prev),b.show().parent.bubble("redraw"))}return this},a.focus=function(){b.focus.call(this);var a=this.parent;if(a.next.ctrlSeq===a.ctrlSeq){var c=this,d=a.cursor,e=a.next.firstChild;e.eachChild(function(a){a.parent=c,a.jQ.appendTo(c.jQ)}),this.lastChild?this.lastChild.next=e.firstChild:this.firstChild=e.firstChild,e.firstChild.prev=this.lastChild,this.lastChild=e.lastChild,e.parent.remove(),d.prev?d.insertAfter(d.prev):d.prependTo(this),d.parent.bubble("redraw")}else if(a.prev.ctrlSeq===a.ctrlSeq){var d=a.cursor;d.prev?a.prev.firstChild.focus():d.appendTo(a.prev.firstChild)}return this}}),q.em=q.italic=q.italics=q.emph=q.textit=q.textsl=pb("\\textit","i",'class="text"'),q.strong=q.bold=q.textbf=pb("\\textbf","b",'class="text"'),q.sf=q.textsf=pb("\\textsf","span",'class="sans-serif text"'),q.tt=q.texttt=pb("\\texttt","span",'class="monospace text"'),q.textsc=pb("\\textsc","span",'style="font-variant:small-caps" class="text"'),q.uppercase=pb("\\uppercase","span",'style="text-transform:uppercase" class="text"'),q.lowercase=pb("\\lowercase","span",'style="text-transform:lowercase" class="text"'),N=b(i,function(a,b){a.ctrlSeq="\\",a.replaces=function(a){this._replacedFragment=a.disown(),this.isEmpty=function(){return!1}},a.htmlTemplate='<span class="latex-command-input non-leaf">\\<span>&0</span></span>',a.textTemplate=["\\"],a.createBlocks=function(){b.createBlocks.call(this),this.firstChild.focus=function(){return this.parent.jQ.addClass("hasCursor"),this.isEmpty()&&this.parent.jQ.removeClass("empty"),this},this.firstChild.blur=function(){return this.parent.jQ.removeClass("hasCursor"),this.isEmpty()&&this.parent.jQ.addClass("empty"),this}},a.createBefore=function(a){b.createBefore.call(this,a),this.cursor=a.appendTo(this.firstChild);if(this._replacedFragment){var c=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("blur").bind("mousedown mousemove",function(a){return db(a.target=c).trigger(a),!1}).insertBefore(this.jQ).add(this.jQ)}},a.latex=function(){return"\\"+this.firstChild.latex()+" "},a.onKey=function(a,b){if(a==="Tab"||a==="Enter")return this.renderCommand(),this.cursor.root.triggerSpecialEvent("render"),b.preventDefault(),!1},a.onText=function(a){if(a.match(/[a-z]/i))return this.cursor.prepareEdit(),this.cursor.insertNew(X(a)),!1;this.renderCommand();if(a===" "||a==="\\"&&this.firstChild.isEmpty())return this.cursor.root.triggerSpecialEvent("render"),!1},a.renderCommand=function(){this.jQ=this.jQ.last(),this.remove(),this.next?this.cursor.insertBefore(this.next):this.cursor.appendTo(this.parent);var a=this.firstChild.latex(),b;a||(a="backslash"),this.cursor.insertCmd(a,this._replacedFragment)}}),O=q.binom=q.binomial=b(i,function(a,b){a.ctrlSeq="\\binom",a.htmlTemplate='<span class="paren scaled">(</span><span class="non-leaf"><span class="array non-leaf"><span>&0</span><span>&1</span></span></span><span class="paren scaled">)</span>',a.textTemplate=["choose(",",",")"],a.redraw=function(){var a=this.jQ.eq(1),b=a.outerHeight()/+a.css("fontSize").slice(0,-2),c=this.jQ.filter(".paren");r(c,gb(1+.2*(b-1),1.2),1.05*b)},a.expectedCursorYNextTo=j.prototype.expectedCursorYNextTo}),P=q.choose=b(O,function(a){a.createBefore=C.prototype.createBefore}),Q=q.vector=b(i,function(a,b){a.ctrlSeq="\\vector",a.htmlTemplate='<span class="array"><span>&0</span></span>',a.latex=function(){return"\\begin{matrix}"+this.foldChildren([],function(a,b){return a.push(b.latex()),a}).join("\\\\")+"\\end{matrix}"},a.text=function(){return"["+this.foldChildren([],function(a,b){return a.push(b.text()),a}).join()+"]"},a.createBefore=function(a){b.createBefore.call(this,this.cursor=a)},a.onKey=function(a,b){var c=this.cursor.parent;if(c.parent===this){if(a==="Enter"){var d=k();return d.parent=this,d.jQ=db("<span></span>").attr(fb,d.id).insertAfter(c.jQ),c.next?c.next.prev=d:this.lastChild=d,d.next=c.next,c.next=d,d.prev=c,this.bubble("redraw").cursor.appendTo(d),b.preventDefault(),!1}if(a==="Tab"&&!c.next){if(c.isEmpty()){if(c.prev)return this.cursor.insertAfter(this),delete c.prev.next,this.lastChild=c.prev,c.jQ.remove(),this.bubble("redraw"),b.preventDefault(),!1;return}var d=k();return d.parent=this,d.jQ=db("<span></span>").attr(fb,d.id).appendTo(this.jQ),this.lastChild=d,c.next=d,d.prev=c,this.bubble("redraw").cursor.appendTo(d),b.preventDefault(),!1}if(b.which===8){if(c.isEmpty())return c.prev?(this.cursor.appendTo(c.prev),c.prev.next=c.next):(this.cursor.insertBefore(this),this.firstChild=c.next),c.next?c.next.prev=c.prev:this.lastChild=c.prev,c.jQ.remove(),this.isEmpty()?this.cursor.deleteForward():this.bubble("redraw"),b.preventDefault(),!1;if(!this.cursor.prev)return b.preventDefault(),!1}}},a.expectedCursorYNextTo=O.prototype.expectedCursorYNextTo}),R=b(j,function(a,b){a.init=function(a,c){b.init.call(this,a,"<var>"+(c||a)+"</var>")},a.createBefore=function(a){var c=this.ctrlSeq;for(var d=0,e=a.prev;d<W-1&&e&&e instanceof R;d+=1,e=e.prev)c=e.ctrlSeq+c;while(c.length){if(V.hasOwnProperty(c)){for(var d=1;d<c.length;d+=1)a.backspace();a.insertNew(q[c](c));return}c=c.slice(1)}b.createBefore.apply(this,arguments)},a.respace=a.finalizeTree=function(){var a=this.ctrlSeq;if(a.length>1)return;for(var b=this.prev;b instanceof R&&b.ctrlSeq.length===1;b=b.prev)a=b.ctrlSeq+a;for(var c=this.next;c instanceof R&&c.ctrlSeq.length===1;c=c.next)a+=c.ctrlSeq;l(b.next||this.parent.firstChild,c.prev||this.parent.lastChild).each(function(a){a.jQ.removeClass("un-italicized last"),delete a.isFirstLetter,delete a.isLastLetter});a:for(var d=0,e=b.next||this.parent.firstChild;d<a.length;d+=1,e=e.next)for(var f=gb(U,a.length-d);f>0;f-=1)if(T.hasOwnProperty(a.slice(d,d+f))){e.isFirstLetter=!0;for(var g=0,h=e;g<f;g+=1,h=h.next){h.jQ.addClass("un-italicized");var i=h}i.isLastLetter=!0,i.next instanceof z||i.next instanceof F||i.jQ.addClass("last"),d+=f-1,e=i;continue a}},a.latex=function(){return this.isFirstLetter?"\\"+this.ctrlSeq:this.isLastLetter?this.ctrlSeq+" ":this.ctrlSeq},a.text=function(){var a=this.ctrlSeq;return this.prev&&!(this.prev instanceof R)&&!(this.prev instanceof $)&&(a="*"+a),this.next&&!(this.next instanceof $)&&this.next.ctrlSeq!=="^"&&(a+="*"),a}}),S=b(j,function(a,b){a.init=function(a){this.ctrlSeq=a},a.createBefore=function(a){a.writeLatex(this.ctrlSeq).show()},a.parser=function(){var a=this.ctrlSeq,b=k();for(var c=0;c<a.length;c+=1)R(a.charAt(c)).adopt(b,b.lastChild,0);return d.succeed(b.children())}}),T={ln:1,log:1,min:1,nCr:1,nPr:1,gcd:1,lcm:1,mcm:1,mcd:1,ceil:1,exp:1,abs:1,max:1,mod:1,gcf:1,exp:1,floor:1,sign:1,signum:1,round:1},U=9,V={sqrt:1,nthroot:1,sum:1,prod:1,pi:1,phi:1,tau:1,gamma:1,theta:1},W=7,function(){var a,b,c={sin:1,cos:1,tan:1,sec:1,cosec:1,csc:1,cotan:1,cot:1,ctg:1};for(a in c)T[a]=T["arc"+a]=T[a+"h"]=T["arc"+a+"h"]=1;for(b in T)q[b]=S}(),X=b(j,function(a,b){a.init=function(a,c){b.init.call(this,a,"<span>"+(c||a)+"</span>")}}),p[" "]=kb(X,"\\space "," "),q.prime=p["'"]=kb(X,"'","&prime;"),Y=b(j,function(a,b){a.init=function(a,c){b.init.call(this,a,'<span class="nonSymbola">'+(c||a)+"</span>")}}),q["@"]=Y,q["&"]=kb(Y,"\\&","&amp;"),q["%"]=kb(Y,"\\%","%"),q.alpha=q.beta=q.gamma=q.delta=q.zeta=q.eta=q.theta=q.iota=q.kappa=q.mu=q.nu=q.xi=q.rho=q.sigma=q.tau=q.chi=q.psi=q.omega=b(R,function(a,b){a.init=function(a){b.init.call(this,"\\"+a+" ","&"+a+";")}}),q.phi=kb(R,"\\phi ","&#981;"),q.phiv=q.varphi=kb(R,"\\varphi ","&phi;"),q.epsilon=kb(R,"\\epsilon ","&#1013;"
),q.epsiv=q.varepsilon=kb(R,"\\varepsilon ","&epsilon;"),q.piv=q.varpi=kb(R,"\\varpi ","&piv;"),q.sigmaf=q.sigmav=q.varsigma=kb(R,"\\varsigma ","&sigmaf;"),q.thetav=q.vartheta=q.thetasym=kb(R,"\\vartheta ","&thetasym;"),q.upsilon=q.upsi=kb(R,"\\upsilon ","&upsilon;"),q.gammad=q.Gammad=q.digamma=kb(R,"\\digamma ","&#989;"),q.kappav=q.varkappa=kb(R,"\\varkappa ","&#1008;"),q.rhov=q.varrho=kb(R,"\\varrho ","&#1009;"),q.pi=q["π"]=kb(Y,"\\pi ","&pi;"),q.theta=q["θ"]=kb(Y,"\\theta ","&theta;"),q.lambda=kb(Y,"\\lambda ","&lambda;"),q.Upsilon=q.Upsi=q.upsih=q.Upsih=kb(j,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>'),q.Gamma=q.Delta=q.Theta=q.Lambda=q.Xi=q.Pi=q.Sigma=q.Phi=q.Psi=q.Omega=q.forall=b(X,function(a,b){a.init=function(a){b.init.call(this,"\\"+a+" ","&"+a+";")}}),Z=b(i,function(a){a.init=function(a){this.latex=a},a.createBefore=function(a){a.writeLatex(this.latex)},a.parser=function(){var a=ab.parse(this.latex).children();return d.succeed(a)}}),q["¹"]=kb(Z,"^1"),q["²"]=kb(Z,"^2"),q["³"]=kb(Z,"^3"),q["¼"]=kb(Z,"\\frac14"),q["½"]=kb(Z,"\\frac12"),q["¾"]=kb(Z,"\\frac34"),q["⅒"]=kb(Z,"\\frac{1}{10}"),q["⅓"]=kb(Z,"\\frac13"),q["⅔"]=kb(Z,"\\frac23"),$=b(j,function(a,b){a.init=function(a,c,d){b.init.call(this,a,'<span class="binary-operator">'+c+"</span>",d)},a.createBefore=function(a){var c=a.prev.ctrlSeq+this.ctrlSeq;c==="<="?a.backspace().insertNew($("\\le ","&le;")):c===">="?a.backspace().insertNew($("\\ge ","&ge;")):b.createBefore.apply(this,arguments)}}),_=b($,function(a){a.init=X.prototype.init,a.respace=function(){return this.prev?this.prev instanceof $&&this.next&&!(this.next instanceof $)?this.jQ[0].className="unary-operator":this.jQ[0].className="binary-operator":this.jQ[0].className="",this}}),q["+"]=kb(_,"+","+"),q["–"]=q["−"]=q["-"]=kb(_,"-","&minus;"),q["±"]=q.pm=q.plusmn=q.plusminus=kb(_,"\\pm ","&plusmn;"),q.mp=q.mnplus=q.minusplus=kb(_,"\\mp ","&#8723;"),p["*"]=q.sdot=q.cdot=kb($,"\\cdot ","&middot;"),q["="]=kb($,"=","="),q["<"]=kb($,"<","&lt;"),q[">"]=kb($,">","&gt;"),q.notin=q.sim=q.cong=q.equiv=q.oplus=q.otimes=b($,function(a,b){a.init=function(a){b.init.call(this,"\\"+a+" ","&"+a+";")}}),q.times=kb($,"\\times ","&times;","[x]"),q["÷"]=q.div=q.divide=q.divides=kb($,"\\div ","&divide;","[/]"),q["≠"]=q.ne=q.neq=kb($,"\\ne ","&ne;"),q.ast=q.star=q.loast=q.lowast=kb($,"\\ast ","&lowast;"),q.therefor=q.therefore=kb($,"\\therefore ","&there4;"),q.cuz=q.because=kb($,"\\because ","&#8757;"),q.prop=q.propto=kb($,"\\propto ","&prop;"),q["≈"]=q.asymp=q.approx=kb($,"\\approx ","&asymp;"),q.lt=kb($,"<","&lt;"),q.gt=kb($,">","&gt;"),q["≤"]=q.le=q.leq=kb($,"\\le ","&le;"),q["≥"]=q.ge=q.geq=kb($,"\\ge ","&ge;"),q.isin=q["in"]=kb($,"\\in ","&isin;"),q.ni=q.contains=kb($,"\\ni ","&ni;"),q.notni=q.niton=q.notcontains=q.doesnotcontain=kb($,"\\not\\ni ","&#8716;"),q.sub=q.subset=kb($,"\\subset ","&sub;"),q.sup=q.supset=q.superset=kb($,"\\supset ","&sup;"),q.nsub=q.notsub=q.nsubset=q.notsubset=kb($,"\\not\\subset ","&#8836;"),q.nsup=q.notsup=q.nsupset=q.notsupset=q.nsuperset=q.notsuperset=kb($,"\\not\\supset ","&#8837;"),q.sube=q.subeq=q.subsete=q.subseteq=kb($,"\\subseteq ","&sube;"),q.supe=q.supeq=q.supsete=q.supseteq=q.supersete=q.superseteq=kb($,"\\supseteq ","&supe;"),q.nsube=q.nsubeq=q.notsube=q.notsubeq=q.nsubsete=q.nsubseteq=q.notsubsete=q.notsubseteq=kb($,"\\not\\subseteq ","&#8840;"),q.nsupe=q.nsupeq=q.notsupe=q.notsupeq=q.nsupsete=q.nsupseteq=q.notsupsete=q.notsupseteq=q.nsupersete=q.nsuperseteq=q.notsupersete=q.notsuperseteq=kb($,"\\not\\supseteq ","&#8841;"),q.space=kb(X,"\\space ","&nbsp;"),q.and=q.land=q.wedge=kb(X,"\\wedge ","&and;"),q.or=q.lor=q.vee=kb(X,"\\vee ","&or;"),ab=function(){function a(a){var b=k();return a.adopt(b,0,0),b}function b(a){var b=a[0]||k();for(var c=1;c<a.length;c+=1)a[c].children().adopt(b,b.lastChild,0);return b}var c=d.string,e=d.regex,f=d.letter,g=d.any,h=d.optWhitespace,i=d.succeed,j=d.fail,l=f.map(R),m=e(/^[^${}\\_^]/).map(X),n=e(/^[^\\]/).or(c("\\").then(e(/^[a-z]+/i).or(e(/^\s+/).result(" ")).or(g))).then(function(a){var b=q[a];return b?b(a).parser():j("unknown command: \\"+a)}),o=n.or(l).or(m),p=c("{").then(function(){return s}).skip(c("}")),r=h.then(p.or(o.map(a))),s=r.many().map(b).skip(h),t=c("[").then(r.then(function(a){return a.join("latex")!=="]"?i(a):j()}).many().map(b).skip(h)).skip(c("]")),u=s;return u.block=r,u.optBlock=t,u}(),bb=b(function(a){function b(a,b){if(a.next[b])a.prependTo(a.next[b]);else if(a.prev[b])a.appendTo(a.prev[b]);else{var c=a.parent;do{var d=c[b];if(d){typeof d=="function"&&(d=c[b](a));if(d===!1||d instanceof k){a.upDownCache[c.id]={parent:a.parent,prev:a.prev,next:a.next};if(d instanceof k){var e=a.upDownCache[d.id];if(e)e.next?a.insertBefore(e.next):a.appendTo(e.parent);else{var f=a.jQ[0].getBoundingClientRect(),g=ob();d.seek(a,f.left,f.bottom,d,g)}}break}}c=c.parent.parent}while(c)}return a.clearSelection().show()}function c(a){var b=a.jQ.removeClass("cursor").offset();return a.jQ.addClass("cursor"),b}function e(a){a.upDownCache={}}a.init=function(a){this.parent=this.root=a;var b=this.jQ=this._jQ=db('<span class="cursor"><span class="line">&zwj;</span></span>');this.blink=function(){b.toggleClass("blink")},this.upDownCache={}},a.prev=0,a.next=0,a.parent=0,a.handle=0,a.showHandle=function(){return this.handle||(this.handle=db('<span class="handle"></span>').appendTo(this.jQ)),this},a.hideHandle=function(){return this.handle&&(this.handle.remove(),delete this.handle),this},a.show=function(a){return a||this.hideHandle(),this.jQ=this._jQ.removeClass("blink"),"intervalId"in this?clearInterval(this.intervalId):(this.next?this.selection&&this.selection.first.prev===this.prev?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this.next.jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},a.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=db(),this},a.insertAt=function(a,b,c){var d=this.parent;this.parent=a,this.prev=b,this.next=c,d.blur()},a.insertBefore=function(a){return this.insertAt(a.parent,a.prev,a),this.parent.jQ.addClass("hasCursor"),this.jQ.insertBefore(a.jQ.first()),this},a.insertAfter=function(a){return this.insertAt(a.parent,a,a.next),this.parent.jQ.addClass("hasCursor"),this.jQ.insertAfter(a.jQ.last()),this},a.prependTo=function(a){return this.insertAt(a,0,a.firstChild),this.jQ.prependTo(a.jQ),a.focus(),this},a.appendTo=function(a){return this.insertAt(a,a.lastChild,0),this.jQ.appendTo(a.jQ),a.focus(),this},a.hopLeft=function(){return this.jQ.insertBefore(this.prev.jQ.first()),this.next=this.prev,this.prev=this.prev.prev,this},a.hopRight=function(){return this.jQ.insertAfter(this.next.jQ.last()),this.prev=this.next,this.next=this.next.next,this},a.moveLeftWithin=function(a){this.prev?this.prev instanceof E?this.appendTo(this.prev.lastChild):this.prev.up instanceof k?this.appendTo(this.prev.up):this.prev.firstChild?this.appendTo(this.prev.firstChild):this.hopLeft():this.parent!==a?this.insertBefore(this.parent.parent):a.moveOutOf&&a.moveOutOf("left",this)},a.moveRightWithin=function(a){this.next?this.next.up instanceof k?this.prependTo(this.next.up):this.next.firstChild?this.prependTo(this.next.firstChild):this.hopRight():this.parent!==a?this.insertAfter(this.parent.parent):a.moveOutOf&&a.moveOutOf("right",this)},a.moveLeft=function(){return e(this),this.selection?this.insertBefore(this.selection.first).clearSelection():this.moveLeftWithin(this.root),this.root.triggerSpecialEvent("cursorMoved"),this.show()},a.moveRight=function(){return e(this),this.selection?this.insertAfter(this.selection.last).clearSelection():this.moveRightWithin(this.root),this.root.triggerSpecialEvent("cursorMoved"),this.show()},a.moveUp=function(){return b(this,"up")},a.moveDown=function(){return b(this,"down")},a.seek=function(a,b,c,d,f){e(this);var g=this.clearSelection().show(f),i=a.attr(fb)||a.attr(eb);if(!i){var j=a.parent();i=j.attr(fb)||j.attr(eb)}var k=i?h[i]:g.root;return lb("nodeId is the id of some Node that exists",k),k.seek(g,b,c,g.root,d),g},a.writeLatex=function(a){var b=this;e(b),b.show().deleteSelection();var c=d.all,f=d.eof,g=ab.skip(f).or(c.result(!1)).parse(a);if(g&&!g.isEmpty()){g.children().adopt(b.parent,b.prev,b.next);var i=g.join("html"),j=h.jQize(i);j.insertBefore(b.jQ),b.prev=g.lastChild,g.finalizeInsert(),b.parent.bubble("redraw")}return this},a.write=a.insertCh=function(a){if(a!="^"&&a!="_"||!!this.prev){(a=="+"||a=="="||a=="-"||a=="<"||a==">")&&(this.parent.parent.ctrlSeq==="^"||this.parent.parent.ctrlSeq==="_")&&!this.next&&this.prev&&this.moveRight();if(a==="^"&&this.prev instanceof z&&(this.prev.ctrlSeq==="^"||this.prev.prev.ctrlSeq==="^")){this.moveUp();return}if(a==="^"&&this.next instanceof z&&(this.next.ctrlSeq==="^"||this.next.next&&this.next.next.ctrlSeq==="^")){this.moveUp();return}if(a==="_"&&this.prev instanceof z&&(this.prev.ctrlSeq==="_"||this.prev.prev.ctrlSeq==="_")){this.moveDown();return}e(this),this.show();var b;return a.match(/^[a-z]$/i)?b=R(a):(b=p[a]||q[a])?b=b(a):b=X(a),this.selection&&(this.prev=this.selection.first.prev,this.next=this.selection.last.next,b.replaces(this.selection),delete this.selection),this.insertNew(b)}return},a.insertNew=function(a){return a.createBefore(this),this},a.insertCmd=function(a,b){e(this),this.show();var c=q[a];return c?(c=c(a),b&&c.replaces(b),this.insertNew(c)):(c=L(),c.replaces(a),c.firstChild.focus=function(){return delete this.focus,this},this.insertNew(c).insertAfter(c),b&&b.remove()),this},a.unwrapGramp=function(){var a=this.parent.parent,b=a.parent,c=a.next,d=this,e=a.prev;a.disown().eachChild(function(d){if(d.isEmpty())return;d.children().adopt(b,e,c).each(function(b){b.jQ.insertBefore(a.jQ.first())}),e=d.lastChild});if(!this.next)if(this.prev)this.next=this.prev.next;else while(!this.next){this.parent=this.parent.next;if(!this.parent){this.next=a.next,this.parent=b;break}this.next=this.parent.firstChild}this.next?this.insertBefore(this.next):this.appendTo(b),a.jQ.remove(),a.prev&&a.prev.respace(),a.next&&a.next.respace()},a.backspace=function(){e(this),this.show();if(!this.deleteSelection())if(this.prev)if(this.prev.isEmpty()){if(this.prev.ctrlSeq==="\\le ")var a=q["<"]("<");else if(this.prev.ctrlSeq==="\\ge ")var a=q[">"](">");this.prev=this.prev.remove().prev,a&&this.insertNew(a)}else{if(this.prev instanceof F)return this.appendTo(this.prev.firstChild).deleteForward();this.selectLeft()}else if(this.parent!==this.root){if(this.parent.parent.isEmpty())return this.insertAfter(this.parent.parent).backspace();if(this.next instanceof F)return this.prependTo(this.next.firstChild).backspace();this.unwrapGramp()}else this.root.triggerSpecialEvent("backspacePressed");return this.prev&&this.prev.respace(),this.next&&this.next.respace(),this.parent.bubble("redraw"),this},a.deleteForward=function(){e(this),this.show();if(!this.deleteSelection())if(this.next)this.next.isEmpty()?this.next=this.next.remove().next:this.selectRight();else if(this.parent!==this.root){if(this.parent.parent.isEmpty())return this.insertBefore(this.parent.parent).deleteForward();this.unwrapGramp()}else this.root.triggerSpecialEvent("delPressed");return this.prev&&this.prev.respace(),this.next&&this.next.respace(),this.parent.bubble("redraw"),this},a.selectFrom=function(a){var b=this,c=a;a:do{for(var d=this;d!==b.parent.parent;d=d.parent.parent)if(d.parent===c.parent){f=d,g=c;break a}for(var e=a;e!==c.parent.parent;e=e.parent.parent)if(b.parent===e.parent){f=b,g=e;break a}b.parent.parent&&(b=b.parent.parent),c.parent.parent&&(c=c.parent.parent)}while(b.parent.parent||c.parent.parent);lb("cursor and anticursor are in the same tree",f&&g);var f,g,h;if(f.next!==g){for(var i=f;i;i=i.next)if(i===g.prev){h=!0;break}h||(h=g,g=f,f=h)}this.hide().selection=cb(f.prev.next||f.parent.firstChild,g.next.prev||g.parent.lastChild),this.insertAfter(g.next.prev||g.parent.lastChild),this.root.selectionChanged()},a.selectLeft=function(){e(this);if(this.selection)if(this.selection.first===this.next)this.prev?this.hopLeft().selection.extendLeft():this.parent!==this.root&&this.insertBefore(this.parent.parent).selection.levelUp();else{this.hopLeft();if(this.selection.first===this.selection.last){this.clearSelection().show();return}this.selection.retractLeft()}else{if(this.prev)this.hopLeft();else{if(this.parent===this.root)return;this.insertBefore(this.parent.parent)}this.hide().selection=cb(this.next)}this.root.selectionChanged()},a.selectRight=function(){e(this);if(this.selection)if(this.selection.last===this.prev)this.next?this.hopRight().selection.extendRight():this.parent!==this.root&&this.insertAfter(this.parent.parent).selection.levelUp();else{this.hopRight();if(this.selection.first===this.selection.last){this.clearSelection().show();return}this.selection.retractRight()}else{if(this.next)this.hopRight();else{if(this.parent===this.root)return;this.insertAfter(this.parent.parent)}this.hide().selection=cb(this.prev)}this.root.selectionChanged()},a.prepareMove=function(){return e(this),this.show().clearSelection()},a.prepareEdit=function(){return e(this),this.show().deleteSelection()},a.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.root.selectionChanged()),this},a.deleteSelection=function(){return this.selection?(this.prev=this.selection.first.prev,this.next=this.selection.last.next,this.selection.remove(),this.root.selectionChanged(),delete this.selection):!1}}),cb=b(l,function(a,b){a.init=function(){var a=this;b.init.apply(a,arguments),a.jQwrap(a.jQ)},a.jQwrap=function(a){this.jQ=a.wrapAll('<span class="selection"></span>').parent()},a.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),b.adopt.apply(this,arguments)},a.clear=function(){return this.jQ.replaceWith(this.jQ.children()),this},a.levelUp=function(){var a=this,b=a.first=a.last=a.last.parent.parent;return a.clear().jQwrap(b.jQ),a},a.extendLeft=function(){this.first=this.first.prev,this.first.jQ.prependTo(this.jQ)},a.extendRight=function(){this.last=this.last.next,this.last.jQ.appendTo(this.jQ)},a.retractRight=function(){this.first.jQ.insertBefore(this.jQ),this.first=this.first.next},a.retractLeft=function(){this.last.jQ.insertAfter(this.jQ),this.last=this.last.prev}}),db.fn.mathquill=function(b,c){var d,e,f,g,i,j,k,l,n,p;switch(b){case"focus":case"blur":return this.each(function(){var a=db(this).attr(fb),c=a&&h[a];c&&c.textarea&&c.textarea.children().trigger(b)});case"onKey":case"onText":return this.each(function(){var a=db(this).attr(fb),d=a&&h[a],e=d&&d.cursor;e&&(e.parent.bubble(b,c,{preventDefault:jb}),d.blurred&&e.hide().parent.blur())});case"redraw":return this.each(function(){var a=db(this).attr(fb),b=a&&h[a];b&&function c(a){a.eachChild(c),a.redraw&&a.redraw()}(b)});case"revert":return this.each(function(){var a=db(this).attr(fb),b=a&&h[a];b&&b.revert&&b.revert()});case"sliderLatex":return this.each(function(){var a=db(this).attr(fb),b=a&&h[a];b&&(k=b&&b.cursor,k&&k.clearSelection(),b.renderSliderLatex(c),b.triggerSpecialEvent("render"))});case"latex":if(arguments.length>1)return this.each(function(){var a=db(this).attr(fb),b=a&&h[a];b&&(k=b&&b.cursor,k&&k.clearSelection(),b.renderLatex(c),b.triggerSpecialEvent("render"))});return d=db(this).attr(fb),e=d&&h[d],e&&e.latex();case"text":return d=db(this).attr(fb),e=d&&h[d],e&&e.text();case"html":return this.children(":last").html().replace(/ ?hasCursor|hasCursor /,"").replace(/ class=(""|(?= |>))/g,"").replace(/<span class="?cursor( blink)?"?>.?<\/span>/i,"");case"write":if(arguments.length>1)return this.each(function(){var a=db(this).attr(fb),b=a&&h[a],d=b&&b.cursor;d&&(d.writeLatex(c),b.blurred&&d.hide().parent.blur())});case"cmd":if(arguments.length>1)return this.each(function(){var a,b=db(this).attr(fb),d=b&&h[b],e=d&&d.cursor;e&&(/^\\[a-z]+$/i.test(c)?(a=e.selection,a&&(e.prev=a.first.prev,e.next=a.last.next,delete e.selection),e.insertCmd(c.slice(1),a)):e.insertCh(c),d.blurred&&e.hide().parent.blur())});case"touchtap":return f=arguments[1],g=arguments[2],i=arguments[3],this.each(function(){var a,b=db(this).attr(fb),c=b&&h[b],d=c&&c.cursor;d&&f!==d.handle[0]&&(a=c.blurred,c.textarea.children().focus(),d.seek(nb(g,i,c),g,i,ob(),!0),a||d.showHandle())});case"ignoreNextMousedown":return j=arguments[1],this.each(function(){var b=db(this).attr(fb),c=b&&h[b];c&&(c.ignoreMousedownTimeout=setTimeout(function(){c.ignoreMousedownTimeout=a},j))});case"moveStart":d=db(this).attr(fb),e=d&&h[d],e&&e.cursor&&e.cursor.prependTo(e);break;case"moveEnd":d=db(this).attr(fb),e=d&&h[d],e&&e.cursor&&e.cursor.appendTo(e);break;case"isAtStart":d=db(this).attr(fb),e=d&&h[d],k=e&&e.cursor;if(k)return k.parent===k.root&&!k.prev;break;case"isAtEnd":d=db(this).attr(fb),e=d&&h[d],k=e&&e.cursor;if(k)return k.parent===k.root&&!k.next;break;case"selection":d=db(this).attr(fb),e=d&&h[d],k=e&&e.cursor;if(!k)return;return k.selection?"$"+k.selection.latex()+"$":"";case"clearSelection":return this.each(function(){var a=db(this).attr(fb),b=a&&h[a],c=b&&b.cursor;c&&(c.clearSelection(),b.blurred&&c.hide().parent.blur())});default:return l=b==="textbox",n=l||b==="editable",p=l?o:m,this.each(function(){mb(db(this),p(),l,n)})}},db(function(){db(".mathquill-editable:not(.mathquill-rendered-math)").mathquill("editable"),db(".mathquill-textbox:not(.mathquill-rendered-math)").mathquill("textbox"),db(".mathquill-embedded-latex").mathquill()})}(),define("mathquill",function(){}),define("template!expression_item",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+="",renderShell?__p+="\n\n<div class=\"do-not-blur expressionitem shell\">\n  <div class='shell'></div>\n</div>\n\n":__p+='\n\n<div class="do-not-blur expressionitem">\n  <div class=\'fade-container\'>\n\n    <div class="fadeout-left"></div>\n  \n    <span class="main">\n      <span class="transient-mathquill"></span>\n      <span class="template-mathquill"></span>\n    </span>\n\n    <span class="fadeout"></span>\n    <i class="icon-remove top-level-delete action-delete" handleEvent="true"></i>\n\n    <div class="template-bottom"></div>\n  </div>\n\n  <span class="tab action-drag action-icon-touch"\n        handleevent="true"\n        tapboundary="true"\n        disablescroll="true"\n  >\n    <span class="num variable-index"></span>\n    <span class="tab-interior action-icon-mouse">\n      <span class="template-expricon"></span>\n    </span>\n  </span>\n\n\n  <span class="exp-actions">\n    <span class="graphic" handleEvent="true"></span>\n    <nobr>\n      <span class="action-delete delete-btn tooltip" handleEvent="true" tooltip="'+t("Delete")+'"><i class=\'icon-remove\'></i></span>\n      <span class="action-duplicate duplicate-btn tooltip" handleEvent="true" tooltip="'+t("Duplicate")+'"><i class=\'icon-duplicate\'></i></span>\n      <span class="action-createtable tooltip" tooltip="'+t("Convert to Table")+'" handleEvent="true">\n        <i class=\'icon-table\'></i>\n      </span>\n    </nobr>\n  </span>\n</div>\n\n',__p+="\n";return __p}}),define("expressions/abstractitem_view",["require","pjs","jquery","lib/underscore_view","undoredo"],function(a){var b=a("pjs"),c=a("jquery"),d=a("lib/underscore_view"),e=a("undoredo"),f=b(d,function(a,b){a.init=function(a,c){b.init.call(this),this.model=a,this.listView=c,this.model.selected&&(this.model.renderShell=!1),this.model.observe("index.itemview",this.renderIndex.bind(this)),this.model.observe("selected.itemview",this.renderSelected.bind(this)),this.model.observe("renderShell.itemview",this.rerender.bind(this)),this.model.observe("folder.itemview",this.renderFolder.bind(this)),this.model.observe("inCollapsedFolder.itemview",this.renderCollapsedFolder.bind(this))},a.onProjectorModeChange=function(){},a.destruct=function(){this.model.unobserve(".itemview"),this.setProperty("transient",!1)},a.getTemplateParams=function(){return{renderShell:this.model.renderShell,inCollapsedFolder:this.model.inCollapsedFolder}},a.renderIndex=function(){var a=this.model.index;this.$().attr("index",a),this.$(".variable-index").text(a+1)},a.renderFolder=function(){this.$().toggleClass("inFolder",!!this.model.folder)},a.renderCollapsedFolder=function(){this.$().toggleClass("inCollapsedFolder",!!this.model.inCollapsedFolder),this.model.inCollapsedFolder||this.$(".mathquill-rendered-math").mathquill("redraw")},a.renderSelected=function(){this.model.selected&&this.model.renderShell&&this.model.setProperty("renderShell",!1),this.$().toggleClass("selected",!!this.model.selected)},a.didInsertElement=function(){b.didInsertElement.call(this);var a=this;this.$().on("tap tapstart",function(b){if(b.type==="tap"&&b.device==="mouse")return;if(b.type==="tapstart"&&b.device==="touch")return;a.onMouseSelect(b)}),this.$(".action-drag").on("tapstart",this.onDragPending.bind(this)),this.$(".action-delete").on("tap",this.onDelete.bind(this)),this.$().attr("expr-id",this.model.id),this.renderIndex(),this.renderSelected(),this.renderFolder(),this.renderCollapsedFolder()},a.triggerDelete=function(){},a.triggerEnterPressed=function(){},a.triggerUpPressed=function(){},a.triggerDownPressed=function(){},a.triggerBackspacePressed=function(){},a.triggerDelPressed=function(){},a.onMouseSelect=function(){},a.sendTapToMathQuill=function(a,b){a.device==="mouse"&&a.preventDefault();if(a.device==="mouse"){if(c.contains(b[0],a.target))return;var d=c.event.fix(a.originalEvent);b.triggerHandler(d)}else{var e=a.originalEvent.changedTouches[0];b.mathquill("touchtap",e.target,e.clientX,e.clientY).mathquill("ignoreNextMousedown",1e3)}},a.onDelete=function(){this.triggerDelete()},a.convertTo=function(a,b){var c=a(b),d=this.model.index,f=this.model.list,g=this.model.folder;return c.setProperty("list",f),e.oneTransaction(function(){f.removeItemAt(d),f.insertItemAt(d,c),g&&g.addItem(c)}),c},a.getBounds=function(){var a=this.$(),b=a.offset();if(!b)return null;var c=b.top,d=a.height();return{top:c,bottom:c+d}},a.allowDragDrop=function(){return!0},a.onDragPending=function(a){c(document.activeElement).blur();if(!this.allowDragDrop())return;var b=this;this.mouseMovedTo=null;var d=setTimeout(function(){c(document).off(".dragpending"),b.onDragStart(a)},500);c(document).on("tapmove.dragpending",function(e){b.mouseMovedTo=e.touches[0];var f=a.touches[0].x-b.mouseMovedTo.x,g=a.touches[0].y-b.mouseMovedTo.y;Math.sqrt(f*f+g*g)>3&&(clearTimeout(d),c(document).off(".dragpending"),b.onDragStart(a))}),c(document).on("tapend.dragpending",function(a){clearTimeout(d),c(document).off(".dragpending")})},a.onDragStart=function(a){if(!this.allowDragDrop())return;this.listView.dragdrop_expressions.start(a,this),this.mouseMovedTo&&this.listView.dragdrop_expressions.drag(this.mouseMovedTo.x,this.mouseMovedTo.y)},a.hideContextMenu=function(){window.opened_options_menu&&window.opened_options_menu.hideOptions()},a.processMissedKeyEvent=function(a){},a.addFocus=function(a){},a.isFocused=function(){return!1}});return f}),define("expressions/expression_view",["require","jquery","pjs","config","./expression_icon_view","expressions/evaluation","expressions/domain_view","expressions/slider_view","expressions/promptslider_view","./expression","graphing/columnmode","main/toast","./text","./table","mathquill","lib/keys","undoredo","lib/track_feature","template!expression_item","expressions/abstractitem_view"],function(a){var b,c,d,e,f,g,h=a("jquery"),i=a("pjs"),j=a("config"),k=a("./expression_icon_view"),l=a("expressions/evaluation"),m=a("expressions/domain_view"),n=a("expressions/slider_view"),o=a("expressions/promptslider_view"),p=a("./expression"),q=a("graphing/columnmode"),r=a("main/toast"),s=a("./text"),t=a("./table");return a("mathquill"),b=a("lib/keys"),c=a("undoredo"),d=a("lib/track_feature"),e=a("template!expression_item"),f=a("expressions/abstractitem_view"),g=i(f,function(a,f){a.template=e,a.init=function(a,b){f.init.call(this,a,b),this.model.observe("formula.exprview",this.onFormulaChange.bind(this)),this.model.observe("selected.exprview",this.onSelectedChange.bind(this)),this.model.observe("latex.exprview",this.onLatexChange.bind(this)),this.model.observe("dependent.exprview",this.renderDependent.bind(this)),this.model.observe("isTableable.exprview",this.renderIsTableable.bind(this)),this.observe("shouldExpand",this.observeShouldExpand.bind(this)),this.observe("doAnimate",this.renderDoAnimate.bind(this)),this.observe("expanded",this.renderExpanded.bind(this))},a.renderIsTableable=function(){this.$(".action-createtable").toggleClass("disabled",!this.model.isTableable)},a.destruct=function(){f.destruct.call(this),this.model.unobserve(".exprview"),this.iconView&&(this.iconView.remove(),this.iconView=null),this.sliderView&&(this.sliderView.remove(),this.sliderView=null),this.promptSliderView&&(this.promptSliderView.remove(),this.promptSliderView=null),this.domainView&&(this.domainView.remove(),this.domainView=null),this.evaluationView&&(this.evaluationView.remove(),this.evaluationView=null)},a.renderExpanded=function(){this.$().toggleClass("expanded",!!this.expanded)},a.renderDoAnimate=function(){this.$().toggleClass("do-animate",!!this.doAnimate)},a.onLatexChange=function(){if(this.sliderView&&this.sliderView.slider.transient){this.updateTransientValue();return}var a=this.model.latex;if(a==='"'||a==="'"){this.convertTo(s,{selected:!0}),this.listView.getSelectedView().addFocus();return}this.listView.onLatexChange(a),this.updateMathquill()},a.updateMathquill=function(){if(!this.mathquill)return;var a=this.model.latex;a!==undefined&&this.mathquill.mathquill("latex")!==a&&this.mathquill.mathquill("latex",a)},a.updateTransientValue=function(){this.$transientValue[0].innerHTML=this.model.slider.computeSnappedValue(this.model.slider.value).toString().replace("-",'<span class="unary-operator">−</span>')},a.createIconView=function(){return k(this)},a.createSliderView=function(){return n(this.model.slider,this)},a.createPromptSliderView=function(){return o(this)},a.createDomainView=function(){return m(this.model.domain)},a.createEvaluationView=function(){return l(this)},a.onFormulaChange=function(){if(this.model.renderShell)return;var a=this.model.formula,b=a.is_slidable;this.sliderView&&!b?(this.sliderView.slider.unobserve(".expressionView"),this.sliderView.remove(),this.sliderView=null,this.$().removeClass("hasSlider")):!this.sliderView&&b&&(this.sliderView=this.createSliderView(),this.sliderView&&(this.sliderView.appendTo(this.$(".template-bottom")),this.sliderView.setProperty("dependentLabel",this.getDependentLabel()),this.$().addClass("hasSlider"),this.sliderView.slider.observe("transient.expressionView",this.updateTransient.bind(this))));var c=a.variables.length>0;this.promptSliderView&&!c?(this.promptSliderView.remove(),this.promptSliderView=null):!this.promptSliderView&&c&&(this.promptSliderView=this.createPromptSliderView(),this.promptSliderView&&this.promptSliderView.appendTo(this.$(".template-bottom")));var d=a.is_parametric;this.domainView&&!d?(this.domainView.remove(),this.domainView=null,this.$().removeClass("hasDomain")):!this.domainView&&d&&(this.domainView=this.createDomainView(),this.domainView&&(this.domainView.appendTo(this.$(".template-bottom")),this.$().addClass("hasDomain")));var e=a.is_evaluable;this.evaluationView&&!e?(this.evaluationView.remove(),this.evaluationView=null):!this.evaluationView&&e&&(this.evaluationView=this.createEvaluationView(),this.evaluationView&&(this.evaluationView.appendTo(this.$(".template-bottom")),this.$().addClass("hasEvaluation"),this.evaluationView.setProperty("dependentLabel",this.getDependentLabel()))),this.sliderView&&!this.sliderView.slider.transient&&this.model.slider.setProperty("value",a.simple_constant),this.promptSliderView&&this.promptSliderView.setProperty("variables",a.variables),this.evaluationView&&this.evaluationView.setProperty("evaluations",a.zero_values);var f=!!(this.evaluationView||this.promptSliderView||this.sliderView||this.domainView);this.setProperty("shouldExpand",f)},a.renderDependent=function(){this.sliderView&&this.sliderView.setProperty("dependentLabel",this.getDependentLabel()),this.evaluationView&&this.evaluationView.setProperty("dependentLabel",this.getDependentLabel())},a.didInsertElement=function(){f.didInsertElement.call(this);if(this.model.renderShell)return;this.mathquill=this.$(".template-mathquill").mathquill("editable"),this.$transientLhs=this.$(".transient-mathquill").mathquill("editable"),this.$transientLhs.hide(),this.$transientValue=h("<span>"),this.mathquill.on("render upPressed downPressed enterPressed backspacePressed delPressed keydown focusin focus",this.onMathquillEvent.bind(this)),this.$transientLhs.on("tapstart",this.onSelectTransient.bind(this)),this.mathquill.mathquill("latex",this.model.latex||""),this.iconView=this.createIconView(),this.iconView&&this.iconView.replace(this.$(".template-expricon")),this.$(".action-duplicate").on("tap",this.onDuplicateWithoutFocus.bind(this)),this.$(".action-createtable").on("tap",this.onCreateTable.bind(this)),this.renderDoAnimate(),this.renderExpanded(),this.renderIsTableable(),this.onFormulaChange()},a.onSelectedChange=function(){!this.model.selected&&this.mathquill&&this.mathquill.mathquill("clearSelection").mathquill("blur")},a.onSelectTransient=function(){this.stopTransient(),this.mathquill.mathquill("focus")},a.onMathquillEvent=function(a){switch(a.type){case"render":this.model.setProperty("latex",this.mathquill.mathquill("latex"));return;case"focus":case"focusin":this.sliderView&&this.sliderView.slider.setProperty("isPlaying",!1),this.model.setProperty("selected",!0);return;case"upPressed":this.triggerUpPressed();return;case"downPressed":this.triggerDownPressed();return;case"enterPressed":this.triggerEnterPressed();return;case"backspacePressed":if(!this.model.isEmpty())return;this.triggerBackspacePressed();return;case"delPressed":if(!this.model.isEmpty())return;this.triggerDelPressed();return;case"keydown":b.lookup(a)===b.ESCAPE&&h(document.activeElement).blur();return}},a.createSliders=function(a){var b=[];for(var d=0;d<a.length;d++)b.push({latex:a[d]+"=1",sliderMin:-10,sliderMax:10,userRequestedGraphing:"never"});var e=this.model.index,f=this.model.folder,g=e+1,h=this.model.list;c.addTransaction({type:c.CAUSE_OF_CHANGE,undo:function(){for(var b=0;b<a.length;b++)h.removeItemAt(g)},redo:function(){for(var a=b.length-1;a>=0;a--){var c=p(b[a],h);b[a].id=c.id,h.insertItemAt(g,c),f&&f.addItem(c)}}}),this.tempDisableAnimate()},a.onDuplicate=function(){var a=this.onDuplicateWithoutFocus(),b=this.listView.getItemView(a.id);b.addFocus()},a.onDuplicateWithoutFocus=function(){var a=this.model.index,b=this.model.getState();b.selected=!1,delete b.id;var c=p(b,this.model.list);return this.model.list.insertItemAt(a+1,c),c},a.onMouseSelect=function(a){if(this.listView.editListMode)return;if(a.wasHandled())return;a.handle(),this.model.setProperty("selected",!0),this.sendTapToMathQuill(a,this.mathquill)},a.getDependentLabel=function(){var a=this.model.dependent;return a?(a.match(/(.*)_(.+)/)&&(a=a.replace(/(.*)_(.+)/,"$1_{$2}")),a=h("<span>"+a+"</span>").mathquill("editable").mathquill("html"),a="<span class='mathquill-rendered-math'>"+a+"</span>",a):""},a.tempDisableAnimate=function(){var a=this;a.setProperty("doAnimate",!1),clearTimeout(a.restoreAnimationTimeout),a.restoreAnimationTimeout=setTimeout(function(){a.setProperty("doAnimate",!0)},500)},a.observeShouldExpand=function(){var a=this;clearTimeout(a.animateTimeout),this.doAnimate?a.animateTimeout=setTimeout(function(){a.setProperty("expanded",a.shouldExpand)},500):a.setProperty("expanded",a.shouldExpand)};var g=function(a){return a.replace(RegExp("=[^=]+$"),"=")};a.startTransient=function(){this.setProperty("transient",!0),this.updateTransientValue(),this.$transientLhs.show(),this.mathquill.hide(),this.$transientLhs.mathquill("latex",g(this.model.latex)),this.$transientLhs.children(".mathquill-root-block").append(this.$transientValue)},a.stopTransient=function(){this.setProperty("transient",!1),this.$transientValue.remove(),this.$transientLhs.hide(),this.mathquill.show(),this.updateMathquill()},a.updateTransient=function(){this.sliderView.slider.transient?this.startTransient():this.stopTransient()},a.isFocused=function(){return h(document.activeElement).closest(this.mathquill).length!==0},a.addFocus=function(a){if(j.get("no_focus"))return;if(!this.mathquill)return;this.mathquill.mathquill("focus"),a==="start"?this.mathquill.mathquill("moveStart"):a==="end"&&this.mathquill.mathquill("moveEnd")},a.onCreateTable=function(){var a=this.model.formula;d.use("convert to table");if(!this.model.isTableable)return;var b=a.table_info,e=this.model.index,f={selected:!0},g=q.POINTS_AND_LINES
;if(a.is_point_list||this.model.userRequestedGraphing==="never")g=q.POINTS;var h,i=[],j=[];if(b.values)for(h=0;h<b.values.length;h++)i.push(b.values[h][0]),j.push(b.values[h][1]);else for(h=-2;h<=2;h++)i.push(h),j.push("");f.columns=[{latex:b.independent_variable,values:i},{latex:b.dependent_column,color:this.model.color,hidden:!1,columnMode:g,values:j}];var k=this.model.list,l=this.listView;l.setProperty("editListMode",!1),c.oneTransaction(function(){b.by_reference||(k.removeItemAt(e),e--);var a=t(f,k);k.insertItemAt(e+1,a)}),r.show("Table created.",function(){l.setProperty("editListMode",!0)})}}),g}),define("template!text",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+="",renderShell?__p+="\n\n<div class=\"do-not-blur expressionitem expressiontext shell\">\n  <div class='shell'></div>\n</div>\n\n":__p+='\n\n<div class="do-not-blur expressiontext expressionitem">\n  <div class=\'fade-container\'>\n\n    <span class="main">\n      <textarea class="do-blur" placeholder="'+t("enter some text...")+'"></textarea>\n      <div class="displayTextarea"></div>\n    </span>\n    <i class="icon-remove top-level-delete action-delete" handleEvent="true"></i>\n\n  </div>\n\n  <span class="tab action-drag"\n        handleevent="true"\n        tapboundary="true"\n        disablescroll="true"\n  >\n    <span class=\'num variable-index\'></span>\n    <div class=\'tab-interior\'></div>\n    <i class=\'icon-text\'></i>\n  </span>\n\n  <span class=\'exp-actions\'>\n    <span\n      class="action-delete delete-btn tooltip"\n      handleEvent="true"\n      tooltip="'+t("Delete")+"\"\n    >\n      <i class='icon-remove'></i>\n    </span>\n  </span>\n\n</div>\n\n",__p+="";return __p}}),define("expressions/text_view",["require","jquery","pjs","./abstractitem_view","lib/keys","template!text","lib/browser"],function(a){var b=a("jquery"),c=a("pjs"),d=a("./abstractitem_view"),e=a("lib/keys"),f=a("template!text"),g=a("lib/browser"),h=c(d,function(a,c){a.template=f,a.init=function(a,b){c.init.call(this,a,b),this.model.observe("selected.textview",this.onSelectedChange.bind(this)),this.model.observe("text.textview",this.renderText.bind(this))},a.destruct=function(){this.model.unobserve(".textview")},a.onProjectorModeChange=function(){this.fitText()},a.renderText=function(){var a=this.$("textarea")[0],b=this.$(".displayTextarea");if(!a)return;a.value=this.model.text,b.html(this.model.markedUpText()),this.fitText(),this.$().toggleClass("empty",this.model.isEmpty()),setTimeout(this.fitText.bind(this),1)},a.didInsertElement=function(){c.didInsertElement.call(this);if(this.model.renderShell)return;var a=this.$("textarea"),b=this.$(".displayTextarea");if(this.renderShell)return;b.on("tap tapstart",function(a){a.target.tagName==="A"&&a.handle()}.bind(this)),a.focus(function(){this.model.setProperty("selected",!0)}.bind(this)),a.bind("keydown keypress keyup change cut paste",this.onTextareaEvent.bind(this)),this.renderText()},a.onTextareaEvent=function(a){var c=this.$("textarea")[0],d=c&&c===document.activeElement,f=d?c.value.length:0,g=d&&a.type==="keydown"?e.lookup(a):"";if(g===e.ENTER){a.preventDefault(),this.triggerEnterPressed();return}if(g===e.ESCAPE){b(document.activeElement).blur();return}if(g===e.UP){c.selectionStart===0&&c.selectionEnd===0&&(a.preventDefault(),this.triggerUpPressed());return}if(g===e.DOWN){c.selectionStart===f&&c.selectionEnd===f&&(a.preventDefault(),this.triggerDownPressed());return}if(g===e.BACKSPACE){f===0&&(a.preventDefault(),this.triggerBackspacePressed());return}if(g===e.DELETE){f===0&&(a.preventDefault(),this.triggerDelPressed());return}this.model.setProperty("text",c.value)},a.onSelectedChange=function(){var a=this.$("textarea");this.model.selected||a[0]&&a[0].blur()},a.onMouseSelect=function(a){if(a.wasHandled())return;a.handle(),this.model.setProperty("selected",!0)},a.fitText=function(){var a=this.$("textarea"),b=a[0];if(!b)return;var c=0;do c++,a.attr("rows",c);while(b.clientHeight<b.scrollHeight)},a.isFocused=function(){return b(document.activeElement).closest(this.$()).length!==0},a.addFocus=function(a){if(g.IS_IPAD&&g.IS_IN_IFRAME)return;var b=this.$("textarea")[0];if(!b)return;b.focus(),a==="end"?b.selectionStart=b.selectionEnd=b.value.length:a==="start"&&(b.selectionStart=b.selectionEnd=0)}});return h}),define("template!table_icon",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<span class="icon-box variable-errortooltip tipsy-sticky action-icon do-not-blur" \n      handleevent="true"\n      disablescroll="true"\n>\n  <span class="icon graph-icon variable-colorcss">\n    <i class=\'icon-hidden\'></i>\n	</span>\n</span>';return __p}}),define("template!table_column_menu",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+="<div class='table-column-menu options-menu'>\n  <div class='triangle'></div>\n  <div class='styles-div'>\n    <div class='title'>"+t("style:")+"</div>\n    <div>\n      <span class='columnmode-option graph-icon table-points variable-colorcss' mode=\"POINTS\"></span>\n      <span class='columnmode-option graph-icon table-lines variable-colorcss' mode=\"LINES\"></span>\n      <span class='columnmode-option graph-icon table-points-and-lines variable-colorcss' mode=\"POINTS_AND_LINES\"></span>\n    </div>\n  </div>\n  <div class='colors-div'>\n    <div class='title'>"+t("color:")+'</div>\n    <div class="template-colorsview"></div>\n  </div>\n</div>';return __p}}),define("expressions/table_column_menu_view",["require","pjs","lib/underscore_view","template!table_column_menu","jquery","./color_menu_view"],function(a){var b=a("pjs"),c=a("lib/underscore_view"),d=a("template!table_column_menu"),e=a("jquery"),f=a("./color_menu_view"),g=b(c,function(a,b){a.template=d,a.init=function(a,c){b.init.call(this),this.column=c,this.parentView=a,this.column.observe("color.columnmenuview",this.renderColorCSS.bind(this)),this.column.observe("columnMode.columnmenuview",this.renderSelectedColumnMode.bind(this)),this.column.observe("shouldGraph.columnmenuview",this.renderSelectedColumnMode.bind(this))},a.destruct=function(){this.column.unobserve(".columnmenuview")},a.renderColorCSS=function(){var a=this.column.color;this.$(".variable-colorcss").css({"border-color":a,"background-color":a})},a.renderSelectedColumnMode=function(){this.$(".columnmode-option").removeClass("selected");if(this.column.shouldGraph){var a=this.column.columnMode;this.$('.columnmode-option[mode="'+a+'"]').addClass("selected")}},a.didInsertElement=function(){this.$().on("tap tapstart",".columnmode-option",this.onSelectColumnMode.bind(this)),this.renderColorCSS(),this.renderSelectedColumnMode();var a=f(this.column);a.replace(this.$(".template-colorsview"))},a.onSelectColumnMode=function(a){if(a.type==="tap"&&a.device==="mouse")return;if(a.type==="tapstart"&&a.device==="touch")return;var b=e(a.target).closest(".columnmode-option").attr("mode");if(!this.column.hidden&&this.column.columnMode===b){this.column.setProperty("hidden",!0);return}this.column.setProperty("columnMode",b),this.column.setProperty("hidden",!1);var c=this.column.table.folder;c&&c.setProperty("hidden",!1)}});return g}),define("expressions/table_icon_view",["require","jquery","./abstract_icon","pjs","template!table_icon","graphing/columnmode","./table_column_menu_view"],function(a){var b=a("jquery"),c=a("./abstract_icon"),d=a("pjs"),e=a("template!table_icon"),f=a("graphing/columnmode"),g=a("./table_column_menu_view"),h=d(c,function(a,c){a.template=e,a.init=function(a){c.init.call(this,a),this.column=this.model,this.listView=a.tableView.listView,this.column.observe("color.iconview",this.renderColorCSS.bind(this)),this.column.observe("error.iconview",this.onDisplayChange.bind(this)),this.column.observe("columnMode.iconview",this.onDisplayChange.bind(this)),this.column.observe("shouldGraph.iconview",this.onDisplayChange.bind(this))},a.destruct=function(){c.destruct.call(this),this.column.unobserve(".iconview")},a.renderErrorShown=function(){this.$(".icon").toggleClass("error",!!this.errorShown),this.$().closest(".cell").toggleClass("error",!!this.errorShown)},a.renderColorCSS=function(){this.$(".variable-colorcss").css("border-color",this.column.color),this.$(".variable-colorcss").css("background",this.column.color)},a.toggleGraphShown=function(){if(!this.column.isGraphable)return;if(this.errorShown)return;if(this.model.table.folder&&this.model.table.folder.hidden){this.model.table.folder.setProperty("hidden",!1);return}this.column.setProperty("hidden",!this.column.hidden)},a.didInsertElement=function(){function d(b){if(b.wasHandled("dragdrop"))return;if(b.wasLongheld())return;if(a.optionsShown){a.hideOptions();return}a.listView.editListMode?a.toggleOptions():a.toggleGraphShown()}function e(b){if(a.optionsShown)return;a.toggleOptions()}function f(c){if(a.optionsShown)return;if(c.touches.length!==1)return;b(document).on("tapend.dragdrop tapcancel.dragdrop",function(){b(document).off(".dragdrop")}),b(document).on("tapmove.dragdrop",function(d){b(document).off(".dragdrop"),d.touches.length===1&&!d.wasLongheld()&&a.listView.dragdrop_columns.start(c,a.parentView)})}c.didInsertElement.call(this);var a=this;this.$(".action-icon").on("tap",d),this.$(".action-icon").on("longhold",e),this.$(".action-icon").on("tapstart",f),this.renderColorCSS(),this.onDisplayChange(),this.$icon=this.$(".icon")},a.createOptionsMenuView=function(){var a=g(this,this.column);a.appendTo("#main");var b=this.$(".icon-box"),c=b.offset();return a.$().css({position:"absolute",top:c.top+"px",left:c.left+"px",display:"block"}),a},a.onDisplayChange=function(){c.onDisplayChange.call(this);if(!this.$icon)return;var a=this.column.shouldGraph,b=this.column.columnMode,d=this.column.isGraphable,e="";this.error||!d?e="":a?b===f.POINTS?e="table-points":b===f.LINES?e="table-lines":b===f.POINTS_AND_LINES&&(e="table-points-and-lines"):e="graph-hidden";if(this.rendered_icon_class===e)return;this.rendered_icon_class&&this.$icon.removeClass(this.rendered_icon_class),this.rendered_icon_class=e,e&&this.$icon.addClass(e)}});return h}),define("template!table",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+="",renderShell?__p+="\n\n<div class=\"expressionitem expressiontable shell\">\n  <div class='shell'></div>\n</div>\n\n":(__p+='\n\n<div class="expressionitem expressiontable">\n    \n  <div class=\'fade-container disable-horizontal-scroll-to-cursor\'>\n    \n    <span class="main">\n      <div class="tabledata">\n           \n        ',_.each(columns,function(){__p+='\n          <div class="column">\n             \n            ',print(templates.table_cell_header()),_.each(columns[0].cells,function(){print(templates.table_cell_body())}),__p+="\n        \n          </div>\n        "}),__p+="\n\n      </div>\n    </span>\n    \n    ",__p+='\n    <span class="fadeout"></span>\n    <i class="icon-remove top-level-delete action-delete" handleEvent="true"></i>\n  </div>\n  \n  <span class="tab action-drag"\n        handleevent="true"\n        tapboundary="true"\n        disablescroll="true"\n  >\n    <span class=\'num variable-index\'></span>\n    <div class=\'tab-interior\'></div>\n  </span>\n\n  <span class=\'exp-actions\'>\n\n    <span\n      class="action-delete delete-btn tooltip"\n      handleEvent="true"\n      tooltip="'+t("Delete")+"\"\n    >\n      <i class='icon-remove'></i></span>\n    </span>  \n</div>\n\n"),__p+="\n";return __p}}),define("template!table_cell_body",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div class="non-editable empty cell">\n  <div class="inner-border"></div>\n  <span class="error-indicator do-not-blur tipsy-sticky" handleevent="true">\n  </span>\n\n  <span class=\'mathquill-rendered-math\'></span>\n  <div class="empty-line"></div>\n</div>\n';return __p}}),define("template!table_cell_header",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div class="editable cell header">\n  <div class="inner-border"></div>\n  <span class="template-icon"></span>\n  <span class="mathquill-rendered-math"></span>\n  <span class="fadeout"></span>\n  <span class="action-removecolumn icon-remove do-not-blur" handleevent="true"></span>\n  <div class="empty-line"></div>\n</div>\n';return __p}}),define("expressions/table_view",["require","jquery","underscore","pjs","lib/underscore_view","undoredo","mathquill","lib/keys","./abstractitem_view","./table_icon_view","template!table","template!table_cell_body","template!table_cell_header"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m=a("jquery"),n=a("underscore"),o=a("pjs"),p=a("lib/underscore_view"),q=a("undoredo");return a("mathquill"),b=a("lib/keys"),c=a("./abstractitem_view"),d=a("./table_icon_view"),e={},e.table=a("template!table"),e.table_cell_body=a("template!table_cell_body"),e.table_cell_header=a("template!table_cell_header"),f=o(c,function(a,c){a.template=e.table,a.init=function(a,b){c.init.call(this,a,b),this.model.triggerRowRemoved=this.onRowRemoved.bind(this),this.model.triggerRowAdded=this.onRowAdded.bind(this),this.model.triggerColumnAdded=this.onColumnAdded.bind(this),this.model.triggerColumnRemoved=this.onColumnRemoved.bind(this),this.model.triggerColumnMoved=this.onColumnMoved.bind(this),this.model.observe("selectedCell.tableview",this.onSelectedCellChange.bind(this))},a.destruct=function(){this.model.unobserve(".tableview")},a.getTemplateParams=function(){return{columns:this.model.columns,renderShell:this.model.renderShell,templates:e}},a.onRowRemoved=function(a){if(!this.columnViews)return;var b=a+1;for(var c=0;c<this.columnViews.length;c++){var d=this.columnViews[c].splice(b,1)[0];d.remove()}this.model.notifyPropertyChange("selectedCell")},a.onRowAdded=function(a){if(!this.columnViews)return;var b=a+1,c,d,e=this.model.columns,f=this.columnViews.length,g=this.$(".column");for(var h=0;h<f;h++)c=e[h].cells[a],d=l(c,this),d.insertAfter(g.eq(h).find(".cell:nth-of-type("+b+")")),this.columnViews[h].splice(b,0,d);this.syncRowHeight(b),this.listView.model.updateDrawOrder(),this.model.notifyPropertyChange("selectedCell")},a.onColumnRemoved=function(a){if(!this.columnViews)return;var b=this.columnViews.splice(a,1)[0];for(var c=0;c<b.length;c++)b[c].remove();this.$(".column:nth-child("+(a+1)+")").remove();var d=this.selectedCell;d&&d.column>a?this.setProperty("selectedCell",{row:d.row,column:d.column-1}):d&&d.column===a&&(this.columns.length<=a?this.selectCell(d.row,d.column-1):this.selectCell(d.row,d.column)),this.syncAllRowHeights(),this.listView.model.updateDrawOrder(),this.model.notifyPropertyChange("selectedCell")},a.onColumnAdded=function(a){if(!this.columnViews)return;var b=this.model.columns[a],c=b.cells,d,e=[];e.push(i(b,this));for(d=0;d<c.length-1;d++)e.push(l(c[d],this));e.push(k(c[d],this)),this.columnViews.splice(a,0,e);var f=m('<div class="column"></div>').insertAfter(this.$(".column:nth-child("+a+")"));e.forEach(function(a,b){a.appendTo(f)}),this.syncAllRowHeights(),this.listView.model.updateDrawOrder(),this.model.notifyPropertyChange("selectedCell")},a.onColumnMoved=function(a,b){if(!this.columnViews)return;var c=this.columnViews.splice(a,1)[0];this.columnViews.splice(b,0,c);var d=this.$(".column:nth-child("+(a+1)+")").detach();d.insertAfter(this.$(".column:nth-child("+b+")"))},a.onProjectorModeChange=function(){for(var a=0;a<this.columnViews.length;a++){var b=this.columnViews[a];for(var c=0;c<b.length;c++)b[c].collapseHeight()}this.syncAllRowHeights()},a.didInsertElement=function(){c.didInsertElement.call(this);if(this.model.renderShell)return;var a=this;this.$().on("focusin",function(){setTimeout(a.onFocusChange.bind(a),0)}),this.$().on("keydown",this.onMathQuillKeydownEvent.bind(this)),this.$().on("upPressed downPressed leftPressed rightPressed enterPressed backspacePressed delPressed",this.onMathQuillSpecialEvent.bind(this)),this.columnViews=[];var b=this.model.columns,d=b.length,e=b[0].cells.length,f,g,j,m;for(g=0;g<d;g++)j=b[g],g+1<d?m=i(j,this):m=h(j,this),m.setDomNode(this.findCell(0,g)),this.columnViews[g]=[m];var n=e;for(f=1;f<=e;f++)for(g=0;g<d;g++)j=b[g].cells[f-1],f===n?m=k(j,this):m=l(j,this),m.setDomNode(this.findCell(f,g)),this.columnViews[g].push(m);this.syncAllRowHeights(),this.onSelectedCellChange()},a.measureRowHeight=function(a){var b=0;for(var c=0;c<this.columnViews.length;c++){var d=this.columnViews[c][a];d.collapsedHeight===undefined&&d.measureHeight(),d.collapsedHeight>b&&(b=d.collapsedHeight)}return b},a.setRowHeight=function(a,b){for(var c=0;c<this.columnViews.length;c++){var d=this.columnViews[c][a];d.setHeight(b),d.setMathquillTop()}},a.syncAllRowHeights=function(){var a,b=this.columnViews[0].length,c=[];for(a=0;a<b;a++)c.push(this.measureRowHeight(a));for(a=0;a<b;a++)this.setRowHeight(a,c[a])},a.syncRowHeight=function(a){this.setRowHeight(a,this.measureRowHeight(a))},a.onSelectedCellChange=function(){if(!this.columnViews)return;this.$(".tabledata .selected").removeClass("selected");var a=this.model.selectedCell;if(a)if(a.column>=this.columnViews.length||a.row>=this.columnViews[0].length){this.model.selectedCell=null;return}if(a){var b=this.columnViews[a.column][a.row];b.$().addClass("selected"),this.model.setProperty("selected",!0)}var c=this.getCaretPosition();c&&!n.isEqual(c,a)&&document.activeElement&&document.activeElement.blur();if(a){var d=this.findCellInput(a.row,a.column)[0];this.listView.onFocusIn({target:d})}else this.listView.onFocusOut();var e=a&&a.column+1===this.model.columns.length,f=a&&a.row===this.model.columns[0].cells.length;this.$().toggleClass("no-faded-h",!!e),this.$().toggleClass("no-faded-v",!!f),this.hideContextMenu()},a.onMouseSelect=function(a){if(a.wasHandled())return;a.handle();var b=m(a.originalEvent.target).closest(".cell"),c=b.find(".mathquill-editable");if(c.length){this.sendTapToMathQuill(a,c);return}var d=m(a.target),e=d.closest(".tabledata")[0];e&&a.target===e&&(e=null);if(!e){document.activeElement&&document.activeElement.blur(),this.model.setProperty("selectedCell",null),this.model.setProperty("selected",!0);return}var f=this.getNodesCellPosition(d);this.selectCell(f.row,f.column)},a.getNodesCellPosition=function(a){var b=a.closest(".column").prevAll(".column").length,c=a.closest(".cell").prevAll(".cell").length;return{row:c,column:b}},a.getCaretPosition=function(){return this.$().find(document.activeElement).length?this.getNodesCellPosition(m(document.activeElement)):null},a.findCell=function(a,b){return this.$(".column:nth-child("+(b+1)+") .cell:nth-child("+(a+1)+")")},a.findCellInput=function(a,b){return this.findCell(a,b).find(".mathquill-rendered-math")},a.selectCell=function(a,b,c){if(a<0||b<0)return;var d=this.findCellInput(a,b);if(!d.length)return;var e={row:a,column:b};this.model.setProperty("selectedCell",e),d.hasClass("mathquill-editable")?(d.mathquill("focus"),c?d.mathquill("moveEnd"):d.triggerHandler("select_all")):m(document.activeElement).blur()},a.unfocus=function(){var a=document.activeElement;this.$().find(a).length&&a.blur()},a.processMissedKeyEvent=function(a){this.doKeyAction(b.lookup(a),a)},a.onMathQuillKeydownEvent=function(a){var c=b.lookup(a);(c===b.Tab||c===b.ESCAPE)&&this.doKeyAction(c,a)},a.onMathQuillSpecialEvent=function(a){var b=a.type,c=b.slice(0,-"Pressed".length);c=c.charAt(0).toUpperCase()+c.slice(1),this.doKeyAction(c,a)},a.doKeyAction=function(a,c){c||(c=m.Event());var d=this.model.selectedCell,e=d?d.row:-1,f=d?d.column:-1,g=this.model.columns,h=g[0].cells.length,i=g.length,j=function(a,b){a===-1?this.triggerUpPressed():a>h?this.triggerDownPressed():(b===-1?(b=i-1,a--):b===i&&(a++,b=0),this.selectCell(a,b),c.preventDefault())}.bind(this),k=function(a){if(h<=1)return;this.model.removeRow(e-1),this.selectCell(a,f),c.preventDefault()}.bind(this),l=function(a){if(f===0||i<=2)return;this.model.removeColumn(f),this.selectCell(e,a),c.preventDefault()}.bind(this);switch(a){case b.LEFT:j(e,f-1);break;case b.RIGHT:j(e,f+1);break;case b.UP:j(e-1,f);break;case b.DOWN:j(e+1,f);break;case b.ENTER:e<h?(this.model.insertRow(e,this.model.getAutofillValues(e)),this.selectCell(e+1,f)):(this.model.insertRow(e-1,this.model.getAutofillValues(e-1)),this.selectCell(e,f));break;case b.ESCAPE:m(document.activeElement).blur(),this.model.setProperty("selectedCell",null);break;case b.TAB:if(m(document.activeElement).closest(this.$()).length===0){c.preventDefault();return}break;case b.BACKSPACE:e===0?f===0?(this.triggerBackspacePressed(),q.triggerFlash()):f===i-1||f===1&&i===3?j(0,f-1):l(f-1):f!==0?j(e,f-1):e===h?j(e-1,f):k(e-1);break;case b.DELETE:e===0?f===0?(this.triggerDelPressed(),q.triggerFlash()):f<i-1&&l(f):e>=h||k(e)}},a.onFocusChange=function(){if(!this.model)return;this.model.setProperty("selectedCell",this.getCaretPosition())},a.isFocused=function(){return!!this.model.selectedCell},a.addFocus=function(a,b,c){a==="cell"?this.selectCell(b,c):a!=="end"?this.selectCell(0,0):this.selectCell(this.model.columns[0].cells.length,0)}}),g=o(p,function(a,b){a.init=function(){b.init.call(this),this.collapsedHeight=undefined,this.renderedHeight=undefined,this.mathquillTop=0},a.lookupCellPosition=function(){},a.handleHeightUpdate=function(){this.collapseHeight(),this.tableView.syncRowHeight(this.lookupCellPosition().row)},a.collapseHeight=function(){this.$().css("height",""),this.collapsedHeight=undefined,this.renderedHeight=undefined},a.measureHeight=function(){this.collapsedHeight=this.$().outerHeight(),this.renderedHeight=this.collapsedHeight},a.setHeight=function(a){this.renderedHeight!==a&&(this.renderedHeight=a,this.$().css("height",a))},a.setMathquillTop=function(){var a=this.renderedHeight-this.collapsedHeight;a!==this.mathquillTop&&(this.mathquillTop=a,this.$(".mathquill-rendered-math").css("top",a))}}),h=o(g,function(a,b){a.template=e.table_cell_header,a.init=function(a,c){b.init.call(this),this.model=a,this.tableView=c},a.lookupCellPosition=function(){return{row:0,column:this.model.index}},a.didInsertElement=function(){b.didInsertElement.call(this),this.$().addClass("right"),this.$().append('<span class="fade-right"></span>'),this.$mathquill=this.$(".mathquill-rendered-math").mathquill("editable");var a=this;this.$().on("blur focusout",".mathquill-rendered-math",function(){a.$mathquill.mathquill("clearSelection")}),this.$().on("render",".mathquill-rendered-math",function(){var b=m(this).mathquill("latex");if(!b)return;m(this).mathquill("latex","");var c=a.model.index;a.model.table.insertColumn(c,{latex:b}),a.tableView.selectCell(0,c,!0)})}}),i=o(g,function(a,b){a.template=e.table_cell_header,a.init=function(a,c){b.init.call(this),this.__renderedLatex="",this.__renderedBefore=!1,this.model=a,this.tableView=c,this.model.observe("index.headerview",this.updateIndex.bind(this)),this.model.observe("latex.headerview",this.onLatexChange.bind(this)),this.model.observe("selected.headerview",this.onSelectedChange.bind(this))},a.onSelectedChange=function(){if(this.model.selected){var a=this.tableView;if(!a)return;a.selectCell(0,this.model.index)}},a.lookupCellPosition=function(){return{row:0,column:this.model.index}},a.destruct=function(){this.model.unobserve(".headerview")},a.updateIndex=function(){this.$().attr("index",this.model.index)},a.onLatexChange=function(){if(!this.$mathquill)return;this.__renderedLatex!==this.model.latex&&(this.__renderedLatex=this.model.latex,this.$mathquill.mathquill("latex",this.model.latex)),this.__renderedBefore&&this.handleHeightUpdate(),this.__renderedBefore=!0},a.didInsertElement=function(){b.didInsertElement.call(this),this.model.index===0&&this.$().addClass("left"),this.$mathquill=this.$(".mathquill-rendered-math").mathquill("editable");var a=this;this.$().on("blur focusout",".mathquill-rendered-math",function(){a.$mathquill.mathquill("clearSelection")}),this.$().on("tap",".action-removecolumn",function(){a.model.table.removeColumn(a.model.index)}),this.$().on("render",".mathquill-rendered-math",function(){var b=a.model.latex,c=m(this).mathquill("latex");if(b===c)return;a.__renderedLatex=c,a.model.setProperty("latex",c)}),this.iconView=d(this),this.iconView.replace(this.$(".template-icon")),this.onLatexChange(),this.updateIndex()}}),j=o(g,function(a,b){a.template=e.table_cell_body,a.init=function(a,c){b.init.call(this),this.model=a,this.tableView=c,this.__renderedDisabled=!0,this.__renderedValue="",this.__renderedError="",this.__renderedBefore=!1},a.didInsertElement=function(){b.didInsertElement.call(this),this.model.column===n.first(this.model.column.table.columns)&&this.$().addClass("left"),this.model.column===n.last(this.model.column.table.columns)&&(this.$().addClass("right"),this.$().append('<span class="fade-right"></span>')),this.model===n.last(this.model.column.cells)&&(this.$().addClass("bottom"),this.$().append('<span class="fade-bottom"></span>'))},a.lookupCellPosition=function(){var a=this.model.column.cells,b=this.model;return{row:n.indexOf(a,b)+1,column:this.model.column.index}},a.onValueChange=function(){var a=this.model.getOldProperty("value"),b=this.model.value;this.$().toggleClass("empty",!b);if(!this.$mathquill)return;this.__renderedValue!==b&&(this.__renderedValue=b,this.__renderedDisabled?this.$mathquill.text(b):this.$mathquill.mathquill("latex",b));var c=(!a||isFinite(a))&&(!b||isFinite(b));this.__renderedBefore&&!c&&this.handleHeightUpdate(),this.__renderedBefore=!0},a.onDisabledChange=function(){var a=!!this.model.column.disabled;if(!this.$mathquill||this.__renderedDisabled===a)return;this.__renderedDisabled=a,this.$().toggleClass("non-editable",!!a);if(a){var b=m('<span class="mathquill-rendered-math">'+this.model.value+"</span>");this.$mathquill.replaceWith(b),this.$mathquill=b,this.mathquillTop=0}else this.$mathquill.mathquill("editable")},a.onErrorChange=function(){var a=this.model.error?this.model.error:"";if(!this.$error||this.__renderedError===a)return;this.__renderedError=a,this.$error.attr("tooltip",a),this.$().toggleClass("error",!!a)}}),k=o(j,function(a,b){a.init=function(a,c){b.init.call(this,a,c),this.model.column.observe("disabled.cellview",this.onDisabledChange.bind(this))},a.destruct=function(){this.model.column.unobserve(".cellview")},a.didInsertElement=function(){b.didInsertElement.call(this),this.$mathquill=this.$(".mathquill-rendered-math"),this.onDisabledChange();var a=this;this.$().on("blur focusout",".mathquill-rendered-math",function(){a.$mathquill.mathquill("clearSelection")}),this.$().on("render",".mathquill-rendered-math",function(){var b=m(this).mathquill("latex");if(b==="")return;m(this).mathquill("latex","");var c=a.lookupCellPosition(),d=a.model.column.table,e=[];for(var f=0;f<d.columns.length;f++)e[f]="";e[c.column]=b,d.insertRow(c.row-1,e),a.tableView.selectCell(c.row,c.column,!0)})}}),l=o(j,function(a,b){a.template=e.table_cell_body,a.init=function(a,c){b.init.call(this,a,c),this.model.observe("value.cellview",this.onValueChange.bind(this)),this.model.observe("error.cellview",this.onErrorChange.bind(this)),this.model.column.observe("disabled."+this.guid,this.onDisabledChange.bind(this))},a.destruct=function(){this.model.unobserve(".cellview"),this.model.column.unobserve("disabled."+this.guid)},a.didInsertElement=function(){b.didInsertElement.call(this),this.$error=this.$(".error-indicator"),this.$mathquill=this.$(".mathquill-rendered-math"),this.onDisabledChange(),this.onValueChange(),this.onErrorChange();var a=this;this.$().on("blur focusout",".mathquill-rendered-math",function(){a.$mathquill.mathquill("clearSelection")}),this.$().on("render",".mathquill-rendered-math",function(){function g(){var a=f.getItemById(d),b=a.columns[e.column];return b.cells[e.row-1]}var b=a.model.value,c=m(this).mathquill("latex");if(b===c)return;a.__renderedValue=c;var d=a.model.column.table.id,e=a.lookupCellPosition(),f=a.tableView.listView.model;q.addTransaction({type:q.CAUSE_OF_CHANGE,undo:function(){var a=g();a.setProperty("value",b),a.column.table.requestParse()},redo:function(){var a=g();a.setProperty("value",c),a.column.table.requestParse()}})})}}),f}),define("template!folder",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+="",renderShell?__p+='\n\n<div class="do-not-blur expressionitem expressionfolder shell">\n  <div class="shell"></div>\n</div>\n\n':__p+='\n\n<div class="do-not-blur expressionfolder expressionitem">\n  <div class="fade-container">\n\n    <span class="main">\n      <div class=\'caret-container action-toggle-folder-collapsed do-not-blur\' handleEvent="true">\n        <i class="icon-caret-down" ></i>\n      </div>\n      <textarea class="do-blur title" placeholder="'+t("untitled folder...")+'"></textarea>\n    </span>\n    <i class="icon-remove top-level-delete action-delete" handleEvent="true"></i>\n\n  </div>\n\n  <span class="tab action-drag"\n        handleEvent="true"\n        tapboundary="true"\n        disablescroll="true"\n  >\n    <span class="num variable-index"></span>\n    <div class="tab-interior">\n    <span class="action-toggle-folder-hidden graph-icon folder icon">\n      <i class="icon-hidden"></i>\n      <i class="icon-folder"></i>\n    </span>\n    </div>\n  </span>\n\n  <span class="exp-actions">\n    <span\n      class="action-delete delete-btn tooltip"\n      handleEvent="true"\n      tooltip="'+t("Delete")+"\"\n    >\n      <i class='icon-remove'></i></span>\n    </span>\n  </span>\n\n</div>\n\n",__p+="\n";return __p}}),define("expressions/folder_view",["require","pjs","jquery","lib/keys","expressions/abstractitem_view","template!folder","lib/browser"],function(a){var b=a("pjs"),c=a("jquery"),d=a("lib/keys"),e=a("expressions/abstractitem_view"),f=a("template!folder"),g=a("lib/browser"),h=b(e,function(a,b){a.template=f,a.init=function(a,c){b.init.call(this,a,c),this.model=a,a.observe("hidden.folderView",this.onHiddenChanged.bind(this)),a.observe("collapsed.folderView",this.onCollapsedChanged.bind(this)),a.observe("title.folderView",this.renderTitle.bind(this)),a.observe("selected.folderView",this.onSelectedChange.bind(this)),a.observe("count.folderView",this.onMemberIdsChange.bind(this))},a.destruct=function(){this.model.unobserve(".folderView")},a.didInsertElement=function(){b.didInsertElement.call(this);if(this.model.renderShell)return;this.$title=this.$(".title"),this.$(".action-toggle-folder-collapsed").on("tap",this.toggleCollapsed.bind(this)),this.$(".action-toggle-folder-hidden").on("tap",this.toggleHidden.bind(this)),this.$title.bind("keydown keypress keyup change cut paste",this.onTitleEvent.bind(this)),this.renderTitle(),this.onCollapsedChanged(),this.onHiddenChanged(),this.onMemberIdsChange()},a.onSelectedChange=function(){!this.selected&&this.$title&&this.$title.blur()},a.onMemberIdsChange=function(){this.$().toggleClass("has-items",this.model.count>0)},a.onTitleEvent=function(a){var b=this.$title[0],e=b&&b===document.activeElement,f=e?b.value.length:0,g=e&&a.type==="keydown"?d.lookup(a):"";if(g===d.ENTER){a.preventDefault(),this.triggerEnterPressed();return}if(g===d.ESCAPE){c(document.activeElement).blur();return}if(g===d.UP){b.selectionStart===0&&b.selectionEnd===0&&(a.preventDefault(),this.triggerUpPressed());return}if(g===d.DOWN){b.selectionStart===f&&b.selectionEnd===f&&(a.preventDefault(),this.triggerDownPressed());return}if(g===d.BACKSPACE){f===0&&(a.preventDefault(),this.triggerBackspacePressed());return}if(g===d.DELETE){f===0&&(a.preventDefault(),this.triggerDelPressed());return}this.model.setProperty("title",b.value)},a.renderTitle=function(){this.$title.attr("value",this.model.title),this.fitText()},a.onProjectorModeChange=function(){this.fitText()},a.fitText=function(){if(!this.$title)return;var a=this.$title[0],b=0;do b++,this.$title.attr("rows",b);while(a.clientHeight<a.scrollHeight)},a.onMouseSelect=function(a){if(a.wasHandled())return;a.handle(),this.model.setProperty("selected",!0)},a.toggleHidden=function(){this.model.setProperty("hidden",!this.model.hidden)},a.toggleCollapsed=function(){this.model.setProperty("collapsed",!this.model.collapsed)},a.onHiddenChanged=function(){this.$().toggleClass("hidden",!!this.model.hidden)},a.onCollapsedChanged=function(){this.$().toggleClass("collapsed",!!this.model.collapsed)},a.addFocus=function(a){if(g.IS_IPAD&&g.IS_IN_IFRAME)return;if(!this.$title)return;var b=this.$title[0];b.focus(),a==="end"?b.selectionStart=b.selectionEnd=b.value.length:a==="start"&&(b.selectionStart=b.selectionEnd=0)}});return h
}),define("template!list",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div id="exppanel-outer">\n  <div id="expression-top-bar">\n  \n    ',IS_TABLET&&(__p+="\n      <a class='hamburger-btn action-hamburger'><i class='icon-hamburger'></i></a>\n    "),__p+='\n    <a class=\'add-expression-btn action-add-expression tooltip do-not-blur\' handleEvent="true" tooltip="'+t("Add Item")+"\"><i class='icon-plus'></i><i class='icon-caret-down'></i></a>\n    \n    <a class='btn-danger action-clearall'>delete all</a>\n    <span class='center-aligned'>\n      <a class='action-undo tooltip' tooltip=\""+t("Undo (ctrl+z)")+"\"><i class='icon-undo'></i></a>\n      <a class='action-redo tooltip' tooltip=\""+t("Redo (ctrl+y)")+"\"><i class='icon-redo'></i></a>\n    </span>    \n\n    <a class='resize-list-btn action-hideexpressions do-not-blur tooltip' tooltip=\""+t("Hide List")+"\" handleEvent=\"true\"><i class='icon-hide'></i></a>\n    \n    <a \n      class='edit-list-btn action-toggleeditlistmode do-not-blur tooltip' tooltip=\""+t("Edit List")+'"\n      handleEvent="true">\n      <i class=\'icon-settings\' /></a>\n  \n  </div>\n  \n  <div class="exppanel-container">\n    <div id="exppanel" class="disable-horizontal-scroll-to-cursor">\n      <div class="expressionlist">\n        <span class="template-expressioneach"></span>\n        <div class="template-newexpression"></div>\n      </div>\n    </div>    \n  </div>\n  \n  <div id=\'show-expressions-tab\'>\n    <a class=\'resize-list-btn action-showexpressions\'>\n      <i class=\'icon-show\'></i>\n    </a>\n  </div>\n</div>\n';return __p}}),define("expressions/list_view_desktop",["require","pjs","./list_view","tipsy","./expression_view","./text_view","./table_view","./folder_view","lib/keys","template!list"],function(a){var b,c,d,e,f,g,h,i=a("pjs"),j=a("./list_view");return a("tipsy"),b=a("./expression_view"),c=a("./text_view"),d=a("./table_view"),e=a("./folder_view"),f=a("lib/keys"),g=a("template!list"),h=i(j,function(a,h){a.template=g,a.instantiateItemView=function(a){if(a.isExpression)return b(a,this);if(a.isText)return c(a,this);if(a.isTable)return d(a,this);if(a.isFolder)return e(a,this)},a.didInsertElement=function(){h.didInsertElement.call(this),this.$().tipsy({fade:"fast",title:"tooltip",wait:500,delegate:".tooltip"})},a.handleKeydown=function(a){a.target.localName==="body"&&f.lookup(a)===f.SPACEBAR&&this.toggleAllSliders()}}),h}),define("loadcss!css/keypad",function(){}),define("main/cookie",[],function(){function a(a){document.cookie=a+"= ;path=/calculator;expires=Thu, 01 Jan 1970 00:00:01 GMT"}function b(b){var c,d,e,f,g;a(b),c=encodeURIComponent(b),g=document.cookie.split(";");for(d=0;d<g.length;d++){e=g[d].substr(0,g[d].indexOf("=")),f=g[d].substr(g[d].indexOf("=")+1),e=e.replace(/^\s+|\s+$/g,"");if(e==c)return decodeURIComponent(f)}}function c(a,b,c){var d=new Date;d.setDate(d.getDate()+(c||30)),document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+"; expires="+d.toUTCString()+"; path=/"}return{getCookie:b,setCookie:c}}),define("template!keypad",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+="<div class='desmos-keypad'>\n  <div class='keys-container retracted'>\n    <div class='keys-background do-not-blur'>\n      <div class='keys'>\n\n        <div class='functions-popover popover top' popover=\"true\">\n          <div class='popover-interior'>\n            <div class='header'>\n              <table><tr>\n              ",_.each(popups.functionsPopup,function(a,b){__p+='\n                <td>\n                  <span key="'+a.tab.id+'" class="heading tappable btn btn-inverse'+(b=="trig"?" selected":"")+'">\n                    '+a.tab.html+"\n                  </span>\n                </td>\n              "}),__p+="\n              </tr></table>\n            </div>\n\n            ",_.each(popups.functionsPopup,function(a,b){var c;__p+="\n              <table class='interior-buttons' section='"+b+"'>\n                ",b=="trig"&&(__p+="\n                  <tr class='section-headings'>\n                    <td>trig</td>\n                    <td>inverse</td>\n                    <td>hyperb</td>\n                  </tr>\n                "),__p+="\n                <tr>\n\n                ",c=0,_.each(a.funcs,function(a){__p+="\n                  "+(c%3==0?"</tr><tr>":"")+"\n                  ",c++,__p+='\n                  <td>\n                    <span\n                      class="option btn tappable'+(a.aClass?" "+a.aClass:"")+" "+a.id+'-key"\n                      key="'+a.id+'"\n                    >\n                      '+a.html+"\n                    </span>\n                  </td>\n              "}),__p+="\n              </tr></table>\n            "}),__p+="\n          </div>\n          <div class='arrow'></div>\n        </div>\n\n        <canvas class=\"handwriting-area\"></canvas>\n\n        ",_.each(buttons,function(a,b){__p+='\n         <div class="'+b+'">\n           ',_.each(a,function(a){__p+='\n             <div class="row">\n               ',_.each(a.keys,function(a){__p+='<div\n                   class="cell '+(a.cellClass?a.cellClass:"")+'"\n                 >\n                   ',a.html&&(__p+='\n                     <a\n                       class="'+(a.aClass?a.aClass:"")+" "+a.id+'-key"\n                       key="'+a.id+'"\n                     >\n                       '+a.html+"\n                     </a>\n                   "),__p+="\n                 </div>"}),__p+="\n               <div style='clear:both'></div>\n             </div>\n           "}),__p+="\n         </div>\n        "}),__p+="\n        <div style='clear:both'></div>\n      </div>\n\n      ",userMinimizable&&(__p+="\n      <div class='minimize-keypad'>\n        <i class='icon-keyboard minimize-keyboard-icon'></i>\n        <i class='icon-caret-down'></i>\n      </div>\n      "),__p+="\n    </div>\n  </div>\n  \n  ",userMinimizable&&(__p+='\n    <div class="show-keypad" class="do-not-blur">\n      <i class=\'icon-keyboard maximize-keyboard-icon\'></i>\n      <i class="icon-caret-up do-not-blur"></i>\n    </div>\n  '),__p+="\n  \n</div>\n";return __p}}),define("text!data/keypad_keys.json",[],function(){return'{\n"trigFuncs":        ["sin","cos","tan","csc","sec","cot"],\n\n"oneArgFuncs":      ["ceil","floor","round","abs","ln","log","exp"],\n\n"twoArgFuncs":      ["min","max","lcm","gcd","mod", "nCr", "nPr"],\n\n"tabs":             ["trig","calc","misc"],\n\n"staticKeys": {\n  "unknown":          {"display":{"html":"?"},\n                      "action":{"cmd":"?"}},\n  "pi":               {"display":{"html":"&pi;"},\n                      "action":{"cmd":"\\\\pi"}},\n  "leftparen":        {"display":{"html":"("},\n                      "action":{"cmd":"("}},\n  "rightparen":       {"display":{"html":")"},\n                      "action":{"cmd":")"}},\n  "sqrt":             {"display":{"html":"&radic;"},\n                      "action":{"cmd":"\\\\sqrt"}},\n  "cuberoot":         {"display":{"html":"<sup>3</sup>&radic;", "noMQ": true},\n                      "action":{"custom":"cuberoot"}},\n  "lt":               {"display":{"html":"&lt;"},\n                      "action":{"cmd":"<"}},\n  "gt":               {"display":{"html":"&gt;"},\n                      "action":{"cmd":">"}},\n  "le":               {"display":{"html":"&le;"},\n                      "action":{"cmd":"\\\\le"}},\n  "ge":               {"display":{"html":"&ge;"},\n                      "action":{"cmd":"\\\\ge"}},\n\n  "squared":          {"display":{"aClass":"exponent", "html":"a^2"},\n                      "action":{"custom":"squared"}},\n\n  "exponent":         {"display":{"aClass":"exponent", "html":"a^b"},\n                      "action":{"cmd":"^"}},\n  "subscript":        {"display":{"html":"a_b"},\n                      "action":{"cmd":"_"}},\n  "fact":             {"display":{"html":"x!"},\n                      "action":{"cmd":"!"}},\n  "theta":            {"display":{"html":"&theta;"},\n                      "action":{"cmd":"\\\\theta"}},\n  "leftbrace":        {"display":{"html":"{", "noMQ":true},\n                      "action":{"cmd":"{"}},\n  "rightbrace":       {"display":{"html":"}", "noMQ":true},\n                      "action":{"cmd":"}"}},\n  "colon":            {"display":{"html":":"},\n                      "action":{"cmd":":"}},\n  "pipes":            {"display":{"html":"|a|"},\n                      "action":{"cmd":"|"}},\n  "comma":            {"display":{"html":","},\n                      "action":{"cmd":","}},\n\n  "times":            {"display":{"html":"&times;"},\n                      "action":{"cmd":"*"}},\n  "plus":             {"display":{"html":"+"},\n                      "action":{"cmd":"+"}},\n  "divide":           {"display":{"html":"&divide;"},\n                      "action":{"cmd":"/"}},\n  "minus":            {"display":{"html":"&ndash;"},\n                      "action":{"cmd":"-"}},\n  "equals":           {"display":{"html":"="},\n                      "action":{"cmd":"="}},\n  "decimal":          {"display":{"html":"."},\n                      "action":{"cmd":"."}},\n\n  "backspace":        {"display":{"aClass":"always-enabled", \n                                "html":"<span class=\\"backspace-img\\"></span><i class=\\"icon-delete\\"></i>"\n                               },\n                      "action":{"key":"Backspace"}},\n  "enter":            {"display":{"aClass":"always-enabled", "html":"ent<span>er</span>"},\n                      "action":{"key":"Enter"}},\n\n  "narrowToggleLetters":    {"display":{"aClass":"always-enabled toggle-btn", "html":"A B C"},\n                      "action":{"changeLayout": "letters"}},\n  "toggleLetters":    {"display":{"aClass":"always-enabled toggle-btn", "html":"A B C", "colspan":2},\n                      "action":{"changeLayout": "letters"}},\n  "toggleHandwriting":{"display":{"aClass":"always-enabled toggle-btn", "html":"<img src=\\"assets/img/handwriting.png\\"/>"},\n                      "action":{"changeLayout": "handwriting"}},\n  "toggleNumbers":    {"display":{"aClass":"always-enabled toggle-btn", \n                                "html":"1<span> </span>2<span> </span>3", \n                                "colspan":1\n                               },\n                      "action":{"changeLayout":"mainNumbers"}},\n\n  "popupFunctions":  {"display":{"aClass":"always-enabled toggle-btn", "html":"functions", "colspan":2},\n                      "action":{"popup": "functions"}},\n\n  "blank":            {"display":{},\n                      "action":{}},\n\n  "halfBlank":        {"display":{"colspan":0.5},\n                      "action":{}},\n\n  "left":             {"display":{"aClass":"always-enabled", "html":"&larr;"},\n                      "action":{"key":"Left"}},\n  "up":               {"display":{"aClass":"always-enabled", "html":"&uarr;"},\n                      "action":{"key":"Up"}},\n  "right":            {"display":{"aClass":"always-enabled", "html":"&rarr;"},\n                      "action":{"key":"Right"}},\n  "down":             {"display":{"aClass":"always-enabled", "html":"&darr;"},\n                      "action":{"key":"Down"}},\n\n  "toggleAltLeft":    {"display":{"aClass":"always-enabled toggle-btn", "html":"more", "colspan":2},\n                      "action":{"changeLayout": "altNumbers"}},\n  "toggleMainLeft":   {"display":{"aClass":"always-enabled toggle-btn active", "html":"more", "colspan":2},\n                      "action":{"changeLayout": "mainNumbers"}},\n  "loga":             {"display":{"html":"log_a"},\n                      "action":{"custom":"loga"}},\n  "ddx":              {"display":{"html":"d/dx"},\n                      "action":{"custom":"d/dx"}},\n  "sum":              {"display":{"html":"\\\\sum"},\n                      "action":{"cmd":"\\\\sum"}},\n  "prod":             {"display":{"html":"\\\\prod"},\n                      "action":{"cmd":"\\\\prod"}}\n  }\n}\n'}),define("main/keypad_keys",["require","jquery","underscore","mathquill","text!data/keypad_keys.json"],function(a){var b,c,d,e,f,g,h=a("jquery"),i=a("underscore");a("mathquill"),b=JSON.parse(a("text!data/keypad_keys.json")),d=b.staticKeys,i.each(b.tabs,function(a){d[a+"Tab"]={display:{html:a},action:{tab:a}}}),i.each(b.oneArgFuncs,function(a){d[a]={display:{html:a},action:{func:a}}}),i.each(b.twoArgFuncs,function(a){d[a]={display:{html:a},action:{func:a,args:2}}}),i.each(b.trigFuncs,function(a){i.each([a,"arc"+a,a+"h"],function(a){d[a]={display:{html:a},action:{func:a}}})});for(c=0;c<26;c++)e=String.fromCharCode(97+c),d[e]={display:{html:e},action:{cmd:e}};for(c=0;c<10;c++)f=String.fromCharCode(48+c),d[f]={display:{html:f},action:{cmd:f}};return g=function(a,b){var c=a.display,d=a.action;c.id=b,"cellClass"in c||(c.cellClass=""),"aClass"in c||(c.aClass="");if(c.colspan){c.cellClass&&(c.cellClass+=" ");switch(c.colspan){case.5:c.cellClass+="halfwide";break;case 1.5:c.cellClass+="oneandhalfwide";break;case 2:c.cellClass+="twowide"}}c.html&&(c.aClass=c.aClass?c.aClass+" key":"key",c.actionOn=="tapstart"?c.aClass+=" tapstartable":c.aClass+=" tappable"),!(d.tab||d.key||d.popup||d.changeLayout)&&!c.noMQ&&c.html&&(c.mathquill=!0,c.html=h("<span>"+c.html+"</span>").mathquill().mathquill("html"),c.aClass+=" mathquill-rendered-math")},i.each(d,g),d}),define("main/keypad_view",["require","loadcss!css/keypad","jquery","underscore","lib/browser","main/resize","main/cookie","template!keypad","lib/underscore_view","config","pjs","main/cookie","main/keypad_keys"],function(a){var b,c,d,e,f,g,h,i,j,k,l;return a("loadcss!css/keypad"),b=a("jquery"),c=a("underscore"),d=a("lib/browser"),e=a("main/resize"),f=a("main/cookie"),g=a("template!keypad"),h=a("lib/underscore_view"),i=a("config"),j=a("pjs"),a("main/cookie"),k=a("main/keypad_keys"),l=j(h,function(a,h){a.template=g,a.isOpen=!1,a.userMinimized=!1,a.init=function(a){this.keys=k,this.expressionsView=a,this.setupKeypad(),this.setLayout("mainNumbers")},a.didCreateElement=function(){var a=this;a.setLayout(a.layout),a.$hideBtn=a.$(".minimize-keypad"),a.$showBtn=a.$(".show-keypad"),a.$funcPopover=a.$(".functions-popover"),a.$container=a.$(".keys-container"),a.$keys=a.$(".keys"),a.$funcBtn=a.$(".popupFunctions-key"),a.setTab("trig"),a.$().on("tap",".tappable",function(c){var d=b(c.target).closest(".tappable");a.buttonClicked(d)}),a.$().on("tapstart",".tapstartable",function(c){var d=b(c.target).closest(".tapstartable");a.buttonClicked(d)}),a.expressionsView.observe("needFakeKeypad",function(){a.requestSetIsOpen(a.expressionsView.needFakeKeypad)}),a.expressionsView.observe("editDisabled",function(){a.setKeysDisabled(a.expressionsView.editDisabled)}),a.$showBtn.show(),a.$hideBtn.on("tap",function(){a.userMinimized=!0,f.setCookie("keypadMinimized","true"),a._hideKeypad()}),a.$showBtn.on("tap",function(){a.userMinimized=!1,f.setCookie("keypadMinimized","false"),a._showKeypad();var b=a.expressionsView.getSelected();if(b&&b.isExpression){a.expressionsView.getItemView(b.id).addFocus();return}if(b&&b.isTable&&a.expressionsView.itemFocused)return;var c=a.expressionsView.getFirstVisibleItem();while(c&&!c.isExpression)c=a.expressionsView.getItemByIndex(c.index+1);if(c){a.expressionsView.getItemView(c.id).addFocus();return}a.expressionsView.appendBlankExpression()}),a.userMinimized=f.getCookie("keypadMinimized")==="true"},a._hideKeypad=function(){clearTimeout(this.__showHideTimeout),this.isOpen=!1;var a=this;a.$container.addClass("retracted"),d.IS_IE8||d.IS_IE9?a.$showBtn.show():a.$showBtn.fadeIn(),this.hidePopups(),e.trigger()},a._showKeypad=function(){clearTimeout(this.__showHideTimeout),(this.layout==="letters"||this.layout==="altNumbers")&&this.setLayout("mainNumbers"),this.$showBtn.hide(),this.isOpen=!0;var a=this;this.__showHideTimeout=setTimeout(function(){a.$container.removeClass("retracted"),e.waitForCSSAnimation(a.$container,/transform/)})},a.requestSetIsOpen=function(a){if(this.userMinimized&&!this.isOpen)return;if(a===this.isOpen)return;a?this._showKeypad():this._hideKeypad()},a.setKeysDisabled=function(a){this.$keys.toggleClass("keys-disabled",!!a)},a.getButton=function(a){return this.keys[a]||(a="unknown"),this.keys[a].display},a.buttonArray=function(a){return c.map(a.split(" "),this.getButton,this)},a.setupKeypad=function(){this.buttons={mainNumbersLeft:[{keys:this.buttonArray("x y squared")},{keys:this.buttonArray("lt gt exponent")},{keys:this.buttonArray("leftparen rightparen comma")},{keys:this.buttonArray("toggleAltLeft sqrt")}],altNumbersLeft:[{keys:this.buttonArray("r theta pi")},{keys:this.buttonArray("le ge pipes")},{keys:this.buttonArray("leftbrace rightbrace colon")},{keys:this.buttonArray("toggleMainLeft cuberoot")}],numbersMiddle:[{keys:this.buttonArray("7 8 9 divide")},{keys:this.buttonArray("4 5 6 times")},{keys:this.buttonArray("1 2 3 minus")},{keys:this.buttonArray("0 decimal equals plus")}],numbersRight:[{keys:this.buttonArray("popupFunctions backspace")},{keys:this.buttonArray("toggleLetters enter")},{keys:this.buttonArray("blank up blank")},{keys:this.buttonArray("left down right")}],letters:[{keys:this.buttonArray("q w e r t y u i o p backspace")},{keys:this.buttonArray("halfBlank a s d f g h j k l halfBlank toggleNumbers")},{keys:this.buttonArray("blank z x c v b n m comma blank enter")},{keys:this.buttonArray("halfBlank pi subscript leftparen rightparen plus minus times divide equals blank halfBlank")}]},this.popups={functionsPopup:{trig:{tab:this.getButton("trigTab"),funcs:this.buttonArray("sin arcsin sinh cos arccos cosh tan arctan tanh csc arccsc csch sec arcsec sech cot arccot coth")},calc:{tab:this.getButton("calcTab"),funcs:this.buttonArray("exp ln log loga ddx sum prod fact e")},misc:{tab:this.getButton("miscTab"),funcs:this.buttonArray("ceil floor round abs min max lcm gcd mod nCr nPr fact")}}}},a.getTemplateParams=function(){return{buttons:this.buttons,popups:this.popups,userMinimizable:!i.get("tablet")}},a.height=function(){return this.isOpen?this.$container.height():0},a.setLayout=function(a){this.layout=a,this.$().removeClass("layout-letters layout-altNumbers layout-mainNumbers layout-handwriting").addClass("layout-"+a)},a.setTab=function(a){var b=["trig","calc","misc"],d=this;c.each(b,function(a){d.$("[key="+a+"Tab]").removeClass("selected"),d.$("[section="+a+"]").hide()}),this.$("[key="+a+"Tab]").addClass("selected"),this.$("[section="+a+"]").show()},a.hidePopups=function(){this.$funcBtn.removeClass("active"),this.$funcPopover.hide()},a.setPopup=function(a){a==="functions"&&(b(window).height()<525?this.$funcPopover.removeClass("top").addClass("left"):this.$funcPopover.removeClass("left").addClass("top"),this.$funcBtn.toggleClass("active"),this.$funcPopover.toggle())},a.resize=function(){},a.buttonClicked=function(a){var b=this.$(a).attr("key"),c=this.keys[b].action;if(c.changeLayout){this.hidePopups(),this.setLayout(c.changeLayout),c.changeLayout==="handwriting"&&this.resize();return}if(c.tab){this.setTab(c.tab);return}if(c.popup){this.setPopup(c.popup);return}this.layout==="altNumbers"&&this.setLayout("mainNumbers"),this.hidePopups();var d=this.expressionsView.getActiveMathquill();if(!d.length){var e=this.expressionsView.getSelected();if(e&&e.isTable&&e.selectedCell){var f=this.expressionsView.getItemView(e.id);f.doKeyAction(c.key)}return}try{if(c.key)d.mathquill("onKey",c.key);else if(c.cmd)d.mathquill("cmd",c.cmd);else if(c.func){var g="\\left( \\right)";c.args===2&&(g="\\left({},{}\\right)"),d.mathquill("write",c.func+g),d.mathquill("onKey","Left"),c.args===2&&d.mathquill("onKey","Left")}else if(c.custom)switch(c.custom){case"loga":d.mathquill("write","log_{}\\left( \\right)"),d.mathquill("onKey","Left"),d.mathquill("onKey","Left"),d.mathquill("onKey","Left");break;case"cuberoot":d.mathquill("write","\\sqrt[3]{}"),d.mathquill("onKey","Left");break;case"squared":d.mathquill("cmd","^"),d.mathquill("cmd","2"),d.mathquill("onKey","Right");break;case"cubed":d.mathquill("write","^{3}");break;case"d/dx":d.mathquill("write","\\frac{d}{dx}")}d.trigger("render")}catch(h){console.log(h)}}}),l}),define("main/keypad_view_handwriting",["require","pjs","jquery","./keypad_view"],function(a){var b=a("pjs"),c=a("jquery"),d=a("./keypad_view"),e=b(d,function(a,b){a.didCreateElement=function(){var a=this;b.didCreateElement.call(a);var d={abort:c.noop},e,f=[],g={type:"stroke",x:[],y:[]},h=a.pxRatio=window.devicePixelRatio||1,i=a.$canvas=a.$(".handwriting-area");a.$keys.on("tapstart",function(b){function l(a){var b=a.originalEvent.touches?a.originalEvent.touches[0]:a,c=b.pageX,d=b.pageY-k;j.lineTo(h*c,h*d),g.x.push(c),g.y.push(d)}if(a.layout!=="handwriting"||c(b.target).closest(".tappable",this).length)return;d.abort(),clearTimeout(e);var j=i[0].getContext("2d");j.strokeStyle="white",j.beginPath();var k=i.offset().top;l(b),c(document).on("tapmove.handwriting",function(a){l(a),j.stroke()}).one("tapend",function(){c(this).off("tapmove.handwriting"),f.push(g),g={type:"stroke",x:[],y:[]};var b=c.post("https://myscript-webservices.visionobjects.com/api/myscript/v2.0/equation/doSimpleRecognition.json",{apiKey:"ec39c110-c7f3-4a37-9aee-fdb06dff0372",equationInput:JSON.stringify({userResources:["desmos_custom"],resultTypes:["LATEX"],components:f})},null,"json"),d=a.expressionsView.getActiveMathquill();e=setTimeout(function(){b.done(function(a){var b=a.result.results[0].value.toLowerCase(),c,e;console.log("MyScript Web Services API result: "+b),j.clearRect(0,0,i[0].width,i[0].height);if(b==="\\wedge ")d.mathquill("onText","^");else if(b.slice(0,3)===" / ")d.mathquill("onText","/").mathquill("write",b.slice(3)).mathquill("onKey","Right");else if(b.slice(0,11)==="\\overline {"){for(c=11,e=1;e>0&&c<b.length;c+=1)e+=b[c]==="}"?-1:b[c]==="{"?1:0;d.mathquill("onText","/").mathquill("write",b.slice(11,c-1)).mathquill("onKey","Right").mathquill("write",b.slice(c))}else if("(){}[]√".split("").indexOf(b)>=0)d.mathquill("onText",b);else{if(b.slice(0,11)==="\\vphantom {"){for(c=11,e=1;e>0&&c<b.length;c+=1)e+=b[c]==="}"?-1:b[c]==="{"?1:0;b.slice(c,c+11)!=="^{\\wedge } "&&console.error(":("),b="^{"+b.slice(c+11)+"}"}else b.slice(0,7)==="\\wedge "?(b=b.slice(7),b.slice(0,2)!=="^{"&&(b="^{"+b+"}")):b.charAt(0)==="="&&(d.mathquill("onText","="),b=b.slice(1));d.mathquill("write",b)}d.trigger("render"),f=[]}),e=undefined},1e3)})})},a.resize=function(){this.$canvas[0].width=this.pxRatio*parseInt(this.$canvas.width(),10),this.$canvas[0].height=this.pxRatio*parseInt(this.$canvas.height(),10)},a.setupKeypad=function(){b.setupKeypad.call(this),this.buttons.numbersRight[1]={keys:this.buttonArray("narrowToggleLetters toggleHandwriting enter")},this.buttons.handwriting=[{keys:this.buttonArray("backspace")},{keys:this.buttonArray("toggleNumbers")},{keys:this.buttonArray("enter")}]}});return e}),define("main/state_controller",["require","pjs","undoredo","expressions/colors"],function(a){var b=a("pjs"),c=a("undoredo"),d=a("expressions/colors"),e=b(function(a){var b={graph:{viewport:{xmin:-10,xmax:10,ymin:-10,ymax:10},showLabels:!0,showGrid:!0,showAxes:!0,squareAxes:!0,labelXMode:"",labelYMode:""},expressions:{list:[{id:1,latex:"",selected:!0}]}};a.init=function(a,b,c,d){this.graphController=a,this.expressionsModel=b,this.graphSettings=c,this.isFirstSetState=!0,this.expressionsView=d},a.getState=function(a){var b={graph:this.graphController.getState(),expressions:this.expressionsModel.getState()};return a=="escaped"?escape(JSON.stringify(b)):b},a.setState=function(a,e){this.graphSettings.setProperty("POIs",!1),this.expressionsView.setSelected(null);if(!this.isFirstSetState&&a===null&&this.expressionsModel.isEmpty())return;var f=this,g=function(a,c){d.reset(),a||(a=b);if(c==="escaped"||typeof a=="string")try{a=JSON.parse(unescape(a))}catch(e){alert("invalid state!");return}"expressions"in a&&f.expressionsModel.setState({list:[]}),f.graphController.manager.clear(),f.graphController.manager.redrawGraphsLayer(),"graph"in a&&("degreeMode"in a.graph||(a.graph.degreeMode=!1),f.graphController.setState(a.graph)),"expressions"in a&&f.expressionsModel.setState(a.expressions)};if(this.isFirstSetState){g(a,e),this.isFirstSetState=!1;return}var h=this.getState();c.addTransaction({type:c.CAUSE_OF_CHANGE,undo:function(){g(h)},redo:function(){g(a,e)},ensureChangeOccured:function(){var a=JSON.stringify(f.getState()),b=JSON.stringify(h);return b===a}})},a.setBlank=function(){this.setState(b),c.markAsSaved()}});return e}),define("main/propagate_selection",["require"],function(){function a(a,b,c){var d,e,f=function(){var g=a.getSelected();g!==e&&(e&&e.unobserve("selectedCell.calcjs"),g&&g.observe("selectedCell.calcjs",f),e=g);var h=g?g.id:undefined;if(g&&g.isTable){var i=g.selectedCell;if(i){var j=g.columns[i.column];h=j?j.id:undefined}else h=undefined}var k=h!==d;if(k){b.select(h);var l=b.getOpenIntersectionIds();typeof h!="undefined"&&(l[h]=!0),c.setIntersectIds(l),c.updateIntersections(h)}d=h};a.observe("selectedItem",f)}return a}),define("lib/set_list_height",["require","main/resize"],function(a){var b=a("main/resize"),c=function(a,c){var d=function(){var b=c.height();a.setBottom(b),a.ensureActiveChildIsVisible()};b.register(d)};return{init:c}}),define("template!settings_tablet_window",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div id="window-container">\n  <div class="settings-btn action-togglevisible">\n    <i class=\'icon-window\'></i>\n  </div>\n\n  <div class="settings-scrollable bottom" popover="true">\n    <div class="inner-bg">\n      <div class="popover-interior">\n        <div class="popover-title">\n          '+t("Window")+'\n        </div>\n        <div class="popover-content">\n          <div class="window desmos-input-container" id="x-window">\n            <table>\n              <tr>\n                <td>\n                  <span class=\'before-input\'></span>\n                    <input id="xmin" type="number" />\n                  <span class=\'after-input\'></span>\n                </td>\n                <td>&lt;&nbsp;<i>x</i>&nbsp;&lt;</td>\n                <td>\n                  <span class=\'before-input\'></span>\n                  <input id="xmax" type="number" />\n                  <span class=\'after-input\'></span>\n                </td>\n              </tr>\n            </table>\n          </div>\n\n          <div class="window desmos-input-container" id="y-window">\n            <table>\n              <tbody>\n                <tr>\n                  <td>\n                    <span class=\'before-input\'></span>\n                      <input id="ymin" type="number" />\n                    <span class=\'after-input\'></span>\n                  </td>\n                  <td>&lt;&nbsp;<i>y</i>&nbsp;&lt;</td>\n                  <td>\n                    <span class=\'before-input\'></span>\n                      <input id="ymax" type="number" />\n                    <span class=\'after-input\'></span>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n          <div class=\'buttons-container\'>\n            <div>\n              <button id="square-axes" class="btn disabled action-squareaxes">\n                '+t("equalize")+'\n              </button>\n            </div>\n            <div>\n              <button id="restore-default" class="btn action-zoomrestore">\n                '+t("restore to default")+"\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class='triangle'>    \n    </div>\n  </div>\n</div>";return __p}}),define("main/settings_view",["require","jquery","underscore","pjs","main/popover_view","graphing/viewport"],function(a){var b=a("jquery"),c=a("underscore"),d=a("pjs"),e=a("main/popover_view"),f=a("graphing/viewport"),g=d(e,function(a,d){a.viewport=new f,a.init=function(a){d.init.call(this),this.graphController=a,this.grapher=a.manager,this.settings=this.grapher.settings},a.closeCondition=function(a){return!b(a.target).closest(this.openCloseBtn).length&&!b(a.target).closest("#settings-container").length},a.didCreateElement=function(){d.didCreateElement.call(this);var a=this;this.$(".action-squareaxes").on("tap",function(){a.settings.setProperty("squareAxes",!0)}),this.$("#show-labels").on("change",function(){a.settings.setProperty("showLabels",!!b(this).attr("checked"))}),this.$("#show-grid").on("change",function(){a.settings.setProperty("showGrid",!!b(this).attr("checked"))}),this.$(".action-polargrid").on("tap",function(){a.settings.setProperty("polarMode",!a.settings.getProperty("polarMode"))}),this.$("#show-axes").on("change",function(){a.settings.setProperty("showAxes",!!b(this).attr("checked"))}),this.$("#xmin, #xmax, #ymin, #ymax").on("keydown keyup keypress",this.onInputKeyPress.bind(this)).on("focusout",this.onFocusOut.bind(this)).on("focusin",this.onFocusIn.bind(this)),this.updateTextInputs()},a.addSettingsObserver=function(a,b){var c=b.bind(this);this.settings.observe(a,c),c()},a.onInputKeyPress=function(a){var b=parseFloat(this.$("#xmin").val()),c=parseFloat(this.$("#xmax").val()),d=parseFloat(this.$("#ymin").val()),e=parseFloat(this.$("#ymax").val()),g=new f(b,c,d,e);this.$("#x-window").toggleClass("invalid",!g.isXValid()),this.$("#y-window").toggleClass("invalid",!g.isYValid()),this.settings.setProperty("squareAxes",g.isSquare(this.grapher.screen)),this.setViewport(g)},a.renderProjectorMode=function(){var a=this.settings.projectorMode;this.$("#projector-mode").toggleClass("active",!!a)},a.renderXPiLabels=function(){var a=this.settings.xAxisPiLabels;this.$("#x-numlabels").toggleClass("active",!a),this.$("#x-pilabels").toggleClass("active",!!a)},a.renderYPiLabels=function(){var a=this.settings.yAxisPiLabels;this.$("#y-numlabels").toggleClass("active",!a),this.$("#y-pilabels").toggleClass("active",!!a)},a.renderDegreeMode=function(){var a=this.settings.degreeMode;this.$("#radians").toggleClass("active",!a),this.$("#degrees").toggleClass("active",!!a)},a.renderSquareAxes=function(){var a=this.settings.squareAxes;this.$("#square-axes").toggleClass("disabled",!!a).toggleClass("btn-success",!a)},a.renderShowLabels=function(){var a=this.settings.showLabels,b=this.$("#show-labels");a?b.attr("checked","checked"):b.removeAttr("checked")},a.renderShowGrid=function(){var a=this.settings.showGrid,b=this.$("#show-grid");a?b.attr("checked","checked"):b.removeAttr("checked")},a.renderPolarMode=function(){this.$("#cartesian-grid").toggleClass("active",!this.settings.polarMode),this.$("#polar-grid").toggleClass("active",!!this.settings.polarMode),this.$("#x-pilabels, #x-numlabels, #y-pilabels, #y-numlabels").toggleClass("disabled",!!this.settings.polarMode)},a.renderShowAxes=function(){var a=this.settings.showAxes,b=this.$("#show-axes");a?b.attr("checked","checked"):b.removeAttr("checked")},a.updateTextInputs=function(){var a=this;c.each(["xmin","xmax","ymin","ymax"],function(b){parseFloat(a.$("#"+b).val())!==a.viewport[b]&&a.$("#"+b).val(a.viewport[b])})},a.triggerViewportChanged=function(){},a.setViewport=function(a){if(a.equals(this.viewport))return;if(!a.isValid())return;this.viewport=a.clone();var b=this.graphController.getViewport();if(b.ymax!==a.ymax||b.ymin!==a.ymin)this.settings.lastChangedAxis="y";if(b.xmax!==a.xmax||b.xmin!==a.xmin)this.settings.lastChangedAxis="x";this.updateTextInputs(),this.graphController.setViewport(a),this.triggerViewportChanged()},a.onFocusIn=function(a){clearTimeout(this.stopEditingTimeout)},a.onFocusOut=function(a){var b=this;this.stopEditingTimeout=setTimeout(function(){clearTimeout(b.stopEditingTimeout),b.updateTextInputs(),this.$("#x-window").toggleClass("invalid",!b.viewport.isXValid()),this.$("#y-window").toggleClass("invalid",!b.viewport.isYValid())},1)}});return g}),define("main/settings_view_tablet",["require","pjs","./settings_view","main/focus"],function(a){var b=a("pjs"),c=a("./settings_view"),d=a("main/focus"),e=b(c,function(a,b){a.didCreateElement=function(){b.didCreateElement.call(this),this.$(".action-togglevisible").on("tapstart",function(){d.takeFocus()}),this.setupOpenButton(this.$(".action-togglevisible"),"tapstart")},a.renderIsVisible=function(){this.$(".bottom").toggle(this.isVisible)}});return e}),define("main/settings_view_tablet_window",["require","pjs","template!settings_tablet_window","./settings_view_tablet"],function(a){var b=a("pjs"),c=a("template!settings_tablet_window"),d=a("./settings_view_tablet"),e=b(d,function(a,b){a.template=c,a.name="settings_tablet_window",a.didCreateElement=function(){b.didCreateElement.call(this);var a=
this;this.$(".action-zoomrestore").on("tap",function(){a.graphController.zoom("default")}),this.renderRestoreAxes(),this.addSettingsObserver("squareAxes",this.renderSquareAxes)},a.triggerViewportChanged=function(){this.renderRestoreAxes()},a.renderRestoreAxes=function(){var a=this.graphController.isZoomRestored();this.$("#restore-default").toggleClass("disabled",!!a)}});return e}),define("template!settings_tablet_options",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div id="options-container">\n  <div class="settings-btn action-togglevisible">\n    <i class=\'icon-wrench\'></i>\n  </div>\n  \n  <div class="bottom settings-scrollable" popover="true">\n   <div class="inner-bg">\n      <div class="popover-interior">\n       <div class="popover-title">'+t("View")+"</div>\n       <div class=\"popover-content\">\n  \n         <div class='label action-projectormode'>\n           "+t("Projector Mode")+"\n           <div class='toggle-on-off' id='projector-toggle'>\n             <span class='thumb'>\n                <span class='off'>"+t("off")+"</span><span class='on'>"+t("on")+'</span>\n             </span>\n           </div>\n         </div>\n       </div>\n  \n  \n        <div class="popover-title">'+t("Graph Paper")+"</div>\n        <div class=\"popover-content\">\n          <div class='label action-showlabels'>\n            "+t("Labels")+"\n            <div class='toggle-on-off' id='labels-toggle'>\n              <span class='thumb'>\n                 <span class='off'>"+t("off")+"</span><span class='on'>"+t("on")+"</span>\n              </span>\n            </div>\n          </div>\n  \n          <div class='label action-showgrid'>\n          "+t("Grid Lines")+"\n            <div class='toggle-on-off' id='grid-toggle'>\n              <span class='thumb'>\n                 <span class='off'>"+t("off")+"</span><span class='on'>"+t("on")+"</span>\n              </span>\n            </div>\n          </div>\n  \n          <div class='label action-showaxes'>\n            "+t("Axes")+"\n            <div class='toggle-on-off' id='axes-toggle'>\n              <span class='thumb'>\n                 <span class='off'>"+t("off")+"</span><span class='on'>"+t("on")+'</span>\n              </span>\n            </div>\n          </div>\n        </div>\n  \n  \n        <div class="popover-title interior-title">'+t("Trig Settings")+'</div>\n        <div class="popover-content trig-settings">\n          <table class="pi-labels">\n            <tbody>\n              <tr>\n                <td>\n                  '+t("<i>x</i>-axis labels:")+"\n                </td>\n                <td>\n                  <div class=\"toggle-group action-xpilabels\" id=\"xpilabels-toggle\">\n                    <div class='thumb'></div>\n                    <span class='first-option'>1, 2, 3</span>\n                    <span class='second-option'>\n                      <font class=\"pi\">π, 2π, 3π</font>\n                    </span>\n                  </div>\n                </td>\n              </tr>\n              <tr>\n                <td>\n                  "+t("<i>y</i>-axis labels:")+"\n                </td>\n                <td>\n                  <div class=\"toggle-group action-ypilabels\" id=\"ypilabels-toggle\">\n                    <div class='thumb'></div>\n                    <span class='first-option'>1, 2, 3</span>\n                    <span class='second-option'>\n                      <font class=\"pi\">π, 2π, 3π</font>\n                    </span>\n                  </div>\n                </td>\n              </tr>\n              <tr>\n                <td>\n                  "+t("Angles:")+"\n                </td>\n                <td>\n                  <div class=\"toggle-group action-radianmode\" id=\"radian-toggle\">\n                    <div class='thumb'></div>\n                    <span class='first-option'>"+t("degrees")+"</span>\n                    <span class='second-option'>"+t("radians")+'</span>\n                  </div>\n                </td>\n  \n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n    \n    <div class="triangle">\n    </div>\n  \n  </div>\n</div>';return __p}}),define("main/settings_view_tablet_options",["require","pjs","template!settings_tablet_options","./settings_view_tablet"],function(a){var b=a("pjs"),c=a("template!settings_tablet_options"),d=a("./settings_view_tablet"),e=b(d,function(a,b){a.template=c,a.name="settings_tablet_options",a.didCreateElement=function(){b.didCreateElement.call(this);var a=this;this.$(".action-showlabels").on("tapstart",function(){a.$(".action-showlabels .toggle-on-off").toggleClass("isOn"),setTimeout(function(){a.settings.setProperty("showLabels",!a.settings.showLabels)},100)}),this.$(".action-showgrid").on("tapstart",function(){a.$(".action-showgrid .toggle-on-off").toggleClass("isOn"),setTimeout(function(){a.settings.setProperty("showGrid",!a.settings.showGrid)},100)}),this.$(".action-polarmode").on("tapstart",function(){a.$(".action-polarmode .toggle-on-off").toggleClass("isOn"),setTimeout(function(){a.settings.setProperty("polarMode",!a.settings.polarMode)},100)}),this.$(".action-showaxes").on("tapstart",function(){a.$(".action-showaxes .toggle-on-off").toggleClass("isOn"),setTimeout(function(){a.settings.setProperty("showAxes",!a.settings.showAxes)},100)}),this.$(".action-projectormode").on("tapstart",function(){a.$(".action-projectormode .toggle-on-off").toggleClass("isOn"),setTimeout(function(){a.settings.setProperty("projectorMode",!a.settings.projectorMode)},100)}),this.$(".action-xpilabels").on("tapstart",function(){if(a.settings.polarMode)return;a.$(".action-xpilabels").toggleClass("toggled"),setTimeout(function(){a.settings.setProperty("xAxisPiLabels",!a.settings.xAxisPiLabels)},100)}),this.$(".action-ypilabels").on("tapstart",function(){if(a.settings.polarMode)return;a.$(".action-ypilabels").toggleClass("toggled"),setTimeout(function(){a.settings.setProperty("yAxisPiLabels",!a.settings.yAxisPiLabels)},100)}),this.$(".action-radianmode").on("tapstart",function(){a.$(".action-radianmode").toggleClass("toggled"),setTimeout(function(){a.settings.setProperty("degreeMode",!a.settings.degreeMode)},100)}),this.addSettingsObserver("projectorMode",this.renderProjectorMode),this.addSettingsObserver("xAxisPiLabels",this.renderXPiLabels),this.addSettingsObserver("yAxisPiLabels",this.renderYPiLabels),this.addSettingsObserver("degreeMode",this.renderDegreeMode),this.addSettingsObserver("showLabels",this.renderShowLabels),this.addSettingsObserver("showGrid",this.renderShowGrid),this.addSettingsObserver("polarMode",this.renderPolarMode),this.addSettingsObserver("showAxes",this.renderShowAxes)},a.renderShowLabels=function(){this.$("#labels-toggle").toggleClass("isOn",!!this.settings.showLabels)},a.renderShowGrid=function(){this.$("#grid-toggle").toggleClass("isOn",!!this.settings.showGrid)},a.renderPolarMode=function(){this.$("#polar-toggle").toggleClass("isOn",!!this.settings.polarMode),this.$("#xpilabels-toggle, #ypilabels-toggle").toggleClass("disabled",!!this.settings.polarMode)},a.renderShowAxes=function(){this.$("#axes-toggle").toggleClass("isOn",!!this.settings.showAxes)},a.renderProjectorMode=function(){this.$("#projector-toggle").toggleClass("isOn",!!this.settings.projectorMode)},a.renderDegreeMode=function(){var a=this.settings.degreeMode;this.$("#radian-toggle").toggleClass("toggled",!a)},a.renderXPiLabels=function(){var a=this.settings.xAxisPiLabels;this.$("#xpilabels-toggle").toggleClass("toggled",!!a)},a.renderYPiLabels=function(){var a=this.settings.yAxisPiLabels;this.$("#ypilabels-toggle").toggleClass("toggled",!!a)}});return e}),define("template!zoom",["underscore"],function(_){return function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div id="zoom-pillbox">\n  <span\n    class="tooltip-e action-zoomin"\n    tooltip="'+t("Zoom In")+'"\n    tipsy-offset="15"\n  >\n    <i class="icon-plus"></i>\n  </span>\n  <span\n    class="tooltip-e action-zoomrestore"\n    tooltip="'+t("Restore Default Zoom")+'"\n    tipsy-offset="15"\n  >\n    <i class="icon-home"></i>\n  </span>\n  <span\n    class="tooltip-e action-zoomout"\n    tooltip="'+t("Zoom Out")+'"\n    tipsy-offset="15"\n  >\n    <i class="icon-minus"></i>\n  </span>\n</div>';return __p}}),define("loadcss!css/zoom_pillbox",function(){}),define("main/zoom_view",["require","pjs","lib/underscore_view","lib/track_feature","template!zoom","loadcss!css/zoom_pillbox"],function(a){var b,c=a("pjs"),d=a("lib/underscore_view"),e=a("lib/track_feature"),f=a("template!zoom");return a("loadcss!css/zoom_pillbox"),b=c(d,function(a,b){a.init=function(a){b.init.call(this),this.template=f,this.graphController=a},a.didCreateElement=function(){this.$(".action-zoomin").on("tap",this.zoomIn.bind(this)),this.$(".action-zoomrestore").on("tap",this.zoomRestore.bind(this)),this.$(".action-zoomout").on("tap",this.zoomOut.bind(this))},a.zoomIn=function(){e.use("Zoom In"),this.graphController.zoom("in")},a.zoomRestore=function(){e.use("Zoom Restore"),this.graphController.zoom("default")},a.zoomOut=function(){e.use("Zoom Out"),this.graphController.zoom("out")}}),b}),define("lib/external_screenshot",["require","pjs"],function(a){var b=a("pjs"),c=b(function(a){function b(a){var b=a.getBoundingClientRect();return{top:b.top,left:b.left,width:b.width,height:b.height}}function c(a,b){a?setTimeout(b):setTimeout(function(){c(a,b)},100)}a.init=function(a,b,c,d,e){this.$root=a,this.expressionsView=b,this.grapher=c,this.evaluator=d,this.stateController=e},a.initialize=function(a,b){this.$root.addClass("external-screenshot"),document.styleSheets[0].insertRule("* {overflow: visible !important;}",document.styleSheets[0].cssRules.length),b()},a.load=function(a,d){this.stateController.setState(a.state);var e=this;this.evaluator.notifyWhenSynced(function(){c(function(){return e.expressionsView.$(".shell.expressionitem").length===0},function(){setTimeout(function(){d({boxes:{expressions:b(e.expressionsView.$(".expressionlist")[0]),graphpaper:b(e.grapher.$[0])}})},100)})})}});return c}),define("lib/urlparser",["require"],function(){var a={getParameter:function(a){return decodeURIComponent(((new RegExp("[?|&]"+a+"="+"([^&;]+?)(&|#|;|$)")).exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}};return a}),define("loadcss!css/tour",function(){}),define("lib/trip",["require","jquery","pjs"],function(a){var b=a("jquery"),c=a("pjs"),d=c({init:function(a){var c=['<div class="trip-block">','<div class="trip-interior">','<a class="trip-close"><i class="icon-remove"></i></a>','<div class="trip-content"></div>',"</div>",'<div class="trip-arrow"></div>',"</div>"].join(""),d=this,e=this.$tripBlock=b(c);e.css({top:"-100px"}),b("body").append(e),e.find(".trip-close").on("tap",function(a){a.preventDefault(),d.stop()}),this.bindKeyEvents(),this.settings=a},cleanup:function(){return this.unbindKeyEvents(),this.hideTripBlock(),!1},bindKeyEvents:function(){var a=this;b(document).on({"keydown.Trip":function(b){a.keyEvent.call(a,b)}})},unbindKeyEvents:function(){b(document).off("keydown.Trip")},keyEvent:function(a){a.which===27&&this.stop()},stop:function(){this.hideTripBlock(),this.settings.onTripStop()},showTripBlock:function(a){typeof a.sel=="string"&&(a.sel=b(a.sel));var c=this.$tripBlock;c.find(".trip-content").html(a.content);var d=a.sel,e=d.outerWidth(),f=d.outerHeight(),g=c.outerWidth(),h=c.outerHeight(),i=10,j=10;c.removeClass("e s w n");var k=0;switch(a.position){case"e":c.addClass("e"),c.css({left:d.offset().left+e+j,top:d.offset().top-(h-f)/2});break;case"s":c.addClass("s");var l=d.offset().left+(e-g)/2;c.css({left:l,top:d.offset().top+f+i}),l+g>b(window).width()-1&&(k=b(window).width()-1-l-g),l<1&&(k=1-l);break;case"w":c.addClass("w"),c.css({left:d.offset().left-(j+g),top:d.offset().top-(h-f)/2});break;case"n":default:c.addClass("n"),c.css({left:d.offset().left+(e-g)/2,top:d.offset().top-i-h})}c.find(".trip-interior").css("transform","translate("+k+"px, 0)"),c.css({display:"inline-block"})},fadeInTripBlock:function(){var a=this.$tripBlock;setTimeout(function(){a.addClass("is-loaded")},0)},hideTripBlock:function(){this.$tripBlock.removeClass("is-loaded")}});return d}),define("tours/base_tour",["require","pjs","jquery","underscore"],function(a){var b=a("pjs"),c=a("jquery"),d=a("underscore");return b(function(a){a.init=function(a){this.Calc=a,this.expressionsView=this.Calc.expressions},a.expressionsVisible=function(){return this.expressionsView.getProperty("expressionsVisible")},a.requireExpressionsVisible=function(){return{position:"e",content:"Click to show the list of expressions.",sel:c(".action-showexpressions")}},a.resourcesOpen=function(){return c("body").hasClass("resources-open")},a.requireResourcesNotOpen=function(){return{position:"e",content:"Click to return to this graph.",sel:c(".action-opendrawer")}},a.editListMode=function(){return this.expressionsView.getProperty("editListMode")},a.requireNotEditListMode=function(){return{position:"s",content:"Click to return to your expressions.",sel:c(".action-toggleeditlistmode")}},a.expressionCount=function(){return this.expressionsView.getItemsByIndexRange(0,Infinity).length},a.grapher=function(){return this.Calc.grapher},a.hasConic=function(a){return d.find(this.grapher().graphSketches,function(b){return d.find(b.branches,function(b){return b.conic===a})})}})}),define("tours/sliders",["require","pjs","jquery","underscore","./base_tour"],function(a){var b=a("pjs"),c=a("jquery"),d=a("underscore"),e=a("./base_tour");return b(e,function(a){a.sliderHasSlid=!1,a.sliderBtnsShown=!1,a.isExpAnimating=function(a){var b=d.filter(a,function(a){return a.slider&&a.slider.isPlaying});return b.length},a.update=function(){var a,b,e,f,g,h,i,j=this.expressionsView.getItemsByIndexRange(0,Infinity);if(this.isExpAnimating(j))return{"final":!0,position:"s",endingMsg:"You're a slider pro!",sel:c(".animate-pause").last()};if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.resourcesOpen())return this.requireResourcesNotOpen();if(this.editListMode())return this.requireNotEditListMode();a=c(".animate-play").last(),b=d.filter(j,function(a){return a&&a.formula&&a.formula.is_graphable});if(a.length&&b.length)return e=d.filter(j,function(a){return a&&a.slider&&a.slider.value!==1}),this.sliderHasSlid||e.length>0?c(".thumb.depressed").length>0?{doNotUpdate:!0}:(this.sliderHasSlid=!0,{position:"s",content:'<b>Go "Hands-free"</b><br>Press play to animate the slider.',sel:a}):{position:"s",content:"Drag the handle to change the value.",sel:c(".slider-container .thumb:visible").last()};return f=this.expressionsView.getSelectedView(),g=[],f&&(g=f.$(".action-createslider .btn")),g.length||(g=c(".action-createslider .btn")),g.length>1||g.length&&j.length>1?this.sliderBtnsShown&&new Date-this.sliderBtnsShown>600?{position:"s",content:"Awesome! Now click here to add the sliders.",sel:g.last()}:(this.sliderBtnsShown||(this.sliderBtnsShown=new Date),{doNotUpdate:!0}):(this.sliderBtnsShown=!1,f?{position:"e",content:'<b>Let\'s make some sliders</b><br>Try typing <span class="italic">y=mx+b</span>',sel:f.$()}:(h=this.expressionsView.getFirstVisibleItem(),i=this.expressionsView.getItemView(h.id),{position:"e",content:"Click here to type in this expression",sel:i.$()}))}})}),define("tours/scatter_plot",["require","pjs","jquery","underscore","./base_tour"],function(a){var b=a("pjs"),c=a("jquery"),d=a("underscore"),e=a("./base_tour");return b(e,function(a){a.hasChangedDisplayType=!1,a.update=function(){var a,b,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=this.expressionsView.getItemsByIndexRange(0,Infinity),t=d.filter(s,function(a){return a.hasOwnProperty("columns")});if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.resourcesOpen())return this.requireResourcesNotOpen();if(this.editListMode())return this.requireNotEditListMode();if(t.length===0)return a=c(".action-newtable:visible"),a.length===0?{position:"e",content:"<b>Let's make a scatter plot</b><br>Click here to add a new item.",sel:c(".add-expression-btn")}:{position:"e",content:'... and select the "table" option.',sel:a};b=[],e=[];for(h=0;h<t.length;h++){f=t[h];for(i=1;i<f.columns.length-1;i++)g=this.expressionsView.getItemView(f.id),j=g.columnViews[i],f.columns[i].disabled?e.push({model:f.columns[i],view:j,tableView:g}):b.push({model:f.columns[i],view:j,tableView:g})}if(b.length===0)return{position:"e",content:"Type <var>y</var> here to create a data column.",sel:".editable.right.header:first"};f=b[0].model.table,g=this.expressionsView.getItemView(f.id),k=f.selectedCell,l=f.columns[0].cells.length,m=0;for(h=0;h<l&&h<3;h++)f.columns[0].cells[h].value&&!f.columns[0].cells[h].error&&f.columns[1].cells[h].value&&!f.columns[1].cells[h].error&&m++;if(m===3)return n=f.columns[1].columnMode==="POINTS_AND_LINES",o=c(".table-column-menu").length>0,n&&!o?{"final":!0,position:"e",endingMsg:"You're a scatter plot whiz!",sel:g.$()}:n?{position:"e",content:"Click anywhere to close the drawing options.",sel:g.$()}:o?{content:"Click to connect the dots",position:"e",sel:".table-points-and-lines"}:{content:["<b>Last trick!</b><br>","Click and hold on this icon until the options menu opens up."].join(""),position:"e",sel:g.columnViews[1][0].$(".graph-icon")};for(p=0;p<l;p++)for(q=0;q<2;q++)if(f.columns[q].cells[p].error)return{position:"e",content:"Uh-oh! type a valid number here.",sel:g.columnViews[q][p+1].$()};if(!k)return{position:"e",content:"Click back to continue editing",sel:g.columnViews[1][l-1].$()};if(l===2&&m===1&&k&&k.row===1)return{position:"e",content:"Go down to the next row to add more data.",sel:g.columnViews[1][k.row].$()};if(l===3&&m===2&&k)return{position:"e",content:"<b>Awesome!</b><br>Now try pressing Enter",sel:g.columnViews[1][k.row].$()};for(p=0;p<l;p++)for(q=0;q<2;q++)if(!f.columns[q].cells[p].value)return r="Fill in this whole row",p===2&&q===1&&(r="Just fill in one more..."),p===0&&q===1&&(r="<b>Fill it in</b><br>Type any number here."),{position:"e",content:r,sel:g.columnViews[1][p+1].$()};return}})}),define("tours/function_table",["require","pjs","jquery","underscore","./base_tour"],function(a){var b=a("pjs"),c=a("jquery"),d=a("underscore"),e=a("./base_tour");return b(e,function(a){a.hasChangedDisplayType=!1,a.update=function(){var a,b,e,f,g,h,i,j,k,l=this.expressionsView.getItemsByIndexRange(0,Infinity),m=d.filter(l,function(a){return a.hasOwnProperty("columns")});if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.resourcesOpen())return this.requireResourcesNotOpen();a=[],b=[];for(e=0;e<m.length;e++){f=m[e];for(g=1;g<f.columns.length-1;g++)h=this.expressionsView.getItemView(f.id),i=h.columnViews[g],f.columns[g].disabled?b.push({model:f.columns[g],view:i,tableView:h}):a.push({model:f.columns[g],view:i,tableView:h})}if(b.length===0)return j=d.find(l,function(a){return a.isGraphable}),!j||j.latex==="x"?(k=d.find(l,function(a){return!a.hasOwnProperty("columns")&&a.hasOwnProperty("latex")}),k?{position:"e",content:["Try typing <var>x</var><sup>2</sup>.<br>","<i><b>hint:</b> type x^2"," or click the a<sup>2</sup> button below</i>"].join(""),sel:this.expressionsView.getItemView(k.id).$()}:{position:"e",content:"Let's try a Function Table. First: click here to create a new blank expression.",sel:".new-math-div"}):c(".EDIT-LIST-MODE").length===0?{position:"s",content:'<b>Convert this to a table</b><br>Click the "Edit List" button.',sel:".edit-list-btn"}:{position:"e",content:"Click here to convert the expression to a table.",sel:".action-createtable"};return{"final":!0,position:"e",content:"<b>You're a table wizard!</b><br>This message will now self destruct...",sel:b[0].tableView.$()}}})}),define("tours/mathart",["require","underscore","jquery","pjs","./base_tour"],function(a){var b=a("underscore"),c=a("jquery"),d=a("pjs"),e=a("./base_tour");return{mathart_intro:d(e,function(a){a.graphedLine=null,a.graphedParabola=null,a.graphedLineIsRestricted=function(){var a,b;return this.graphedLine?this.expressionsView.getItemById(this.graphedLine.id)?(a=this.grapher().graphSketches[this.graphedLine.id],!a||!a.branches||!a.branches[0]||!a.branches[0].compiled?!1:(b=a.branches[0].compiled.fn,isNaN(b(-100))&&isNaN(b(100)))):!1:!1},a.graphedParabolaIsRestricted=function(){var a,b;return this.graphedParabola?this.expressionsView.getItemById(this.graphedParabola.id)?(a=this.grapher().graphSketches[this.graphedParabola.id],!a||!a.branches||!a.branches[0]||!a.branches[0].compiled?!1:(b=a.branches[0].compiled.fn,isNaN(b(100)))):!1:!1},a.graphedParabolaIsShifted=function(){var a,b;return this.graphedParabola?this.expressionsView.getItemById(this.graphedParabola.id)?(a=this.grapher().graphSketches[this.graphedParabola.id],!a||!a.branches||!a.branches[0]||!a.branches[0].compiled?!1:(b=a.branches[0].compiled.fn,b(0)!==0)):!1:!1},a.getFirstExp=function(){var a=this.expressionsView.getItemsByIndexRange(0,Infinity);return b.find(a,function(a){return!a.hasOwnProperty("columns")&&a.hasOwnProperty("latex")})},a.restrictedLineTour=function(){var a,b;return this.graphedLineIsRestricted()?!this.expressionsView.getSelected()||this.expressionsView.getSelected().latex?{position:"e",content:"<b>Brilliant!</b><br>Click here to create a new expression",sel:".new-math-div"}:(this.phaseOn++,this.update()):(this.graphedLine&&!this.expressionsView.getItemById(this.graphedLine.id)&&(this.graphedLine=null),a=this.expressionsView.getSelected(),a&&this.grapher().graphSketches[a.id]&&this.grapher().graphSketches[a.id].branches[0].conic==="line"&&!isFinite(a.formula.simple_constant)&&(this.graphedLine={id:a.id}),this.graphedLine?{position:"e",content:["<b>Awesome!</b><br>","Restrict the domain of this line by making it<br> <code>","y=2x{1&lt;x&lt;2}</code><br>","<i>Hint: press the 'more' button on the keypad to find the { } buttons</i>"].join(""),sel:this.expressionsView.getItemView(this.graphedLine.id).$()}:(b=this.expressionsView.getSelectedView(),!b&&this.getFirstExp()&&(b=this.expressionsView.getItemView(this.getFirstExp().id)),b?{position:"e",content:["<b>Let's get started!</b><br>","Try graphing a straight line, like <code>y=2x</code>"].join(""),sel:b.$()}:{position:"e",content:"Click here to make a new blank expression",sel:".new-math-div"}))},a.restrictedParabolaTour=function(){var a,b,c;return this.graphedParabolaIsRestricted()?(this.phaseOn++,this.update()):(a=this.expressionsView.getSelectedView(),a&&(b=a.model,this.grapher().graphSketches[b.id]&&this.grapher().graphSketches[b.id].branches[0].conic==="parabola"&&(this.graphedParabola={id:b.id})),this.graphedParabola&&!this.expressionsView.getItemById(this.graphedParabola.id)&&(this.graphedParabola=null),this.graphedParabola?(c=this.expressionsView.getItemById(this.graphedParabola.id),c.isGraphable?c.dependent!=="y"?{position:"e",content:['<b>Don\'t forget the "y="!</b><br>',"Try typing all of <code>y=x<sup>2</sup></code>"].join(""),sel:this.expressionsView.getItemView(this.graphedParabola.id).$()}:this.graphedParabolaIsShifted()?{position:"e",content:["<b>Nice!</b><br>Now let's restrict the range. Change this to:<br>","<code>y=x<sup>2</sup>-2{y&lt;4}</code>"].join(""),sel:this.expressionsView.getItemView(this.graphedParabola.id).$()}:{position:"e",content:["<b>Move the parabola.</b><br>","Change this equation to <code>y=x<sup>2</sup>-2</code>"].join(""),sel:this.expressionsView.getItemView(this.graphedParabola.id).$()}:{doNotUpdate:!0}):a?{position:"e",content:["Now graph: <code>y=x<sup>2</sup></code><br>","<i>Hint: you can type y=x^2,"," or use the a<sup>2</sup> button on the keypad below</i>"].join(""),sel:a.$()}:{position:"e",content:"Click here to make a new blank expression",sel:".new-math-div"})},a.colorWasChanged=!1,a.changeColorTour=function(){var a,d,e=this;return b.each(this.expressionsView.getItemsByIndexRange(0,Infinity),function(a){a.unobserve("color.tour"),a.observe("color.tour",function(){e.colorWasChanged=!0})}),this.colorWasChanged?c(".options-menu").length?{position:"e",content:"... and click anywhere to close the color menu.",sel:"#exppanel-outer"}:{"final":!0,position:"e",endingMsg:"Great job! Now to complete your mission: make a face. Good luck!",sel:"#exppanel-outer"}:c(".options-menu").length?{position:"e",content:"<b>Last step...</b><br>Change the color!",sel:".options-menu"}:(a=this.expressionsView.getSelected()||this.getFirstExp(),d=this.expressionsView.getItemView(a.id),{position:"e",content:"<b>Great!</b><br>Click and hold to open the secret drawing menu.",sel:d.iconView.$icon})},a.phaseOn=0,a.phases=[a.restrictedLineTour,a.restrictedParabolaTour,a.changeColorTour],a.update=function(){return this.phases[this.phaseOn].call(this)}})}}),define("tours/tour_manager",["require","underscore","jquery","pjs","lib/urlparser","loadcss!css/tour","lib/trip","tours/sliders","tours/scatter_plot","tours/function_table","tours/mathart"],function(a){var b,c,d,e,f,g,h=a("underscore"),i=a("jquery"),j=a("pjs"),k=a("lib/urlparser");return a("loadcss!css/tour"),b=a("lib/trip"),c=a("tours/sliders"),d=a("tours/scatter_plot"),e=a("tours/function_table"),f=a("tours/mathart"),g=j(function(a,g){a.init=function(){this.tripManager=new b({onTripStop:this.stopTour.bind(this)}),this.currentStep=undefined,this.currentTour=undefined,this.TOURS={sliders:c,tables:d,functiontable:e},h.extend(this.TOURS,f)},a.startFromUrl=function(a){if(i(".expressionitem").length<2){setTimeout(this.startFromUrl.bind(this,a),100);return}var b=k.getParameter("tour");if(b&&this.TOURS[b]){var c=this.TOURS[b](a);this.startTour(c)}},a._tripLoop=function(){clearTimeout(this.__tripLoopTimeout);if(!this.running)return;var a=this.currentTour.update();if(a&&!a.doNotUpdate){this.currentStep=a;if(a.final){this.finishTour(a,5);return}this.tripManager.showTripBlock(a)}this.__tripLoopTimeout=setTimeout(this._tripLoop.bind(this),300)},a.updateNow=a._tripLoop,a.startTour=function(a){if(this.running)return;this.currentTour=a,this.running=!0,this._tripLoop(),this.tripManager.fadeInTripBlock()},a.finishTour=function(a,b){this.running=!1;var c=this;if(b<0){c.tripManager.stop();return}a.endingMsg&&(a.content=["<b>"+a.endingMsg+"</b><br>","This message will self-destruct in "+b+"..."].join("")),c.tripManager.showTripBlock(a),setTimeout(function(){c.finishTour(a,b-1)},1e3)},a.stopTour=function(){this.running=!1,this.currentStep=undefined,this.currentTour=undefined,clearTimeout(this.finishTimeout)}}),g}),function(a){var b=0,c=1,d=2,e=b,f=null;a(document).bind("touchstart",function(g){var h,i,j,k,l,m,n,o=a(g.target);e=b;while(e===b&&o.length){if(o[0].tagName===undefined)break;if(o.closest("[disablescroll]").length){e=b;return}h=o.css("overflow"),i=o.css("overflow-y"),h!=="hidden"&&h!=="visible"&&i!=="hidden"&&i!=="hidden"&&(j=o.scrollTop(),j!==0&&(e=d),o.scrollTop(j+1),o.scrollTop()!==j&&(e=c|e,o.scrollTop(j))),o=o.parent()}if(e!==b){f=[],k=g.originalEvent.touches;for(l=0;l<k.length;l++){m={};for(n in k[l])k[l].hasOwnProperty(n)&&(m[n]=k[l][n]);f.push(m)}}}),a(document).bind("touchmove",function(a){var g,h,i;f&&(g=f[0],h=a.originalEvent.touches[0],i=h.screenY-g.screenY,i>0&&!(e&d)?e=b:i<0&&!(e&c)&&(e=b),i&&(f=null)),e===b&&a.preventDefault()}),a(document).bind("touchend",function(){e=b,f=null})}(jQuery),define("lib/ipad.scrollfix",function(){}),define("main/calc_embed",["require","jquery","underscore","pjs","config","main/evaluator","graphing/grapher","graphing/poicontroller","graphing/graphcontroller","main/graph_settings","graphing/viewport","main/timermodules","expressions/list","expressions/list_view_desktop","main/focus","undoredo","main/keypad_view_handwriting","main/keypad_view","main/state_controller","main/propagate_selection","lib/set_list_height","lib/browser","main/settings_view_tablet_window","main/settings_view_tablet_options","main/zoom_view","main/resize","lib/external_screenshot","tours/tour_manager","lib/ipad.scrollfix"],function(a){var b,c=a("jquery"),d=a("underscore"),e=a("pjs"),f=a("config"),g=a("main/evaluator"),h=a("graphing/grapher"),i=a("graphing/poicontroller"),j=a("graphing/graphcontroller"),k=a("main/graph_settings"),l=a("graphing/viewport"),m=a("main/timermodules"),n=a("expressions/list"),o=a("expressions/list_view_desktop"),p=a("main/focus"),q=a("undoredo"),r=a("main/keypad_view_handwriting"),s=a("main/keypad_view"),t=a("main/state_controller"),u=a("main/propagate_selection"),v=a("lib/set_list_height"),w=a("lib/browser"),x=a("main/settings_view_tablet_window"),y=a("main/settings_view_tablet_options"),z=a("main/zoom_view"),A=a("main/resize"),B=a("lib/external_screenshot"),C=a("tours/tour_manager");return a("lib/ipad.scrollfix"),b=e(function(a){a.init=function(a){var b=n(),e=o(b),D=g(f.get("workerURL")),E=k(),F,G=["embed-container"];f.get("menus")||G.push("no-menus"),f.get("zoomButtons")||G.push("no-zoom");var H=c('<div class="'+G.join(" ")+'">'),I=c('<div class="grapher">');if(w.IS_IE9&&I.width()===0){var J=c(window.parent.document).find("iframe"),K=d.find(J,function(a){var b=c(a).contents().find("body[data-load-data]");if(b.length>0){var d=b.data("load-data").seed;return d===c("body").data("load-data").seed}return!1});K&&(I.width(c(K).width()-300),I.height(c(K).height()))}I.appendTo(H),f.get("keypad")?(F=f.get("handwriting")?r(e):s(e),v.init(e,F),F.appendTo(H)):c(".new-expression").hide(),f.get("nographpaper")&&H.addClass("no-graphpaper"),H.appendTo(a);var L=new h(I,E),M=new i(L),N=j(L),O=y(N),P=x(N),Q=c('<div id="settings-track">');O.appendTo(Q),P.appendTo(Q),Q.appendTo(H),E.registerCallbacks(N,e),E.observe("degreeMode",function(){D.setDegreeMode(E.degreeMode)});var R=z(N);R.appendTo(H);var S=t(N,b,E,e);this.Screenshot=B(H,e,L,D,S),L.redrawSlowly=L.redrawAllLayers,N.triggerViewportStable=function(){var a=L.createProjection();D.setViewState({viewport:a.viewport.toObject(),screen:a.screen}),L.viewport.isSquare(L.screen)&&L.settings.setProperty("squareAxes",!0),P.setViewport(N.getViewport())},D.triggerStatusChange=function(a){e.onChange(a)},D.triggerGraphComputed=function(a,b){L.updateSketch(a,b)},D.triggerRemove=function(a){L.hide(a)},D.triggerUpdateIntersections=function(a,b){L.updateIntersections(a,b),L.redrawPOILayer()},D.triggerRender=function(){M.handleTraceUpdate(),L.redrawContentLayers()},D.triggerRenderSlowly=function(){L.redrawSlowly()},b.triggerAddExp=function(a){if(!a)return;a.latex===""&&this.type!=="table"&&L.removeGraphSketch(a.id),D.addStatement(a)},b.triggerRemoveExp=function(a){D.removeStatement(a)},b.triggerRemoveExps=function(a){D.removeStatements(a)},b.observe("drawOrder",function(){L.setSketchOrder(b.getProperty("drawOrder"))}),b.batchEvaluation=D.batch.bind(D),e.triggerClearGraph=function(){S.setBlank()},u(e,L,D),A.register(function(){L.screen.width=L.$.width(),L.screen.height=L.$.height(),N.enforceSquareAxes(),L.redrawAllLayers(),F&&F.resize()}),M.triggerStartTracingBranch=function(a){e.setSelected(b.getItemById(a))},M.triggerEmptyTouchStart=function(){e.setSelected(null)},M.triggerStartMovingPoint=function(a){e.onStartMovingPoint(a)},M.triggerMovePoint=function(a,b){D.batch(function(){e.onMovePoint(a,b)})},M.triggerStopMovingPoint=function(a){e.onStopMovingPoint(a)},M.triggerPointSelected=function(a){e.setSelected(e.getItemView(a))},p.takeFocus=function(){e.setSelected(null)},e.appendTo(H),m.load("expressions.renderviewport",e,L),A.init(),c(document).bind("keydown",q.handleKeydown.bind(q)),this.expressions=e,this.grapher=L,this.graphController=N,this.evaluator=D,this.setState=S.setState.bind(S),this.setBlank=S.setBlank.bind(S),this.getState=S.getState.bind(S),this.tourManager=C(),this.setViewport=function(a){L.viewport=new l(a[0],a[1],a[2],a[3]),N.triggerViewportStable()},this.resize=function(){A.trigger()},this.interceptTouch=function(){var a=I;a=a.add(e.$("#expression-top-bar")),F&&(a=a.add(F.$())),a.on("touchstart",function(a){a.preventDefault()}),a.on("touchend",A.defocusMobile)},this.setOptions=function(a){var b=!1;a.hasOwnProperty("solutions")&&H.toggleClass("no-solutions",!a.solutions),a.hasOwnProperty("menus")&&(H.toggleClass("no-menus",!a.menus),b=!0),a.hasOwnProperty("graphpaper")&&(H.toggleClass("no-graphpaper",!a.graphpaper),b=!0),a.hasOwnProperty("zoomButtons")&&H.toggleClass("no-zoom",!a.zoomButtons),a.hasOwnProperty("keypad")&&console.warn("Bad option {keypad: "+a.keypad+"}. The keypad can only be added or removed at load time, not at runtime."),b&&A.trigger()},S.setBlank()}}),b}),window.Desmos||(window.Desmos={}),define("api/abstract_api",["require","pjs","expressions/colors"],function(a){function e(a){var b;return typeof a=="string"?b={latex:a}:a.headings!==undefined?(b=a,b.headings=b.headings.map(function(a){return typeof 
a=="string"?{latex:a}:a})):b=a,b}var b,c=a("pjs"),d=a("expressions/colors");return b=c(function(a){a.init=function(a,b){this._calc=a(b),this._calc.interceptTouch()},a.setExpression=function(a){var b=this._calc.expressions.model,c={},d=c.id=a.id.toString();if(!d)return;a.hasOwnProperty("latex")&&(c.latex=a.latex.toString()),a.hasOwnProperty("color")&&(c.color=a.color.toString()),a.hasOwnProperty("style")&&(c.style=a.style.toString()),a.hasOwnProperty("hidden")&&(c.userRequestedGraphing=a.hidden?"never":"always");if(b.getItemById(d))b.updateItemById(d,c);else{var f=b.fromState(e(c));b.addItem(f)}},a.setExpressions=function(a){a.forEach(this.setExpression.bind(this))},a.setViewport=function(a){a.length==4&&a[1]>a[0]&&a[3]>a[2]?this._calc.setViewport(a):console.warn("Invalid viewport.  Expected [xmin, xmax, ymin, ymax].  Got "+a)},a.resize=function(){this._calc.resize()}}),window.Desmos.Colors={RED:d.RED,BLUE:d.BLUE,GREEN:d.GREEN,ORANGE:d.ORANGE,PURPLE:d.PURPLE,BLACK:d.BLACK,next:d.next},b}),define("api/forwardmessages",["require"],function(){var a=function(a){function b(a,b){a.source.postMessage(JSON.stringify(b),a.origin)}var c=function(a){var b=JSON.parse(a.data);d.hasOwnProperty(b.type)?d[b.type](a,b.payload):console.warn("Unsupported API call ["+b.type+"]."+"Only getState, setState, and setBlank are supported in the iframe API.")},d={};d.setState=function(b,c){a.setState(JSON.parse(c))},d.setBlank=function(b){a.setBlank()},d.setOptions=function(b,c){a.setOptions(c)},d.getState=function(c){var d=a.getState();b(c,{type:"getState",payload:JSON.stringify(d)})},window.addEventListener("message",c,!1),parent!==window&&parent.postMessage(JSON.stringify({type:"ready"}),"*")};return a}),define("api/calculator",["require","pjs","jquery","main/calc_embed","./abstract_api","config","./forwardmessages"],function(a){var b,c=a("pjs"),d=a("jquery"),e=a("main/calc_embed"),f=a("./abstract_api"),g=a("config"),h=a("./forwardmessages");return g.get("cssURL")&&d("head").append('<link rel="stylesheet" href="'+g.get("cssURL")+'" />'),b=c(f,function(a,b){a.init=function(a){function i(){clearTimeout(g),c.css("content")==='"loaded"'?f.resize():setTimeout(i,200)}b.init.call(this,e,a),h(this._calc);var c=d('<div class="dcg-sentinal" style="display: none">');d(a).append(c);var f=this,g;i()},a.setState=function(){return this._calc.setState.apply(this._calc,arguments)},a.getState=function(){return this._calc.getState.apply(this._calc,arguments)},a.setBlank=function(){return this._calc.setBlank.apply(this._calc,arguments)},a.setOptions=function(){return this._calc.setOptions.apply(this._calc,arguments)}}),window.Desmos.Calculator=b,b}),Desmos=window.Desmos||{},Desmos.require=require,Desmos.requirejs=requirejs,requirejs(["api/calculator","jquery","underscore"],function(a,b,c){Desmos.$=b,Desmos._=c,b.noConflict(!0),c.noConflict()},undefined,!0),define("toplevel/calculator_embed",function(){})})();