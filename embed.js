/*
 RequireJS text 2.0.7 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/text for details
*/
(function(){var ya,ua,I;(function(b){function h(a,c){var d,e,f,b,g,k,m,r,w,x=c&&c.split("/"),p=l.map,q=p&&p["*"]||{};if(a&&"."===a.charAt(0))if(c){x=x.slice(0,x.length-1);a=x.concat(a.split("/"));for(r=0;r<a.length;r+=1)if(d=a[r],"."===d)a.splice(r,1),r-=1;else if(".."===d)if(1!==r||".."!==a[2]&&".."!==a[0])0<r&&(a.splice(r-1,2),r-=2);else break;a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((x||q)&&p){d=a.split("/");for(r=d.length;0<r;r-=1){e=d.slice(0,r).join("/");if(x)for(w=x.length;0<
w;w-=1)if(f=p[x.slice(0,w).join("/")])if(f=f[e]){b=f;g=r;break}if(b)break;!k&&q&&q[e]&&(k=q[e],m=r)}!b&&k&&(b=k,g=m);b&&(d.splice(0,g,b),a=d.join("/"))}return a}function u(a,d){return function(){return c.apply(b,r.call(arguments,0).concat([a,d]))}}function w(a){return function(c){return h(c,a)}}function q(a){return function(c){e[a]=c}}function p(a){if(x.call(d,a)){var c=d[a];delete d[a];m[a]=!0;k.apply(b,c)}if(!x.call(e,a)&&!x.call(m,a))throw Error("No "+a);return e[a]}function s(a){var c,d=a?a.indexOf("!"):
-1;-1<d&&(c=a.substring(0,d),a=a.substring(d+1,a.length));return[c,a]}function a(a){return function(){return l&&l.config&&l.config[a]||{}}}var k,c,g,f,e={},d={},l={},m={},x=Object.prototype.hasOwnProperty,r=[].slice;g=function(a,c){var d,e=s(a),f=e[0];a=e[1];f&&(f=h(f,c),d=p(f));f?a=d&&d.normalize?d.normalize(a,w(c)):h(a,c):(a=h(a,c),e=s(a),f=e[0],a=e[1],f&&(d=p(f)));return{f:f?f+"!"+a:a,n:a,pr:f,p:d}};f={require:function(a){return u(a)},exports:function(a){var c=e[a];return"undefined"!==typeof c?
c:e[a]={}},module:function(c){return{id:c,uri:"",exports:e[c],config:a(c)}}};k=function(a,c,l,k){var r,w,h,s,H=[],J;k=k||a;if("function"===typeof l){c=!c.length&&l.length?["require","exports","module"]:c;for(s=0;s<c.length;s+=1)if(h=g(c[s],k),w=h.f,"require"===w)H[s]=f.require(a);else if("exports"===w)H[s]=f.exports(a),J=!0;else if("module"===w)r=H[s]=f.module(a);else if(x.call(e,w)||x.call(d,w)||x.call(m,w))H[s]=p(w);else if(h.p)h.p.load(h.n,u(k,!0),q(w),{}),H[s]=e[w];else throw Error(a+" missing "+
w);c=l.apply(e[a],H);a&&(r&&r.exports!==b&&r.exports!==e[a]?e[a]=r.exports:c===b&&J||(e[a]=c))}else a&&(e[a]=l)};ya=ua=c=function(a,d,e,m,r){if("string"===typeof a)return f[a]?f[a](d):p(g(a,d).f);a.splice||(l=a,d.splice?(a=d,d=e,e=null):a=b);d=d||function(){};"function"===typeof e&&(e=m,m=r);m?k(b,a,d,e):setTimeout(function(){k(b,a,d,e)},4);return c};c.config=function(a){l=a;l.deps&&c(l.deps,l.callback);return c};I=function(a,c,f){c.splice||(f=c,c=[]);x.call(e,a)||x.call(d,a)||(d[a]=[a,c,f])};I.amd=
{jQuery:!0}})();I("vendor/almond",function(){});I("pjs",[],function(){return function(b,h,u){function w(b){return"function"===typeof b}function q(){}function p(s,a){function k(){var a=new c;w(a.init)&&a.init.apply(a,arguments);return a}function c(){}a===u&&(a=s,s=Object);k.Bare=c;var g=q[b]=s[b],f=c[b]=k[b]=new q,e;f.constructor=k;k.mixin=function(a){c[b]=k[b]=p(k,a)[b];return k};return(k.open=function(a){e={};w(a)?e=a.call(k,f,g,k,s):"object"===typeof a&&(e=a);if("object"===typeof e)for(var c in e)h.call(e,
c)&&(f[c]=e[c]);w(f.init)||(f.init=s);return k})(a)}return p}("prototype",{}.hasOwnProperty)});(function(b,h){function u(a){var c=oa[a]={};v.each(a.split(U),function(a,d){c[d]=!0});return c}function w(a,c,d){if(d===h&&1===a.nodeType)if(d="data-"+c.replace(Ha,"-$1").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:Na.test(d)?v.parseJSON(d):d}catch(e){}v.data(a,c,d)}else d=h;return d}function q(a){for(var c in a)if(("data"!==c||!v.isEmptyObject(a[c]))&&
"toJSON"!==c)return!1;return!0}function p(){return!1}function s(){return!0}function a(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function k(a,c){do a=a[c];while(a&&1!==a.nodeType);return a}function c(a,c,d){c=c||0;if(v.isFunction(c))return v.grep(a,function(a,e){return!!c.call(a,e,a)===d});if(c.nodeType)return v.grep(a,function(a,e){return a===c===d});if("string"===typeof c){var e=v.grep(a,function(a){return 1===a.nodeType});if(sb.test(c))return v.filter(c,e,!d);c=v.filter(c,e)}return v.grep(a,
function(a,e){return 0<=v.inArray(a,c)===d})}function g(a){var c=Wa.split("|");a=a.createDocumentFragment();if(a.createElement)for(;c.length;)a.createElement(c.pop());return a}function f(a,c){if(1===c.nodeType&&v.hasData(a)){var d,e,f;e=v._data(a);var b=v._data(c,e),l=e.events;if(l)for(d in delete b.handle,b.events={},l)for(e=0,f=l[d].length;e<f;e++)v.event.add(c,d,l[d][e]);b.data&&(b.data=v.extend({},b.data))}}function e(a,c){var d;1===c.nodeType&&(c.clearAttributes&&c.clearAttributes(),c.mergeAttributes&&
c.mergeAttributes(a),d=c.nodeName.toLowerCase(),"object"===d?(c.parentNode&&(c.outerHTML=a.outerHTML),v.support.html5Clone&&a.innerHTML&&!v.trim(c.innerHTML)&&(c.innerHTML=a.innerHTML)):"input"===d&&Xa.test(a.type)?(c.defaultChecked=c.checked=a.checked,c.value!==a.value&&(c.value=a.value)):"option"===d?c.selected=a.defaultSelected:"input"===d||"textarea"===d?c.defaultValue=a.defaultValue:"script"===d&&c.text!==a.text&&(c.text=a.text),c.removeAttribute(v.expando))}function d(a){return"undefined"!==
typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function l(a){Xa.test(a.type)&&(a.defaultChecked=a.checked)}function m(a,c){if(c in a)return c;for(var d=c.charAt(0).toUpperCase()+c.slice(1),e=c,f=Ya.length;f--;)if(c=Ya[f]+d,c in a)return c;return e}function x(a,c){a=c||a;return"none"===v.css(a,"display")||!v.contains(a.ownerDocument,a)}function r(a,c){for(var d,e,f=[],b=0,l=a.length;b<l;b++)d=a[b],d.style&&(f[b]=v._data(d,
"olddisplay"),c?(f[b]||"none"!==d.style.display||(d.style.display=""),""===d.style.display&&x(d)&&(f[b]=v._data(d,"olddisplay",z(d.nodeName)))):(e=ka(d,"display"),f[b]||"none"===e||v._data(d,"olddisplay",e)));for(b=0;b<l;b++)d=a[b],!d.style||c&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=c?f[b]||"":"none");return a}function n(a,c,d){return(a=tb.exec(c))?Math.max(0,a[1]-(d||0))+(a[2]||"px"):c}function y(a,c,d,e){c=d===(e?"border":"content")?4:"width"===c?1:0;for(var f=0;4>c;c+=
2)"margin"===d&&(f+=v.css(a,d+va[c],!0)),e?("content"===d&&(f-=parseFloat(ka(a,"padding"+va[c]))||0),"margin"!==d&&(f-=parseFloat(ka(a,"border"+va[c]+"Width"))||0)):(f+=parseFloat(ka(a,"padding"+va[c]))||0,"padding"!==d&&(f+=parseFloat(ka(a,"border"+va[c]+"Width"))||0));return f}function B(a,c,d){var e="width"===c?a.offsetWidth:a.offsetHeight,f=!0,b=v.support.boxSizing&&"border-box"===v.css(a,"boxSizing");if(0>=e||null==e){e=ka(a,c);if(0>e||null==e)e=a.style[c];if(Ia.test(e))return e;f=b&&(v.support.boxSizingReliable||
e===a.style[c]);e=parseFloat(e)||0}return e+y(a,c,d||(b?"border":"content"),f)+"px"}function z(a){if(Oa[a])return Oa[a];var c=v("<"+a+">").appendTo(P.body),d=c.css("display");c.remove();if("none"===d||""===d)za=P.body.appendChild(za||v.extend(P.createElement("iframe"),{frameBorder:0,width:0,height:0})),Aa&&za.createElement||(Aa=(za.contentWindow||za.contentDocument).document,Aa.write("<!doctype html><html><body>"),Aa.close()),c=Aa.body.appendChild(Aa.createElement(a)),d=ka(c,"display"),P.body.removeChild(za);
return Oa[a]=d}function C(a,c,d,e){var f;if(v.isArray(c))v.each(c,function(c,f){d||ub.test(a)?e(a,f):C(a+"["+("object"===typeof f?c:"")+"]",f,d,e)});else if(d||"object"!==v.type(c))e(a,c);else for(f in c)C(a+"["+f+"]",c[f],d,e)}function D(a){return function(c,d){"string"!==typeof c&&(d=c,c="*");var e,f,b=c.toLowerCase().split(U),l=0,g=b.length;if(v.isFunction(d))for(;l<g;l++)e=b[l],(f=/^\+/.test(e))&&(e=e.substr(1)||"*"),e=a[e]=a[e]||[],e[f?"unshift":"push"](d)}}function F(a,c,d,e,f,b){f=f||c.dataTypes[0];
b=b||{};b[f]=!0;var l;f=a[f];for(var g=0,k=f?f.length:0,m=a===Pa;g<k&&(m||!l);g++)l=f[g](c,d,e),"string"===typeof l&&(!m||b[l]?l=h:(c.dataTypes.unshift(l),l=F(a,c,d,e,l,b)));!m&&l||b["*"]||(l=F(a,c,d,e,"*",b));return l}function G(a,c){var d,e,f=v.ajaxSettings.flatOptions||{};for(d in c)c[d]!==h&&((f[d]?a:e||(e={}))[d]=c[d]);e&&v.extend(!0,a,e)}function H(){try{return new b.XMLHttpRequest}catch(a){}}function J(){setTimeout(function(){Ba=h},0);return Ba=v.now()}function A(a,c){v.each(c,function(c,d){for(var e=
(Ea[c]||[]).concat(Ea["*"]),f=0,b=e.length;f<b&&!e[f].call(a,c,d);f++);})}function L(a,c,d){var e=0,f=Ja.length,b=v.Deferred().always(function(){delete l.elem}),l=function(){for(var c=Ba||J(),c=Math.max(0,g.startTime+g.duration-c),d=1-(c/g.duration||0),e=0,f=g.tweens.length;e<f;e++)g.tweens[e].run(d);b.notifyWith(a,[g,d,c]);if(1>d&&f)return c;b.resolveWith(a,[g]);return!1},g=b.promise({elem:a,props:v.extend({},c),opts:v.extend(!0,{specialEasing:{}},d),originalProperties:c,originalOptions:d,startTime:Ba||
J(),duration:d.duration,tweens:[],createTween:function(c,d,e){c=v.Tween(a,g.opts,c,d,g.opts.specialEasing[c]||g.opts.easing);g.tweens.push(c);return c},stop:function(c){for(var d=0,e=c?g.tweens.length:0;d<e;d++)g.tweens[d].run(1);c?b.resolveWith(a,[g,c]):b.rejectWith(a,[g,c]);return this}});d=g.props;for(O(d,g.opts.specialEasing);e<f;e++)if(c=Ja[e].call(g,a,d,g.opts))return c;A(g,d);v.isFunction(g.opts.start)&&g.opts.start.call(a,g);v.fx.timer(v.extend(l,{anim:g,queue:g.opts.queue,elem:a}));return g.progress(g.opts.progress).done(g.opts.done,
g.opts.complete).fail(g.opts.fail).always(g.opts.always)}function O(a,c){var d,e,f,b,l;for(d in a)if(e=v.camelCase(d),f=c[e],b=a[d],v.isArray(b)&&(f=b[1],b=a[d]=b[0]),d!==e&&(a[e]=b,delete a[d]),(l=v.cssHooks[e])&&"expand"in l)for(d in b=l.expand(b),delete a[e],b)d in a||(a[d]=b[d],c[d]=f);else c[e]=f}function K(a,c,d,e,f){return new K.prototype.init(a,c,d,e,f)}function Q(a,c){var d,e={height:a},f=0;for(c=c?1:0;4>f;f+=2-c)d=va[f],e["margin"+d]=e["padding"+d]=a;c&&(e.opacity=e.width=a);return e}function M(a){return v.isWindow(a)?
a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var Z,Y,P=b.document,E=b.location,N=b.navigator,S=b.jQuery,V=b.$,X=Array.prototype.push,R=Array.prototype.slice,ga=Array.prototype.indexOf,aa=Object.prototype.toString,pa=Object.prototype.hasOwnProperty,fa=String.prototype.trim,v=function(a,c){return new v.fn.init(a,c,Z)},ea=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,ba=/\S/,U=/\s+/,W=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,da=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ca=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,
$=/^[\],:{}\s]*$/,ja=/(?:^|:|,)(?:\s*\[)+/g,ra=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ha=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,la=/^-ms-/,sa=/-([\da-z])/gi,Fa=function(a,c){return(c+"").toUpperCase()},Ca=function(){P.addEventListener?(P.removeEventListener("DOMContentLoaded",Ca,!1),v.ready()):"complete"===P.readyState&&(P.detachEvent("onreadystatechange",Ca),v.ready())},qa={};v.fn=v.prototype={constructor:v,init:function(a,c,d){var e;if(!a)return this;if(a.nodeType)return this.context=
this[0]=a,this.length=1,this;if("string"===typeof a){e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:da.exec(a);if(!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1])return a=(c=c instanceof v?c[0]:c)&&c.nodeType?c.ownerDocument||c:P,a=v.parseHTML(e[1],a,!0),ca.test(e[1])&&v.isPlainObject(c)&&this.attr.call(a,c,!0),v.merge(this,a);if((c=P.getElementById(e[2]))&&c.parentNode){if(c.id!==e[2])return d.find(a);this.length=1;this[0]=c}this.context=
P;this.selector=a;return this}if(v.isFunction(a))return d.ready(a);a.selector!==h&&(this.selector=a.selector,this.context=a.context);return v.makeArray(a,this)},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return R.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,c,d){a=v.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;"find"===c?a.selector=this.selector+(this.selector?
" ":"")+d:c&&(a.selector=this.selector+"."+c+"("+d+")");return a},each:function(a,c){return v.each(this,a,c)},ready:function(a){v.ready.promise().done(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(R.apply(this,arguments),"slice",R.call(arguments).join(","))},map:function(a){return this.pushStack(v.map(this,function(c,d){return a.call(c,d,c)}))},end:function(){return this.prevObject||
this.constructor(null)},push:X,sort:[].sort,splice:[].splice};v.fn.init.prototype=v.fn;v.extend=v.fn.extend=function(){var a,c,d,e,f,b=arguments[0]||{},l=1,g=arguments.length,k=!1;"boolean"===typeof b&&(k=b,b=arguments[1]||{},l=2);"object"===typeof b||v.isFunction(b)||(b={});g===l&&(b=this,--l);for(;l<g;l++)if(null!=(a=arguments[l]))for(c in a)d=b[c],e=a[c],b!==e&&(k&&e&&(v.isPlainObject(e)||(f=v.isArray(e)))?(f?(f=!1,d=d&&v.isArray(d)?d:[]):d=d&&v.isPlainObject(d)?d:{},b[c]=v.extend(k,d,e)):e!==
h&&(b[c]=e));return b};v.extend({noConflict:function(a){b.$===v&&(b.$=V);a&&b.jQuery===v&&(b.jQuery=S);return v},isReady:!1,readyWait:1,holdReady:function(a){a?v.readyWait++:v.ready(!0)},ready:function(a){if(!0===a?!--v.readyWait:!v.isReady){if(!P.body)return setTimeout(v.ready,1);v.isReady=!0;!0!==a&&0<--v.readyWait||(Y.resolveWith(P,[v]),v.fn.trigger&&v(P).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===v.type(a)},isArray:Array.isArray||function(a){return"array"===v.type(a)},
isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):qa[aa.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==v.type(a)||a.nodeType||v.isWindow(a))return!1;try{if(a.constructor&&!pa.call(a,"constructor")&&!pa.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}for(var d in a);return d===h||pa.call(a,d)},isEmptyObject:function(a){for(var c in a)return!1;return!0},
error:function(a){throw Error(a);},parseHTML:function(a,c,d){var e;if(!a||"string"!==typeof a)return null;"boolean"===typeof c&&(d=c,c=0);c=c||P;if(e=ca.exec(a))return[c.createElement(e[1])];e=v.buildFragment([a],c,d?null:[]);return v.merge([],(e.cacheable?v.clone(e.fragment):e.fragment).childNodes)},parseJSON:function(a){if(!a||"string"!==typeof a)return null;a=v.trim(a);if(b.JSON&&b.JSON.parse)return b.JSON.parse(a);if($.test(a.replace(ra,"@").replace(ha,"]").replace(ja,"")))return(new Function("return "+
a))();v.error("Invalid JSON: "+a)},parseXML:function(a){var c,d;if(!a||"string"!==typeof a)return null;try{b.DOMParser?(d=new DOMParser,c=d.parseFromString(a,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a))}catch(e){c=h}c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||v.error("Invalid XML: "+a);return c},noop:function(){},globalEval:function(a){a&&ba.test(a)&&(b.execScript||function(a){b.eval.call(b,a)})(a)},camelCase:function(a){return a.replace(la,
"ms-").replace(sa,Fa)},nodeName:function(a,c){return a.nodeName&&a.nodeName.toLowerCase()===c.toLowerCase()},each:function(a,c,d){var e,f=0,b=a.length,l=b===h||v.isFunction(a);if(d)if(l)for(e in a){if(!1===c.apply(a[e],d))break}else for(;f<b&&!1!==c.apply(a[f++],d););else if(l)for(e in a){if(!1===c.call(a[e],e,a[e]))break}else for(;f<b&&!1!==c.call(a[f],f,a[f++]););return a},trim:fa&&!fa.call("﻿ ")?function(a){return null==a?"":fa.call(a)}:function(a){return null==a?"":(a+"").replace(W,"")},makeArray:function(a,
c){var d,e=c||[];null!=a&&(d=v.type(a),null==a.length||"string"===d||"function"===d||"regexp"===d||v.isWindow(a)?X.call(e,a):v.merge(e,a));return e},inArray:function(a,c,d){var e;if(c){if(ga)return ga.call(c,a,d);e=c.length;for(d=d?0>d?Math.max(0,e+d):d:0;d<e;d++)if(d in c&&c[d]===a)return d}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"===typeof d)for(;f<d;f++)a[e++]=c[f];else for(;c[f]!==h;)a[e++]=c[f++];a.length=e;return a},grep:function(a,c,d){var e,f=[],b=0,l=a.length;
for(d=!!d;b<l;b++)e=!!c(a[b],b),d!==e&&f.push(a[b]);return f},map:function(a,c,d){var e,f,b=[],l=0,g=a.length;if(a instanceof v||g!==h&&"number"===typeof g&&(0<g&&a[0]&&a[g-1]||0===g||v.isArray(a)))for(;l<g;l++)e=c(a[l],l,d),null!=e&&(b[b.length]=e);else for(f in a)e=c(a[f],f,d),null!=e&&(b[b.length]=e);return b.concat.apply([],b)},guid:1,proxy:function(a,c){var d,e;"string"===typeof c&&(d=a[c],c=a,a=d);if(!v.isFunction(a))return h;e=R.call(arguments,2);d=function(){return a.apply(c,e.concat(R.call(arguments)))};
d.guid=a.guid=a.guid||v.guid++;return d},access:function(a,c,d,e,f,b,l){var g,k=null==d,m=0,r=a.length;if(d&&"object"===typeof d){for(m in d)v.access(a,c,m,d[m],1,b,e);f=1}else if(e!==h){g=l===h&&v.isFunction(e);k&&(g?(g=c,c=function(a,c,d){return g.call(v(a),d)}):(c.call(a,e),c=null));if(c)for(;m<r;m++)c(a[m],d,g?e.call(a[m],m,c(a[m],d)):e,l);f=1}return f?a:k?c.call(a):r?c(a[0],d):b},now:function(){return(new Date).getTime()}});v.ready.promise=function(a){if(!Y)if(Y=v.Deferred(),"complete"===P.readyState)setTimeout(v.ready,
1);else if(P.addEventListener)P.addEventListener("DOMContentLoaded",Ca,!1),b.addEventListener("load",v.ready,!1);else{P.attachEvent("onreadystatechange",Ca);b.attachEvent("onload",v.ready);var c=!1;try{c=null==b.frameElement&&P.documentElement}catch(d){}c&&c.doScroll&&function rb(){if(!v.isReady){try{c.doScroll("left")}catch(a){return setTimeout(rb,50)}v.ready()}}()}return Y.promise(a)};v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,c){qa["[object "+c+"]"]=
c.toLowerCase()});Z=v(P);var oa={};v.Callbacks=function(a){a="string"===typeof a?oa[a]||u(a):v.extend({},a);var c,d,e,f,b,l,g=[],k=!a.once&&[],m=function(n){c=a.memory&&n;d=!0;l=f||0;f=0;b=g.length;for(e=!0;g&&l<b;l++)if(!1===g[l].apply(n[0],n[1])&&a.stopOnFalse){c=!1;break}e=!1;g&&(k?k.length&&m(k.shift()):c?g=[]:r.disable())},r={add:function(){if(g){var d=g.length;(function vb(c){v.each(c,function(c,d){var e=v.type(d);"function"===e?a.unique&&r.has(d)||g.push(d):d&&d.length&&"string"!==e&&vb(d)})})(arguments);
e?b=g.length:c&&(f=d,m(c))}return this},remove:function(){g&&v.each(arguments,function(a,c){for(var d;-1<(d=v.inArray(c,g,d));)g.splice(d,1),e&&(d<=b&&b--,d<=l&&l--)});return this},has:function(a){return-1<v.inArray(a,g)},empty:function(){g=[];return this},disable:function(){g=k=c=h;return this},disabled:function(){return!g},lock:function(){k=h;c||r.disable();return this},locked:function(){return!k},fireWith:function(a,c){c=c||[];c=[a,c.slice?c.slice():c];!g||d&&!k||(e?k.push(c):m(c));return this},
fire:function(){r.fireWith(this,arguments);return this},fired:function(){return!!d}};return r};v.extend({Deferred:function(a){var c=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],d="pending",e={state:function(){return d},always:function(){f.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return v.Deferred(function(d){v.each(c,function(c,e){var b=e[0],l=a[c];
f[e[1]](v.isFunction(l)?function(){var a=l.apply(this,arguments);if(a&&v.isFunction(a.promise))a.promise().done(d.resolve).fail(d.reject).progress(d.notify);else d[b+"With"](this===f?d:this,[a])}:d[b])});a=null}).promise()},promise:function(a){return null!=a?v.extend(a,e):e}},f={};e.pipe=e.then;v.each(c,function(a,b){var l=b[2],g=b[3];e[b[1]]=l.add;g&&l.add(function(){d=g},c[a^1][2].disable,c[2][2].lock);f[b[0]]=l.fire;f[b[0]+"With"]=l.fireWith});e.promise(f);a&&a.call(f,f);return f},when:function(a){var c=
0,d=R.call(arguments),e=d.length,f=1!==e||a&&v.isFunction(a.promise)?e:0,b=1===f?a:v.Deferred(),l=function(a,c,d){return function(e){c[a]=this;d[a]=1<arguments.length?R.call(arguments):e;d===g?b.notifyWith(c,d):--f||b.resolveWith(c,d)}},g,k,m;if(1<e)for(g=Array(e),k=Array(e),m=Array(e);c<e;c++)d[c]&&v.isFunction(d[c].promise)?d[c].promise().done(l(c,m,d)).fail(b.reject).progress(l(c,k,g)):--f;f||b.resolveWith(m,d);return b.promise()}});v.support=function(){var a,c,d,e,f,l,g,k=P.createElement("div");
k.setAttribute("className","t");k.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";c=k.getElementsByTagName("*");d=k.getElementsByTagName("a")[0];if(!c||!d||!c.length)return{};e=P.createElement("select");f=e.appendChild(P.createElement("option"));c=k.getElementsByTagName("input")[0];d.style.cssText="top:1px;float:left;opacity:.5";a={leadingWhitespace:3===k.firstChild.nodeType,tbody:!k.getElementsByTagName("tbody").length,htmlSerialize:!!k.getElementsByTagName("link").length,
style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===c.value,optSelected:f.selected,getSetAttribute:"t"!==k.className,enctype:!!P.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==P.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===P.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,
reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};c.checked=!0;a.noCloneChecked=c.cloneNode(!0).checked;e.disabled=!0;a.optDisabled=!f.disabled;try{delete k.test}catch(m){a.deleteExpando=!1}!k.addEventListener&&k.attachEvent&&k.fireEvent&&(k.attachEvent("onclick",d=function(){a.noCloneEvent=!1}),k.cloneNode(!0).fireEvent("onclick"),k.detachEvent("onclick",d));c=P.createElement("input");c.value="t";c.setAttribute("type","radio");a.radioValue="t"===c.value;c.setAttribute("checked","checked");
c.setAttribute("name","t");k.appendChild(c);d=P.createDocumentFragment();d.appendChild(k.lastChild);a.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;a.appendChecked=c.checked;d.removeChild(c);d.appendChild(k);if(k.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})c="on"+l,g=c in k,g||(k.setAttribute(c,"return;"),g="function"===typeof k[c]),a[l+"Bubbles"]=g;v(function(){var c,d,e,f=P.getElementsByTagName("body")[0];f&&(c=P.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",
f.insertBefore(c,f.firstChild),d=P.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=d.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",g=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",a.reliableHiddenOffsets=g&&0===e[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",
a.boxSizing=4===d.offsetWidth,a.doesNotIncludeMarginInBodyOffset=1!==f.offsetTop,b.getComputedStyle&&(a.pixelPosition="1%"!==(b.getComputedStyle(d,null)||{}).top,a.boxSizingReliable="4px"===(b.getComputedStyle(d,null)||{width:"4px"}).width,e=P.createElement("div"),e.style.cssText=d.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",e.style.marginRight=e.style.width="0",d.style.width="1px",d.appendChild(e),a.reliableMarginRight=!parseFloat((b.getComputedStyle(e,null)||{}).marginRight)),
"undefined"!==typeof d.style.zoom&&(d.innerHTML="",d.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",a.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",a.shrinkWrapBlocks=3!==d.offsetWidth,c.style.zoom=1),f.removeChild(c))});d.removeChild(k);c=d=e=f=c=d=k=null;return a}();var Na=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ha=/([A-Z])/g;v.extend({cache:{},
deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?v.cache[a[v.expando]]:a[v.expando];return!!a&&!q(a)},data:function(a,c,d,e){if(v.acceptData(a)){var f=v.expando,b="string"===typeof c,l=a.nodeType,g=l?v.cache:a,k=l?a[f]:a[f]&&f;if(k&&g[k]&&(e||g[k].data)||!b||d!==h){k||(l?a[f]=k=v.deletedIds.pop()||v.guid++:k=f);g[k]||(g[k]={},l||(g[k].toJSON=v.noop));
if("object"===typeof c||"function"===typeof c)e?g[k]=v.extend(g[k],c):g[k].data=v.extend(g[k].data,c);a=g[k];e||(a.data||(a.data={}),a=a.data);d!==h&&(a[v.camelCase(c)]=d);b?(d=a[c],null==d&&(d=a[v.camelCase(c)])):d=a;return d}}},removeData:function(a,c,d){if(v.acceptData(a)){var e,f,b,l=a.nodeType,g=l?v.cache:a,k=l?a[v.expando]:v.expando;if(g[k]){if(c&&(e=d?g[k]:g[k].data)){v.isArray(c)||(c in e?c=[c]:(c=v.camelCase(c),c=c in e?[c]:c.split(" ")));f=0;for(b=c.length;f<b;f++)delete e[c[f]];if(!(d?
q:v.isEmptyObject)(e))return}if(!d&&(delete g[k].data,!q(g[k])))return;l?v.cleanData([a],!0):v.support.deleteExpando||g!=g.window?delete g[k]:g[k]=null}}},_data:function(a,c,d){return v.data(a,c,d,!0)},acceptData:function(a){var c=a.nodeName&&v.noData[a.nodeName.toLowerCase()];return!c||!0!==c&&a.getAttribute("classid")===c}});v.fn.extend({data:function(a,c){var d,e,f,b,l,g=this[0],k=0,m=null;if(a===h){if(this.length&&(m=v.data(g),1===g.nodeType&&!v._data(g,"parsedAttrs"))){f=g.attributes;for(l=f.length;k<
l;k++)b=f[k].name,b.indexOf("data-")||(b=v.camelCase(b.substring(5)),w(g,b,m[b]));v._data(g,"parsedAttrs",!0)}return m}if("object"===typeof a)return this.each(function(){v.data(this,a)});d=a.split(".",2);d[1]=d[1]?"."+d[1]:"";e=d[1]+"!";return v.access(this,function(c){if(c===h)return m=this.triggerHandler("getData"+e,[d[0]]),m===h&&g&&(m=v.data(g,a),m=w(g,a,m)),m===h&&d[1]?this.data(d[0]):m;d[1]=c;this.each(function(){var f=v(this);f.triggerHandler("setData"+e,d);v.data(this,a,c);f.triggerHandler("changeData"+
e,d)})},null,c,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){v.removeData(this,a)})}});v.extend({queue:function(a,c,d){var e;if(a)return c=(c||"fx")+"queue",e=v._data(a,c),d&&(!e||v.isArray(d)?e=v._data(a,c,v.makeArray(d)):e.push(d)),e||[]},dequeue:function(a,c){c=c||"fx";var d=v.queue(a,c),e=d.length,f=d.shift(),b=v._queueHooks(a,c),g=function(){v.dequeue(a,c)};"inprogress"===f&&(f=d.shift(),e--);f&&("fx"===c&&d.unshift("inprogress"),delete b.stop,f.call(a,g,b));
!e&&b&&b.empty.fire()},_queueHooks:function(a,c){var d=c+"queueHooks";return v._data(a,d)||v._data(a,d,{empty:v.Callbacks("once memory").add(function(){v.removeData(a,c+"queue",!0);v.removeData(a,d,!0)})})}});v.fn.extend({queue:function(a,c){var d=2;"string"!==typeof a&&(c=a,a="fx",d--);return arguments.length<d?v.queue(this[0],a):c===h?this:this.each(function(){var d=v.queue(this,a,c);v._queueHooks(this,a);"fx"===a&&"inprogress"!==d[0]&&v.dequeue(this,a)})},dequeue:function(a){return this.each(function(){v.dequeue(this,
a)})},delay:function(a,c){a=v.fx?v.fx.speeds[a]||a:a;return this.queue(c||"fx",function(c,d){var e=setTimeout(c,a);d.stop=function(){clearTimeout(e)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=v.Deferred(),b=this,g=this.length,l=function(){--e||f.resolveWith(b,[b])};"string"!==typeof a&&(c=a,a=h);for(a=a||"fx";g--;)(d=v._data(b[g],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(l));l();return f.promise(c)}});var ma,Qa,Ka,Za=/[\t\r\n]/g,wb=/\r/g,xb=/^(?:button|input)$/i,
yb=/^(?:button|input|object|select|textarea)$/i,zb=/^a(?:rea|)$/i,$a=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ab=v.support.getSetAttribute;v.fn.extend({attr:function(a,c){return v.access(this,v.attr,a,c,1<arguments.length)},removeAttr:function(a){return this.each(function(){v.removeAttr(this,a)})},prop:function(a,c){return v.access(this,v.prop,a,c,1<arguments.length)},removeProp:function(a){a=v.propFix[a]||a;return this.each(function(){try{this[a]=
h,delete this[a]}catch(c){}})},addClass:function(a){var c,d,e,f,b,g,l;if(v.isFunction(a))return this.each(function(c){v(this).addClass(a.call(this,c,this.className))});if(a&&"string"===typeof a)for(c=a.split(U),d=0,e=this.length;d<e;d++)if(f=this[d],1===f.nodeType)if(f.className||1!==c.length){b=" "+f.className+" ";g=0;for(l=c.length;g<l;g++)0>b.indexOf(" "+c[g]+" ")&&(b+=c[g]+" ");f.className=v.trim(b)}else f.className=a;return this},removeClass:function(a){var c,d,e,f,b,g,l;if(v.isFunction(a))return this.each(function(c){v(this).removeClass(a.call(this,
c,this.className))});if(a&&"string"===typeof a||a===h)for(c=(a||"").split(U),g=0,l=this.length;g<l;g++)if(e=this[g],1===e.nodeType&&e.className){d=(" "+e.className+" ").replace(Za," ");f=0;for(b=c.length;f<b;f++)for(;0<=d.indexOf(" "+c[f]+" ");)d=d.replace(" "+c[f]+" "," ");e.className=a?v.trim(d):""}return this},toggleClass:function(a,c){var d=typeof a,e="boolean"===typeof c;return v.isFunction(a)?this.each(function(d){v(this).toggleClass(a.call(this,d,this.className,c),c)}):this.each(function(){if("string"===
d)for(var f,b=0,g=v(this),l=c,k=a.split(U);f=k[b++];)l=e?l:!g.hasClass(f),g[l?"addClass":"removeClass"](f);else if("undefined"===d||"boolean"===d)this.className&&v._data(this,"__className__",this.className),this.className=this.className||!1===a?"":v._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var c=0,d=this.length;c<d;c++)if(1===this[c].nodeType&&0<=(" "+this[c].className+" ").replace(Za," ").indexOf(a))return!0;return!1},val:function(a){var c,d,e,f=this[0];if(arguments.length)return e=
v.isFunction(a),this.each(function(d){var f=v(this);1===this.nodeType&&(d=e?a.call(this,d,f.val()):a,null==d?d="":"number"===typeof d?d+="":v.isArray(d)&&(d=v.map(d,function(a){return null==a?"":a+""})),c=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,d,"value")!==h||(this.value=d))});if(f){if((c=v.valHooks[f.type]||v.valHooks[f.nodeName.toLowerCase()])&&"get"in c&&(d=c.get(f,"value"))!==h)return d;d=f.value;return"string"===typeof d?d.replace(wb,""):null==
d?"":d}}});v.extend({valHooks:{option:{get:function(a){var c=a.attributes.value;return!c||c.specified?a.value:a.text}},select:{get:function(a){for(var c,d=a.options,e=a.selectedIndex,f=(a="select-one"===a.type||0>e)?null:[],b=a?e+1:d.length,g=0>e?b:a?e:0;g<b;g++)if(c=d[g],!(!c.selected&&g!==e||(v.support.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&v.nodeName(c.parentNode,"optgroup"))){c=v(c).val();if(a)return c;f.push(c)}return f},set:function(a,c){var d=v.makeArray(c);
v(a).find("option").each(function(){this.selected=0<=v.inArray(v(this).val(),d)});d.length||(a.selectedIndex=-1);return d}}},attrFn:{},attr:function(a,c,d,e){var f,b,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if(e&&v.isFunction(v.fn[c]))return v(a)[c](d);if("undefined"===typeof a.getAttribute)return v.prop(a,c,d);if(e=1!==g||!v.isXMLDoc(a))c=c.toLowerCase(),b=v.attrHooks[c]||($a.test(c)?Qa:ma);if(d!==h)if(null===d)v.removeAttr(a,c);else{if(b&&"set"in b&&e&&(f=b.set(a,d,c))!==h)return f;a.setAttribute(c,
d+"");return d}else{if(b&&"get"in b&&e&&null!==(f=b.get(a,c)))return f;f=a.getAttribute(c);return null===f?h:f}}},removeAttr:function(a,c){var d,e,f,b,g=0;if(c&&1===a.nodeType)for(e=c.split(U);g<e.length;g++)if(f=e[g])d=v.propFix[f]||f,(b=$a.test(f))||v.attr(a,f,""),a.removeAttribute(ab?f:d),b&&d in a&&(a[d]=!1)},attrHooks:{type:{set:function(a,c){if(xb.test(a.nodeName)&&a.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&"radio"===c&&v.nodeName(a,"input")){var d=
a.value;a.setAttribute("type",c);d&&(a.value=d);return c}}},value:{get:function(a,c){return ma&&v.nodeName(a,"button")?ma.get(a,c):c in a?a.value:null},set:function(a,c,d){if(ma&&v.nodeName(a,"button"))return ma.set(a,c,d);a.value=c}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},
prop:function(a,c,d){var e,f,b;b=a.nodeType;if(a&&3!==b&&8!==b&&2!==b){if(b=1!==b||!v.isXMLDoc(a))c=v.propFix[c]||c,f=v.propHooks[c];return d!==h?f&&"set"in f&&(e=f.set(a,d,c))!==h?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):yb.test(a.nodeName)||zb.test(a.nodeName)&&a.href?0:h}}}});Qa={get:function(a,c){var d,e=v.prop(a,c);return!0===e||"boolean"!==typeof e&&(d=a.getAttributeNode(c))&&
!1!==d.nodeValue?c.toLowerCase():h},set:function(a,c,d){!1===c?v.removeAttr(a,d):(c=v.propFix[d]||d,c in a&&(a[c]=!0),a.setAttribute(d,d.toLowerCase()));return d}};ab||(Ka={name:!0,id:!0,coords:!0},ma=v.valHooks.button={get:function(a,c){var d;return(d=a.getAttributeNode(c))&&(Ka[c]?""!==d.value:d.specified)?d.value:h},set:function(a,c,d){var e=a.getAttributeNode(d);e||(e=P.createAttribute(d),a.setAttributeNode(e));return e.value=c+""}},v.each(["width","height"],function(a,c){v.attrHooks[c]=v.extend(v.attrHooks[c],
{set:function(a,d){if(""===d)return a.setAttribute(c,"auto"),d}})}),v.attrHooks.contenteditable={get:ma.get,set:function(a,c,d){""===c&&(c="false");ma.set(a,c,d)}});v.support.hrefNormalized||v.each(["href","src","width","height"],function(a,c){v.attrHooks[c]=v.extend(v.attrHooks[c],{get:function(a){a=a.getAttribute(c,2);return null===a?h:a}})});v.support.style||(v.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||h},set:function(a,c){return a.style.cssText=c+""}});v.support.optSelected||
(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));v.support.enctype||(v.propFix.enctype="encoding");v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(a,c){if(v.isArray(c))return a.checked=0<=v.inArray(v(a).val(),
c)}})});var ia=/^(?:textarea|input|select)$/i,bb=/^([^\.]*|)(?:\.(.+)|)$/,Ab=/(?:^|\s)hover(\.\S+|)\b/,Bb=/^key/,ta=/^(?:mouse|contextmenu)|click/,ua=/^(?:focusinfocus|focusoutblur)$/,ya=function(a){return v.event.special.hover?a:a.replace(Ab,"mouseenter$1 mouseleave$1")};v.event={add:function(a,c,d,e,f){var b,g,l,k,m,r,n,w,x;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(b=v._data(a))){d.handler&&(n=d,d=n.handler,f=n.selector);d.guid||(d.guid=v.guid++);l=b.events;l||(b.events=l={});g=b.handle;g||(b.handle=
g=function(a){return"undefined"===typeof v||a&&v.event.triggered===a.type?h:v.event.dispatch.apply(g.elem,arguments)},g.elem=a);c=v.trim(ya(c)).split(" ");for(b=0;b<c.length;b++)k=bb.exec(c[b])||[],m=k[1],r=(k[2]||"").split(".").sort(),x=v.event.special[m]||{},m=(f?x.delegateType:x.bindType)||m,x=v.event.special[m]||{},k=v.extend({type:m,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&v.expr.match.needsContext.test(f),namespace:r.join(".")},n),w=l[m],w||(w=l[m]=[],w.delegateCount=
0,x.setup&&!1!==x.setup.call(a,e,r,g)||(a.addEventListener?a.addEventListener(m,g,!1):a.attachEvent&&a.attachEvent("on"+m,g))),x.add&&(x.add.call(a,k),k.handler.guid||(k.handler.guid=d.guid)),f?w.splice(w.delegateCount++,0,k):w.push(k),v.event.global[m]=!0;a=null}},global:{},remove:function(a,c,d,e,f){var b,g,l,k,m,r,n,w,x,p,q=v.hasData(a)&&v._data(a);if(q&&(n=q.events)){c=v.trim(ya(c||"")).split(" ");for(b=0;b<c.length;b++)if(g=bb.exec(c[b])||[],l=k=g[1],g=g[2],l){w=v.event.special[l]||{};l=(e?w.delegateType:
w.bindType)||l;x=n[l]||[];m=x.length;g=g?RegExp("(^|\\.)"+g.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(r=0;r<x.length;r++)p=x[r],!f&&k!==p.origType||d&&d.guid!==p.guid||g&&!g.test(p.namespace)||e&&!(e===p.selector||"**"===e&&p.selector)||(x.splice(r--,1),p.selector&&x.delegateCount--,w.remove&&w.remove.call(a,p));0===x.length&&m!==x.length&&(w.teardown&&!1!==w.teardown.call(a,g,q.handle)||v.removeEvent(a,l,q.handle),delete n[l])}else for(l in n)v.event.remove(a,l+c[b],d,e,!0);v.isEmptyObject(n)&&
(delete q.handle,v.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(a,c,d,e){if(!d||3!==d.nodeType&&8!==d.nodeType){var f,g,l,k,m,r,n=a.type||a;l=[];if(!ua.test(n+v.event.triggered)&&(0<=n.indexOf("!")&&(n=n.slice(0,-1),f=!0),0<=n.indexOf(".")&&(l=n.split("."),n=l.shift(),l.sort()),d&&!v.event.customEvent[n]||v.event.global[n]))if(a="object"===typeof a?a[v.expando]?a:new v.Event(n,a):new v.Event(n),a.type=n,a.isTrigger=!0,a.exclusive=f,a.namespace=l.join("."),
a.namespace_re=a.namespace?RegExp("(^|\\.)"+l.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=0>n.indexOf(":")?"on"+n:"",d){if(a.result=h,a.target||(a.target=d),c=null!=c?v.makeArray(c):[],c.unshift(a),k=v.event.special[n]||{},!k.trigger||!1!==k.trigger.apply(d,c)){r=[[d,k.bindType||n]];if(!e&&!k.noBubble&&!v.isWindow(d)){m=k.delegateType||n;f=ua.test(m+n)?d:d.parentNode;for(g=d;f;f=f.parentNode)r.push([f,m]),g=f;g===(d.ownerDocument||P)&&r.push([g.defaultView||g.parentWindow||b,m])}for(g=0;g<r.length&&!a.isPropagationStopped();g++)f=
r[g][0],a.type=r[g][1],(m=(v._data(f,"events")||{})[a.type]&&v._data(f,"handle"))&&m.apply(f,c),(m=l&&f[l])&&v.acceptData(f)&&m.apply&&!1===m.apply(f,c)&&a.preventDefault();a.type=n;e||a.isDefaultPrevented()||k._default&&!1!==k._default.apply(d.ownerDocument,c)||"click"===n&&v.nodeName(d,"a")||!v.acceptData(d)||!l||!d[n]||("focus"===n||"blur"===n)&&0===a.target.offsetWidth||v.isWindow(d)||((g=d[l])&&(d[l]=null),v.event.triggered=n,d[n](),v.event.triggered=h,g&&(d[l]=g));return a.result}}else for(g in d=
v.cache,d)d[g].events&&d[g].events[n]&&v.event.trigger(a,c,d[g].handle.elem,!0)}},dispatch:function(a){a=v.event.fix(a||b.event);var c,d,e,f,g,l,k=(v._data(this,"events")||{})[a.type]||[],m=k.delegateCount,r=R.call(arguments),n=!a.exclusive&&!a.namespace,w=v.event.special[a.type]||{},x=[];r[0]=a;a.delegateTarget=this;if(!w.preDispatch||!1!==w.preDispatch.call(this,a)){if(m&&(!a.button||"click"!==a.type))for(d=a.target;d!=this;d=d.parentNode||this)if(!0!==d.disabled||"click"!==a.type){f={};g=[];for(c=
0;c<m;c++)e=k[c],l=e.selector,f[l]===h&&(f[l]=e.needsContext?0<=v(l,this).index(d):v.find(l,this,null,[d]).length),f[l]&&g.push(e);g.length&&x.push({elem:d,matches:g})}k.length>m&&x.push({elem:this,matches:k.slice(m)});for(c=0;c<x.length&&!a.isPropagationStopped();c++)for(f=x[c],a.currentTarget=f.elem,d=0;d<f.matches.length&&!a.isImmediatePropagationStopped();d++)if(e=f.matches[d],n||!a.namespace&&!e.namespace||a.namespace_re&&a.namespace_re.test(e.namespace))a.data=e.data,a.handleObj=e,e=((v.event.special[e.origType]||
{}).handle||e.handler).apply(f.elem,r),e!==h&&(a.result=e,!1===e&&(a.preventDefault(),a.stopPropagation()));w.postDispatch&&w.postDispatch.call(this,a);return a.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,c){null==a.which&&(a.which=null!=c.charCode?c.charCode:c.keyCode);return a}},
mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f=c.button,b=c.fromElement;null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||P,e=d.documentElement,d=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&d.clientTop||0));!a.relatedTarget&&b&&(a.relatedTarget=b===
a.target?c.toElement:b);a.which||f===h||(a.which=f&1?1:f&2?3:f&4?2:0);return a}},fix:function(a){if(a[v.expando])return a;var c,d,e=a,f=v.event.fixHooks[a.type]||{},b=f.props?this.props.concat(f.props):this.props;a=v.Event(e);for(c=b.length;c;)d=b[--c],a[d]=e[d];a.target||(a.target=e.srcElement||P);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return f.filter?f.filter(a,e):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,
c,d){v.isWindow(this)&&(this.onbeforeunload=d)},teardown:function(a,c){this.onbeforeunload===c&&(this.onbeforeunload=null)}}},simulate:function(a,c,d,e){a=v.extend(new v.Event,d,{type:a,isSimulated:!0,originalEvent:{}});e?v.event.trigger(a,null,c):v.event.dispatch.call(c,a);a.isDefaultPrevented()&&d.preventDefault()}};v.event.handle=v.event.dispatch;v.removeEvent=P.removeEventListener?function(a,c,d){a.removeEventListener&&a.removeEventListener(c,d,!1)}:function(a,c,d){c="on"+c;a.detachEvent&&("undefined"===
typeof a[c]&&(a[c]=null),a.detachEvent(c,d))};v.Event=function(a,c){if(!(this instanceof v.Event))return new v.Event(a,c);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?s:p):this.type=a;c&&v.extend(this,c);this.timeStamp=a&&a.timeStamp||v.now();this[v.expando]=!0};v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=s;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():
a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=s;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s;this.stopPropagation()},isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p};v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,c){v.event.special[a]={delegateType:c,bindType:c,handle:function(a){var d,e=a.relatedTarget,f=a.handleObj;
if(!e||e!==this&&!v.contains(this,e))a.type=f.origType,d=f.handler.apply(this,arguments),a.type=c;return d}}});v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=v.nodeName(a,"input")||v.nodeName(a,"button")?a.form:h)&&!v._data(a,"_submit_attached")&&(v.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),v._data(a,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&
(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&v.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}});v.support.changeBubbles||(v.event.special.change={setup:function(){if(ia.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)v.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(a){this._just_changed&&
!a.isTrigger&&(this._just_changed=!1);v.event.simulate("change",this,a,!0)});return!1}v.event.add(this,"beforeactivate._change",function(a){a=a.target;ia.test(a.nodeName)&&!v._data(a,"_change_attached")&&(v.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||v.event.simulate("change",this.parentNode,a,!0)}),v._data(a,"_change_attached",!0))})},handle:function(a){var c=a.target;if(this!==c||a.isSimulated||a.isTrigger||"radio"!==c.type&&"checkbox"!==c.type)return a.handleObj.handler.apply(this,
arguments)},teardown:function(){v.event.remove(this,"._change");return!ia.test(this.nodeName)}});v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(a,c){var d=0,e=function(a){v.event.simulate(c,a.target,v.event.fix(a),!0)};v.event.special[c]={setup:function(){0===d++&&P.addEventListener(a,e,!0)},teardown:function(){0===--d&&P.removeEventListener(a,e,!0)}}});v.fn.extend({on:function(a,c,d,e,f){var b,g;if("object"===typeof a){"string"!==typeof c&&(d=d||c,c=h);for(g in a)this.on(g,
c,d,a[g],f);return this}null==d&&null==e?(e=c,d=c=h):null==e&&("string"===typeof c?(e=d,d=h):(e=d,d=c,c=h));if(!1===e)e=p;else if(!e)return this;1===f&&(b=e,e=function(a){v().off(a);return b.apply(this,arguments)},e.guid=b.guid||(b.guid=v.guid++));return this.each(function(){v.event.add(this,a,e,d,c)})},one:function(a,c,d,e){return this.on(a,c,d,e,1)},off:function(a,c,d){var e;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,v(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,
e.selector,e.handler),this;if("object"===typeof a){for(e in a)this.off(e,c,a[e]);return this}if(!1===c||"function"===typeof c)d=c,c=h;!1===d&&(d=p);return this.each(function(){v.event.remove(this,a,d,c)})},bind:function(a,c,d){return this.on(a,null,c,d)},unbind:function(a,c){return this.off(a,null,c)},live:function(a,c,d){v(this.context).on(a,this.selector,c,d);return this},die:function(a,c){v(this.context).off(a,this.selector||"**",c);return this},delegate:function(a,c,d,e){return this.on(c,a,d,
e)},undelegate:function(a,c,d){return 1===arguments.length?this.off(a,"**"):this.off(c,a||"**",d)},trigger:function(a,c){return this.each(function(){v.event.trigger(a,c,this)})},triggerHandler:function(a,c){if(this[0])return v.event.trigger(a,c,this[0],!0)},toggle:function(a){var c=arguments,d=a.guid||v.guid++,e=0,f=function(d){var f=(v._data(this,"lastToggle"+a.guid)||0)%e;v._data(this,"lastToggle"+a.guid,f+1);d.preventDefault();return c[f].apply(this,arguments)||!1};for(f.guid=d;e<c.length;)c[e++].guid=
d;return this.click(f)},hover:function(a,c){return this.mouseenter(a).mouseleave(c||a)}});v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,c){v.fn[c]=function(a,d){null==d&&(d=a,a=null);return 0<arguments.length?this.on(c,null,a,d):this.trigger(c)};Bb.test(c)&&(v.event.fixHooks[c]=v.event.keyHooks);ta.test(c)&&(v.event.fixHooks[c]=
v.event.mouseHooks)});(function(a,c){function d(a,c,e,f){e=e||[];c=c||F;var b,g,l,k,m=c.nodeType;if(!a||"string"!==typeof a)return e;if(1!==m&&9!==m)return[];l=B(c);if(!l&&!f&&(b=I.exec(a)))if(k=b[1])if(9===m)if((g=c.getElementById(k))&&g.parentNode){if(g.id===k)return e.push(g),e}else return e;else{if(c.ownerDocument&&(g=c.ownerDocument.getElementById(k))&&u(c,g)&&g.id===k)return e.push(g),e}else{if(b[2])return K.apply(e,P.call(c.getElementsByTagName(a),0)),e;if((k=b[3])&&Ha&&c.getElementsByClassName)return K.apply(e,
P.call(c.getElementsByClassName(k),0)),e}return p(a.replace(X,"$1"),c,e,f,l)}function e(a){return function(c){return"input"===c.nodeName.toLowerCase()&&c.type===a}}function f(a){return function(c){var d=c.nodeName.toLowerCase();return("input"===d||"button"===d)&&c.type===a}}function b(a){return ja(function(c){c=+c;return ja(function(d,e){for(var f,b=a([],d.length,c),g=b.length;g--;)d[f=b[g]]&&(d[f]=!(e[f]=d[f]))})})}function g(a,c,d){if(a===c)return d;for(a=a.nextSibling;a;){if(a===c)return-1;a=a.nextSibling}return 1}
function l(a,c){var e,f,b,g,k,m,r;if(k=Q[L][a+" "])return c?0:k.slice(0);k=a;m=[];for(r=y.preFilter;k;){if(!e||(f=ra.exec(k)))f&&(k=k.slice(f[0].length)||k),m.push(b=[]);e=!1;if(f=Z.exec(k))b.push(e=new H(f.shift())),k=k.slice(e.length),e.type=f[0].replace(X," ");for(g in y.filter)!(f=ma[g].exec(k))||r[g]&&!(f=r[g](f))||(b.push(e=new H(f.shift())),k=k.slice(e.length),e.type=g,e.matches=f);if(!e)break}return c?k.length:k?d.error(a):Q(a,m).slice(0)}function k(a,c,d){var e=c.dir,f=d&&"parentNode"===
c.dir,b=Y++;return c.first?function(c,d,b){for(;c=c[e];)if(f||1===c.nodeType)return a(c,d,b)}:function(c,d,g){if(!g)for(var l,k=E+" "+b+" ",m=k+h;c=c[e];){if(f||1===c.nodeType){if((l=c[L])===m)return c.sizset;if("string"===typeof l&&0===l.indexOf(k)){if(c.sizset)return c}else{c[L]=m;if(a(c,d,g))return c.sizset=!0,c;c.sizset=!1}}}else for(;c=c[e];)if((f||1===c.nodeType)&&a(c,d,g))return c}}function m(a){return 1<a.length?function(c,d,e){for(var f=a.length;f--;)if(!a[f](c,d,e))return!1;return!0}:a[0]}
function r(a,c,d,e,f){for(var b,g=[],l=0,k=a.length,m=null!=c;l<k;l++)if(b=a[l])if(!d||d(b,e,f))g.push(b),m&&c.push(l);return g}function n(a,c,e,f,b,g){f&&!f[L]&&(f=n(f));b&&!b[L]&&(b=n(b,g));return ja(function(g,l,k,m){var n,w,x=[],p=[],y=l.length,q;if(!(q=g)){q=c||"*";for(var h=k.nodeType?[k]:k,s=[],z=0,B=h.length;z<B;z++)d(q,h[z],s);q=s}q=!a||!g&&c?q:r(q,x,a,k,m);h=e?b||(g?a:y||f)?[]:l:q;e&&e(q,h,k,m);if(f)for(n=r(h,p),f(n,[],k,m),k=n.length;k--;)if(w=n[k])h[p[k]]=!(q[p[k]]=w);if(g){if(b||a){if(b){n=
[];for(k=h.length;k--;)(w=h[k])&&n.push(q[k]=w);b(null,h=[],n,m)}for(k=h.length;k--;)(w=h[k])&&-1<(n=b?la.call(g,w):x[k])&&(g[n]=!(l[n]=w))}}else h=r(h===l?h.splice(y,h.length):h),b?b(null,l,h,m):K.apply(l,h)})}function w(a){var c,d,e,f=a.length,b=y.relative[a[0].type];d=b||y.relative[" "];for(var g=b?1:0,l=k(function(a){return a===c},d,!0),r=k(function(a){return-1<la.call(c,a)},d,!0),x=[function(a,d,e){return!b&&(e||d!==C)||((c=d).nodeType?l(a,d,e):r(a,d,e))}];g<f;g++)if(d=y.relative[a[g].type])x=
[k(m(x),d)];else{d=y.filter[a[g].type].apply(null,a[g].matches);if(d[L]){for(e=++g;e<f&&!y.relative[a[e].type];e++);return n(1<g&&m(x),1<g&&a.slice(0,g-1).join("").replace(X,"$1"),d,g<e&&w(a.slice(g,e)),e<f&&w(a=a.slice(e)),e<f&&a.join(""))}x.push(d)}return m(x)}function x(a,c){var e=0<c.length,f=0<a.length,b=function(g,l,k,m,n){var w,x,q=[],p=0,s="0",z=g&&[],B=null!=n,u=C,A=g||f&&y.find.TAG("*",n&&l.parentNode||l),J=E+=null==u?1:Math.E;B&&(C=l!==F&&l,h=b.el);for(;null!=(n=A[s]);s++){if(f&&n){for(w=
0;x=a[w];w++)if(x(n,l,k)){m.push(n);break}B&&(E=J,h=++b.el)}e&&((n=!x&&n)&&p--,g&&z.push(n))}p+=s;if(e&&s!==p){for(w=0;x=c[w];w++)x(z,q,l,k);if(g){if(0<p)for(;s--;)z[s]||q[s]||(q[s]=O.call(m));q=r(q)}K.apply(m,q);B&&!g&&0<q.length&&1<p+c.length&&d.uniqueSort(m)}B&&(E=J,C=u);return z};b.el=0;return e?ja(b):b}function p(a,c,d,e,f){var b,g,k,m,n=l(a);if(!e&&1===n.length){g=n[0]=n[0].slice(0);if(2<g.length&&"ID"===(k=g[0]).type&&9===c.nodeType&&!f&&y.relative[g[1].type]){c=y.find.ID(k.matches[0].replace(qa,
""),c,f)[0];if(!c)return d;a=a.slice(g.shift().length)}for(b=ma.POS.test(a)?-1:g.length-1;0<=b;b--){k=g[b];if(y.relative[m=k.type])break;if(m=y.find[m])if(e=m(k.matches[0].replace(qa,""),Fa.test(g[0].type)&&c.parentNode||c,f)){g.splice(b,1);a=e.length&&g.join("");if(!a)return K.apply(d,P.call(e,0)),d;break}}}A(a,n)(e,c,f,d,Fa.test(a));return d}function q(){}var h,s,y,z,B,u,A,J,D,C,ha=!0,L=("sizcache"+Math.random()).replace(".",""),H=String,F=a.document,G=F.documentElement,E=0,Y=0,O=[].pop,K=[].push,
P=[].slice,la=[].indexOf||function(a){for(var c=0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1},ja=function(a,c){a[L]=null==c||c;return a},M=function(){var a={},c=[];return ja(function(d,e){c.push(d)>y.cacheLength&&delete a[c.shift()];return a[d+" "]=e},a)},N=M(),Q=M(),sa=M(),M="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+")|)|)[\\x20\\t\\r\\n\\f]*\\]",
S=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+M+")|[^:]|\\\\.)*|.*))\\)|)",X=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,ra=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Z=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,Ca=RegExp(S),I=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,Fa=/[\x20\t\r\n\f]*[+~]/,R=/h\d/i,V=/input|select|textarea|button/i,qa=/\\(?!\\)/g,ma={ID:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,
TAG:RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+M),PSEUDO:RegExp("^"+S),POS:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,CHILD:RegExp("^:(only|nth|first|last)-child(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},oa=function(a){var c=F.createElement("div");try{return a(c)}catch(d){return!1}finally{}},M=oa(function(a){a.appendChild(F.createComment(""));return!a.getElementsByTagName("*").length}),U=oa(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"===a.firstChild.getAttribute("href")}),aa=oa(function(a){a.innerHTML="<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!==a&&"string"!==a}),Ha=oa(function(a){a.innerHTML=
"<div class='hidden e'></div><div class='hidden'></div>";if(!a.getElementsByClassName||!a.getElementsByClassName("e").length)return!1;a.lastChild.className="e";return 2===a.getElementsByClassName("e").length}),Na=oa(function(a){a.id=L+0;a.innerHTML="<a name='"+L+"'></a><div name='"+L+"'></div>";G.insertBefore(a,G.firstChild);var c=F.getElementsByName&&F.getElementsByName(L).length===2+F.getElementsByName(L+0).length;s=!F.getElementById(L);G.removeChild(a);return c});try{P.call(G.childNodes,0)[0].nodeType}catch(Qa){P=
function(a){for(var c,d=[];c=this[a];a++)d.push(c);return d}}d.matches=function(a,c){return d(a,null,null,c)};d.matchesSelector=function(a,c){return 0<d(c,null,null,[a]).length};z=d.getText=function(a){var c,d="",e=0;if(c=a.nodeType)if(1===c||9===c||11===c){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)d+=z(a)}else{if(3===c||4===c)return a.nodeValue}else for(;c=a[e];e++)d+=z(c);return d};B=d.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?
"HTML"!==a.nodeName:!1};u=d.contains=G.contains?function(a,c){var d=9===a.nodeType?a.documentElement:a,e=c&&c.parentNode;return a===e||!!(e&&1===e.nodeType&&d.contains&&d.contains(e))}:G.compareDocumentPosition?function(a,c){return c&&!!(a.compareDocumentPosition(c)&16)}:function(a,c){for(;c=c.parentNode;)if(c===a)return!0;return!1};d.attr=function(a,c){var d,e=B(a);e||(c=c.toLowerCase());return(d=y.attrHandle[c])?d(a):e||aa?a.getAttribute(c):(d=a.getAttributeNode(c))?"boolean"===typeof a[c]?a[c]?
c:null:d.specified?d.value:null:null};y=d.selectors={cacheLength:50,createPseudo:ja,match:ma,attrHandle:U?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:s?function(a,c,d){if("undefined"!==typeof c.getElementById&&!d)return(a=c.getElementById(a))&&a.parentNode?[a]:[]}:function(a,d,e){if("undefined"!==typeof d.getElementById&&!e)return(d=d.getElementById(a))?d.id===a||"undefined"!==typeof d.getAttributeNode&&d.getAttributeNode("id").value===
a?[d]:c:[]},TAG:M?function(a,c){if("undefined"!==typeof c.getElementsByTagName)return c.getElementsByTagName(a)}:function(a,c){var d=c.getElementsByTagName(a);if("*"===a){for(var e,f=[],b=0;e=d[b];b++)1===e.nodeType&&f.push(e);return f}return d},NAME:Na&&function(a,c){if("undefined"!==typeof c.getElementsByName)return c.getElementsByName(name)},CLASS:Ha&&function(a,c,d){if("undefined"!==typeof c.getElementsByClassName&&!d)return c.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0},
" ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(qa,"");a[3]=(a[4]||a[5]||"").replace(qa,"");"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1]?(a[2]||d.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&d.error(a[0]);return a},PSEUDO:function(a){var c,d;if(ma.CHILD.test(a[0]))return null;if(a[3])a[2]=
a[3];else if(c=a[4])Ca.test(c)&&(d=l(c,!0))&&(d=c.indexOf(")",c.length-d)-c.length)&&(c=c.slice(0,d),a[0]=a[0].slice(0,d)),a[2]=c;return a.slice(0,3)}},filter:{ID:s?function(a){a=a.replace(qa,"");return function(c){return c.getAttribute("id")===a}}:function(a){a=a.replace(qa,"");return function(c){return(c="undefined"!==typeof c.getAttributeNode&&c.getAttributeNode("id"))&&c.value===a}},TAG:function(a){if("*"===a)return function(){return!0};a=a.replace(qa,"").toLowerCase();return function(c){return c.nodeName&&
c.nodeName.toLowerCase()===a}},CLASS:function(a){var c=N[L][a+" "];return c||(c=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&N(a,function(a){return c.test(a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,e){return function(f,b){var g=d.attr(f,a);if(null==g)return"!="===c;if(!c)return!0;g+="";return"="===c?g===e:"!="===c?g!==e:"^="===c?e&&0===g.indexOf(e):"*="===c?e&&-1<g.indexOf(e):"$="===c?e&&g.substr(g.length-e.length)===e:"~="===
c?-1<(" "+g+" ").indexOf(e):"|="===c?g===e||g.substr(0,e.length+1)===e+"-":!1}},CHILD:function(a,c,d,e){return"nth"===a?function(a){var c,f;c=a.parentNode;if(1===d&&0===e)return!0;if(c)for(f=0,c=c.firstChild;c&&(1!==c.nodeType||(f++,a!==c));c=c.nextSibling);f-=e;return f===d||0===f%d&&0<=f/d}:function(c){var d=c;switch(a){case "only":case "first":for(;d=d.previousSibling;)if(1===d.nodeType)return!1;if("first"===a)return!0;d=c;case "last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0}}},
PSEUDO:function(a,c){var e,f=y.pseudos[a]||y.setFilters[a.toLowerCase()]||d.error("unsupported pseudo: "+a);return f[L]?f(c):1<f.length?(e=[a,a,"",c],y.setFilters.hasOwnProperty(a.toLowerCase())?ja(function(a,d){for(var e,b=f(a,c),g=b.length;g--;)e=la.call(a,b[g]),a[e]=!(d[e]=b[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:ja(function(a){var c=[],d=[],e=A(a.replace(X,"$1"));return e[L]?ja(function(a,c,d,f){f=e(a,null,f,[]);for(var b=a.length;b--;)if(d=f[b])a[b]=!(c[b]=d)}):function(a,f,b){c[0]=
a;e(c,null,b,d);return!d.pop()}}),has:ja(function(a){return function(c){return 0<d(a,c).length}}),contains:ja(function(a){return function(c){return-1<(c.textContent||c.innerText||z(c)).indexOf(a)}}),enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var c=a.nodeName.toLowerCase();return"input"===c&&!!a.checked||"option"===c&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!y.pseudos.empty(a)},
empty:function(a){var c;for(a=a.firstChild;a;){if("@"<a.nodeName||3===(c=a.nodeType)||4===c)return!1;a=a.nextSibling}return!0},header:function(a){return R.test(a.nodeName)},text:function(a){var c,d;return"input"===a.nodeName.toLowerCase()&&"text"===(c=a.type)&&(null==(d=a.getAttribute("type"))||d.toLowerCase()===c)},radio:e("radio"),checkbox:e("checkbox"),file:e("file"),password:e("password"),image:e("image"),submit:f("submit"),reset:f("reset"),button:function(a){var c=a.nodeName.toLowerCase();return"input"===
c&&"button"===a.type||"button"===c},input:function(a){return V.test(a.nodeName)},focus:function(a){var c=a.ownerDocument;return a===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},active:function(a){return a===a.ownerDocument.activeElement},first:b(function(){return[0]}),last:b(function(a,c){return[c-1]}),eq:b(function(a,c,d){return[0>d?d+c:d]}),even:b(function(a,c){for(var d=0;d<c;d+=2)a.push(d);return a}),odd:b(function(a,c){for(var d=1;d<c;d+=2)a.push(d);return a}),
lt:b(function(a,c,d){for(c=0>d?d+c:d;0<=--c;)a.push(c);return a}),gt:b(function(a,c,d){for(d=0>d?d+c:d;++d<c;)a.push(d);return a})}};J=G.compareDocumentPosition?function(a,c){return a===c?(D=!0,0):(a.compareDocumentPosition&&c.compareDocumentPosition?a.compareDocumentPosition(c)&4:a.compareDocumentPosition)?-1:1}:function(a,c){if(a===c)return D=!0,0;if(a.sourceIndex&&c.sourceIndex)return a.sourceIndex-c.sourceIndex;var d,e,f=[],b=[];d=a.parentNode;e=c.parentNode;var l=d;if(d===e)return g(a,c);if(!d)return-1;
if(!e)return 1;for(;l;)f.unshift(l),l=l.parentNode;for(l=e;l;)b.unshift(l),l=l.parentNode;d=f.length;e=b.length;for(l=0;l<d&&l<e;l++)if(f[l]!==b[l])return g(f[l],b[l]);return l===d?g(a,b[l],-1):g(f[l],c,1)};[0,0].sort(J);ha=!D;d.uniqueSort=function(a){var c,d=[],e=1,f=0;D=ha;a.sort(J);if(D){for(;c=a[e];e++)c===a[e-1]&&(f=d.push(e));for(;f--;)a.splice(d[f],1)}return a};d.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};A=d.compile=function(a,c){var d,e=[],f=[],b=sa[L][a+
" "];if(!b){c||(c=l(a));for(d=c.length;d--;)b=w(c[d]),b[L]?e.push(b):f.push(b);b=sa(a,x(f,e))}return b};F.querySelectorAll&&function(){var a,c=p,e=/'|\\/g,f=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,b=[":focus"],g=[":active"],k=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||G.msMatchesSelector;oa(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||b.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");
a.querySelectorAll(":checked").length||b.push(":checked")});oa(function(a){a.innerHTML="<p test=''></p>";a.querySelectorAll("[test^='']").length&&b.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.innerHTML="<input type='hidden'/>";a.querySelectorAll(":enabled").length||b.push(":enabled",":disabled")});b=RegExp(b.join("|"));p=function(a,d,f,g,k){if(!g&&!k&&!b.test(a)){var m,n,r=!0,w=L;n=d;m=9===d.nodeType&&a;if(1===d.nodeType&&"object"!==d.nodeName.toLowerCase()){m=l(a);(r=d.getAttribute("id"))?w=
r.replace(e,"\\$&"):d.setAttribute("id",w);w="[id='"+w+"'] ";for(n=m.length;n--;)m[n]=w+m[n].join("");n=Fa.test(a)&&d.parentNode||d;m=m.join(",")}if(m)try{return K.apply(f,P.call(n.querySelectorAll(m),0)),f}catch(x){}finally{r||d.removeAttribute("id")}}return c(a,d,f,g,k)};k&&(oa(function(c){a=k.call(c,"div");try{k.call(c,"[test!='']:sizzle"),g.push("!=",S)}catch(d){}}),g=RegExp(g.join("|")),d.matchesSelector=function(c,e){e=e.replace(f,"='$1']");if(!B(c)&&!g.test(e)&&!b.test(e))try{var l=k.call(c,
e);if(l||a||c.document&&11!==c.document.nodeType)return l}catch(m){}return 0<d(e,null,null,[c]).length})}();y.pseudos.nth=y.pseudos.eq;y.filters=q.prototype=y.pseudos;y.setFilters=new q;d.attr=v.attr;v.find=d;v.expr=d.selectors;v.expr[":"]=v.expr.pseudos;v.unique=d.uniqueSort;v.text=d.getText;v.isXMLDoc=d.isXML;v.contains=d.contains})(b);var Ga=/Until$/,Cb=/^(?:parents|prev(?:Until|All))/,sb=/^.[^:#\[\.,]*$/,cb=v.expr.match.needsContext,Db={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(a){var c,
d,e,f,b,g,l=this;if("string"!==typeof a)return v(a).filter(function(){c=0;for(d=l.length;c<d;c++)if(v.contains(l[c],this))return!0});g=this.pushStack("","find",a);c=0;for(d=this.length;c<d;c++)if(e=g.length,v.find(a,this[c],g),0<c)for(f=e;f<g.length;f++)for(b=0;b<e;b++)if(g[b]===g[f]){g.splice(f--,1);break}return g},has:function(a){var c,d=v(a,this),e=d.length;return this.filter(function(){for(c=0;c<e;c++)if(v.contains(this,d[c]))return!0})},not:function(a){return this.pushStack(c(this,a,!1),"not",
a)},filter:function(a){return this.pushStack(c(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"===typeof a?cb.test(a)?0<=v(a,this.context).index(this[0]):0<v.filter(a,this).length:0<this.filter(a).length)},closest:function(a,c){for(var d,e=0,f=this.length,b=[],g=cb.test(a)||"string"!==typeof a?v(a,c||this.context):0;e<f;e++)for(d=this[e];d&&d.ownerDocument&&d!==c&&11!==d.nodeType;){if(g?-1<g.index(d):v.find.matchesSelector(d,a)){b.push(d);break}d=d.parentNode}b=1<b.length?v.unique(b):b;
return this.pushStack(b,"closest",a)},index:function(a){return a?"string"===typeof a?v.inArray(this[0],v(a)):v.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(c,d){var e="string"===typeof c?v(c,d):v.makeArray(c&&c.nodeType?[c]:c),f=v.merge(this.get(),e);return this.pushStack(a(e[0])||a(f[0])?f:v.unique(f))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});v.fn.andSelf=v.fn.addBack;v.each({parent:function(a){return(a=
a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return v.dir(a,"parentNode")},parentsUntil:function(a,c,d){return v.dir(a,"parentNode",d)},next:function(a){return k(a,"nextSibling")},prev:function(a){return k(a,"previousSibling")},nextAll:function(a){return v.dir(a,"nextSibling")},prevAll:function(a){return v.dir(a,"previousSibling")},nextUntil:function(a,c,d){return v.dir(a,"nextSibling",d)},prevUntil:function(a,c,d){return v.dir(a,"previousSibling",d)},siblings:function(a){return v.sibling((a.parentNode||
{}).firstChild,a)},children:function(a){return v.sibling(a.firstChild)},contents:function(a){return v.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:v.merge([],a.childNodes)}},function(a,c){v.fn[a]=function(d,e){var f=v.map(this,c,d);Ga.test(a)||(e=d);e&&"string"===typeof e&&(f=v.filter(e,f));f=1<this.length&&!Db[a]?v.unique(f):f;1<this.length&&Cb.test(a)&&(f=f.reverse());return this.pushStack(f,a,R.call(arguments).join(","))}});v.extend({filter:function(a,c,d){d&&(a=":not("+a+")");
return 1===c.length?v.find.matchesSelector(c[0],a)?[c[0]]:[]:v.find.matches(a,c)},dir:function(a,c,d){var e=[];for(a=a[c];a&&9!==a.nodeType&&(d===h||1!==a.nodeType||!v(a).is(d));)1===a.nodeType&&e.push(a),a=a[c];return e},sibling:function(a,c){for(var d=[];a;a=a.nextSibling)1===a.nodeType&&a!==c&&d.push(a);return d}});var Wa="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Eb=/ jQuery\d+="(?:null|\d+)"/g,
Ra=/^\s+/,db=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,eb=/<([\w:]+)/,Fb=/<tbody/i,Gb=/<|&#?\w+;/,Hb=/<(?:script|style|link)/i,Ib=/<(?:script|object|embed|option|style)/i,Sa=RegExp("<(?:"+Wa+")[\\s/>]","i"),Xa=/^(?:checkbox|radio)$/,fb=/checked\s*(?:[^=]|=\s*.checked.)/i,Jb=/\/(java|ecma)script/i,Kb=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,na={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},gb=g(P),Ta=gb.appendChild(P.createElement("div"));na.optgroup=na.option;na.tbody=na.tfoot=na.colgroup=na.caption=na.thead;na.th=na.td;v.support.htmlSerialize||(na._default=[1,"X<div>","</div>"]);v.fn.extend({text:function(a){return v.access(this,function(a){return a===h?v.text(this):this.empty().append((this[0]&&
this[0].ownerDocument||P).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(v.isFunction(a))return this.each(function(c){v(this).wrapAll(a.call(this,c))});if(this[0]){var c=v(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&c.insertBefore(this[0]);c.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return v.isFunction(a)?this.each(function(c){v(this).wrapInner(a.call(this,
c))}):this.each(function(){var c=v(this),d=c.contents();d.length?d.wrapAll(a):c.append(a)})},wrap:function(a){var c=v.isFunction(a);return this.each(function(d){v(this).wrapAll(c?a.call(this,d):a)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType||this.appendChild(a)})},prepend:function(){return this.domManip(arguments,
!0,function(a){1!==this.nodeType&&11!==this.nodeType||this.insertBefore(a,this.firstChild)})},before:function(){if(!a(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var c=v.clean(arguments);return this.pushStack(v.merge(c,this),"before",this.selector)}},after:function(){if(!a(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var c=v.clean(arguments);return this.pushStack(v.merge(this,
c),"after",this.selector)}},remove:function(a,c){for(var d,e=0;null!=(d=this[e]);e++)if(!a||v.filter(a,[d]).length)c||1!==d.nodeType||(v.cleanData(d.getElementsByTagName("*")),v.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a,c=0;null!=(a=this[c]);c++)for(1===a.nodeType&&v.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,c){a=null==a?!1:a;c=null==c?a:c;return this.map(function(){return v.clone(this,
a,c)})},html:function(a){return v.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===h)return 1===c.nodeType?c.innerHTML.replace(Eb,""):h;if("string"===typeof a&&!(Hb.test(a)||!v.support.htmlSerialize&&Sa.test(a)||!v.support.leadingWhitespace&&Ra.test(a)||na[(eb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(db,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(v.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},
replaceWith:function(c){if(!a(this[0])){if(v.isFunction(c))return this.each(function(a){var d=v(this),e=d.html();d.replaceWith(c.call(this,a,e))});"string"!==typeof c&&(c=v(c).detach());return this.each(function(){var a=this.nextSibling,d=this.parentNode;v(this).remove();a?v(a).before(c):v(d).append(c)})}return this.length?this.pushStack(v(v.isFunction(c)?c():c),"replaceWith",c):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,b,g=0,l=a[0],
k=[],m=this.length;if(!v.support.checkClone&&1<m&&"string"===typeof l&&fb.test(l))return this.each(function(){v(this).domManip(a,c,d)});if(v.isFunction(l))return this.each(function(e){var f=v(this);a[0]=l.call(this,e,c?f.html():h);f.domManip(a,c,d)});if(this[0]){e=v.buildFragment(a,this,k);b=e.fragment;f=b.firstChild;1===b.childNodes.length&&(b=f);if(f)for(c=c&&v.nodeName(f,"tr"),e=e.cacheable||m-1;g<m;g++)d.call(c&&v.nodeName(this[g],"table")?this[g].getElementsByTagName("tbody")[0]||this[g].appendChild(this[g].ownerDocument.createElement("tbody")):
this[g],g===e?b:v.clone(b,!0,!0));b=f=null;k.length&&v.each(k,function(a,c){c.src?v.ajax?v.ajax({url:c.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((c.text||c.textContent||c.innerHTML||"").replace(Kb,""));c.parentNode&&c.parentNode.removeChild(c)})}return this}});v.buildFragment=function(a,c,d){var e,f,b,g=a[0];c=c||P;c=!c.nodeType&&c[0]||c;c=c.ownerDocument||c;1===a.length&&"string"===typeof g&&512>g.length&&c===P&&"<"===g.charAt(0)&&!(Ib.test(g)||
!v.support.checkClone&&fb.test(g)||!v.support.html5Clone&&Sa.test(g))&&(f=!0,e=v.fragments[g],b=e!==h);e||(e=c.createDocumentFragment(),v.clean(a,c,e,d),f&&(v.fragments[g]=b&&e));return{fragment:e,cacheable:f}};v.fragments={};v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,c){v.fn[a]=function(d){var e,f=0,b=[];d=v(d);var g=d.length;e=1===this.length&&this[0].parentNode;if((null==e||e&&11===e.nodeType&&1===e.childNodes.length)&&
1===g)return d[c](this[0]),this;for(;f<g;f++)e=(0<f?this.clone(!0):this).get(),v(d[f])[c](e),b=b.concat(e);return this.pushStack(b,a,d.selector)}});v.extend({clone:function(a,c,b){var g,l,k,m;v.support.html5Clone||v.isXMLDoc(a)||!Sa.test("<"+a.nodeName+">")?m=a.cloneNode(!0):(Ta.innerHTML=a.outerHTML,Ta.removeChild(m=Ta.firstChild));if(!(v.support.noCloneEvent&&v.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||v.isXMLDoc(a)))for(e(a,m),g=d(a),l=d(m),k=0;g[k];++k)l[k]&&e(g[k],l[k]);if(c&&
(f(a,m),b))for(g=d(a),l=d(m),k=0;g[k];++k)f(g[k],l[k]);return m},clean:function(a,c,d,e){var f,b,k,m,n,r,w=c===P&&gb,x=[];c&&"undefined"!==typeof c.createDocumentFragment||(c=P);for(f=0;null!=(k=a[f]);f++)if("number"===typeof k&&(k+=""),k){if("string"===typeof k)if(Gb.test(k)){w=w||g(c);r=c.createElement("div");w.appendChild(r);k=k.replace(db,"<$1></$2>");b=(eb.exec(k)||["",""])[1].toLowerCase();m=na[b]||na._default;n=m[0];for(r.innerHTML=m[1]+k+m[2];n--;)r=r.lastChild;if(!v.support.tbody)for(n=Fb.test(k),
m="table"!==b||n?"<table>"!==m[1]||n?[]:r.childNodes:r.firstChild&&r.firstChild.childNodes,b=m.length-1;0<=b;--b)v.nodeName(m[b],"tbody")&&!m[b].childNodes.length&&m[b].parentNode.removeChild(m[b]);!v.support.leadingWhitespace&&Ra.test(k)&&r.insertBefore(c.createTextNode(Ra.exec(k)[0]),r.firstChild);k=r.childNodes;r.parentNode.removeChild(r)}else k=c.createTextNode(k);k.nodeType?x.push(k):v.merge(x,k)}r&&(k=r=w=null);if(!v.support.appendChecked)for(f=0;null!=(k=x[f]);f++)v.nodeName(k,"input")?l(k):
"undefined"!==typeof k.getElementsByTagName&&v.grep(k.getElementsByTagName("input"),l);if(d)for(a=function(a){if(!a.type||Jb.test(a.type))return e?e.push(a.parentNode?a.parentNode.removeChild(a):a):d.appendChild(a)},f=0;null!=(k=x[f]);f++)v.nodeName(k,"script")&&a(k)||(d.appendChild(k),"undefined"!==typeof k.getElementsByTagName&&(k=v.grep(v.merge([],k.getElementsByTagName("script")),a),x.splice.apply(x,[f+1,0].concat(k)),f+=k.length));return x},cleanData:function(a,c){for(var d,e,f,b,g=0,l=v.expando,
k=v.cache,m=v.support.deleteExpando,n=v.event.special;null!=(f=a[g]);g++)if(c||v.acceptData(f))if(d=(e=f[l])&&k[e]){if(d.events)for(b in d.events)n[b]?v.event.remove(f,b):v.removeEvent(f,b,d.handle);k[e]&&(delete k[e],m?delete f[l]:f.removeAttribute?f.removeAttribute(l):f[l]=null,v.deletedIds.push(e))}}});(function(){var a,c;v.uaMatch=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||
0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};a=v.uaMatch(N.userAgent);c={};a.browser&&(c[a.browser]=!0,c.version=a.version);c.chrome?c.webkit=!0:c.webkit&&(c.safari=!0);v.browser=c;v.sub=function(){function a(c,d){return new a.fn.init(c,d)}v.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(d,e){e&&e instanceof v&&!(e instanceof a)&&(e=a(e));return v.fn.init.call(this,
d,e,c)};a.fn.init.prototype=a.fn;var c=a(P);return a}})();var ka,za,Aa,Ua=/alpha\([^)]*\)/i,Lb=/opacity=([^)]*)/,Mb=/^(top|right|bottom|left)$/,Nb=/^(none|table(?!-c[ea]).+)/,hb=/^margin/,tb=RegExp("^("+ea+")(.*)$","i"),Ia=RegExp("^("+ea+")(?!px)[a-z%]+$","i"),Ob=RegExp("^([-+])=("+ea+")","i"),Oa={BODY:"block"},Pb={position:"absolute",visibility:"hidden",display:"block"},ib={letterSpacing:0,fontWeight:400},va=["Top","Right","Bottom","Left"],Ya=["Webkit","O","Moz","ms"],Qb=v.fn.toggle;v.fn.extend({css:function(a,
c){return v.access(this,function(a,c,d){return d!==h?v.style(a,c,d):v.css(a,c)},a,c,1<arguments.length)},show:function(){return r(this,!0)},hide:function(){return r(this)},toggle:function(a,c){var d="boolean"===typeof a;return v.isFunction(a)&&v.isFunction(c)?Qb.apply(this,arguments):this.each(function(){(d?a:x(this))?v(this).show():v(this).hide()})}});v.extend({cssHooks:{opacity:{get:function(a,c){if(c){var d=ka(a,"opacity");return""===d?"1":d}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,
opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,b,g,l=v.camelCase(c),k=a.style;c=v.cssProps[l]||(v.cssProps[l]=m(k,l));g=v.cssHooks[c]||v.cssHooks[l];if(d!==h){if(b=typeof d,"string"===b&&(f=Ob.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(v.css(a,c)),b="number"),!(null==d||"number"===b&&isNaN(d)||("number"!==b||v.cssNumber[l]||(d+="px"),g&&"set"in g&&(d=g.set(a,d,
e))===h)))try{k[c]=d}catch(n){}}else return g&&"get"in g&&(f=g.get(a,!1,e))!==h?f:k[c]}},css:function(a,c,d,e){var f,b;b=v.camelCase(c);c=v.cssProps[b]||(v.cssProps[b]=m(a.style,b));(b=v.cssHooks[c]||v.cssHooks[b])&&"get"in b&&(f=b.get(a,!0,e));f===h&&(f=ka(a,c));"normal"===f&&c in ib&&(f=ib[c]);return d||e!==h?(a=parseFloat(f),d||v.isNumeric(a)?a||0:f):f},swap:function(a,c,d){var e,f={};for(e in c)f[e]=a.style[e],a.style[e]=c[e];d=d.call(a);for(e in c)a.style[e]=f[e];return d}});b.getComputedStyle?
ka=function(a,c){var d,e,f,g,l=b.getComputedStyle(a,null),k=a.style;l&&(d=l.getPropertyValue(c)||l[c],""!==d||v.contains(a.ownerDocument,a)||(d=v.style(a,c)),Ia.test(d)&&hb.test(c)&&(e=k.width,f=k.minWidth,g=k.maxWidth,k.minWidth=k.maxWidth=k.width=d,d=l.width,k.width=e,k.minWidth=f,k.maxWidth=g));return d}:P.documentElement.currentStyle&&(ka=function(a,c){var d,e,f=a.currentStyle&&a.currentStyle[c],b=a.style;null==f&&b&&b[c]&&(f=b[c]);if(Ia.test(f)&&!Mb.test(c)){d=b.left;if(e=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=
a.currentStyle.left;b.left="fontSize"===c?"1em":f;f=b.pixelLeft+"px";b.left=d;e&&(a.runtimeStyle.left=e)}return""===f?"auto":f});v.each(["height","width"],function(a,c){v.cssHooks[c]={get:function(a,d,e){if(d)return 0===a.offsetWidth&&Nb.test(ka(a,"display"))?v.swap(a,Pb,function(){return B(a,c,e)}):B(a,c,e)},set:function(a,d,e){return n(a,d,e?y(a,c,e,v.support.boxSizing&&"border-box"===v.css(a,"boxSizing")):0)}}});v.support.opacity||(v.cssHooks.opacity={get:function(a,c){return Lb.test((c&&a.currentStyle?
a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":c?"1":""},set:function(a,c){var d=a.style,e=a.currentStyle,f=v.isNumeric(c)?"alpha(opacity="+100*c+")":"",b=e&&e.filter||d.filter||"";d.zoom=1;if(1<=c&&""===v.trim(b.replace(Ua,""))&&d.removeAttribute&&(d.removeAttribute("filter"),e&&!e.filter))return;d.filter=Ua.test(b)?b.replace(Ua,f):b+" "+f}});v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(a,c){return v.swap(a,{display:"inline-block"},function(){if(c)return ka(a,
"marginRight")})}});!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(a,c){v.cssHooks[c]={get:function(a,d){if(d){var e=ka(a,c);return Ia.test(e)?v(a).position()[c]+"px":e}}}})});v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!v.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ka(a,"display"))},v.expr.filters.visible=function(a){return!v.expr.filters.hidden(a)});v.each({margin:"",padding:"",border:"Width"},
function(a,c){v.cssHooks[a+c]={expand:function(d){var e="string"===typeof d?d.split(" "):[d],f={};for(d=0;4>d;d++)f[a+va[d]+c]=e[d]||e[d-2]||e[0];return f}};hb.test(a)||(v.cssHooks[a+c].set=n)});var Rb=/%20/g,ub=/\[\]$/,jb=/\r?\n/g,Sb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Tb=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?
v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Tb.test(this.nodeName)||Sb.test(this.type))}).map(function(a,c){var d=v(this).val();return null==d?null:v.isArray(d)?v.map(d,function(a,d){return{name:c.name,value:a.replace(jb,"\r\n")}}):{name:c.name,value:d.replace(jb,"\r\n")}}).get()}});v.param=function(a,c){var d,e=[],f=function(a,c){c=v.isFunction(c)?c():null==c?"":c;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(c)};c===h&&(c=v.ajaxSettings&&
v.ajaxSettings.traditional);if(v.isArray(a)||a.jquery&&!v.isPlainObject(a))v.each(a,function(){f(this.name,this.value)});else for(d in a)C(d,a[d],c,f);return e.join("&").replace(Rb,"+")};var wa,xa,Ub=/#.*$/,Vb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Wb=/^(?:GET|HEAD)$/,Xb=/^\/\//,kb=/\?/,Yb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Zb=/([?&])_=[^&]*/,lb=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,mb=v.fn.load,Pa={},nb={},ob=["*/"]+["*"];try{xa=E.href}catch(fc){xa=P.createElement("a"),xa.href=
"",xa=xa.href}wa=lb.exec(xa.toLowerCase())||[];v.fn.load=function(a,c,d){if("string"!==typeof a&&mb)return mb.apply(this,arguments);if(!this.length)return this;var e,f,b,g=this,l=a.indexOf(" ");0<=l&&(e=a.slice(l,a.length),a=a.slice(0,l));v.isFunction(c)?(d=c,c=h):c&&"object"===typeof c&&(f="POST");v.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,c){d&&g.each(d,b||[a.responseText,c,a])}}).done(function(a){b=arguments;g.html(e?v("<div>").append(a.replace(Yb,"")).find(e):a)});return this};
v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,c){v.fn[c]=function(a){return this.on(c,a)}});v.each(["get","post"],function(a,c){v[c]=function(a,d,e,f){v.isFunction(d)&&(f=f||e,e=d,d=h);return v.ajax({type:c,url:a,data:d,success:e,dataType:f})}});v.extend({getScript:function(a,c){return v.get(a,h,c,"script")},getJSON:function(a,c,d){return v.get(a,c,d,"json")},ajaxSetup:function(a,c){c?G(a,v.ajaxSettings):(c=a,a=v.ajaxSettings);G(a,c);return a},ajaxSettings:{url:xa,
isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(wa[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":ob},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":b.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},
flatOptions:{context:!0,url:!0}},ajaxPrefilter:D(Pa),ajaxTransport:D(nb),ajax:function(a,c){function d(a,c,b,k){var n,s,z,u,J=c;if(2!==B){B=2;l&&clearTimeout(l);g=h;f=k||"";A.readyState=0<a?4:0;if(b){u=r;k=A;var D,C,ha,L,G=u.contents,F=u.dataTypes,H=u.responseFields;for(C in H)C in b&&(k[H[C]]=b[C]);for(;"*"===F[0];)F.shift(),D===h&&(D=u.mimeType||k.getResponseHeader("content-type"));if(D)for(C in G)if(G[C]&&G[C].test(D)){F.unshift(C);break}if(F[0]in b)ha=F[0];else{for(C in b){if(!F[0]||u.converters[C+
" "+F[0]]){ha=C;break}L||(L=C)}ha=ha||L}ha?(ha!==F[0]&&F.unshift(ha),u=b[ha]):u=void 0}if(200<=a&&300>a||304===a)if(r.ifModified&&((b=A.getResponseHeader("Last-Modified"))&&(v.lastModified[e]=b),(b=A.getResponseHeader("Etag"))&&(v.etag[e]=b)),304===a)J="notmodified",n=!0;else{a:{s=r;z=u;var E,Y,J=s.dataTypes.slice();D=J[0];C={};ha=0;s.dataFilter&&(z=s.dataFilter(z,s.dataType));if(J[1])for(E in s.converters)C[E.toLowerCase()]=s.converters[E];for(;b=J[++ha];)if("*"!==b){if("*"!==D&&D!==b){E=C[D+" "+
b]||C["* "+b];if(!E)for(Y in C)if(n=Y.split(" "),n[1]===b&&(E=C[D+" "+n[0]]||C["* "+n[0]])){!0===E?E=C[Y]:!0!==C[Y]&&(b=n[0],J.splice(ha--,0,b));break}if(!0!==E)if(E&&s["throws"])z=E(z);else try{z=E(z)}catch(O){n={state:"parsererror",error:E?O:"No conversion from "+D+" to "+b};break a}}D=b}n={state:"success",data:z}}J=n.state;s=n.data;z=n.error;n=!z}else if(z=J,!J||a)J="error",0>a&&(a=0);A.status=a;A.statusText=(c||J)+"";n?q.resolveWith(w,[s,J,A]):q.rejectWith(w,[A,J,z]);A.statusCode(y);y=h;m&&x.trigger("ajax"+
(n?"Success":"Error"),[A,r,n?s:z]);p.fireWith(w,[A,J]);m&&(x.trigger("ajaxComplete",[A,r]),--v.active||v.event.trigger("ajaxStop"))}}"object"===typeof a&&(c=a,a=h);c=c||{};var e,f,b,g,l,k,m,n,r=v.ajaxSetup({},c),w=r.context||r,x=w!==r&&(w.nodeType||w instanceof v)?v(w):v.event,q=v.Deferred(),p=v.Callbacks("once memory"),y=r.statusCode||{},s={},z={},B=0,u="canceled",A={readyState:0,setRequestHeader:function(a,c){if(!B){var d=a.toLowerCase();a=z[d]=z[d]||a;s[a]=c}return this},getAllResponseHeaders:function(){return 2===
B?f:null},getResponseHeader:function(a){var c;if(2===B){if(!b)for(b={};c=Vb.exec(f);)b[c[1].toLowerCase()]=c[2];c=b[a.toLowerCase()]}return c===h?null:c},overrideMimeType:function(a){B||(r.mimeType=a);return this},abort:function(a){a=a||u;g&&g.abort(a);d(0,a);return this}};q.promise(A);A.success=A.done;A.error=A.fail;A.complete=p.add;A.statusCode=function(a){if(a){var c;if(2>B)for(c in a)y[c]=[y[c],a[c]];else c=a[A.status],A.always(c)}return this};r.url=((a||r.url)+"").replace(Ub,"").replace(Xb,wa[1]+
"//");r.dataTypes=v.trim(r.dataType||"*").toLowerCase().split(U);null==r.crossDomain&&(k=lb.exec(r.url.toLowerCase()),r.crossDomain=!(!k||k[1]===wa[1]&&k[2]===wa[2]&&(k[3]||("http:"===k[1]?80:443))==(wa[3]||("http:"===wa[1]?80:443))));r.data&&r.processData&&"string"!==typeof r.data&&(r.data=v.param(r.data,r.traditional));F(Pa,r,c,A);if(2===B)return A;m=r.global;r.type=r.type.toUpperCase();r.hasContent=!Wb.test(r.type);m&&0===v.active++&&v.event.trigger("ajaxStart");if(!r.hasContent&&(r.data&&(r.url+=
(kb.test(r.url)?"&":"?")+r.data,delete r.data),e=r.url,!1===r.cache)){k=v.now();var J=r.url.replace(Zb,"$1_="+k);r.url=J+(J===r.url?(kb.test(r.url)?"&":"?")+"_="+k:"")}(r.data&&r.hasContent&&!1!==r.contentType||c.contentType)&&A.setRequestHeader("Content-Type",r.contentType);r.ifModified&&(e=e||r.url,v.lastModified[e]&&A.setRequestHeader("If-Modified-Since",v.lastModified[e]),v.etag[e]&&A.setRequestHeader("If-None-Match",v.etag[e]));A.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?
r.accepts[r.dataTypes[0]]+("*"!==r.dataTypes[0]?", "+ob+"; q=0.01":""):r.accepts["*"]);for(n in r.headers)A.setRequestHeader(n,r.headers[n]);if(r.beforeSend&&(!1===r.beforeSend.call(w,A,r)||2===B))return A.abort();u="abort";for(n in{success:1,error:1,complete:1})A[n](r[n]);if(g=F(nb,r,c,A)){A.readyState=1;m&&x.trigger("ajaxSend",[A,r]);r.async&&0<r.timeout&&(l=setTimeout(function(){A.abort("timeout")},r.timeout));try{B=1,g.send(s,d)}catch(D){if(2>B)d(-1,D);else throw D;}}else d(-1,"No Transport");
return A},active:0,lastModified:{},etag:{}});var pb=[],$b=/\?/,La=/(=)\?(?=&|$)|\?\?/,ac=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=pb.pop()||v.expando+"_"+ac++;this[a]=!0;return a}});v.ajaxPrefilter("json jsonp",function(a,c,d){var e,f,g,l=a.data,k=a.url,m=!1!==a.jsonp,r=m&&La.test(k),n=m&&!r&&"string"===typeof l&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&La.test(l);if("jsonp"===a.dataTypes[0]||r||n)return e=a.jsonpCallback=v.isFunction(a.jsonpCallback)?
a.jsonpCallback():a.jsonpCallback,f=b[e],r?a.url=k.replace(La,"$1"+e):n?a.data=l.replace(La,"$1"+e):m&&(a.url+=($b.test(k)?"&":"?")+a.jsonp+"="+e),a.converters["script json"]=function(){g||v.error(e+" was not called");return g[0]},a.dataTypes[0]="json",b[e]=function(){g=arguments},d.always(function(){b[e]=f;a[e]&&(a.jsonpCallback=c.jsonpCallback,pb.push(e));g&&v.isFunction(f)&&f(g[0]);g=f=h}),"script"});v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){v.globalEval(a);return a}}});v.ajaxPrefilter("script",function(a){a.cache===h&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});v.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=P.head||P.getElementsByTagName("head")[0]||P.documentElement;return{send:function(e,f){c=P.createElement("script");c.async="async";a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,
e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=h,e||f(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){if(c)c.onload(0,1)}}}});var Da,Va=b.ActiveXObject?function(){for(var a in Da)Da[a](0,1)}:!1,bc=0;v.ajaxSettings.xhr=b.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&H()))a:{try{a=new b.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}a=void 0}return a}:H;(function(a){v.extend(v.support,
{ajax:!!a,cors:!!a&&"withCredentials"in a})})(v.ajaxSettings.xhr());v.support.ajax&&v.ajaxTransport(function(a){if(!a.crossDomain||v.support.cors){var c;return{send:function(d,e){var f,g,l=a.xhr();a.username?l.open(a.type,a.url,a.async,a.username,a.password):l.open(a.type,a.url,a.async);if(a.xhrFields)for(g in a.xhrFields)l[g]=a.xhrFields[g];a.mimeType&&l.overrideMimeType&&l.overrideMimeType(a.mimeType);a.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");try{for(g in d)l.setRequestHeader(g,
d[g])}catch(k){}l.send(a.hasContent&&a.data||null);c=function(d,b){var g,k,m,r,n;try{if(c&&(b||4===l.readyState))if(c=h,f&&(l.onreadystatechange=v.noop,Va&&delete Da[f]),b)4!==l.readyState&&l.abort();else{g=l.status;m=l.getAllResponseHeaders();r={};(n=l.responseXML)&&n.documentElement&&(r.xml=n);try{r.text=l.responseText}catch(w){}try{k=l.statusText}catch(x){k=""}g||!a.isLocal||a.crossDomain?1223===g&&(g=204):g=r.text?200:404}}catch(q){b||e(-1,q)}r&&e(g,k,r,m)};a.async?4===l.readyState?setTimeout(c,
0):(f=++bc,Va&&(Da||(Da={},v(b).unload(Va)),Da[f]=c),l.onreadystatechange=c):c()},abort:function(){c&&c(0,1)}}}});var Ba,Ma,cc=/^(?:toggle|show|hide)$/,dc=RegExp("^(?:([-+])=|)("+ea+")([a-z%]*)$","i"),ec=/queueHooks$/,Ja=[function(a,c,d){var e,f,b,g,l,k,m=this,r=a.style,n={},w=[],q=a.nodeType&&x(a);d.queue||(l=v._queueHooks(a,"fx"),null==l.unqueued&&(l.unqueued=0,k=l.empty.fire,l.empty.fire=function(){l.unqueued||k()}),l.unqueued++,m.always(function(){m.always(function(){l.unqueued--;v.queue(a,"fx").length||
l.empty.fire()})}));1===a.nodeType&&("height"in c||"width"in c)&&(d.overflow=[r.overflow,r.overflowX,r.overflowY],"inline"===v.css(a,"display")&&"none"===v.css(a,"float")&&(v.support.inlineBlockNeedsLayout&&"inline"!==z(a.nodeName)?r.zoom=1:r.display="inline-block"));d.overflow&&(r.overflow="hidden",v.support.shrinkWrapBlocks||m.done(function(){r.overflow=d.overflow[0];r.overflowX=d.overflow[1];r.overflowY=d.overflow[2]}));for(e in c)b=c[e],cc.exec(b)&&(delete c[e],f=f||"toggle"===b,b!==(q?"hide":
"show")&&w.push(e));if(c=w.length)for(b=v._data(a,"fxshow")||v._data(a,"fxshow",{}),("hidden"in b)&&(q=b.hidden),f&&(b.hidden=!q),q?v(a).show():m.done(function(){v(a).hide()}),m.done(function(){var c;v.removeData(a,"fxshow",!0);for(c in n)v.style(a,c,n[c])}),e=0;e<c;e++)f=w[e],g=m.createTween(f,q?b[f]:0),n[f]=b[f]||v.style(a,f),f in b||(b[f]=g.start,q&&(g.end=g.start,g.start="width"===f||"height"===f?1:0))}],Ea={"*":[function(a,c){var d,e,f=this.createTween(a,c),b=dc.exec(c),g=f.cur(),l=+g||0,k=1,
m=20;if(b){d=+b[2];e=b[3]||(v.cssNumber[a]?"":"px");if("px"!==e&&l){l=v.css(f.elem,a,!0)||d||1;do k=k||".5",l/=k,v.style(f.elem,a,l+e);while(k!==(k=f.cur()/g)&&1!==k&&--m)}f.unit=e;f.start=l;f.end=b[1]?l+(b[1]+1)*d:d}return f}]};v.Animation=v.extend(L,{tweener:function(a,c){v.isFunction(a)?(c=a,a=["*"]):a=a.split(" ");for(var d,e=0,f=a.length;e<f;e++)d=a[e],Ea[d]=Ea[d]||[],Ea[d].unshift(c)},prefilter:function(a,c){c?Ja.unshift(a):Ja.push(a)}});v.Tween=K;K.prototype={constructor:K,init:function(a,
c,d,e,f,b){this.elem=a;this.prop=d;this.easing=f||"swing";this.options=c;this.start=this.now=this.cur();this.end=e;this.unit=b||(v.cssNumber[d]?"":"px")},cur:function(){var a=K.propHooks[this.prop];return a&&a.get?a.get(this):K.propHooks._default.get(this)},run:function(a){var c,d=K.propHooks[this.prop];this.pos=this.options.duration?c=v.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):c=a;this.now=(this.end-this.start)*c+this.start;this.options.step&&this.options.step.call(this.elem,
this.now,this);d&&d.set?d.set(this):K.propHooks._default.set(this);return this}};K.prototype.init.prototype=K.prototype;K.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=v.css(a.elem,a.prop,!1,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(v.fx.step[a.prop])v.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[v.cssProps[a.prop]]||v.cssHooks[a.prop])?v.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};K.propHooks.scrollTop=
K.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};v.each(["toggle","show","hide"],function(a,c){var d=v.fn[c];v.fn[c]=function(e,f,b){return null==e||"boolean"===typeof e||!a&&v.isFunction(e)&&v.isFunction(f)?d.apply(this,arguments):this.animate(Q(c,!0),e,f,b)}});v.fn.extend({fadeTo:function(a,c,d,e){return this.filter(x).css("opacity",0).show().end().animate({opacity:c},a,d,e)},animate:function(a,c,d,e){var f=v.isEmptyObject(a),b=v.speed(c,d,e);
c=function(){var c=L(this,v.extend({},a),b);f&&c.stop(!0)};return f||!1===b.queue?this.each(c):this.queue(b.queue,c)},stop:function(a,c,d){var e=function(a){var c=a.stop;delete a.stop;c(d)};"string"!==typeof a&&(d=c,c=a,a=h);c&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var c=!0,f=null!=a&&a+"queueHooks",b=v.timers,g=v._data(this);if(f)g[f]&&g[f].stop&&e(g[f]);else for(f in g)g[f]&&g[f].stop&&ec.test(f)&&e(g[f]);for(f=b.length;f--;)b[f].elem!==this||null!=a&&b[f].queue!==a||(b[f].anim.stop(d),
c=!1,b.splice(f,1));!c&&d||v.dequeue(this,a)})}});v.each({slideDown:Q("show"),slideUp:Q("hide"),slideToggle:Q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,c){v.fn[a]=function(a,d,e){return this.animate(c,a,d,e)}});v.speed=function(a,c,d){var e=a&&"object"===typeof a?v.extend({},a):{complete:d||!d&&c||v.isFunction(a)&&a,duration:a,easing:d&&c||c&&!v.isFunction(c)&&c};e.duration=v.fx.off?0:"number"===typeof e.duration?e.duration:e.duration in v.fx.speeds?
v.fx.speeds[e.duration]:v.fx.speeds._default;if(null==e.queue||!0===e.queue)e.queue="fx";e.old=e.complete;e.complete=function(){v.isFunction(e.old)&&e.old.call(this);e.queue&&v.dequeue(this,e.queue)};return e};v.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}};v.timers=[];v.fx=K.prototype.init;v.fx.tick=function(){var a,c=v.timers,d=0;for(Ba=v.now();d<c.length;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||v.fx.stop();Ba=h};v.fx.timer=function(a){a()&&
v.timers.push(a)&&!Ma&&(Ma=setInterval(v.fx.tick,v.fx.interval))};v.fx.interval=13;v.fx.stop=function(){clearInterval(Ma);Ma=null};v.fx.speeds={slow:600,fast:200,_default:400};v.fx.step={};v.expr&&v.expr.filters&&(v.expr.filters.animated=function(a){return v.grep(v.timers,function(c){return a===c.elem}).length});var qb=/^(?:body|html)$/i;v.fn.offset=function(a){if(arguments.length)return a===h?this:this.each(function(c){v.offset.setOffset(this,a,c)});var c,d,e,f,b,g={top:0,left:0};if(e=(f=this[0])&&
f.ownerDocument){if((d=e.body)===f)return v.offset.bodyOffset(f);c=e.documentElement;if(!v.contains(c,f))return g;"undefined"!==typeof f.getBoundingClientRect&&(g=f.getBoundingClientRect());e=M(e);f=c.clientTop||d.clientTop||0;d=c.clientLeft||d.clientLeft||0;b=e.pageYOffset||c.scrollTop;c=e.pageXOffset||c.scrollLeft;return{top:g.top+b-f,left:g.left+c-d}}};v.offset={bodyOffset:function(a){var c=a.offsetTop,d=a.offsetLeft;v.support.doesNotIncludeMarginInBodyOffset&&(c+=parseFloat(v.css(a,"marginTop"))||
0,d+=parseFloat(v.css(a,"marginLeft"))||0);return{top:c,left:d}},setOffset:function(a,c,d){var e=v.css(a,"position");"static"===e&&(a.style.position="relative");var f=v(a),b=f.offset(),g=v.css(a,"top"),l=v.css(a,"left"),k={},m={};("absolute"===e||"fixed"===e)&&-1<v.inArray("auto",[g,l])?(m=f.position(),e=m.top,l=m.left):(e=parseFloat(g)||0,l=parseFloat(l)||0);v.isFunction(c)&&(c=c.call(a,d,b));null!=c.top&&(k.top=c.top-b.top+e);null!=c.left&&(k.left=c.left-b.left+l);"using"in c?c.using.call(a,k):
f.css(k)}};v.fn.extend({position:function(){if(this[0]){var a=this[0],c=this.offsetParent(),d=this.offset(),e=qb.test(c[0].nodeName)?{top:0,left:0}:c.offset();d.top-=parseFloat(v.css(a,"marginTop"))||0;d.left-=parseFloat(v.css(a,"marginLeft"))||0;e.top+=parseFloat(v.css(c[0],"borderTopWidth"))||0;e.left+=parseFloat(v.css(c[0],"borderLeftWidth"))||0;return{top:d.top-e.top,left:d.left-e.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||P.body;a&&!qb.test(a.nodeName)&&
"static"===v.css(a,"position");)a=a.offsetParent;return a||P.body})}});v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);v.fn[a]=function(e){return v.access(this,function(a,e,f){var b=M(a);if(f===h)return b?c in b?b[c]:b.document.documentElement[e]:a[e];b?b.scrollTo(d?v(b).scrollLeft():f,d?f:v(b).scrollTop()):a[e]=f},a,e,arguments.length,null)}});v.each({Height:"height",Width:"width"},function(a,c){v.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,
e){v.fn[e]=function(e,f){var b=arguments.length&&(d||"boolean"!==typeof e),g=d||(!0===e||!0===f?"margin":"border");return v.access(this,function(c,d,e){return v.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(d=c.documentElement,Math.max(c.body["scroll"+a],d["scroll"+a],c.body["offset"+a],d["offset"+a],d["client"+a])):e===h?v.css(c,d,e,g):v.style(c,d,e,g)},c,b?e:h,b,null)}})});b.jQuery=b.$=v;"function"===typeof I&&I.amd&&I.amd.jQuery&&I("jquery",[],function(){return v})})(window);
(function(){function b(a,c,d){if(a===c)return 0!==a||1/a==1/c;if(null==a||null==c)return a===c;a._chain&&(a=a._wrapped);c._chain&&(c=c._wrapped);if(a.isEqual&&z.isFunction(a.isEqual))return a.isEqual(c);if(c.isEqual&&z.isFunction(c.isEqual))return c.isEqual(a);var e=k.call(a);if(e!=k.call(c))return!1;switch(e){case "[object String]":return a==String(c);case "[object Number]":return a!=+a?c!=+c:0==a?1/a==1/c:a==+c;case "[object Date]":case "[object Boolean]":return+a==+c;case "[object RegExp]":return a.source==
c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if("object"!=typeof a||"object"!=typeof c)return!1;for(var f=d.length;f--;)if(d[f]==a)return!0;d.push(a);var f=0,g=!0;if("[object Array]"==e){if(f=a.length,g=f==c.length)for(;f--&&(g=f in a==f in c&&b(a[f],c[f],d)););}else{if("constructor"in a!="constructor"in c||a.constructor!=c.constructor)return!1;for(var l in a)if(z.has(a,l)&&(f++,!(g=z.has(c,l)&&b(a[l],c[l],d))))break;if(g){for(l in c)if(z.has(c,l)&&!f--)break;
g=!f}}d.pop();return g}var h=this,u=h._,w={},q=Array.prototype,p=Object.prototype,s=q.slice,a=q.unshift,k=p.toString,c=p.hasOwnProperty,g=q.forEach,f=q.map,e=q.reduce,d=q.reduceRight,l=q.filter,m=q.every,x=q.some,r=q.indexOf,n=q.lastIndexOf,p=Array.isArray,y=Object.keys,B=Function.prototype.bind,z=function(a){return new Q(a)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=z),exports._=z):h._=z;z.VERSION="1.3.3";var C=z.each=z.forEach=function(a,
c,d){if(null!=a)if(g&&a.forEach===g)a.forEach(c,d);else if(a.length===+a.length)for(var e=0,f=a.length;e<f&&!(e in a&&c.call(d,a[e],e,a)===w);e++);else for(e in a)if(z.has(a,e)&&c.call(d,a[e],e,a)===w)break};z.map=z.collect=function(a,c,d){var e=[];if(null==a)return e;if(f&&a.map===f)return a.map(c,d);C(a,function(a,f,b){e[e.length]=c.call(d,a,f,b)});a.length===+a.length&&(e.length=a.length);return e};z.reduce=z.foldl=z.inject=function(a,c,d,f){var b=2<arguments.length;null==a&&(a=[]);if(e&&a.reduce===
e)return f&&(c=z.bind(c,f)),b?a.reduce(c,d):a.reduce(c);C(a,function(a,e,g){b?d=c.call(f,d,a,e,g):(d=a,b=!0)});if(!b)throw new TypeError("Reduce of empty array with no initial value");return d};z.reduceRight=z.foldr=function(a,c,e,f){var b=2<arguments.length;null==a&&(a=[]);if(d&&a.reduceRight===d)return f&&(c=z.bind(c,f)),b?a.reduceRight(c,e):a.reduceRight(c);var g=z.toArray(a).reverse();f&&!b&&(c=z.bind(c,f));return b?z.reduce(g,c,e,f):z.reduce(g,c)};z.find=z.detect=function(a,c,d){var e;D(a,function(a,
f,b){if(c.call(d,a,f,b))return e=a,!0});return e};z.filter=z.select=function(a,c,d){var e=[];if(null==a)return e;if(l&&a.filter===l)return a.filter(c,d);C(a,function(a,f,b){c.call(d,a,f,b)&&(e[e.length]=a)});return e};z.reject=function(a,c,d){var e=[];if(null==a)return e;C(a,function(a,f,b){c.call(d,a,f,b)||(e[e.length]=a)});return e};z.every=z.all=function(a,c,d){var e=!0;if(null==a)return e;if(m&&a.every===m)return a.every(c,d);C(a,function(a,f,b){if(!(e=e&&c.call(d,a,f,b)))return w});return!!e};
var D=z.some=z.any=function(a,c,d){c||(c=z.identity);var e=!1;if(null==a)return e;if(x&&a.some===x)return a.some(c,d);C(a,function(a,f,b){if(e||(e=c.call(d,a,f,b)))return w});return!!e};z.include=z.contains=function(a,c){var d=!1;return null==a?d:r&&a.indexOf===r?-1!=a.indexOf(c):d=D(a,function(a){return a===c})};z.invoke=function(a,c){var d=s.call(arguments,2);return z.map(a,function(a){return(z.isFunction(c)?c||a:a[c]).apply(a,d)})};z.pluck=function(a,c){return z.map(a,function(a){return a[c]})};
z.max=function(a,c,d){if(!c&&z.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!c&&z.isEmpty(a))return-Infinity;var e={computed:-Infinity};C(a,function(a,f,b){f=c?c.call(d,a,f,b):a;f>=e.computed&&(e={value:a,computed:f})});return e.value};z.min=function(a,c,d){if(!c&&z.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!c&&z.isEmpty(a))return Infinity;var e={computed:Infinity};C(a,function(a,f,b){f=c?c.call(d,a,f,b):a;f<e.computed&&(e={value:a,computed:f})});return e.value};z.shuffle=
function(a){var c=[],d;C(a,function(a,e,f){d=Math.floor(Math.random()*(e+1));c[e]=c[d];c[d]=a});return c};z.sortBy=function(a,c,d){var e=z.isFunction(c)?c:function(a){return a[c]};return z.pluck(z.map(a,function(a,c,f){return{value:a,criteria:e.call(d,a,c,f)}}).sort(function(a,c){var d=a.criteria,e=c.criteria;return void 0===d?1:void 0===e?-1:d<e?-1:d>e?1:0}),"value")};z.groupBy=function(a,c){var d={},e=z.isFunction(c)?c:function(a){return a[c]};C(a,function(a,c){var f=e(a,c);(d[f]||(d[f]=[])).push(a)});
return d};z.sortedIndex=function(a,c,d){d||(d=z.identity);for(var e=0,f=a.length;e<f;){var b=e+f>>1;d(a[b])<d(c)?e=b+1:f=b}return e};z.toArray=function(a){return a?z.isArray(a)||z.isArguments(a)?s.call(a):a.toArray&&z.isFunction(a.toArray)?a.toArray():z.values(a):[]};z.size=function(a){return z.isArray(a)?a.length:z.keys(a).length};z.first=z.head=z.take=function(a,c,d){return null==c||d?a[0]:s.call(a,0,c)};z.initial=function(a,c,d){return s.call(a,0,a.length-(null==c||d?1:c))};z.last=function(a,c,
d){return null==c||d?a[a.length-1]:s.call(a,Math.max(a.length-c,0))};z.rest=z.tail=function(a,c,d){return s.call(a,null==c||d?1:c)};z.compact=function(a){return z.filter(a,function(a){return!!a})};z.flatten=function(a,c){return z.reduce(a,function(a,d){if(z.isArray(d))return a.concat(c?d:z.flatten(d));a[a.length]=d;return a},[])};z.without=function(a){return z.difference(a,s.call(arguments,1))};z.uniq=z.unique=function(a,c,d){d=d?z.map(a,d):a;var e=[];3>a.length&&(c=!0);z.reduce(d,function(d,f,b){(c?
z.last(d)===f&&d.length:z.include(d,f))||(d.push(f),e.push(a[b]));return d},[]);return e};z.union=function(){return z.uniq(z.flatten(arguments,!0))};z.intersection=z.intersect=function(a){var c=s.call(arguments,1);return z.filter(z.uniq(a),function(a){return z.every(c,function(c){return 0<=z.indexOf(c,a)})})};z.difference=function(a){var c=z.flatten(s.call(arguments,1),!0);return z.filter(a,function(a){return!z.include(c,a)})};z.zip=function(){for(var a=s.call(arguments),c=z.max(z.pluck(a,"length")),
d=Array(c),e=0;e<c;e++)d[e]=z.pluck(a,""+e);return d};z.indexOf=function(a,c,d){if(null==a)return-1;var e;if(d)return d=z.sortedIndex(a,c),a[d]===c?d:-1;if(r&&a.indexOf===r)return a.indexOf(c);d=0;for(e=a.length;d<e;d++)if(d in a&&a[d]===c)return d;return-1};z.lastIndexOf=function(a,c){if(null==a)return-1;if(n&&a.lastIndexOf===n)return a.lastIndexOf(c);for(var d=a.length;d--;)if(d in a&&a[d]===c)return d;return-1};z.range=function(a,c,d){1>=arguments.length&&(c=a||0,a=0);d=arguments[2]||1;for(var e=
Math.max(Math.ceil((c-a)/d),0),f=0,b=Array(e);f<e;)b[f++]=a,a+=d;return b};var F=function(){};z.bind=function(a,c){var d,e;if(a.bind===B&&B)return B.apply(a,s.call(arguments,1));if(!z.isFunction(a))throw new TypeError;e=s.call(arguments,2);return d=function(){if(!(this instanceof d))return a.apply(c,e.concat(s.call(arguments)));F.prototype=a.prototype;var f=new F,b=a.apply(f,e.concat(s.call(arguments)));return Object(b)===b?b:f}};z.bindAll=function(a){var c=s.call(arguments,1);0==c.length&&(c=z.functions(a));
C(c,function(c){a[c]=z.bind(a[c],a)});return a};z.memoize=function(a,c){var d={};c||(c=z.identity);return function(){var e=c.apply(this,arguments);return z.has(d,e)?d[e]:d[e]=a.apply(this,arguments)}};z.delay=function(a,c){var d=s.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},c)};z.defer=function(a){return z.delay.apply(z,[a,1].concat(s.call(arguments,1)))};z.throttle=function(a,c){var d,e,f,b,g,l,k=z.debounce(function(){g=b=!1},c);return function(){d=this;e=arguments;f||
(f=setTimeout(function(){f=null;g&&a.apply(d,e);k()},c));b?g=!0:l=a.apply(d,e);k();b=!0;return l}};z.debounce=function(a,c,d){var e;return function(){var f=this,b=arguments;d&&!e&&a.apply(f,b);clearTimeout(e);e=setTimeout(function(){e=null;d||a.apply(f,b)},c)}};z.once=function(a){var c=!1,d;return function(){if(c)return d;c=!0;return d=a.apply(this,arguments)}};z.wrap=function(a,c){return function(){var d=[a].concat(s.call(arguments,0));return c.apply(this,d)}};z.compose=function(){var a=arguments;
return function(){for(var c=arguments,d=a.length-1;0<=d;d--)c=[a[d].apply(this,c)];return c[0]}};z.after=function(a,c){return 0>=a?c():function(){if(1>--a)return c.apply(this,arguments)}};z.keys=y||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)z.has(a,d)&&(c[c.length]=d);return c};z.values=function(a){return z.map(a,z.identity)};z.functions=z.methods=function(a){var c=[],d;for(d in a)z.isFunction(a[d])&&c.push(d);return c.sort()};z.extend=function(a){C(s.call(arguments,
1),function(c){for(var d in c)a[d]=c[d]});return a};z.pick=function(a){var c={};C(z.flatten(s.call(arguments,1)),function(d){d in a&&(c[d]=a[d])});return c};z.defaults=function(a){C(s.call(arguments,1),function(c){for(var d in c)null==a[d]&&(a[d]=c[d])});return a};z.clone=function(a){return z.isObject(a)?z.isArray(a)?a.slice():z.extend({},a):a};z.tap=function(a,c){c(a);return a};z.isEqual=function(a,c){return b(a,c,[])};z.isEmpty=function(a){if(null==a)return!0;if(z.isArray(a)||z.isString(a))return 0===
a.length;for(var c in a)if(z.has(a,c))return!1;return!0};z.isElement=function(a){return!(!a||1!=a.nodeType)};z.isArray=p||function(a){return"[object Array]"==k.call(a)};z.isObject=function(a){return a===Object(a)};z.isArguments=function(a){return"[object Arguments]"==k.call(a)};z.isArguments(arguments)||(z.isArguments=function(a){return!(!a||!z.has(a,"callee"))});z.isFunction=function(a){return"[object Function]"==k.call(a)};z.isString=function(a){return"[object String]"==k.call(a)};z.isNumber=function(a){return"[object Number]"==
k.call(a)};z.isFinite=function(a){return z.isNumber(a)&&isFinite(a)};z.isNaN=function(a){return a!==a};z.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==k.call(a)};z.isDate=function(a){return"[object Date]"==k.call(a)};z.isRegExp=function(a){return"[object RegExp]"==k.call(a)};z.isNull=function(a){return null===a};z.isUndefined=function(a){return void 0===a};z.has=function(a,d){return c.call(a,d)};z.noConflict=function(){h._=u;return this};z.identity=function(a){return a};z.times=
function(a,c,d){for(var e=0;e<a;e++)c.call(d,e)};z.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};z.result=function(a,c){if(null==a)return null;var d=a[c];return z.isFunction(d)?d.call(a):d};z.mixin=function(a){C(z.functions(a),function(c){Z(c,z[c]=a[c])})};var G=0;z.uniqueId=function(a){var c=G++;return a?a+c:c};z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,
escape:/<%-([\s\S]+?)%>/g};var H=/.^/,J={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},A;for(A in J)J[J[A]]=A;var L=/\\|'|\r|\n|\t|\u2028|\u2029/g,O=/\\(\\|'|r|n|t|u2028|u2029)/g,K=function(a){return a.replace(O,function(a,c){return J[c]})};z.template=function(a,c,d){d=z.defaults(d||{},z.templateSettings);a="__p+='"+a.replace(L,function(a){return"\\"+J[a]}).replace(d.escape||H,function(a,c){return"'+\n_.escape("+K(c)+")+\n'"}).replace(d.interpolate||H,function(a,c){return"'+\n("+
K(c)+")+\n'"}).replace(d.evaluate||H,function(a,c){return"';\n"+K(c)+"\n;__p+='"})+"';\n";d.variable||(a="with(obj||{}){\n"+a+"}\n");a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n";var e=new Function(d.variable||"obj","_",a);if(c)return e(c,z);c=function(a){return e.call(this,a,z)};c.source="function("+(d.variable||"obj")+"){\n"+a+"}";return c};z.chain=function(a){return z(a).chain()};var Q=function(a){this._wrapped=a};z.prototype=Q.prototype;
var M=function(a,c){return c?z(a).chain():a},Z=function(c,d){Q.prototype[c]=function(){var c=s.call(arguments);a.call(c,this._wrapped);return M(d.apply(z,c),this._chain)}};z.mixin(z);C("pop push reverse shift sort splice unshift".split(" "),function(a){var c=q[a];Q.prototype[a]=function(){var d=this._wrapped;c.apply(d,arguments);var e=d.length;"shift"!=a&&"splice"!=a||0!==e||delete d[0];return M(d,this._chain)}});C(["concat","join","slice"],function(a){var c=q[a];Q.prototype[a]=function(){return M(c.apply(this._wrapped,
arguments),this._chain)}});Q.prototype.chain=function(){this._chain=!0;return this};Q.prototype.value=function(){return this._wrapped}}).call(this);I("underscore",function(b){return function(){return b._}}(this));I("lib/clone",["require"],function(b){return function(b){return JSON.parse(JSON.stringify(b))}});I("config",["require","lib/clone"],function(b){var h=b("lib/clone"),u={};"undefined"!==typeof ta&&ta.config&&(u=h(ta.config));b=location.search.match(/desmos_config=([^&]+)/);null!==b&&(u=JSON.parse(decodeURIComponent(b[1])));
return{get:function(b){return u[b]},use:function(b,q){var p=h(u),s;for(s in b)u[s]=b[s];try{q()}finally{u=p}},all:function(){return h(u)}}});I("math/builtin",["require"],function(b){var h={mod:function(b,q){return b-q*Math.floor(b/q)},min:function(b,q){return b<q?b:q},max:function(b,q){return b>q?b:q},sign:function(b){return 0===b?0:0<b?1:0>b?-1:NaN},lcm:function(b,q){b=h.smartTruncate(b);q=h.smartTruncate(q);var p=h.getGCD(b,q);return Math.abs(b*q/p)},gcd:function(b,q){return h.getGCD(b,q)},nCr:function(b,
q){b=h.smartTruncate(b);q=h.smartTruncate(q);if(q>b||0>b||0>q)return 0;for(var p=1,s=0;s<q;s++)p*=(b-s)/(s+1);return p},nPr:function(b,q){b=h.smartTruncate(b);q=h.smartTruncate(q);if(q>b||0>b||0>q)return 0;for(var p=1,s=0;s<q;s++)p*=b-s;return p},factorial:function(b){return h.gamma(b+1)},_integerFactorial:function(b){if(b!==Math.floor(b)||0>b||170<b)return NaN;if(0===b||1===b)return 1;for(var q=1,p=2;p<=b;p++)q*=p;return q},gamma:function(b){return b===Math.floor(b)?h._integerFactorial(b-1):0>b?
Math.PI/(Math.sin(Math.PI*b)*h.gamma(1-b)):Math.exp(h.lnGamma(b))},lnGamma:function(b){if(0>b)return NaN;for(var q=[57.15623566586292,-59.59796035547549,14.136097974741746,-0.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6],p=0.9999999999999971,s=0;14>s;s++)p+=q[s]/(b+s+1);q=b+5.2421875;return(b+0.5)*Math.log(q)-
q+Math.log(2.5066282746310007*p/b)},bernoulliTable:[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-86580.25311355312,8553103/6,-2.7298231067816094E7],cotDerivative:function(b,q){if(b!==Math.floor(b)||0>b)return NaN;if(0===b)return 1/h.tan(q);var p=h.sin(q);if(1===b)return-1/(p*p);var s=h.cos(q);if(2===b)return 2*s/(p*p*p);var a=[0,2],k,c,g,f,e;for(c=3;c<=b;c++){k=[];for(g=0;g<c;g++)e=f=0,0<g&&(f=(c-g+1)*a[g-1]),g+2<c&&(e=(g+1)*a[g+1]),k.push(-(f+e));a=k}a=0;for(g=
b-1;0<=g;g--)a=k[g]+s*a;return a/Math.pow(p,b+1)},polyGamma:function(b,q){if(0>b||b!==Math.floor(b))return NaN;var p=0===b%2?-1:1;if(0>q)return-p*h.polyGamma(b,1-q)-Math.pow(Math.PI,b+1)*h.cotDerivative(b,Math.PI*q);for(var s=h.factorial(b),a=0,k=Math.pow(q,-(b+1));10>q;)a+=k,q++,k=Math.pow(q,-(b+1));for(var a=a+(0===b?-Math.log(q):k*q/b),a=a+0.5*k,c=h.bernoulliTable,g=b+1,f=2,k=k*q*g/f,e=1/(q*q),d=1;14>=d;d++)k*=e,a+=k*c[d-1],g++,f++,k*=g/f,g++,f++,k*=g/f;return s*p*a},getGCD:function(b,q){var p=
h.smartTruncate(b),s=h.smartTruncate(q);0>p&&(p=-p);0>s&&(s=-s);if(s>p)var a=s,s=p,p=a;if(0===s)return p;for(a=p%s;0<a;)p=s,s=a,a=p%s;return s},toFraction:function(b,q){if(Infinity===b)return{n:Infinity,d:1};if(-Infinity===b)return{n:-Infinity,d:1};if(!isFinite(b))return{n:NaN,d:1};var p,s=0,a=1,k=1,c=0,g,f;for(q||(q=1E6);;){p=Math.floor(b);g=p*a+s;f=p*c+k;if(f>q)break;s=a;k=c;a=g;c=f;if(b===p)break;b=1/(b-p)}return{n:a,d:c}},approx:function(b,q,p){var s=Math.max(Math.max(Math.abs(b),Math.abs(q)),
1);p=void 0===p?0.5:Math.pow(0.5,p);return s===s+p*Math.abs(q-b)},smartTruncate:function(b){return 0>b?Math.ceil(b):Math.floor(b)},log_base:function(b,q){return Math.log(b)/Math.log(q)},pow:function(b,q){if(0<=b||q===Math.floor(q))return Math.pow(b,q);var p=h.toFraction(q,100);return h.approx(p.n/p.d,q,2)&&1===p.d%2?(0===p.n%2?1:-1)*Math.pow(-b,q):NaN},nthroot:function(b,q){return h.pow(b,1/q)}},u=1/Math.PI;h.sin=function(b){return 0===2*u*b%2?0:Math.sin(b)};h.cos=function(b){return 1===Math.abs(2*
u*b%2)?0:Math.cos(b)};h.tan=function(b){return 0===2*u*b%2?0:1===Math.abs(2*u*b%2)?Infinity:Math.tan(b)};h.sec=function(b){return 1===Math.abs(2*u*b%2)?Infinity:1/Math.cos(b)};h.csc=function(b){return 0===2*u*b%2?Infinity:1/Math.sin(b)};h.cot=function(b){return 0===2*u*b%2?Infinity:1===Math.abs(2*u*b%2)?0:1/Math.tan(b)};h.acot=function(b){return Math.PI/2-Math.atan(b)};h.acsc=function(b){return Math.asin(1/b)};h.asec=function(b){return Math.acos(1/b)};h.sinh=function(b){return(Math.exp(b)-Math.exp(-b))/
2};h.cosh=function(b){return(Math.exp(b)+Math.exp(-b))/2};h.tanh=function(b){return 0<b?(1-Math.exp(-2*b))/(1+Math.exp(-2*b)):(Math.exp(2*b)-1)/(Math.exp(2*b)+1)};h.sech=function(b){return 1/h.cosh(b)};h.csch=function(b){return 1/h.sinh(b)};h.coth=function(b){return 1/h.tanh(b)};h.asinh=function(b){return Math.log(b+Math.sqrt(b*b+1))};h.acosh=function(b){return Math.log(b+Math.sqrt(b+1)*Math.sqrt(b-1))};h.atanh=function(b){return 0.5*Math.log((1+b)/(1-b))};h.asech=function(b){return Math.log(1/b+
Math.sqrt(1/b+1)*Math.sqrt(1/b-1))};h.acsch=function(b){return Math.log(1/b+Math.sqrt(1/(b*b)+1))};h.acoth=function(b){return 0.5*Math.log((b+1)/(b-1))};return h});I("math/evalframe",["require","pjs"],function(b){var h=b("pjs")(function(b){b.init=function(b){this.parentFrame=b instanceof h?b:null;this.variables={};this.functions={};this.evalStrings={};this.definitionIds={};if(this.parentFrame)for(var q in this.parentFrame.evalStrings)this.evalStrings[q]=this.parentFrame.getEvalStrings(q)};b.setVariable=
function(b,q){this.variables[b]=q};b.getVariable=function(b){if(this.variables.hasOwnProperty(b))return this.variables[b];if(this.parentFrame)return this.parentFrame.getVariable(b);throw"Variable '"+b+"' not defined";};b.setDefinitionId=function(b,q){this.definitionIds[b]=q};b.getDefinitionId=function(b){return this.definitionIds[b]};b.setFunction=function(b,q,p,s,a,k){this.functions[b]={arity:q,body:p,tree:s,source:k,args:a}};b.hasFunction=function(b){return this.functions.hasOwnProperty(b)?!0:this.parentFrame?
this.parentFrame.hasFunction(b):!1};b.hasFunctionWithArity=function(b,q){return this.functions.hasOwnProperty(b)&&this.functions[b].arity==q?!0:this.parentFrame?this.parentFrame.hasFunction(b):!1};b.hasVariable=function(b){return this.variables.hasOwnProperty(b)?!0:this.parentFrame?this.parentFrame.hasVariable(b):!1};b.getFunctionTree=function(b){if(this.functions.hasOwnProperty(b))return this.functions[b].tree;if(this.parentFrame)return this.parentFrame.getFunctionTree(b);throw"Function '"+b+"' not defined";
};b.callFunction=function(b,q){if(this.functions.hasOwnProperty(b)){var p=this.functions[b];if(p.arity==q.length)return p.body.apply(null,q);throw"Function "+b+" expects "+p.arity+" arguments, but was called with "+q.length;}if(this.parentFrame)return this.parentFrame.callFunction(b,q);throw"Function '"+b+"' not defined";};b.defines=function(b){return this.hasVariable(b)||this.hasFunction(b)};b.arity=function(b){if(this.hasVariable(b))return 0;if(this.hasFunction(b))return this.functions[b].arity;
if(this.parentFrame)return this.parentFrame.arity(b)};b.setEvalStrings=function(b,q){this.evalStrings[b]=q};b.getEvalStrings=function(b){return this.evalStrings.hasOwnProperty(b)?this.evalStrings[b]:{expression:b,statements:""}};b.functionMap=function(b){var q={};this.parentFrame&&!b&&(q=this.parentFrame.functionMap());for(var p in this.functions)this.functions.hasOwnProperty(p)&&(q[p]=this.functions[p].body);return q};b.leafFunctionMap=function(){return this.functionMap(!0)};b.functionSourceMap=
function(b){var q={};this.parentFrame&&!b&&(q=this.parentFrame.functionSourceMap());for(var p in this.functions)this.functions.hasOwnProperty(p)&&this.functions[p].source&&(q[p]={args:this.functions[p].args,source:this.functions[p].source});return q};b.leafFunctionSourceMap=function(){return this.functionSourceMap(!0)}});return h});I("math/comparators",["require"],function(b){return{table:{"<":{inclusive:!1,direction:-1},"!=":{inclusive:!1,direction:0},">":{inclusive:!1,direction:1},"<=":{inclusive:!0,
direction:-1},"=":{inclusive:!0,direction:0},">=":{inclusive:!0,direction:1}},get:function(b,u){switch(u){case -1:return b?"<=":"<";case 0:return b?"=":"!=";case 1:return b?">=":">";default:throw"Programming error.  Comparators must have a direction of -1, 0, or 1";}}}});I("parser",[],function(){var b={trace:function(){},yy:{},symbols_:{error:2,sentence:3,expr:4,EOF:5,assignment:6,equation:7,function_declaration:8,ordered_pair_list:9,double_inequality:10,"boolean":11,identifier:12,"=":13,FUNCTION_PROTOTYPE:14,
",":15,comparator:16,IDENTIFIER_BASE:17,ordered_pair_list_elements:18,ordered_pair:19,"[":20,"]":21,"(":22,")":23,expr_sum:24,"<":25,">":26,">=":27,"<=":28,"+":29,expr_product:30,"-":31,expr_atom_impmul:32,"*":33,expr_atom:34,"/":35,exponent:36,"^N":37,"^I":38,"^":39,"{":40,"}":41,function_call:42,function_call_unary:43,trig_function_call:44,log_function_call:45,"left|":46,"right|":47,FRAC:48,SQRT:49,"!":50,repeated_operator:51,DERIVATIVE:52,expr_piecewise:53,constant:54,NUMBER:55,repeated_operator_symbol:56,
SUM:57,PROD:58,_:59,"{_visible":60,piecewise_list:61,"}_visible":62,incomplete_piecewise_list:63,piecewise_element:64,":":65,trig_function:66,TRIG_FUNCTION:67,log_prefix:68,LN:69,LOG:70,LOG_BASE_N:71,function_argument_list:72,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"=",14:"FUNCTION_PROTOTYPE",15:",",17:"IDENTIFIER_BASE",20:"[",21:"]",22:"(",23:")",25:"<",26:">",27:">=",28:"<=",29:"+",31:"-",33:"*",35:"/",37:"^N",38:"^I",39:"^",40:"{",41:"}",46:"left|",47:"right|",48:"FRAC",49:"SQRT",50:"!",
52:"DERIVATIVE",55:"NUMBER",57:"SUM",58:"PROD",59:"_",60:"{_visible",62:"}_visible",65:":",67:"TRIG_FUNCTION",69:"LN",70:"LOG",71:"LOG_BASE_N"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,3],[3,2],[3,4],[3,1],[6,3],[6,3],[7,3],[10,5],[12,1],[9,1],[18,1],[18,3],[19,5],[19,5],[4,1],[16,1],[16,1],[16,1],[16,1],[11,3],[11,3],[11,5],[24,3],[24,3],[24,1],[30,2],[30,3],[30,3],[30,1],[36,1],[36,1],[36,4],[32,1],[32,1],[32,1],[32,1],[32,1],[32,3],[32,3],[32,3],[32,2],[32,7],[32,4],[32,7],
[32,2],[32,1],[32,2],[32,1],[34,1],[34,3],[34,2],[34,2],[34,2],[34,1],[56,1],[56,1],[51,9],[53,3],[53,2],[61,3],[61,1],[63,3],[63,1],[64,3],[64,1],[54,1],[54,2],[43,5],[43,4],[66,1],[44,4],[44,2],[44,7],[44,9],[44,3],[44,5],[68,1],[68,1],[68,1],[68,3],[68,5],[45,4],[45,2],[45,5],[45,3],[42,4],[72,3],[72,3],[8,2]],performAction:function(b,h,q,p,s,a,k){h=a.length-1;switch(s){case 1:return a[h-1];case 2:return a[h-1];case 3:return a[h-1];case 4:return a[h-1];case 5:return a[h-1];case 6:return a[h-1];
case 7:return a[h-1];case 8:return p.ErrorNode("What do you want variable '"+a[h-2].identifier+"' to equal?");case 9:return b=p.parseFunctionDeclaration(a[h-1]),p.ErrorNode("What do you want function '"+b.identifier.identifier+"' to equal?");case 10:return p.ErrorNode("Points are written like this: (1, 2)");case 11:return p.ErrorNode("You haven't written anything yet");case 12:this.$=p.AssignmentNode(a[h-2],a[h]);break;case 13:this.$=p.AssignmentNode(a[h-2],p.ErrorNode);break;case 14:this.$=p.EquationNode(a[h-
2],a[h]);break;case 15:this.$=p.DoubleInequalityNode(a[h-4],a[h-3],a[h-2],a[h-1],a[h]);break;case 16:this.$=p.IdentifierNode(b);p.setInput(this.$,this._$);break;case 17:this.$=p.OrderedPairListNode(a[h]);break;case 18:this.$=[a[h]];break;case 19:a[h-2].push(a[h]);this.$=a[h-2];break;case 20:this.$=p.OrderedPairNode(a[h-3],a[h-1]);break;case 21:this.$=p.OrderedPairNode(a[h-3],a[h-1]);break;case 22:this.$=a[h];p.setInput(this.$,this._$);break;case 23:this.$="<";break;case 24:this.$=">";break;case 25:this.$=
">=";break;case 26:this.$="<=";break;case 27:this.$=p.ComparatorNode(a[h-1],a[h-2],a[h]);break;case 28:this.$=p.ComparatorNode("===",a[h-2],a[h]);break;case 29:this.$=p.ChainedComparatorNode([a[h-3],a[h-1]],[a[h-4],a[h-2],a[h]]);break;case 30:this.$=p.BinaryOperatorNode("+",a[h-2],a[h]);break;case 31:this.$=p.BinaryOperatorNode("-",a[h-2],a[h]);break;case 32:this.$=a[h];break;case 33:this.$=p.BinaryOperatorNode("*",a[h-1],a[h]);break;case 34:this.$=p.BinaryOperatorNode("*",a[h-2],a[h]);break;case 35:this.$=
p.BinaryOperatorNode("/",a[h-2],a[h]);break;case 36:this.$=a[h];break;case 37:this.$=p.ConstantNode(Number(a[h]));break;case 38:this.$=p.IdentifierNode(a[h]);break;case 39:this.$=a[h-1];break;case 40:this.$=a[h];break;case 41:this.$=a[h];break;case 42:this.$=a[h];break;case 43:this.$=a[h];break;case 44:this.$=a[h];break;case 45:this.$=a[h-1];break;case 46:this.$=a[h-1];break;case 47:this.$=p.FunctionNode(p.IdentifierNode("\\abs"),[a[h-1]]);break;case 48:this.$=p.BinaryOperatorNode("^",a[h-1],a[h]);
break;case 49:this.$=p.BinaryOperatorNode("/",a[h-4],a[h-1]);break;case 50:this.$=p.FunctionNode(p.IdentifierNode("\\sqrt"),[a[h-1]]);break;case 51:this.$=p.FunctionNode(p.IdentifierNode("\\nthroot"),[a[h-1],a[h-4]]);break;case 52:this.$=p.FunctionNode(p.IdentifierNode("\\factorial"),[a[h-1]]);break;case 53:this.$=a[h];break;case 54:this.$=p.DerivativeNode(p.IdentifierNode(a[h-1]),a[h]);break;case 55:this.$=a[h];break;case 56:this.$=a[h];break;case 57:this.$=p.NegationNode(p.BinaryOperatorNode("^",
p.ConstantNode(Number(a[h-1])),a[h]));break;case 58:this.$=p.BinaryOperatorNode("^",a[h-1],a[h]);break;case 59:this.$=p.FunctionNode(p.IdentifierNode("\\factorial"),[a[h-1]]);break;case 60:this.$=p.NegationNode(a[h]);break;case 61:this.$=a[h];break;case 62:this.$=p.SummationNode;break;case 63:this.$=p.ProductNode;break;case 64:this.$=a[h-8](a[h-5],a[h-3],a[h-1],a[h]);break;case 65:this.$=a[h-1];break;case 66:this.$=p.ConstantNode(1);break;case 67:this.$=a[h-2].append_else(p.PiecewiseNode(p.ConstantNode(!0),
a[h]));break;case 68:this.$=a[h];break;case 69:this.$=a[h-2].append_else(a[h]);break;case 70:this.$=a[h];break;case 71:this.$=p.PiecewiseNode(a[h-2],a[h]);break;case 72:this.$=p.PiecewiseNode(a[h],p.ConstantNode(1));break;case 73:this.$=p.ConstantNode(Number(b));break;case 74:this.$=p.ConstantNode(-a[h]);break;case 75:this.$=p.FunctionCallExponentNode(a[h-4],a[h-2],a[h]);break;case 76:this.$=p.FunctionNode(a[h-3],[a[h-1]]);break;case 77:this.$=p.IdentifierNode(b);break;case 78:this.$=p.FunctionNode(a[h-
3],[a[h-1]]);break;case 79:if(!a[h].okForImplicitFunction())throw"Too complicated.  Use parens";this.$=p.FunctionNode(a[h-1],[a[h]]);break;case 80:if(!a[h].okForImplicitFunction())throw"Too complicated.  Use parens";if(1!=a[h-2].value)throw"Only sin^2 and sin^-1 are supported.  Otherwise, use parens";this.$=p.FunctionNode(p.IdentifierNode(p.inverses[a[h-6].identifier]),[a[h]]);break;case 81:if(1!=a[h-4].value)throw"Only sin^2 and sin^-1 are supported.  Otherwise, use parens";this.$=p.FunctionNode(p.IdentifierNode(p.inverses[a[h-
8].identifier]),[a[h-1]]);break;case 82:if(!a[h].okForImplicitFunction())throw"Too complicated.  Use parens";if("2"!=a[h-1])throw"Only sin^2 and sin^-1 are supported.  Otherwise, use parens";this.$=p.BinaryOperatorNode("^",p.FunctionNode(a[h-2],[a[h]]),p.ConstantNode(2));break;case 83:if("2"!=a[h-3])throw"Only sin^2 and sin^-1 are supported.  Otherwise, use parens";this.$=p.BinaryOperatorNode("^",p.FunctionNode(a[h-4],[a[h-1]]),p.ConstantNode(2));break;case 84:this.$=p.ConstantNode(Math.E);break;
case 85:this.$=p.ConstantNode(10);break;case 86:this.$=p.ConstantNode(Number(b));break;case 87:this.$=a[h];break;case 88:this.$=a[h-1];break;case 89:this.$=p.FunctionNode(p.IdentifierNode("log"),[a[h-1],a[h-3]]);break;case 90:if(!a[h].okForImplicitFunction())throw"Too complicated.  Use parens";this.$=p.FunctionNode(p.IdentifierNode("log"),[a[h],a[h-1]]);break;case 91:if("2"!=a[h-3])throw"Only log^2 is supported.  Use parens";this.$=p.BinaryOperatorNode("^",p.FunctionNode(p.IdentifierNode("log"),[a[h-
1],a[h-4]]),p.ConstantNode(2));break;case 92:if(!a[h].okForImplicitFunction())throw"Too complicated.  Use parens";if("2"!=a[h-1])throw"Only log^2 is supported.  Use parens";this.$=p.BinaryOperatorNode("^",p.FunctionNode(p.IdentifierNode("log"),[a[h],a[h-2]]),p.ConstantNode(2));break;case 93:this.$=p.FunctionNode(a[h-3],a[h-1]);break;case 94:this.$=a[h-2].concat([a[h]]);break;case 95:this.$=[a[h-2],a[h]];break;case 96:b=p.parseFunctionDeclaration(a[h-1]),this.$=p.FunctionDeclarationNode(b.identifier,
b.args,a[h]),this.$.setInputString(b.input_string)}},table:[{3:1,4:2,5:[1,11],6:3,7:4,8:5,9:6,10:7,11:8,12:9,14:[1,10],17:[1,14],18:13,19:16,20:[1,18],22:[1,19],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{1:[3]},{5:[1,45],13:[1,47],15:[1,46],16:48,25:[1,49],26:[1,50],27:[1,51],28:[1,52]},{5:[1,53]},{5:[1,54]},{5:[1,55]},
{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[2,40],13:[1,59],15:[2,40],17:[2,40],22:[1,60],25:[2,40],26:[2,40],27:[2,40],28:[2,40],29:[2,40],31:[2,40],33:[2,40],35:[2,40],37:[2,40],38:[2,40],39:[2,40],40:[2,40],46:[2,40],48:[2,40],49:[2,40],50:[2,40],52:[2,40],57:[2,40],58:[2,40],60:[2,40],67:[2,40],69:[2,40],70:[2,40],71:[2,40]},{4:62,5:[1,61],12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],
56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{1:[2,11]},{5:[2,22],13:[2,22],15:[2,22],17:[2,22],21:[2,22],22:[2,22],23:[2,22],25:[2,22],26:[2,22],27:[2,22],28:[2,22],29:[1,65],31:[1,66],33:[2,22],35:[2,22],37:[2,22],38:[2,22],39:[2,22],40:[2,22],41:[2,22],46:[2,22],47:[2,22],48:[2,22],49:[2,22],50:[2,22],52:[2,22],57:[2,22],58:[2,22],60:[2,22],62:[2,22],65:[2,22],67:[2,22],69:[2,22],70:[2,22],71:[2,22]},{5:[2,17],15:[1,67]},{5:[2,16],13:[2,16],15:[2,16],
17:[2,16],21:[2,16],22:[2,16],23:[2,16],25:[2,16],26:[2,16],27:[2,16],28:[2,16],29:[2,16],31:[2,16],33:[2,16],35:[2,16],37:[2,16],38:[2,16],39:[2,16],40:[2,16],41:[2,16],46:[2,16],47:[2,16],48:[2,16],49:[2,16],50:[2,16],52:[2,16],55:[2,16],57:[2,16],58:[2,16],60:[2,16],62:[2,16],65:[2,16],67:[2,16],69:[2,16],70:[2,16],71:[2,16]},{5:[2,32],12:63,13:[2,32],15:[2,32],17:[1,14],21:[2,32],22:[1,64],23:[2,32],25:[2,32],26:[2,32],27:[2,32],28:[2,32],29:[2,32],31:[2,32],32:68,33:[1,69],35:[1,70],37:[2,32],
38:[2,32],39:[2,32],40:[1,28],41:[2,32],42:24,43:25,44:26,45:27,46:[1,29],47:[2,32],48:[1,30],49:[1,31],50:[2,32],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,32],65:[2,32],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,18],15:[2,18]},{5:[2,36],13:[2,36],15:[2,36],17:[2,36],21:[2,36],22:[2,36],23:[2,36],25:[2,36],26:[2,36],27:[2,36],28:[2,36],29:[2,36],31:[2,36],33:[2,36],35:[2,36],36:71,37:[1,73],38:[1,74],39:[1,75],40:[2,36],41:[2,36],46:[2,36],47:[2,36],48:[2,36],
49:[2,36],50:[1,72],52:[2,36],57:[2,36],58:[2,36],60:[2,36],62:[2,36],65:[2,36],67:[2,36],69:[2,36],70:[2,36],71:[2,36]},{4:76,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:77,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,
31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,56],13:[2,56],15:[2,56],17:[2,56],21:[2,56],22:[2,56],23:[2,56],25:[2,56],26:[2,56],27:[2,56],28:[2,56],29:[2,56],31:[2,56],33:[2,56],35:[2,56],37:[2,56],38:[2,56],39:[2,56],40:[2,56],41:[2,56],46:[2,56],47:[2,56],48:[2,56],49:[2,56],50:[2,56],52:[2,56],57:[2,56],58:[2,56],60:[2,56],62:[2,56],65:[2,56],67:[2,56],69:[2,56],70:[2,56],71:[2,56]},{12:63,17:[1,14],22:[1,
64],31:[1,21],32:22,34:79,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,78],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,61],13:[2,61],15:[2,61],17:[2,61],21:[2,61],22:[2,61],23:[2,61],25:[2,61],26:[2,61],27:[2,61],28:[2,61],29:[2,61],31:[2,61],33:[2,61],35:[2,61],36:80,37:[1,73],38:[1,74],39:[1,75],40:[2,61],41:[2,61],46:[2,61],47:[2,61],48:[2,61],49:[2,61],50:[1,81],52:[2,61],57:[2,61],58:[2,61],
60:[2,61],62:[2,61],65:[2,61],67:[2,61],69:[2,61],70:[2,61],71:[2,61]},{5:[2,73],13:[2,73],15:[2,73],17:[2,73],21:[2,73],22:[2,73],23:[2,73],25:[2,73],26:[2,73],27:[2,73],28:[2,73],29:[2,73],31:[2,73],33:[2,73],35:[2,73],37:[2,73],38:[2,73],39:[2,73],40:[2,73],41:[2,73],46:[2,73],47:[2,73],48:[2,73],49:[2,73],50:[2,73],52:[2,73],57:[2,73],58:[2,73],60:[2,73],62:[2,73],65:[2,73],67:[2,73],69:[2,73],70:[2,73],71:[2,73]},{5:[2,41],13:[2,41],15:[2,41],17:[2,41],21:[2,41],22:[2,41],23:[2,41],25:[2,41],
26:[2,41],27:[2,41],28:[2,41],29:[2,41],31:[2,41],33:[2,41],35:[2,41],37:[2,41],38:[2,41],39:[2,41],40:[2,41],41:[2,41],46:[2,41],47:[2,41],48:[2,41],49:[2,41],50:[2,41],52:[2,41],57:[2,41],58:[2,41],60:[2,41],62:[2,41],65:[2,41],67:[2,41],69:[2,41],70:[2,41],71:[2,41]},{5:[2,42],13:[2,42],15:[2,42],17:[2,42],21:[2,42],22:[2,42],23:[2,42],25:[2,42],26:[2,42],27:[2,42],28:[2,42],29:[2,42],31:[2,42],33:[2,42],35:[2,42],37:[2,42],38:[2,42],39:[2,42],40:[2,42],41:[2,42],46:[2,42],47:[2,42],48:[2,42],
49:[2,42],50:[2,42],52:[2,42],57:[2,42],58:[2,42],60:[2,42],62:[2,42],65:[2,42],67:[2,42],69:[2,42],70:[2,42],71:[2,42]},{5:[2,43],13:[2,43],15:[2,43],17:[2,43],21:[2,43],22:[2,43],23:[2,43],25:[2,43],26:[2,43],27:[2,43],28:[2,43],29:[2,43],31:[2,43],33:[2,43],35:[2,43],37:[2,43],38:[2,43],39:[2,43],40:[2,43],41:[2,43],46:[2,43],47:[2,43],48:[2,43],49:[2,43],50:[2,43],52:[2,43],57:[2,43],58:[2,43],60:[2,43],62:[2,43],65:[2,43],67:[2,43],69:[2,43],70:[2,43],71:[2,43]},{5:[2,44],13:[2,44],15:[2,44],
17:[2,44],21:[2,44],22:[2,44],23:[2,44],25:[2,44],26:[2,44],27:[2,44],28:[2,44],29:[2,44],31:[2,44],33:[2,44],35:[2,44],37:[2,44],38:[2,44],39:[2,44],40:[2,44],41:[2,44],46:[2,44],47:[2,44],48:[2,44],49:[2,44],50:[2,44],52:[2,44],57:[2,44],58:[2,44],60:[2,44],62:[2,44],65:[2,44],67:[2,44],69:[2,44],70:[2,44],71:[2,44]},{4:82,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,
43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:83,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{40:[1,84]},{20:[1,86],40:[1,85]},{5:[2,53],13:[2,53],15:[2,53],17:[2,53],21:[2,53],22:[2,53],23:[2,53],25:[2,53],26:[2,53],27:[2,53],28:[2,53],29:[2,53],31:[2,53],33:[2,
53],35:[2,53],37:[2,53],38:[2,53],39:[2,53],40:[2,53],41:[2,53],46:[2,53],47:[2,53],48:[2,53],49:[2,53],50:[2,53],52:[2,53],57:[2,53],58:[2,53],60:[2,53],62:[2,53],65:[2,53],67:[2,53],69:[2,53],70:[2,53],71:[2,53]},{12:63,17:[1,14],22:[1,64],30:87,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,55],13:[2,55],15:[2,55],17:[2,55],
21:[2,55],22:[2,55],23:[2,55],25:[2,55],26:[2,55],27:[2,55],28:[2,55],29:[2,55],31:[2,55],33:[2,55],35:[2,55],37:[2,55],38:[2,55],39:[2,55],40:[2,55],41:[2,55],46:[2,55],47:[2,55],48:[2,55],49:[2,55],50:[2,55],52:[2,55],57:[2,55],58:[2,55],60:[2,55],62:[2,55],65:[2,55],67:[2,55],69:[2,55],70:[2,55],71:[2,55]},{12:63,17:[1,14],22:[1,88],30:89,31:[1,21],32:22,34:17,37:[1,91],39:[1,90],40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],
58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{12:63,17:[1,14],22:[1,92],30:93,31:[1,21],32:22,34:17,37:[1,94],40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{59:[1,95]},{4:101,11:100,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,
54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],61:96,62:[1,97],63:98,64:99,66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{17:[2,77],22:[2,77],31:[2,77],37:[2,77],39:[2,77],40:[2,77],46:[2,77],48:[2,77],49:[2,77],52:[2,77],55:[2,77],57:[2,77],58:[2,77],60:[2,77],67:[2,77],69:[2,77],70:[2,77],71:[2,77]},{17:[2,84],22:[2,84],31:[2,84],37:[2,84],40:[2,84],46:[2,84],48:[2,84],49:[2,84],52:[2,84],55:[2,84],57:[2,84],58:[2,84],60:[2,84],67:[2,84],69:[2,84],70:[2,84],71:[2,84]},{17:[2,85],22:[2,
85],31:[2,85],37:[2,85],40:[2,85],46:[2,85],48:[2,85],49:[2,85],52:[2,85],55:[2,85],57:[2,85],58:[2,85],59:[1,102],60:[2,85],67:[2,85],69:[2,85],70:[2,85],71:[2,85]},{17:[2,86],22:[2,86],31:[2,86],37:[2,86],40:[2,86],46:[2,86],48:[2,86],49:[2,86],52:[2,86],55:[2,86],57:[2,86],58:[2,86],60:[2,86],67:[2,86],69:[2,86],70:[2,86],71:[2,86]},{59:[2,62]},{59:[2,63]},{1:[2,1]},{4:103,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],
51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:104,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:106,12:105,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,
30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{17:[2,23],22:[2,23],31:[2,23],40:[2,23],46:[2,23],48:[2,23],49:[2,23],52:[2,23],55:[2,23],57:[2,23],58:[2,23],60:[2,23],67:[2,23],69:[2,23],70:[2,23],71:[2,23]},{17:[2,24],22:[2,24],31:[2,24],40:[2,24],46:[2,24],48:[2,24],49:[2,24],52:[2,24],55:[2,24],57:[2,24],58:[2,24],60:[2,24],67:[2,24],69:[2,24],70:[2,24],71:[2,24]},{17:[2,25],22:[2,25],31:[2,25],40:[2,
25],46:[2,25],48:[2,25],49:[2,25],52:[2,25],55:[2,25],57:[2,25],58:[2,25],60:[2,25],67:[2,25],69:[2,25],70:[2,25],71:[2,25]},{17:[2,26],22:[2,26],31:[2,26],40:[2,26],46:[2,26],48:[2,26],49:[2,26],52:[2,26],55:[2,26],57:[2,26],58:[2,26],60:[2,26],67:[2,26],69:[2,26],70:[2,26],71:[2,26]},{1:[2,2]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{2:[1,109],4:108,5:[1,107],12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,
52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:111,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42],72:110},{1:[2,9]},{5:[2,96]},{5:[2,40],13:[2,40],15:[2,40],17:[2,40],21:[2,40],22:[1,60],23:[2,40],25:[2,40],26:[2,40],27:[2,
40],28:[2,40],29:[2,40],31:[2,40],33:[2,40],35:[2,40],37:[2,40],38:[2,40],39:[2,40],40:[2,40],41:[2,40],46:[2,40],47:[2,40],48:[2,40],49:[2,40],50:[2,40],52:[2,40],57:[2,40],58:[2,40],60:[2,40],62:[2,40],65:[2,40],67:[2,40],69:[2,40],70:[2,40],71:[2,40]},{4:112,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],
71:[1,42]},{12:63,17:[1,14],22:[1,64],30:113,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{12:63,17:[1,14],22:[1,64],30:114,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},
{19:115,20:[1,18],22:[1,116]},{5:[2,33],13:[2,33],15:[2,33],17:[2,33],21:[2,33],22:[2,33],23:[2,33],25:[2,33],26:[2,33],27:[2,33],28:[2,33],29:[2,33],31:[2,33],33:[2,33],35:[2,33],36:80,37:[1,73],38:[1,74],39:[1,75],40:[2,33],41:[2,33],46:[2,33],47:[2,33],48:[2,33],49:[2,33],50:[1,81],52:[2,33],57:[2,33],58:[2,33],60:[2,33],62:[2,33],65:[2,33],67:[2,33],69:[2,33],70:[2,33],71:[2,33]},{12:63,17:[1,14],22:[1,64],31:[1,21],32:22,34:117,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],
51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{12:63,17:[1,14],22:[1,64],31:[1,21],32:22,34:118,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,58],13:[2,58],15:[2,58],17:[2,58],21:[2,58],22:[2,58],23:[2,58],25:[2,58],26:[2,58],27:[2,58],28:[2,58],29:[2,58],31:[2,58],33:[2,
58],35:[2,58],37:[2,58],38:[2,58],39:[2,58],40:[2,58],41:[2,58],46:[2,58],47:[2,58],48:[2,58],49:[2,58],50:[2,58],52:[2,58],57:[2,58],58:[2,58],60:[2,58],62:[2,58],65:[2,58],67:[2,58],69:[2,58],70:[2,58],71:[2,58]},{5:[2,59],13:[2,59],15:[2,59],17:[2,59],21:[2,59],22:[2,59],23:[2,59],25:[2,59],26:[2,59],27:[2,59],28:[2,59],29:[2,59],31:[2,59],33:[2,59],35:[2,59],37:[2,59],38:[2,59],39:[2,59],40:[2,59],41:[2,59],46:[2,59],47:[2,59],48:[2,59],49:[2,59],50:[2,59],52:[2,59],57:[2,59],58:[2,59],60:[2,
59],62:[2,59],65:[2,59],67:[2,59],69:[2,59],70:[2,59],71:[2,59]},{5:[2,37],13:[2,37],15:[2,37],17:[2,37],21:[2,37],22:[2,37],23:[2,37],25:[2,37],26:[2,37],27:[2,37],28:[2,37],29:[2,37],31:[2,37],33:[2,37],35:[2,37],37:[2,37],38:[2,37],39:[2,37],40:[2,37],41:[2,37],46:[2,37],47:[2,37],48:[2,37],49:[2,37],50:[2,37],52:[2,37],55:[2,37],57:[2,37],58:[2,37],60:[2,37],62:[2,37],65:[2,37],67:[2,37],69:[2,37],70:[2,37],71:[2,37]},{5:[2,38],13:[2,38],15:[2,38],17:[2,38],21:[2,38],22:[2,38],23:[2,38],25:[2,
38],26:[2,38],27:[2,38],28:[2,38],29:[2,38],31:[2,38],33:[2,38],35:[2,38],37:[2,38],38:[2,38],39:[2,38],40:[2,38],41:[2,38],46:[2,38],47:[2,38],48:[2,38],49:[2,38],50:[2,38],52:[2,38],55:[2,38],57:[2,38],58:[2,38],60:[2,38],62:[2,38],65:[2,38],67:[2,38],69:[2,38],70:[2,38],71:[2,38]},{40:[1,119]},{15:[1,120]},{15:[1,121],23:[1,122]},{5:[2,74],13:[2,74],15:[2,74],17:[2,74],21:[2,74],22:[2,74],23:[2,74],25:[2,74],26:[2,74],27:[2,74],28:[2,74],29:[2,74],31:[2,74],33:[2,74],35:[2,74],36:123,37:[1,73],
38:[1,74],39:[1,75],40:[2,74],41:[2,74],46:[2,74],47:[2,74],48:[2,74],49:[2,74],50:[2,74],52:[2,74],57:[2,74],58:[2,74],60:[2,74],62:[2,74],65:[2,74],67:[2,74],69:[2,74],70:[2,74],71:[2,74]},{5:[2,60],13:[2,60],15:[2,60],17:[2,60],21:[2,60],22:[2,60],23:[2,60],25:[2,60],26:[2,60],27:[2,60],28:[2,60],29:[2,60],31:[2,60],33:[2,60],35:[2,60],36:71,37:[1,73],38:[1,74],39:[1,75],40:[2,60],41:[2,60],46:[2,60],47:[2,60],48:[2,60],49:[2,60],50:[1,72],52:[2,60],57:[2,60],58:[2,60],60:[2,60],62:[2,60],65:[2,
60],67:[2,60],69:[2,60],70:[2,60],71:[2,60]},{5:[2,48],13:[2,48],15:[2,48],17:[2,48],21:[2,48],22:[2,48],23:[2,48],25:[2,48],26:[2,48],27:[2,48],28:[2,48],29:[2,48],31:[2,48],33:[2,48],35:[2,48],37:[2,48],38:[2,48],39:[2,48],40:[2,48],41:[2,48],46:[2,48],47:[2,48],48:[2,48],49:[2,48],50:[2,48],52:[2,48],57:[2,48],58:[2,48],60:[2,48],62:[2,48],65:[2,48],67:[2,48],69:[2,48],70:[2,48],71:[2,48]},{5:[2,52],13:[2,52],15:[2,52],17:[2,52],21:[2,52],22:[2,52],23:[2,52],25:[2,52],26:[2,52],27:[2,52],28:[2,
52],29:[2,52],31:[2,52],33:[2,52],35:[2,52],37:[2,52],38:[2,52],39:[2,52],40:[2,52],41:[2,52],46:[2,52],47:[2,52],48:[2,52],49:[2,52],50:[2,52],52:[2,52],57:[2,52],58:[2,52],60:[2,52],62:[2,52],65:[2,52],67:[2,52],69:[2,52],70:[2,52],71:[2,52]},{41:[1,124]},{47:[1,125]},{4:126,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,
40],70:[1,41],71:[1,42]},{4:127,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:128,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],
68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,54],12:63,13:[2,54],15:[2,54],17:[1,14],21:[2,54],22:[1,64],23:[2,54],25:[2,54],26:[2,54],27:[2,54],28:[2,54],29:[2,54],31:[2,54],32:68,33:[1,69],35:[1,70],37:[2,54],38:[2,54],39:[2,54],40:[1,28],41:[2,54],42:24,43:25,44:26,45:27,46:[1,29],47:[2,54],48:[1,30],49:[1,31],50:[2,54],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,54],65:[2,54],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:129,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,
21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,79],12:63,13:[2,79],15:[2,79],17:[1,14],21:[2,79],22:[1,64],23:[2,79],25:[2,79],26:[2,79],27:[2,79],28:[2,79],29:[2,79],31:[2,79],32:68,33:[1,69],35:[1,70],37:[2,79],38:[2,79],39:[2,79],40:[1,28],41:[2,79],42:24,43:25,44:26,45:27,46:[1,29],47:[2,79],48:[1,30],49:[1,31],50:[2,79],51:32,52:[1,
33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,79],65:[2,79],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{40:[1,130]},{12:63,17:[1,14],22:[1,132],30:131,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:133,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],
49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,90],12:63,13:[2,90],15:[2,90],17:[1,14],21:[2,90],22:[1,64],23:[2,90],25:[2,90],26:[2,90],27:[2,90],28:[2,90],29:[2,90],31:[2,90],32:68,33:[1,69],35:[1,70],37:[2,90],38:[2,90],39:[2,90],40:[1,28],41:[2,90],42:24,43:25,44:26,45:27,46:[1,29],47:[2,90],48:[1,30],49:[1,31],50:[2,90],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,90],65:[2,90],
66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{12:63,17:[1,14],22:[1,134],30:135,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{40:[1,136]},{62:[1,137]},{5:[2,66],13:[2,66],15:[2,66],17:[2,66],21:[2,66],22:[2,66],23:[2,66],25:[2,66],26:[2,66],27:[2,66],28:[2,66],29:[2,66],31:[2,66],33:[2,66],35:[2,66],37:[2,66],38:[2,66],39:[2,
66],40:[2,66],41:[2,66],46:[2,66],47:[2,66],48:[2,66],49:[2,66],50:[2,66],52:[2,66],57:[2,66],58:[2,66],60:[2,66],62:[2,66],65:[2,66],67:[2,66],69:[2,66],70:[2,66],71:[2,66]},{15:[1,138],62:[2,68]},{15:[2,70],62:[2,70]},{15:[2,72],62:[2,72],65:[1,139]},{13:[1,141],16:140,25:[1,49],26:[1,50],27:[1,51],28:[1,52]},{12:142,17:[1,14],40:[1,143]},{5:[1,144]},{5:[2,14]},{5:[2,40],16:145,17:[2,40],22:[1,60],25:[1,49],26:[1,50],27:[1,51],28:[1,52],29:[2,40],31:[2,40],33:[2,40],35:[2,40],37:[2,40],38:[2,40],
39:[2,40],40:[2,40],46:[2,40],48:[2,40],49:[2,40],50:[2,40],52:[2,40],57:[2,40],58:[2,40],60:[2,40],67:[2,40],69:[2,40],70:[2,40],71:[2,40]},{5:[2,27],15:[2,27],16:146,25:[1,49],26:[1,50],27:[1,51],28:[1,52],62:[2,27],65:[2,27]},{1:[2,8]},{5:[2,12]},{5:[2,13]},{15:[1,148],23:[1,147]},{15:[1,150],23:[1,149]},{23:[1,122]},{5:[2,30],12:63,13:[2,30],15:[2,30],17:[1,14],21:[2,30],22:[1,64],23:[2,30],25:[2,30],26:[2,30],27:[2,30],28:[2,30],29:[2,30],31:[2,30],32:68,33:[1,69],35:[1,70],37:[2,30],38:[2,30],
39:[2,30],40:[1,28],41:[2,30],42:24,43:25,44:26,45:27,46:[1,29],47:[2,30],48:[1,30],49:[1,31],50:[2,30],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,30],65:[2,30],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,31],12:63,13:[2,31],15:[2,31],17:[1,14],21:[2,31],22:[1,64],23:[2,31],25:[2,31],26:[2,31],27:[2,31],28:[2,31],29:[2,31],31:[2,31],32:68,33:[1,69],35:[1,70],37:[2,31],38:[2,31],39:[2,31],40:[1,28],41:[2,31],42:24,43:25,44:26,45:27,46:[1,29],47:[2,31],48:[1,30],
49:[1,31],50:[2,31],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,31],65:[2,31],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,19],15:[2,19]},{4:151,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,34],13:[2,34],15:[2,34],17:[2,34],21:[2,34],22:[2,34],23:[2,34],25:[2,
34],26:[2,34],27:[2,34],28:[2,34],29:[2,34],31:[2,34],33:[2,34],35:[2,34],36:71,37:[1,73],38:[1,74],39:[1,75],40:[2,34],41:[2,34],46:[2,34],47:[2,34],48:[2,34],49:[2,34],50:[1,72],52:[2,34],57:[2,34],58:[2,34],60:[2,34],62:[2,34],65:[2,34],67:[2,34],69:[2,34],70:[2,34],71:[2,34]},{5:[2,35],13:[2,35],15:[2,35],17:[2,35],21:[2,35],22:[2,35],23:[2,35],25:[2,35],26:[2,35],27:[2,35],28:[2,35],29:[2,35],31:[2,35],33:[2,35],35:[2,35],36:71,37:[1,73],38:[1,74],39:[1,75],40:[2,35],41:[2,35],46:[2,35],47:[2,
35],48:[2,35],49:[2,35],50:[1,72],52:[2,35],57:[2,35],58:[2,35],60:[2,35],62:[2,35],65:[2,35],67:[2,35],69:[2,35],70:[2,35],71:[2,35]},{4:152,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:153,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],
48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:154,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,45],13:[2,45],15:[2,45],17:[2,45],21:[2,45],22:[2,45],23:[2,45],25:[2,45],26:[2,45],27:[2,
45],28:[2,45],29:[2,45],31:[2,45],33:[2,45],35:[2,45],37:[2,45],38:[2,45],39:[2,45],40:[2,45],41:[2,45],46:[2,45],47:[2,45],48:[2,45],49:[2,45],50:[2,45],52:[2,45],57:[2,45],58:[2,45],60:[2,45],62:[2,45],65:[2,45],67:[2,45],69:[2,45],70:[2,45],71:[2,45]},{5:[2,57],13:[2,57],15:[2,57],17:[2,57],21:[2,57],22:[2,57],23:[2,57],25:[2,57],26:[2,57],27:[2,57],28:[2,57],29:[2,57],31:[2,57],33:[2,57],35:[2,57],37:[2,57],38:[2,57],39:[2,57],40:[2,57],41:[2,57],46:[2,57],47:[2,57],48:[2,57],49:[2,57],50:[2,
57],52:[2,57],57:[2,57],58:[2,57],60:[2,57],62:[2,57],65:[2,57],67:[2,57],69:[2,57],70:[2,57],71:[2,57]},{5:[2,46],13:[2,46],15:[2,46],17:[2,46],21:[2,46],22:[2,46],23:[2,46],25:[2,46],26:[2,46],27:[2,46],28:[2,46],29:[2,46],31:[2,46],33:[2,46],35:[2,46],37:[2,46],38:[2,46],39:[2,46],40:[2,46],41:[2,46],46:[2,46],47:[2,46],48:[2,46],49:[2,46],50:[2,46],52:[2,46],57:[2,46],58:[2,46],60:[2,46],62:[2,46],65:[2,46],67:[2,46],69:[2,46],70:[2,46],71:[2,46]},{5:[2,47],13:[2,47],15:[2,47],17:[2,47],21:[2,
47],22:[2,47],23:[2,47],25:[2,47],26:[2,47],27:[2,47],28:[2,47],29:[2,47],31:[2,47],33:[2,47],35:[2,47],37:[2,47],38:[2,47],39:[2,47],40:[2,47],41:[2,47],46:[2,47],47:[2,47],48:[2,47],49:[2,47],50:[2,47],52:[2,47],57:[2,47],58:[2,47],60:[2,47],62:[2,47],65:[2,47],67:[2,47],69:[2,47],70:[2,47],71:[2,47]},{41:[1,155]},{41:[1,156]},{21:[1,157]},{23:[1,158]},{31:[1,159]},{5:[2,82],12:63,13:[2,82],15:[2,82],17:[1,14],21:[2,82],22:[1,64],23:[2,82],25:[2,82],26:[2,82],27:[2,82],28:[2,82],29:[2,82],31:[2,
82],32:68,33:[1,69],35:[1,70],37:[2,82],38:[2,82],39:[2,82],40:[1,28],41:[2,82],42:24,43:25,44:26,45:27,46:[1,29],47:[2,82],48:[1,30],49:[1,31],50:[2,82],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,82],65:[2,82],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:160,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,
39],68:36,69:[1,40],70:[1,41],71:[1,42]},{23:[1,161]},{4:162,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,92],12:63,13:[2,92],15:[2,92],17:[1,14],21:[2,92],22:[1,64],23:[2,92],25:[2,92],26:[2,92],27:[2,92],28:[2,92],29:[2,92],31:[2,92],32:68,33:[1,69],35:[1,70],37:[2,92],38:[2,92],39:[2,92],
40:[1,28],41:[2,92],42:24,43:25,44:26,45:27,46:[1,29],47:[2,92],48:[1,30],49:[1,31],50:[2,92],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,92],65:[2,92],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{12:163,17:[1,14]},{5:[2,65],13:[2,65],15:[2,65],17:[2,65],21:[2,65],22:[2,65],23:[2,65],25:[2,65],26:[2,65],27:[2,65],28:[2,65],29:[2,65],31:[2,65],33:[2,65],35:[2,65],37:[2,65],38:[2,65],39:[2,65],40:[2,65],41:[2,65],46:[2,65],47:[2,65],48:[2,65],49:[2,65],50:[2,65],52:[2,65],
57:[2,65],58:[2,65],60:[2,65],62:[2,65],65:[2,65],67:[2,65],69:[2,65],70:[2,65],71:[2,65]},{4:164,11:100,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],64:165,66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:166,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,
33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:106,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:167,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],
51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{17:[2,87],22:[2,87],31:[2,87],37:[2,87],40:[2,87],46:[2,87],48:[2,87],49:[2,87],52:[2,87],55:[2,87],57:[2,87],58:[2,87],60:[2,87],67:[2,87],69:[2,87],70:[2,87],71:[2,87]},{4:168,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],
66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{1:[2,10]},{4:169,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:170,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,
43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,93],13:[2,93],15:[2,93],17:[2,93],21:[2,93],22:[2,93],23:[2,93],25:[2,93],26:[2,93],27:[2,93],28:[2,93],29:[2,93],31:[2,93],33:[2,93],35:[2,93],37:[2,93],38:[2,93],39:[2,93],40:[2,93],41:[2,93],46:[2,93],47:[2,93],48:[2,93],49:[2,93],50:[2,93],52:[2,93],57:[2,93],58:[2,93],60:[2,93],62:[2,93],65:[2,93],67:[2,93],69:[2,93],70:[2,93],71:[2,93]},{4:171,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,
28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,76],13:[2,76],15:[2,76],17:[2,76],21:[2,76],22:[2,76],23:[2,76],25:[2,76],26:[2,76],27:[2,76],28:[2,76],29:[2,76],31:[2,76],33:[2,76],35:[2,76],36:172,37:[1,73],38:[1,74],39:[1,75],40:[2,76],41:[2,76],46:[2,76],47:[2,76],48:[2,76],49:[2,76],50:[2,76],52:[2,76],57:[2,76],58:[2,76],60:[2,76],62:[2,76],65:[2,76],
67:[2,76],69:[2,76],70:[2,76],71:[2,76]},{4:173,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{15:[1,121]},{41:[1,174]},{21:[1,175]},{23:[1,176]},{40:[1,177]},{5:[2,50],13:[2,50],15:[2,50],17:[2,50],21:[2,50],22:[2,50],23:[2,50],25:[2,50],26:[2,50],27:[2,50],28:[2,50],29:[2,50],31:[2,50],33:[2,50],
35:[2,50],37:[2,50],38:[2,50],39:[2,50],40:[2,50],41:[2,50],46:[2,50],47:[2,50],48:[2,50],49:[2,50],50:[2,50],52:[2,50],57:[2,50],58:[2,50],60:[2,50],62:[2,50],65:[2,50],67:[2,50],69:[2,50],70:[2,50],71:[2,50]},{40:[1,178]},{5:[2,78],13:[2,78],15:[2,78],17:[2,78],21:[2,78],22:[2,78],23:[2,78],25:[2,78],26:[2,78],27:[2,78],28:[2,78],29:[2,78],31:[2,78],33:[2,78],35:[2,78],37:[2,78],38:[2,78],39:[2,78],40:[2,78],41:[2,78],46:[2,78],47:[2,78],48:[2,78],49:[2,78],50:[2,78],52:[2,78],57:[2,78],58:[2,78],
60:[2,78],62:[2,78],65:[2,78],67:[2,78],69:[2,78],70:[2,78],71:[2,78]},{31:[1,180],54:179,55:[1,23]},{23:[1,181]},{5:[2,89],13:[2,89],15:[2,89],17:[2,89],21:[2,89],22:[2,89],23:[2,89],25:[2,89],26:[2,89],27:[2,89],28:[2,89],29:[2,89],31:[2,89],33:[2,89],35:[2,89],37:[2,89],38:[2,89],39:[2,89],40:[2,89],41:[2,89],46:[2,89],47:[2,89],48:[2,89],49:[2,89],50:[2,89],52:[2,89],57:[2,89],58:[2,89],60:[2,89],62:[2,89],65:[2,89],67:[2,89],69:[2,89],70:[2,89],71:[2,89]},{23:[1,182]},{13:[1,183]},{13:[1,141],
16:140,25:[1,49],26:[1,50],27:[1,51],28:[1,52],62:[2,67]},{15:[2,69],62:[2,69]},{15:[2,71],62:[2,71]},{15:[2,28],62:[2,28],65:[2,28]},{41:[1,184]},{5:[2,15]},{5:[2,29],15:[2,29],62:[2,29],65:[2,29]},{15:[2,94],23:[2,94]},{5:[2,75],13:[2,75],15:[2,75],17:[2,75],21:[2,75],22:[2,75],23:[2,75],25:[2,75],26:[2,75],27:[2,75],28:[2,75],29:[2,75],31:[2,75],33:[2,75],35:[2,75],37:[2,75],38:[2,75],39:[2,75],40:[2,75],41:[2,75],46:[2,75],47:[2,75],48:[2,75],49:[2,75],50:[2,75],52:[2,75],57:[2,75],58:[2,75],
60:[2,75],62:[2,75],65:[2,75],67:[2,75],69:[2,75],70:[2,75],71:[2,75]},{15:[2,95],23:[2,95]},{5:[2,39],13:[2,39],15:[2,39],17:[2,39],21:[2,39],22:[2,39],23:[2,39],25:[2,39],26:[2,39],27:[2,39],28:[2,39],29:[2,39],31:[2,39],33:[2,39],35:[2,39],37:[2,39],38:[2,39],39:[2,39],40:[2,39],41:[2,39],46:[2,39],47:[2,39],48:[2,39],49:[2,39],50:[2,39],52:[2,39],55:[2,39],57:[2,39],58:[2,39],60:[2,39],62:[2,39],65:[2,39],67:[2,39],69:[2,39],70:[2,39],71:[2,39]},{5:[2,20],15:[2,20]},{5:[2,21],15:[2,21]},{4:185,
12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:186,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,
42]},{41:[1,187]},{55:[1,188]},{5:[2,83],13:[2,83],15:[2,83],17:[2,83],21:[2,83],22:[2,83],23:[2,83],25:[2,83],26:[2,83],27:[2,83],28:[2,83],29:[2,83],31:[2,83],33:[2,83],35:[2,83],37:[2,83],38:[2,83],39:[2,83],40:[2,83],41:[2,83],46:[2,83],47:[2,83],48:[2,83],49:[2,83],50:[2,83],52:[2,83],57:[2,83],58:[2,83],60:[2,83],62:[2,83],65:[2,83],67:[2,83],69:[2,83],70:[2,83],71:[2,83]},{5:[2,91],13:[2,91],15:[2,91],17:[2,91],21:[2,91],22:[2,91],23:[2,91],25:[2,91],26:[2,91],27:[2,91],28:[2,91],29:[2,91],
31:[2,91],33:[2,91],35:[2,91],37:[2,91],38:[2,91],39:[2,91],40:[2,91],41:[2,91],46:[2,91],47:[2,91],48:[2,91],49:[2,91],50:[2,91],52:[2,91],57:[2,91],58:[2,91],60:[2,91],62:[2,91],65:[2,91],67:[2,91],69:[2,91],70:[2,91],71:[2,91]},{4:189,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{17:[2,88],22:[2,
88],31:[2,88],37:[2,88],40:[2,88],46:[2,88],48:[2,88],49:[2,88],52:[2,88],55:[2,88],57:[2,88],58:[2,88],60:[2,88],67:[2,88],69:[2,88],70:[2,88],71:[2,88]},{41:[1,190]},{41:[1,191]},{12:63,17:[1,14],22:[1,193],30:192,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{41:[2,74]},{41:[1,194]},{5:[2,49],13:[2,49],15:[2,49],17:[2,49],21:[2,49],
22:[2,49],23:[2,49],25:[2,49],26:[2,49],27:[2,49],28:[2,49],29:[2,49],31:[2,49],33:[2,49],35:[2,49],37:[2,49],38:[2,49],39:[2,49],40:[2,49],41:[2,49],46:[2,49],47:[2,49],48:[2,49],49:[2,49],50:[2,49],52:[2,49],57:[2,49],58:[2,49],60:[2,49],62:[2,49],65:[2,49],67:[2,49],69:[2,49],70:[2,49],71:[2,49]},{5:[2,51],13:[2,51],15:[2,51],17:[2,51],21:[2,51],22:[2,51],23:[2,51],25:[2,51],26:[2,51],27:[2,51],28:[2,51],29:[2,51],31:[2,51],33:[2,51],35:[2,51],37:[2,51],38:[2,51],39:[2,51],40:[2,51],41:[2,51],
46:[2,51],47:[2,51],48:[2,51],49:[2,51],50:[2,51],52:[2,51],57:[2,51],58:[2,51],60:[2,51],62:[2,51],65:[2,51],67:[2,51],69:[2,51],70:[2,51],71:[2,51]},{5:[2,80],12:63,13:[2,80],15:[2,80],17:[1,14],21:[2,80],22:[1,64],23:[2,80],25:[2,80],26:[2,80],27:[2,80],28:[2,80],29:[2,80],31:[2,80],32:68,33:[1,69],35:[1,70],37:[2,80],38:[2,80],39:[2,80],40:[1,28],41:[2,80],42:24,43:25,44:26,45:27,46:[1,29],47:[2,80],48:[1,30],49:[1,31],50:[2,80],51:32,52:[1,33],53:34,56:37,57:[1,43],58:[1,44],60:[1,38],62:[2,
80],65:[2,80],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{4:195,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{36:196,37:[1,73],38:[1,74],39:[1,75]},{23:[1,197]},{4:198,12:63,17:[1,14],22:[1,64],24:12,30:15,31:[1,21],32:22,34:17,40:[1,28],42:24,43:25,44:26,45:27,46:[1,29],48:[1,30],49:[1,
31],51:32,52:[1,33],53:34,54:20,55:[1,23],56:37,57:[1,43],58:[1,44],60:[1,38],66:35,67:[1,39],68:36,69:[1,40],70:[1,41],71:[1,42]},{5:[2,81],13:[2,81],15:[2,81],17:[2,81],21:[2,81],22:[2,81],23:[2,81],25:[2,81],26:[2,81],27:[2,81],28:[2,81],29:[2,81],31:[2,81],33:[2,81],35:[2,81],37:[2,81],38:[2,81],39:[2,81],40:[2,81],41:[2,81],46:[2,81],47:[2,81],48:[2,81],49:[2,81],50:[2,81],52:[2,81],57:[2,81],58:[2,81],60:[2,81],62:[2,81],65:[2,81],67:[2,81],69:[2,81],70:[2,81],71:[2,81]},{5:[2,64],13:[2,64],
15:[2,64],17:[2,64],21:[2,64],22:[2,64],23:[2,64],25:[2,64],26:[2,64],27:[2,64],28:[2,64],29:[2,64],31:[2,64],33:[2,64],35:[2,64],37:[2,64],38:[2,64],39:[2,64],40:[2,64],41:[2,64],46:[2,64],47:[2,64],48:[2,64],49:[2,64],50:[2,64],52:[2,64],57:[2,64],58:[2,64],60:[2,64],62:[2,64],65:[2,64],67:[2,64],69:[2,64],70:[2,64],71:[2,64]}],defaultActions:{11:[2,11],43:[2,62],44:[2,63],45:[2,1],53:[2,2],54:[2,3],55:[2,4],56:[2,5],57:[2,6],58:[2,7],61:[2,9],62:[2,96],104:[2,14],107:[2,8],108:[2,12],109:[2,13],
144:[2,10],169:[2,15],188:[2,74]},parseError:function(b,h){throw Error(b);},parse:function(b){function h(){var a;a=q.lexer.lex()||1;"number"!==typeof a&&(a=q.symbols_[a]||a);return a}var q=this,p=[0],s=[null],a=[],k=this.table,c="",g=0,f=0,e=0;this.lexer.setInput(b);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});b=this.lexer.yylloc;a.push(b);var d=this.lexer.options&&this.lexer.options.ranges;"function"===typeof this.yy.parseError&&
(this.parseError=this.yy.parseError);for(var l,m,x,r,n={},y,B;;){x=p[p.length-1];if(this.defaultActions[x])r=this.defaultActions[x];else{if(null===l||"undefined"==typeof l)l=h();r=k[x]&&k[x][l]}if("undefined"===typeof r||!r.length||!r[0]){r="";if(!e){m=[];for(y in k[x])this.terminals_[y]&&2<y&&m.push("'"+this.terminals_[y]+"'");r=this.lexer.showPosition?"Parse error on line "+(g+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+m.join(", ")+", got '"+(this.terminals_[l]||l)+"'":"Parse error on line "+
(g+1)+": Unexpected "+(1==l?"end of input":"'"+(this.terminals_[l]||l)+"'");this.parseError(r,{text:this.lexer.match,token:this.terminals_[l]||l,line:this.lexer.yylineno,loc:b,expected:m})}if(3==e){if(1==l)throw Error(r||"Parsing halted.");f=this.lexer.yyleng;c=this.lexer.yytext;g=this.lexer.yylineno;b=this.lexer.yylloc;l=h()}for(;!((2).toString()in k[x]);){if(0===x)throw Error(r||"Parsing halted.");p.length-=2;s.length-=1;a.length-=1;x=p[p.length-1]}m=2==l?null:l;l=2;x=p[p.length-1];r=k[x]&&k[x][2];
e=3}if(r[0]instanceof Array&&1<r.length)throw Error("Parse Error: multiple actions possible at state: "+x+", token: "+l);switch(r[0]){case 1:p.push(l);s.push(this.lexer.yytext);a.push(this.lexer.yylloc);p.push(r[1]);l=null;m?(l=m,m=null):(f=this.lexer.yyleng,c=this.lexer.yytext,g=this.lexer.yylineno,b=this.lexer.yylloc,0<e&&e--);break;case 2:B=this.productions_[r[1]][1];n.$=s[s.length-B];n._$={first_line:a[a.length-(B||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(B||1)].first_column,
last_column:a[a.length-1].last_column};d&&(n._$.range=[a[a.length-(B||1)].range[0],a[a.length-1].range[1]]);x=this.performAction.call(n,c,f,g,this.yy,r[1],s,a);if("undefined"!==typeof x)return x;B&&(p=p.slice(0,-2*B),s=s.slice(0,-1*B),a=a.slice(0,-1*B));p.push(this.productions_[r[1]][0]);s.push(n.$);a.push(n._$);x=k[p[p.length-2]][p[p.length-1]];p.push(x);break;case 3:return!0}}return!0}},h=function(){return{EOF:1,parseError:function(b,h){if(this.yy.parser)this.yy.parser.parseError(b,h);else throw Error(b);
},setInput:function(b){this._input=b;this._more=this._less=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var b=this._input[0];this.yytext+=b;this.yyleng++;this.offset++;this.match+=b;this.matched+=b;b.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;
this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return b},unput:function(b){var h=b.length,q=b.split(/(?:\r\n?|\n)/g);this._input=b+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-h-1);this.offset-=h;b=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);q.length-1&&(this.yylineno-=q.length-1);var p=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,
last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:q?(q.length===b.length?this.yylloc.first_column:0)+b[b.length-q.length].length-q[0].length:this.yylloc.first_column-h};this.options.ranges&&(this.yylloc.range=[p[0],p[0]+this.yyleng-h]);return this},more:function(){this._more=!0;return this},less:function(b){this.unput(this.match.slice(b))},pastInput:function(){var b=this.matched.substr(0,this.matched.length-this.match.length);return(20<b.length?"...":"")+b.substr(-20).replace(/\n/g,
"")},upcomingInput:function(){var b=this.match;20>b.length&&(b+=this._input.substr(0,20-b.length));return(b.substr(0,20)+(20<b.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var b=this.pastInput(),h=Array(b.length+1).join("-");return b+this.upcomingInput()+"\n"+h+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var b,h,q;this._more||(this.match=this.yytext="");for(var p=this._currentRules(),s=0;s<p.length&&(!(h=this._input.match(this.rules[p[s]]))||b&&!(h[0].length>
b[0].length)||(b=h,q=s,this.options.flex));s++);if(b){if(h=b[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=h.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:h?h[h.length-1].length-h[h.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length};this.yytext+=b[0];this.match+=b[0];this.matches=b;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._more=
!1;this._input=this._input.slice(b[0].length);this.matched+=b[0];b=this.performAction.call(this,this.yy,this,p[q],this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(b)return b}else return""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var b=this.next();return"undefined"!==typeof b?b:this.lex()},begin:function(b){this.conditionStack.push(b)},
popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(b){this.begin(b)},options:{},performAction:function(b,h,q,p){switch(q){case 1:return 40;case 2:return 41;case 3:return"MATH_SHIFT";case 4:return h.yytext=this.matches[this.matches.length-1],37;case 5:return h.yytext=this.matches[this.matches.length-
1],38;case 6:return 39;case 7:return 55;case 8:return 33;case 9:return 35;case 10:return h.yytext=this.matches[3],52;case 11:return h.yytext=this.matches[this.matches.length-1],71;case 12:return 69;case 13:return 70;case 14:return 48;case 15:return 49;case 16:return 57;case 17:return 58;case 18:return 46;case 19:return 47;case 20:return 31;case 21:return 29;case 22:return 13;case 23:return 59;case 24:return 50;case 25:return 5;case 26:return 22;case 27:return 23;case 28:return 20;case 29:return 21;
case 30:return 60;case 31:return 62;case 32:return 65;case 33:return 27;case 34:return 28;case 35:return 26;case 36:return 25;case 37:return 15;case 38:return 14;case 39:return 67;case 40:return h.yytext="\\sign",17;case 41:return h.yytext="\\gcd",17;case 42:return h.yytext="\\lcm",17;case 43:return 17;case 45:return"UNRECOGNIZED"}},rules:[/^(?:(\\space|\\:|\s)+)/,/^(?:\{)/,/^(?:\})/,/^(?:\$)/,/^(?:\^([0-9]))/,/^(?:\^([a-zA-Z]))/,/^(?:\^)/,/^(?:[0-9]+(\.[0-9]+)?|(\.[0-9]+))/,/^(?:\*|(\\cdot))/,/^(?:\/)/,
/^(?:(\\frac((?:\s|\\space|\\:)*)\{d\}\{d(((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?))\}))/,/^(?:(\\log)((?:\s|\\space|\\:)*)*_([0-9]))/,/^(?:(\\ln))/,/^(?:(\\log))/,/^(?:(\\frac))/,/^(?:(\\sqrt))/,/^(?:(\\sum))/,/^(?:(\\prod))/,/^(?:\\left\|)/,/^(?:\\right\|)/,/^(?:-)/,/^(?:\+)/,/^(?:=)/,/^(?:[_])/,/^(?:!)/,/^(?:$)/,/^(?:(\()|\\left\()/,/^(?:(\))|\\right\))/,/^(?:(\[)|\\left\[)/,/^(?:(\])|\\right\])/,/^(?:(\\\{)|\\left\\\{)/,/^(?:(\\\})|\\right\\\})/,/^(?::)/,/^(?:(\\ge|>=))/,/^(?:(\\le|<=))/,
/^(?:(\\gt|>))/,/^(?:(\\lt|<))/,/^(?:,)/,/^(?:(###)(((?:\s|\\space|\\:)*)((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)((?:\s|\\space|\\:)*)(\\left\(|\()((?:\s|\\space|\\:)*)((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)(((?:\s|\\space|\\:)*),((?:\s|\\space|\\:)*)((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)((?:\s|\\space|\\:)*))*((?:\s|\\space|\\:)*)(\\right\)|\))((?:\s|\\space|\\:)*)=))/,/^(?:(\\(arc)?(sin|cos|tan|cot|sec|csc)h?))/,/^(?:(\\signum))/,/^(?:(\\(gcf|mcd)))/,
/^(?:(\\mcm))/,/^(?:((\\[a-zA-Z]+|[a-zA-Z])(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?))/,/^(?:(###))/,/^(?:.)/],conditions:{conditional:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0}}}}();b.lexer=h;return b});I("math/inverses",[],function(){var b=
{};"sin cos tan cot sec csc sinh cosh tanh coth sech csch".split(" ").forEach(function(h){b[h]="arc"+h;b["arc"+h]=h});return b});var ia;ia=function(b){this[b]=b};ia("EXPRESSION");ia("FUNCTION_DEFINITION");ia("VARIABLE_DEFINITION");ia("ORDERED_PAIR_LIST");ia("DOUBLE_INEQUALITY");ia("COMPARATOR");ia("CHAINED_COMPARATOR");ia("EQUATION");ia("CONSTANT");ia("IDENTIFIER");I("math/enums",function(){});I("math/parser_util","require pjs ./evalframe ./comparators parser ./inverses ./builtin ./enums".split(" "),
function(b){var h=b("pjs"),u=b("./evalframe"),w=b("./comparators"),q=b("parser"),p=b("./inverses"),s=b("./builtin");b("./enums");var a={};q.yy.inverses=p;b=a.ParseNode=h(function(a){a.init=function(){this._dependencies={};this._referencedSymbols={}};a.setInputString=function(a){this._inputString=a};a.getInputString=function(){return this._inputString};a.statementType=EXPRESSION;a.assigns=null;a.valid=!0;a.exportDefinitionsTo=function(a,c){};a.evaluateOnce=function(a){return"Unable to evaluate"};a.addDependency=
function(a,c){this.referenceSymbol(a);if(this._dependencies.hasOwnProperty(a)){var d=this._dependencies[a];if(c!==d&&(1!==c||0!==d))if(0===c&&1===d)this._dependencies[a]=c;else{if(0===c||0===d)throw"You're referencing '"+a+"' as both a function and a variable. Make up your mind!";throw"You're referencing '"+a+"' as both a "+d+"-variable and a "+c+"-variable function. Make up your mind!";}}else this._dependencies[a]=c};a.referenceSymbol=function(a){this._referencedSymbols[a]=!0};a.shadowVariable=function(a){this.referenceSymbol(a);
if(this._dependencies.hasOwnProperty(a))if(1>=this._dependencies[a])delete this._dependencies[a];else throw"Cannot redefine function "+a+" as a variable";};a.addDependencies=function(a){for(var c in a)a.hasOwnProperty(c)&&this.addDependency(c,a[c])};a.references=function(a){if(this._referencedSymbols[a])return!0};a.dependencies=function(){return this._dependencies};a.getEvalStrings=function(){throw"Cannot call getEvalStrings on base ParseNode";};a.polynomialOrder=function(){return Infinity};a.uid_counter=
[0];a.tmp=function(){return"tmp"+this.uid_counter[0]++};a.okForImplicitFunction=function(){return!1}});a.AssignmentNode=h(b,function(a,c){a.init=function(a,d){c.init.call(this);this.assigns=a;this.referenceSymbol(this.assigns.identifier);this.arity=0;this.expression=d;this.addDependencies(d.dependencies());this.lhs=a;this.rhs=d;this.dependencies().hasOwnProperty(this.assigns.identifier)&&(this.statementType=EQUATION)};a.statementType=VARIABLE_DEFINITION;a.evaluateOnce=function(a){return this.expression.evaluateOnce(a)};
a.exportDefinitionsTo=function(a,c){if(this.statementType!==EQUATION)try{var d=this.expression.evaluateOnce(a),e=g(d);a.setVariable(this.assigns.identifier,e);a.setEvalStrings(this.assigns.identifier,e.getEvalStrings(a))}catch(b){a.setVariable(this.assigns.identifier,this.expression),a.setEvalStrings(this.assigns.identifier,this.expression.getEvalStrings(a))}};a.getEvalStrings=function(a){return this.statementType===EQUATION?c.getEvalStrings(a):this.expression.getEvalStrings(a)};a.toString=function(){return this.assigns+
" = "+this.expression}});a.DoubleInequalityNode=h(b,function(a,c){a.init=function(d,e,b,f,g){c.init.call(this);this._inequalities=[];if(w.table[e].direction!=w.table[f].direction)throw"Double inequalities must both go the same way, e.g. 1 < y < 2";this.direction=w.table[e].direction;this.inclusive=w.table[e].inclusive&&w.table[f].inclusive;var l=w.get(this.inclusive,this.direction),m=r(l,d,g),l=k(m,d),m=k(m,g);this._inequalities.push(r(e,b,l));this._inequalities.push(r(f,b,m));this.addDependencies(b.dependencies());
this.addDependencies(d.dependencies());this.addDependencies(g.dependencies());a.statementType=DOUBLE_INEQUALITY};a.getInequality=function(a){return this._inequalities[a]}});a.EquationNode=h(b,function(a,c){a.init=function(a,d){c.init.call(this);this.lhs=a;this.rhs=d;this.addDependencies(a.dependencies());this.addDependencies(d.dependencies())};a.statementType=EQUATION;a.toString=function(){return this.lhs+" = "+this.rhs}});var k=a.PiecewiseNode=h(b,function(a,c){a.init=function(a,d,e){c.init.call(this);
this.condition=a;this.if_expr=d;this.frozen=!1;e&&(this.else_expr=e,this.addDependencies(this.else_expr._partial_dependencies()));this.addDependencies(a.dependencies());this.addDependencies(d.dependencies())};a._partial_dependencies=function(){return c.dependencies};a.append_else=function(a){if(this.frozen)throw"Programming Error - please treat me as immutable.  Cannot change PiecewiseNode after getting dependencies";this.else_expr?this.else_expr.append_else(a):this.else_expr=a;this.addDependencies(a.dependencies());
return this};a.evaluateOnce=function(a){this.frozen=!0;if(this.condition.evaluateOnce(a))return this.if_expr.evaluateOnce(a);if(this.else_expr)return this.else_expr.evaluateOnce(a)};a.getEvalStrings=function(a){var c=this.condition.getEvalStrings(a),d=this.if_expr.getEvalStrings(a);a=this.else_expr?this.else_expr.getEvalStrings(a):{statements:"",expression:"undefined"};var e=this.tmp();return{expression:e,statements:"var "+e+";"+c.statements+"if("+c.expression+") {"+d.statements+e+"="+d.expression+
";}else{"+a.statements+e+"="+a.expression+";}"}};a.polynomialOrder=function(a,c){return this.dependencies().hasOwnProperty(c)?Infinity:0};a.quadraticCoefficients=function(a,c){return[0,0,this.evaluateOnce(a)]};a.polynomialEvalStrings=function(a,c,d){a=this.getEvalStrings(a);return{statements:a.statements,expressions:[a.expression]}};a.toString=function(){if(!this.else_expr)return"\\left\\{"+this.condition+": "+this.if_expr+"\\right\\}";var a;a=this.else_expr.condition&&!0===this.else_expr.condition.value?
String(this.else_expr.if_expr):String(this.else_expr).replace(/^\\left\\\{(.*)\\right\\\}$/,"$1");return"\\left\\{"+this.condition+": "+this.if_expr+", "+a+"\\right\\}"}});a.OrderedPairNode=h(b,function(a,c){a.init=function(a,d){c.init.call(this);this.children=[a,d];this.addDependencies(a.dependencies());this.addDependencies(d.dependencies())};a.getEvalStrings=function(a){var c=this.children[0].getEvalStrings(a);a=this.children[1].getEvalStrings(a);return{statements:c.statements+a.statements,expression:"["+
c.expression+","+a.expression+"]"}};a.evaluateOnce=function(a){return[this.children[0].evaluateOnce(a),this.children[1].evaluateOnce(a)]};this.toString=function(){return"\\left("+this.children[0]+", "+this.children[1]+"\\right)"}});var c=a.ErrorNode=h(b,function(a,c){a.init=function(a){c.init.call(this);this.error_msg=a};a.valid=!1;this.evaluateOnce=function(a){return this.error_msg}}),g=a.ConstantNode=h(b,function(a,c){a.init=function(a){c.init.call(this);this.value=a};a.evaluateOnce=function(a){return this.value};
a.getEvalStrings=function(){return{expression:0>this.value?"("+String(this.value)+")":String(this.value),statements:""}};a.quadraticCoefficients=function(a,c){return[0,0,this.value]};a.polynomialEvalStrings=function(a,c,d){return{statements:"",expressions:["("+String(this.value)+")"]}};a.polynomialOrder=function(a,c){return 0};a.okForImplicitFunction=function(){return!0};a.toString=function(){return String(this.value)};a.statementType=CONSTANT}),f=a.NegationNode=h(b,function(a,c){a.init=function(a){c.init.call(this);
this.expression=a;this.addDependencies(this.expression.dependencies())};a.evaluateOnce=function(a){return-this.expression.evaluateOnce(a)};a.quadraticCoefficients=function(a,c){var d=this.expression.quadraticCoefficients(a,c);return[-d[0],-d[1],-d[2]]};a.polynomialEvalStrings=function(a,c,d){a=this.expression.polynomialEvalStrings(a,c,d);for(c=0;c<a.expressions.length;c++)a.expressions[c]="(-"+a.expressions[c]+")";return a};a.polynomialOrder=function(a,c){return this.expression.polynomialOrder(a,
c)};a.getEvalStrings=function(a){a=this.expression.getEvalStrings(a);return{expression:"(-"+a.expression+")",statements:a.statements}};a.toString=function(){return"-"+this.expression}}),e=a.IdentifierNode=h(b,function(a,c){a.init=function(a){c.init.call(this);a=a.replace("\\","");a=a.replace("{","");this.identifier=a=a.replace("}","");this.addDependency(this.identifier,0)};a.evaluateOnce=function(a){return a.getVariable(this.identifier).evaluateOnce(a)};a.getEvalStrings=function(a){return a.getEvalStrings(this.identifier)};
a.quadraticCoefficients=function(a,c){return c===this.identifier?[0,1,0]:a.getVariable(this.identifier).quadraticCoefficients(a,c)};a.polynomialEvalStrings=function(a,c,d){return c===this.identifier?{statements:"",expressions:["0","1"]}:d===this.identifier?{statements:"",expressions:[this.identifier]}:a.getVariable(this.identifier).polynomialEvalStrings(a,c,d)};a.polynomialOrder=function(a,c){return c===this.identifier?1:a.hasVariable(this.identifier)?a.getVariable(this.identifier).polynomialOrder(a,
c):0};a.okForImplicitFunction=function(){return!0};a.toString=function(){var a=this.identifier.match(/^([^_]+)(_(.*))?$/),c=a[1],a=a[3];1<c.length&&(c="\\"+c);return a?c+"_{"+a+"}":c};a.statementType=IDENTIFIER});a.ChainedComparatorNode=h(b,function(a,c){a.init=function(a,d){c.init.call(this);if(2!==a.length||3!==d.length)throw"Can't chain more than 2 comparators";this.comparators=a;this.args=d;for(var e=0;3>e;e++)this.addDependencies(d[e].dependencies());this.node1=r(this.comparators[0],this.args[0],
this.args[1]);this.node2=r(this.comparators[1],this.args[1],this.args[2])};a.evaluateOnce=function(a){return this.node1.evaluateOnce(a)&&this.node2.evaluateOnce(a)};a.getEvalStrings=function(a){var c=this.node1.getEvalStrings(a);a=this.node2.getEvalStrings(a);return{expression:"("+c.expression+"&&"+a.expression+")",statements:c.statements+a.statements}};a.toString=function(){return[this.args[0],this.comparators[0],this.args[1],this.comparators[1],this.args[2]].join(" ")};a.statementType=CHAINED_COMPARATOR});
var d={"+":"arg1+arg2","-":"arg1-arg2","*":"arg1*arg2","/":"arg1/arg2",">":"arg1>arg2","<":"arg1<arg2",">=":"arg1>=arg2","<=":"arg1<=arg2","===":"arg1===arg2","^":"this.pow(arg1, arg2)"},l={},m;for(m in d)d.hasOwnProperty(m)&&(p="^"===m?s.pow:new Function(["arg1","arg2"],"return "+d[m]),l[m]=p);var x=a.BinaryOperatorNode=h(b,function(a,c){a.init=function(a,d,e){c.init.call(this);this.args=[d,e];this.operator=a;this.evaluator=l[a];this.addDependencies(this.args[0].dependencies());this.addDependencies(this.args[1].dependencies())};
a.evaluateOnce=function(a){return this.evaluator(this.args[0].evaluateOnce(a),this.args[1].evaluateOnce(a))};a.getEvalStrings=function(a){var c=this.args[0].getEvalStrings(a);a=this.args[1].getEvalStrings(a);return{expression:"("+d[this.operator].replace("arg1",c.expression).replace("arg2",a.expression)+")",statements:c.statements+a.statements}};a.quadraticCoefficients=function(a,c){var d=this.args[0].quadraticCoefficients(a,c),e=this.args[1].quadraticCoefficients(a,c);switch(this.operator){case "+":return[d[0]+
e[0],d[1]+e[1],d[2]+e[2]];case "-":return[d[0]-e[0],d[1]-e[1],d[2]-e[2]];case "*":for(var b=[0,0,0,0,0],f=0;2>=f;f++)for(var g=0;2>=g;g++)b[f+g]+=d[f]*e[g];d=b.splice(0,2);if(0!==d[0]||0!==d[1])break;return b;case "/":if(0!==e[0]||0!==e[1])break;return[d[0]/e[2],d[1]/e[2],d[2]/e[2]];case "^":if(0!==e[0]||0!==e[1])break;if(0===d[0]&&0===d[1])return[0,0,this.evaluator(d[2],e[2])];if(1===e[2])return d;if(2===e[2]){if(0!==d[0])break;return[d[1]*d[1],2*d[1]*d[2],d[2]*d[2]]}}return[NaN,NaN,NaN]};a.polynomialEvalStrings=
function(a,c,d){var e=this.args[0].polynomialEvalStrings(a,c,d);c=this.args[1].polynomialEvalStrings(a,c,d);d=e.expressions.length-1;var b=c.expressions.length-1,f=e.statements+c.statements,g=[],l,k;switch(this.operator){case "+":case "-":for(a=0;a<=Math.min(d,b);a++)g[a]="("+e.expressions[a]+this.operator+c.expressions[a]+")";for(a=Math.min(d,b)+1;a<=Math.max(d,b);a++)"+"===this.operator&&(g[a]=d>b?e.expressions[a]:c.expressions[a]),"-"===this.operator&&(g[a]=d>b?e.expressions[a]:"(-"+c.expressions[a]+
")");return{statements:f,expressions:g};case "*":for(a=0;a<=d;a++)for(l=0;l<=b;l++)k="("+e.expressions[a]+"*"+c.expressions[l]+")",g[a+l]=void 0===g[a+l]?k:g[a+l]+("+"+k);for(a=0;a<g.length;a++)g[a]="("+g[a]+")";return{statements:f,expressions:g};case "/":if(1<=b)throw"can't solve for variable in denominator";for(a=0;a<=d;a++)g[a]="(("+e.expressions[a]+")/("+c.expressions[0]+"))";return{statements:f,expressions:g};case "^":if(1<=b)throw"can't solve for variable in exponent";if(0===d)return{statements:f,
expressions:["this.pow("+e.expressions[0]+","+c.expressions[0]+")"]};switch(this.args[1].evaluateOnce(a)){case 0:return{statements:"",expressions:["1"]};case 1:return c;case 2:for(a=0;a<=d;a++)for(l=0;l<=d;l++)k="("+e.expressions[a]+"*"+e.expressions[l]+")",g[a+l]=void 0===g[a+l]?k:g[a+l]+("+"+k);for(a=0;a<g.length;a++)g[a]="("+g[a]+")";return{statements:f,expressions:g}}}throw"Unable to compile polyomial representation of BinaryOperatorNode";};a.polynomialOrder=function(a,c){var d=this.args[0].polynomialOrder(a,
c),e=this.args[1].polynomialOrder(a,c);switch(this.operator){case "+":case "-":return Math.max(d,e);case "*":return d+e;case "/":if(0<e)break;return d;case "^":if(0===d&&0===e)return 0;try{var b=this.args[1].evaluateOnce(a);if(b!==Math.round(b))break;if(0>b)break;return b*d}catch(f){}}return Infinity};a.okForImplicitFunction=function(){return this.args[0].okForImplicitFunction()&&this.args[1].okForImplicitFunction()};a.toString=function(){if("^"===this.operator){var a=this.args[0],c=this.args[1],
d=a.toString(),e=c.toString();a instanceof x&&(d="("+d+")");c instanceof x&&(e="{"+e+"}");return d+"^"+e}if("/"===this.operator)return"\\frac{"+this.args[0]+"}{"+this.args[1]+"}";if("*"===this.operator){a=this.args[0];c=this.args[1];d=String(a);e=String(c);if(a instanceof x&&("+"===a.operator||"-"===a.operator)||a instanceof f)d="("+d+")";if(c instanceof x&&("+"===c.operator||"-"===c.operator)||c instanceof f)e="("+e+")";return d+"*"+e}return this.args[0]+" "+this.operator+" "+this.args[1]}}),r=a.ComparatorNode=
h(x,function(a,c){a.init=function(a,d,e){c.init.call(this,a,d,e)};a.polynomialOrder=function(a,c){var d=this.args[0].polynomialOrder(a,c),e=this.args[1].polynomialOrder(a,c);return Math.max(d,e)};a.quadraticCoefficients=function(a,c){return[NaN,NaN,NaN]};a.statementType=COMPARATOR}),n=a.FunctionNode=h(b,function(a,c){a.init=function(a,d){c.init.call(this);this.identifier=a;this.args=d;this.arity=this.args.length;this.addDependency(this.identifier.identifier,this.arity);for(var e=0;e<d.length;e++)this.addDependencies(d[e].dependencies())};
a.evaluateOnce=function(a){if(1<this.arity||a.hasFunction(this.identifier.identifier))return a.callFunction(this.identifier.identifier,this.args.map(function(c){return c.evaluateOnce(a)}));if(1===this.args.length&&a.hasVariable(this.identifier.identifier))return this.args[0].evaluateOnce(a)*a.getVariable(this.identifier.identifier).evaluateOnce(a)};a.getEvalStrings=function(a){if(1<this.arity||a.hasFunction(this.identifier.identifier)){var c=this.args.map(function(c){return c.getEvalStrings(a)}),
d=c.map(function(a){return a.expression}),c=c.map(function(a){return a.statements}).join("");return{expression:"this."+this.identifier.identifier+"("+d.join(",")+")",statements:c}}d=e(this.identifier.identifier);return x("*",d,this.args[0]).getEvalStrings(a)};a.quadraticCoefficients=function(a,c){if(1<this.arity||a.hasFunction(this.identifier.identifier)){var d=this.args.map(function(d){return d.polynomialOrder(a,c)});if(0===Math.max.apply(null,d))return[0,0,this.evaluateOnce(a)];d=a.getFunctionTree(this.identifier.identifier);
if(!d)throw"Can't solve equations with "+this.identifier.identifier;for(var b=u(a),f=0;f<d.arity;f++)b.setVariable(d.args[f].identifier,this.args[f]);return d.expression.quadraticCoefficients(b,c)}d=e(this.identifier.identifier);return x("*",d,this.args[0]).quadraticCoefficients(a,c)};a.polynomialEvalStrings=function(a,c,d){if(1<this.arity||a.hasFunction(this.identifier.identifier)){var b=this.args.map(function(e){return e.polynomialEvalStrings(a,c,d)}).map(function(a){return a.expressions.length-
1});if(0===Math.max.apply(null,b))return b=this.getEvalStrings(a),{statements:b.statements,expressions:[b.expression]}}else return b=e(this.identifier.identifier),x("*",b,this.args[0]).polynomialEvalStrings(a,c,d)};a.polynomialOrder=function(a,c){if(1<this.arity||a.hasFunction(this.identifier.identifier)){var d=this.args.map(function(d){return d.polynomialOrder(a,c)});return 0===Math.max.apply(null,d)?0:Infinity}d=e(this.identifier.identifier);return x("*",d,this.args[0]).polynomialOrder(a,c)};a.toString=
function(){return"sqrt"===this.identifier.identifier?this.identifier+"{"+this.args[0]+"}":this.identifier+"("+this.args.join(", ")+")"}});a.FunctionCallExponentNode=h(b,function(a,c){a.init=function(a,d,e){c.init.call(this);this.identifier=a;this.arg=d;this.exponent=e;this.as_function_node=x("^",n(this.identifier,[this.arg]),this.exponent);this.as_multiplication_node=x("*",this.identifier,x("^",this.arg,this.exponent));this.addDependency(this.identifier.identifier,1);this.addDependencies(this.arg.dependencies());
this.addDependencies(this.exponent.dependencies())};a.getEquivalentNode=function(a){return a.hasFunction(this.identifier.identifier)?this.as_function_node:this.as_multiplication_node};a.evaluateOnce=function(a){return this.getEquivalentNode(a).evaluateOnce(a)};a.getEvalStrings=function(a){return this.getEquivalentNode(a).getEvalStrings(a)};a.polynomialOrder=function(a,c){return this.getEquivalentNode(a).polynomialOrder(a,c)};a.quadraticCoefficients=function(a,c){return this.getEquivalentNode(a).quadraticCoefficients(a,
c)};a.polynomialEvalStrings=function(a,c,d){return this.getEquivalentNode(a).polynomialEvalStrings(a,c,d)};a.toString=function(){return this.as_function_node.toString()}});a.FunctionDeclarationNode=h(b,function(a,c){a.init=function(a,d,e){c.init.call(this);this.assigns=a;this.referenceSymbol(this.assigns.identifier);this.args=d;this.arity=this.args.length;this.expression=e;this.passed_variables=this.args.map(function(a){return a.identifier});a=this.expression.dependencies();for(var b in a)if(a.hasOwnProperty(b))if(d=
a[b],0<=this.passed_variables.indexOf(b)){if(1<d)throw"Cannot call argument "+b+" as a function";}else this.addDependency(b,d)};a.statementType=FUNCTION_DEFINITION;a.exportDefinitionsTo=function(a,c){var d=this.expression.getEvalStrings(a),d=d.statements+"return "+d.expression,e=this.args.map(function(a){return a.identifier}),b=c.compile(e,d);a.setFunction(this.assigns.identifier,this.args.length,b,this,e,d)};a.passedVariables=function(){return this.passed_variables};a.evaluateOnce=function(a){return"Defines function "+
this.assigns.identifier};a.getEvalStrings=function(a){return this.expression.getEvalStrings(a)};a.toString=function(){return this.assigns+"\\left("+this.args.join(", ")+"\\right) = "+this.expression}});var y=a.DerivativeNode=h(b,function(a,c){a.init=function(a,d){c.init.call(this);this.derivative_variable=a;this.expression=d;this.addDependencies(d.dependencies());this.addDependency(a.identifier,0)};a.evaluateOnce=function(a){var c=this.derivative_variable,d=this.expression.takeDerivative(a,c);if(!(d instanceof
y))return d.evaluateOnce(a);d=a.getVariable(c.identifier).evaluateOnce(a);a=u(a);a.setVariable(c.identifier,g(d-5E-5));var e=this.expression.evaluateOnce(a);a.setVariable(c.identifier,g(d+5E-5));return(this.expression.evaluateOnce(a)-e)/1E-4};a.getEvalStrings=function(a){var c=this.derivative_variable,d=this.expression.takeDerivative(a,c);if(!(d instanceof y))return d.getEvalStrings(a);var d=this.tmp(),e=this.tmp(),b=this.tmp(),f=this.tmp(),g=c.getEvalStrings(a),g=g.statements+"var "+e+"="+g.expression+
";";a=this.expression.getEvalStrings(a);return{expression:d,statements:g+(c.identifier+"="+e+"-(5e-5);"+a.statements+"var "+f+"="+a.expression+";")+(c.identifier+"="+e+"+(5e-5);"+a.statements+"var "+b+"="+a.expression+";")+("var "+d+"=("+b+"-"+f+")/(2*(5e-5));")+(c.identifier+"="+e+";")}};a.toString=function(){return"\\frac{d}{d"+this.derivative_variable+"}\\left("+this.expression+"\\right)"}}),s=a.RepeatedOperatorNode=h(b,function(a,c){a.init=function(a,d,e,b){c.init.call(this);this.index=a;this.lower_bound=
d;this.upper_bound=e;this.summand=b;this.addDependencies(this.lower_bound.dependencies());this.addDependencies(this.upper_bound.dependencies());this.addDependencies(this.summand.dependencies());this.shadowVariable(this.index.identifier)};a.evaluateOnce=function(a){var c=u(a),d=Math.round(this.lower_bound.evaluateOnce(a));a=Math.round(this.upper_bound.evaluateOnce(a));var e=this.starting_value;if(isFinite(a-d))for(;d<=a;d++)c.setVariable(this.index.identifier,g(d)),e=this.fn(e,this.summand.evaluateOnce(c));
else e=a<d?this.starting_value:NaN;return e};a.getEvalStrings=function(a){var c=this.tmp(),d=this.index.identifier,e=this.tmp(),b=this.tmp(),f=this.lower_bound.getEvalStrings(a),g=this.upper_bound.getEvalStrings(a);a=this.summand.getEvalStrings(a);return{expression:c,statements:f.statements+"var "+e+" = Math.round("+f.expression+");"+(g.statements+"var "+b+" = Math.round("+g.expression+");")+("var "+c+"="+this.starting_value+";")+("if(!isFinite("+b+"-"+e+")) {"+c+"=("+b+"<"+e+"?"+this.starting_value+
":NaN);}else{"+("for (var "+d+"="+e+";"+d+"<="+b+";"+d+"++) {"+a.statements+c+this.in_place_operator+a.expression+"};")+"}")}}});a.SummationNode=h(s,function(a,c){a.init=function(a,d,e,b){c.init.call(this,a,d,e,b)};a.starting_value=0;a.in_place_operator="+=";a.fn=function(a,c){return a+c};a.toString=function(){return"\\sum_{"+this.index+"="+this.lower_bound+"}^{"+this.upper_bound+"} "+this.summand}});a.ProductNode=h(s,function(a,c){a.init=function(a,d,e,b){c.init.call(this,a,d,e,b)};a.starting_value=
1;a.in_place_operator="*=";a.fn=function(a,c){return a*c};a.toString=function(){return"\\prod_{"+this.index+"="+this.lower_bound+"}^{"+this.upper_bound+"} "+this.summand}});a.OrderedPairListNode=h(b,function(a,c){a.init=function(a){c.init.call(this);this.elements=a;for(var d=0;d<a.length;d++)this.addDependencies(a[d].dependencies())};a.evaluateOnce=function(a){return this.elements.map(function(c){return c.evaluateOnce(a)})};a.getEvalStrings=function(a){for(var c="",d="[",e=0;e<this.elements.length;e++){var b=
this.elements[e].getEvalStrings(a),c=c+b.statements,d=d+b.expression;e<this.elements.length-1&&(this.expression+=",")}return{statements:c,expression:d+"]"}};a.toString=function(){return"\\left("+this.elements.join(", ")+"\\right)"};a.statementType=ORDERED_PAIR_LIST});for(var B in a)a.hasOwnProperty(B)&&(q.yy[B]=a[B]);q.yy.parseFunctionDeclaration=function(a){a=a.replace("###","");var c=RegExp("((?:[a-zA-Z]|\\\\[a-zA-Z]+)(?:_[a-zA-Z0-9]|_{[a-zA-Z0-9]+})?)(?:\\\\left)?\\(((?:(?:[a-zA-Z]|\\\\[a-zA-Z]+)(?:_[a-zA-Z0-9]|_{[a-zA-Z0-9]+})?(?:\\,(?:[a-zA-Z]|\\\\[a-zA-Z]+)(?:_[a-zA-Z0-9]|_{[a-zA-Z0-9]+})?)*))(?:\\\\right)?\\)=");
a=a.replace(/(?:\s|\\space|\\\:)*/g,"");c=c.exec(a);return{identifier:e(c[1]),args:c[2].split(",").map(e),input_string:a.split("=")[0]}};a.parse=function(a){return q.parse("###"+a)};a.tryParse=function(d){try{return a.parse(d)}catch(e){return c(e)}};q.yy.setInput=function(a,c){a.setInputString(q.yy.lexer.matched.slice(Math.max(3,c.first_column),c.last_column))};q.yy.parseError=function(a,c){throw"Sorry - I don't understand this";};return a});I("math/quadratic",["require"],function(b){return{formula:function(b,
u){if(3!=b.length)throw"Where did you learn the quadratic formula?";var w=b[0],q=b[1],p=b[2];if(0===w)return[-p/q,-p/q];var s=Math.sqrt(q*q-4*w*p),p=(-q+s)/(2*w),w=(-q-s)/(2*w);return 0===u?p:1===u?w:[p,w]},inequalityRegions:function(b){var u=b[0],w=b[1];b=b[2];if(0===u&&0===w)return 0<b?[NaN,-1E305,1E305,NaN]:[NaN,NaN,NaN,NaN];if(0===u)return 0<w?[NaN,NaN,NaN,-b/w]:[-b/w,NaN,NaN,NaN];var q=Math.sqrt(w*w-4*u*b);if(!isFinite(q))return 0<u?[NaN,-1E305,1E305,NaN]:[NaN,NaN,NaN,NaN];b=(-w+q)/(2*u);w=(-w-
q)/(2*u);return 0<u?[w,NaN,NaN,b]:[NaN,b,w,NaN]},formulaEvalStrings:function(b){switch(b.expressions.length){case 2:return b=b.statements+"return -"+b.expressions[0]+"/"+b.expressions[1],[b];case 3:return b=b.statements+"var coeffs = ["+b.expressions[2]+","+b.expressions[1]+","+b.expressions[0]+"];",[b+"return this.quadraticFormula(coeffs, 0);",b+"return this.quadraticFormula(coeffs, 1);"]}},inequalityRegionEvalStrings:function(b){for(var u=b.expressions.slice();3>u.length;)u.push("0");b=b.statements+
"var coeffs = ["+u[2]+","+u[1]+","+u[0]+"];";return[b+"return this.quadraticInequalityRegions(coeffs)[0]",b+"return this.quadraticInequalityRegions(coeffs)[1]",b+"return this.quadraticInequalityRegions(coeffs)[2]",b+"return this.quadraticInequalityRegions(coeffs)[3]"]}}});I("math/builtinframe","require ./builtin ./evalframe ./parser_util ./inverses math/quadratic".split(" "),function(b){var h=b("./builtin"),u=b("./evalframe"),w=b("./parser_util"),q=b("./inverses");b=b("math/quadratic");var w=w.ConstantNode,
p=u();p.setVariable("pi",w(Math.PI));p.setEvalStrings("pi",{expression:String(Math.PI),statements:""});p.setVariable("tau",w(2*Math.PI));p.setEvalStrings("tau",{expression:String(2*Math.PI),statements:""});p.setVariable("e",w(Math.E));p.setEvalStrings("e",{expression:String(Math.E),statements:""});p.setDegreeMode=function(b){p._angleMultiplier=b?Math.PI/180:1};p.setDegreeMode(!1);p.setFunction("angleMultiplier",1,function(){return p._angleMultiplier});u=function(b,a,k){p.setFunction(b,1,function(c){return a(c*
p._angleMultiplier)});p.setFunction(q[b],1,function(a){return k(a)/p._angleMultiplier})};u("sin",h.sin,Math.asin);u("cos",h.cos,Math.acos);u("tan",h.tan,Math.atan);u("cot",h.cot,h.acot);u("sec",h.sec,h.asec);u("csc",h.csc,h.acsc);u=function(b,a,k){p.setFunction(b,1,a);p.setFunction(q[b],1,k)};u("sinh",h.sinh,h.asinh);u("cosh",h.cosh,h.acosh);u("tanh",h.tanh,h.atanh);u("coth",h.coth,h.acoth);u("sech",h.sech,h.asech);u("csch",h.csch,h.acsch);p.setFunction("pow",2,h.pow);p.setFunction("sqrt",1,Math.sqrt);
p.setFunction("nthroot",2,h.nthroot);p.setFunction("log",2,h.log_base);p.setFunction("exp",1,Math.exp);p.setFunction("floor",1,Math.floor);p.setFunction("ceil",1,Math.ceil);p.setFunction("round",1,Math.round);p.setFunction("abs",1,Math.abs);p.setFunction("mod",2,h.mod);p.setFunction("max",2,h.max);p.setFunction("min",2,h.min);p.setFunction("sign",1,h.sign);p.setFunction("lcm",2,h.lcm);p.setFunction("gcd",2,h.gcd);p.setFunction("nCr",2,h.nCr);p.setFunction("nPr",2,h.nPr);p.setFunction("factorial",
1,h.factorial);p.setFunction("polyGamma",2,h.polyGamma);p.setFunction("quadraticFormula",2,b.formula);p.setFunction("quadraticInequalityRegions",1,b.inequalityRegions);return p});I("numeric",[],function(){var b="undefined"===typeof exports?function(){}:exports;"undefined"!==typeof global&&(global.numeric=b);b.version="1.2.6";b.bench=function(b,u){var w,q,p;"undefined"===typeof u&&(u=15);p=0.5;for(w=new Date;;){for(q=p*=2;3<q;q-=4)b(),b(),b(),b();for(;0<q;)b(),q--;q=new Date;if(q-w>u)break}for(q=p;3<
q;q-=4)b(),b(),b(),b();for(;0<q;)b(),q--;q=new Date;return 1E3*(3*p-1)/(q-w)};b._myIndexOf=function(b){var u=this.length,w;for(w=0;w<u;++w)if(this[w]===b)return w;return-1};b.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:b._myIndexOf;b.precision=4;b.largeArray=50;b.compile=function(){var h=Array.prototype.slice.call(arguments),u=h.pop(),u="return function ("+h.join(",")+") {"+u+";}";return(new Function(["numeric"],u))(b)};b.prettyPrint=function(h){function u(h){if(0===h)return"0";if(isNaN(h))return"NaN";
if(0>h)return"-"+u(-h);if(isFinite(h)){var q=Math.floor(Math.log(h)/Math.log(10));h/=Math.pow(10,q);h=h.toPrecision(b.precision);10===parseFloat(h)&&(q++,h=(1).toPrecision(b.precision));return parseFloat(h).toString()+"e"+q.toString()}return"Infinity"}function w(h){var s;if("undefined"===typeof h)return q.push(Array(b.precision+8).join(" ")),!1;if("string"===typeof h)return q.push('"'+h+'"'),!1;if("boolean"===typeof h)return q.push(h.toString()),!1;if("number"===typeof h){var a=u(h);s=h.toPrecision(b.precision);
h=parseFloat(h.toString()).toString();h=[a,s,h,parseFloat(s).toString(),parseFloat(h).toString()];for(s=1;s<h.length;s++)h[s].length<a.length&&(a=h[s]);q.push(Array(b.precision+8-a.length).join(" ")+a);return!1}if(null===h)return q.push("null"),!1;if("function"===typeof h){q.push(h.toString());a=!1;for(s in h)h.hasOwnProperty(s)&&(a?q.push(",\n"):q.push("\n{"),a=!0,q.push(s),q.push(": \n"),w(h[s]));a&&q.push("}\n");return!0}if(h instanceof Array){if(h.length>b.largeArray)return q.push("...Large Array..."),
!0;a=!1;q.push("[");for(s=0;s<h.length;s++)0<s&&(q.push(","),a&&q.push("\n ")),a=w(h[s]);q.push("]");return!0}q.push("{");a=!1;for(s in h)h.hasOwnProperty(s)&&(a&&q.push(",\n"),a=!0,q.push(s),q.push(": \n"),w(h[s]));q.push("}");return!0}var q=[];w(h);return q.join("")};b.parseDate=function(b){function u(b){if("string"===typeof b)return Date.parse(b.replace(/-/g,"/"));if(!(b instanceof Array))throw Error("parseDate: parameter must be arrays of strings");var h=[],p;for(p=0;p<b.length;p++)h[p]=u(b[p]);
return h}return u(b)};b.parseFloat=function(b){function u(b){if("string"===typeof b)return parseFloat(b);if(!(b instanceof Array))throw Error("parseFloat: parameter must be arrays of strings");var h=[],p;for(p=0;p<b.length;p++)h[p]=u(b[p]);return h}return u(b)};b.parseCSV=function(b){b=b.split("\n");var u,w,q=[],p=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,a=0;for(w=0;w<b.length;w++){var k=(b[w]+",").match(p),c;
if(0<k.length){q[a]=[];for(u=0;u<k.length;u++)c=k[u].substr(0,k[u].length-1),s.test(c)?q[a][u]=parseFloat(c):q[a][u]=c;a++}}return q};b.toCSV=function(h){var u,w,q,p,s;q=b.dim(h)[0];s=[];for(u=0;u<q;u++){p=[];for(w=0;w<q;w++)p[w]=h[u][w].toString();s[u]=p.join(", ")}return s.join("\n")+"\n"};b.getURL=function(b){var u=new XMLHttpRequest;u.open("GET",b,!1);u.send();return u};b.imageURL=function(b){function u(a,c,b){"undefined"===typeof c&&(c=0);"undefined"===typeof b&&(b=a.length);for(var f=[0,1996959894,
3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,
1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,
1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,
2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,
752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,2847714899,
3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],g=-1,k=0;c<b;c++)k=(g^a[c])&255,g=g>>>8^f[k];return g^-1}var w=b[0].length,q=b[0][0].length,p,s,a,k,c,g,f=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,q>>24&255,q>>16&255,q>>8&255,q&255,w>>24&255,w>>16&255,w>>8&255,w&255,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];p=u(f,12,29);f[29]=p>>
24&255;f[30]=p>>16&255;f[31]=p>>8&255;f[32]=p&255;p=1;for(c=s=0;c<w;c++){c<w-1?f.push(0):f.push(1);k=3*q+1+(0===c)&255;a=3*q+1+(0===c)>>8&255;f.push(k);f.push(a);f.push(~k&255);f.push(~a&255);0===c&&f.push(0);for(g=0;g<q;g++)for(a=0;3>a;a++)k=b[a][c][g],k=255<k?255:0>k?0:Math.round(k),p=(p+k)%65521,s=(s+p)%65521,f.push(k);f.push(0)}b=(s<<16)+p;f.push(b>>24&255);f.push(b>>16&255);f.push(b>>8&255);f.push(b&255);b=f.length-41;f[33]=b>>24&255;f[34]=b>>16&255;f[35]=b>>8&255;f[36]=b&255;p=u(f,37);f.push(p>>
24&255);f.push(p>>16&255);f.push(p>>8&255);f.push(p&255);f.push(0);f.push(0);f.push(0);f.push(0);f.push(73);f.push(69);f.push(78);f.push(68);f.push(174);f.push(66);f.push(96);f.push(130);return"data:image/png;base64,"+function(a){var c=a.length,b,f,g,k,n,h="";for(b=0;b<c;b+=3)f=a[b],g=a[b+1],k=a[b+2],n=f>>2,f=((f&3)<<4)+(g>>4),g=((g&15)<<2)+(k>>6),k&=63,b+1>=c?g=k=64:b+2>=c&&(k=64),h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k);return h}(f)};b._dim=function(b){for(var u=[];"object"===typeof b;)u.push(b.length),b=b[0];return u};b.dim=function(h){var u,w;return"object"===typeof h?(u=h[0],"object"===typeof u?(w=u[0],"object"===typeof w?b._dim(h):[h.length,u.length]):[h.length]):[]};b.mapreduce=function(h,u){return b.compile("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+
u+';\nif(typeof x === "number") { var xi = x; '+h+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+h+";\n    xi = x[i-1];\n    "+h+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+h+"\n}\nreturn accum;")};b.mapreduce2=function(h,u){return b.compile("x",
"var n = x.length;\nvar i,xi;\n"+u+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+h+";\n}\nreturn accum;")};b.same=function u(b,q){var p,s;if(!(b instanceof Array&&q instanceof Array))return!1;s=b.length;if(s!==q.length)return!1;for(p=0;p<s;p++)if(b[p]!==q[p])if("object"===typeof b[p]){if(!u(b[p],q[p]))return!1}else return!1;return!0};b.rep=function(u,w,q){"undefined"===typeof q&&(q=0);var p=u[q],s=Array(p);if(q===u.length-1){for(p-=2;0<=p;p-=2)s[p+1]=w,s[p]=w;-1===p&&(s[0]=w);return s}for(p-=
1;0<=p;p--)s[p]=b.rep(u,w,q+1);return s};b.dotMMsmall=function(b,w){var q,p,s,a,k,c,g,f,e,d;q=b.length;a=w.length;k=w[0].length;c=Array(q);for(q-=1;0<=q;q--){g=Array(k);f=b[q];for(s=k-1;0<=s;s--){e=f[a-1]*w[a-1][s];for(p=a-2;1<=p;p-=2)d=p-1,e+=f[p]*w[p][s]+f[d]*w[d][s];0===p&&(e+=f[0]*w[0][s]);g[s]=e}c[q]=g}return c};b._getCol=function(b,w,q){var p;for(p=b.length-1;0<p;--p)q[p]=b[p][w],--p,q[p]=b[p][w];0===p&&(q[0]=b[0][w])};b.dotMMbig=function(u,w){var q=b._getCol,p=Array(w.length),s=u.length,a=
w[0].length,k=Array(s),c=b.dotVV,g,f;--s;for(g=s;-1!==g;--g)k[g]=Array(a);--a;for(g=a;-1!==g;--g)for(q(w,g,p),f=s;-1!==f;--f)a=u[f],k[f][g]=c(a,p);return k};b.dotMV=function(u,w){for(var q=u.length,p=Array(q),s=b.dotVV,q=q-1;0<=q;q--)p[q]=s(u[q],w);return p};b.dotVM=function(b,w){var q,p,s,a,k,c;s=b.length;q=w[0].length;a=Array(q);for(p=q-1;0<=p;p--){k=b[s-1]*w[s-1][p];for(q=s-2;1<=q;q-=2)c=q-1,k+=b[q]*w[q][p]+b[c]*w[c][p];0===q&&(k+=b[0]*w[0][p]);a[p]=k}return a};b.dotVV=function(b,w){var q;q=b.length;
var p,s=b[q-1]*w[q-1];for(q-=2;1<=q;q-=2)p=q-1,s+=b[q]*w[q]+b[p]*w[p];0===q&&(s+=b[0]*w[0]);return s};b.dot=function(u,w){var q=b.dim;switch(1E3*q(u).length+q(w).length){case 2002:return 10>w.length?b.dotMMsmall(u,w):b.dotMMbig(u,w);case 2001:return b.dotMV(u,w);case 1002:return b.dotVM(u,w);case 1001:return b.dotVV(u,w);case 1E3:return b.mulVS(u,w);case 1:return b.mulSV(u,w);case 0:return u*w;default:throw Error("numeric.dot only works on vectors and matrices");}};b.diag=function(b){var w,q,p,s=
b.length,a=Array(s),k;for(w=s-1;0<=w;w--){k=Array(s);q=w+2;for(p=s-1;p>=q;p-=2)k[p]=0,k[p-1]=0;p>w&&(k[p]=0);k[w]=b[w];for(p=w-1;1<=p;p-=2)k[p]=0,k[p-1]=0;0===p&&(k[0]=0);a[w]=k}return a};b.getDiag=function(b){for(var w=Math.min(b.length,b[0].length),q=Array(w),w=w-1;1<=w;--w)q[w]=b[w][w],--w,q[w]=b[w][w];0===w&&(q[0]=b[0][0]);return q};b.identity=function(u){return b.diag(b.rep([u],1))};b.pointwise=function(u,w,q){"undefined"===typeof q&&(q="");var p=[],s,a=/\[i\]$/,k,c="",g=!1;for(s=0;s<u.length;s++)a.test(u[s])?
c=k=u[s].substring(0,u[s].length-3):k=u[s],"ret"===k&&(g=!0),p.push(k);p[u.length]="_s";p[u.length+1]="_k";p[u.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+c+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(g?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+u.join(",")+",_s,_k+1);\n    return ret;\n}\n"+q+"\nfor(i=_n-1;i!==-1;--i) {\n    "+w+"\n}\nreturn ret;";return b.compile.apply(null,p)};b.pointwise2=function(u,
w,q){"undefined"===typeof q&&(q="");var p=[],s,a=/\[i\]$/,k,c="",g=!1;for(s=0;s<u.length;s++)a.test(u[s])?c=k=u[s].substring(0,u[s].length-3):k=u[s],"ret"===k&&(g=!0),p.push(k);p[u.length]="var _n = "+c+".length;\nvar i"+(g?"":", ret = Array(_n)")+";\n"+q+"\nfor(i=_n-1;i!==-1;--i) {\n"+w+"\n}\nreturn ret;";return b.compile.apply(null,p)};b._biforeach=function w(b,p,s,a,k){if(a===s.length-1)k(b,p);else{var c;for(c=s[a]-1;0<=c;c--)w("object"===typeof b?b[c]:b,"object"===typeof p?p[c]:p,s,a+1,k)}};b._biforeach2=
function q(b,s,a,k,c){if(k===a.length-1)return c(b,s);var g;g=a[k];var f=Array(g);for(g-=1;0<=g;--g)f[g]=q("object"===typeof b?b[g]:b,"object"===typeof s?s[g]:s,a,k+1,c);return f};b._foreach=function p(b,a,k,c){if(k===a.length-1)c(b);else{var g;for(g=a[k]-1;0<=g;g--)p(b[g],a,k+1,c)}};b._foreach2=function s(a,b,c,g){if(c===b.length-1)return g(a);var f;f=b[c];var e=Array(f);for(f-=1;0<=f;f--)e[f]=s(a[f],b,c+1,g);return e};b.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",
lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};b.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="};b.mathfuns="abs acos asin atan ceil cos exp floor log round sin sqrt tan isNaN isFinite".split(" ");b.mathfuns2=["atan2","pow","max","min"];b.ops1={neg:"-",not:"!",bnot:"~",clone:""};b.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;",
"var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]};(function(){var s,a;for(s=0;s<b.mathfuns2.length;++s)a=b.mathfuns2[s],
b.ops2[a]=a;for(s in b.ops2)if(b.ops2.hasOwnProperty(s)){a=b.ops2[s];var k,c,g="";-1!==b.myIndexOf.call(b.mathfuns2,s)?(g="var "+a+" = Math."+a+";\n",k=function(c,b,d){return c+" = "+a+"("+b+","+d+")"},c=function(c,b){return c+" = "+a+"("+c+","+b+")"}):(k=function(c,b,d){return c+" = "+b+" "+a+" "+d},c=b.opseq.hasOwnProperty(s+"eq")?function(c,b){return c+" "+a+"= "+b}:function(c,b){return c+" = "+c+" "+a+" "+b});b[s+"VV"]=b.pointwise2(["x[i]","y[i]"],k("ret[i]","x[i]","y[i]"),g);b[s+"SV"]=b.pointwise2(["x",
"y[i]"],k("ret[i]","x","y[i]"),g);b[s+"VS"]=b.pointwise2(["x[i]","y"],k("ret[i]","x[i]","y"),g);b[s]=b.compile("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+s+"VV, VS = numeric."+s+"VS, SV = numeric."+s+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+
c("x","y")+"\n}\nreturn x;\n");b[a]=b[s];b[s+"eqV"]=b.pointwise2(["ret[i]","x[i]"],c("ret[i]","x[i]"),g);b[s+"eqS"]=b.pointwise2(["ret[i]","x"],c("ret[i]","x"),g);b[s+"eq"]=b.compile("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+s+"eqV, S = numeric."+s+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(s=0;s<b.mathfuns2.length;++s)a=
b.mathfuns2[s],delete b.ops2[a];for(s=0;s<b.mathfuns.length;++s)a=b.mathfuns[s],b.ops1[a]=a;for(s in b.ops1)b.ops1.hasOwnProperty(s)&&(g="",a=b.ops1[s],-1!==b.myIndexOf.call(b.mathfuns,s)&&Math.hasOwnProperty(a)&&(g="var "+a+" = Math."+a+";\n"),b[s+"eqV"]=b.pointwise2(["ret[i]"],"ret[i] = "+a+"(ret[i]);",g),b[s+"eq"]=b.compile("x",'if(typeof x !== "object") return '+a+"x\nvar i;\nvar V = numeric."+s+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),b[s+"V"]=b.pointwise2(["x[i]"],
"ret[i] = "+a+"(x[i]);",g),b[s]=b.compile("x",'if(typeof x !== "object") return '+a+"(x)\nvar i;\nvar V = numeric."+s+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(s=0;s<b.mathfuns.length;++s)a=b.mathfuns[s],delete b.ops1[a];for(s in b.mapreducers)b.mapreducers.hasOwnProperty(s)&&(a=b.mapreducers[s],b[s+"V"]=b.mapreduce2(a[0],a[1]),b[s]=b.compile("x","s","k",a[1]+'if(typeof x !== "object") {    xi = x;\n'+a[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+
s+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+a[0]+";\n}\nreturn accum;\n"))})();b.truncVV=b.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;");b.truncVS=b.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;");b.truncSV=b.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;");b.trunc=function(s,a){return"object"===typeof s?"object"===typeof a?b.truncVV(s,a):
b.truncVS(s,a):"object"===typeof a?b.truncSV(s,a):Math.round(s/a)*a};b.inv=function(s){var a=b.dim(s),k=Math.abs,c=a[0],a=a[1],g=b.clone(s),f,e,d=b.identity(c),l,m,x,r,n;for(r=0;r<a;++r){e=s=-1;for(x=r;x!==c;++x)n=k(g[x][r]),n>e&&(s=x,e=n);e=g[s];g[s]=g[r];g[r]=e;m=d[s];d[s]=d[r];d[r]=m;s=e[r];for(n=r;n!==a;++n)e[n]/=s;for(n=a-1;-1!==n;--n)m[n]/=s;for(x=c-1;-1!==x;--x)if(x!==r){f=g[x];l=d[x];s=f[r];for(n=r+1;n!==a;++n)f[n]-=e[n]*s;for(n=a-1;0<n;--n)l[n]-=m[n]*s,--n,l[n]-=m[n]*s;0===n&&(l[0]-=m[0]*
s)}}return d};b.det=function(s){var a=b.dim(s);if(2!==a.length||a[0]!==a[1])throw Error("numeric: det() only works on square matrices");var a=a[0],k=1,c,g,f=b.clone(s),e,d,l,m;for(s=0;s<a-1;s++){g=s;for(c=s+1;c<a;c++)Math.abs(f[c][s])>Math.abs(f[g][s])&&(g=c);g!==s&&(c=f[g],f[g]=f[s],f[s]=c,k*=-1);e=f[s];for(c=s+1;c<a;c++){d=f[c];l=d[s]/e[s];for(g=s+1;g<a-1;g+=2)m=g+1,d[g]-=e[g]*l,d[m]-=e[m]*l;g!==a&&(d[g]-=e[g]*l)}if(0===e[s])return 0;k*=e[s]}return k*f[s][s]};b.transpose=function(b){var a,k;a=b.length;
var c=b[0].length,g=Array(c),f,e,d;for(k=0;k<c;k++)g[k]=Array(a);for(a-=1;1<=a;a-=2){e=b[a];f=b[a-1];for(k=c-1;1<=k;--k)d=g[k],d[a]=e[k],d[a-1]=f[k],--k,d=g[k],d[a]=e[k],d[a-1]=f[k];0===k&&(d=g[0],d[a]=e[0],d[a-1]=f[0])}if(0===a){f=b[0];for(k=c-1;1<=k;--k)g[k][0]=f[k],--k,g[k][0]=f[k];0===k&&(g[0][0]=f[0])}return g};b.negtranspose=function(b){var a,k;a=b.length;var c=b[0].length,g=Array(c),f,e,d;for(k=0;k<c;k++)g[k]=Array(a);for(a-=1;1<=a;a-=2){e=b[a];f=b[a-1];for(k=c-1;1<=k;--k)d=g[k],d[a]=-e[k],
d[a-1]=-f[k],--k,d=g[k],d[a]=-e[k],d[a-1]=-f[k];0===k&&(d=g[0],d[a]=-e[0],d[a-1]=-f[0])}if(0===a){f=b[0];for(k=c-1;1<=k;--k)g[k][0]=-f[k],--k,g[k][0]=-f[k];0===k&&(g[0][0]=-f[0])}return g};b._random=function a(b,c){var g;g=b[c];var f=Array(g),e;if(c===b.length-1){e=Math.random;for(g-=1;1<=g;g-=2)f[g]=e(),f[g-1]=e();0===g&&(f[0]=e());return f}for(g-=1;0<=g;g--)f[g]=a(b,c+1);return f};b.random=function(a){return b._random(a,0)};b.norm2=function(a){return Math.sqrt(b.norm2Squared(a))};b.linspace=function(a,
b,c){"undefined"===typeof c&&(c=Math.max(Math.round(b-a)+1,1));if(2>c)return 1===c?[a]:[];var g,f=Array(c);c--;for(g=c;0<=g;g--)f[g]=(g*b+(c-g)*a)/c;return f};b.getBlock=function(a,k,c){function g(a,d){var b,m=k[d];b=c[d]-m;var x=Array(b);if(d===f.length-1){for(;0<=b;b--)x[b]=a[b+m];return x}for(;0<=b;b--)x[b]=g(a[b+m],d+1);return x}var f=b.dim(a);return g(a,0)};b.setBlock=function(a,k,c,g){function f(a,b,g){var x,r=k[g],n=c[g]-r;if(g===e.length-1)for(x=n;0<=x;x--)a[x+r]=b[x];for(x=n;0<=x;x--)f(a[x+
r],b[x],g+1)}var e=b.dim(a);f(a,g,0);return a};b.getRange=function(a,b,c){for(var g=b.length,f=c.length,e,d=Array(g),l,m,g=g-1;-1!==g;--g)for(d[g]=Array(f),l=d[g],m=a[b[g]],e=f-1;-1!==e;--e)l[e]=m[c[e]];return d};b.blockMatrix=function(a){var k=b.dim(a);if(4>k.length)return b.blockMatrix([a]);var c=k[0],k=k[1],g,f,e,d;for(e=f=g=0;e<c;++e)g+=a[e][0].length;for(d=0;d<k;++d)f+=a[0][d][0].length;var l=Array(g);for(e=0;e<g;++e)l[e]=Array(f);var m=0,x,r,n,y,B;for(e=0;e<c;++e){x=f;for(d=k-1;-1!==d;--d)for(g=
a[e][d],x-=g[0].length,n=g.length-1;-1!==n;--n)for(B=g[n],r=l[m+n],y=B.length-1;-1!==y;--y)r[x+y]=B[y];m+=a[e][0].length}return l};b.tensor=function(a,k){if("number"===typeof a||"number"===typeof k)return b.mul(a,k);var c=b.dim(a),g=b.dim(k);if(1!==c.length||1!==g.length)throw Error("numeric: tensor product is only defined for vectors");var f=c[0],g=g[0],c=Array(f),e,d,l;for(e=f-1;0<=e;e--){f=Array(g);l=a[e];for(d=g-1;3<=d;--d)f[d]=l*k[d],--d,f[d]=l*k[d],--d,f[d]=l*k[d],--d,f[d]=l*k[d];for(;0<=d;)f[d]=
l*k[d],--d;c[e]=f}return c};b.T=function(a,b){this.x=a;this.y=b};b.t=function(a,k){return new b.T(a,k)};b.Tbinop=function(a,k,c,g,f){if("string"!==typeof f){var e;f="";for(e in b)b.hasOwnProperty(e)&&(0<=a.indexOf(e)||0<=k.indexOf(e)||0<=c.indexOf(e)||0<=g.indexOf(e))&&1<e.length&&(f+="var "+e+" = numeric."+e+";\n")}return b.compile(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+f+"\nif(x.y) {  if(y.y) {    return new numeric.T("+g+");\n  }\n  return new numeric.T("+
c+");\n}\nif(y.y) {\n  return new numeric.T("+k+");\n}\nreturn new numeric.T("+a+");\n")};b.T.prototype.add=b.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)");b.T.prototype.sub=b.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)");b.T.prototype.mul=b.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))");b.T.prototype.reciprocal=
function(){var a=b.mul,k=b.div;return this.y?(a=b.add(a(this.x,this.x),a(this.y,this.y)),new b.T(k(this.x,a),k(b.neg(this.y),a))):new T(k(1,this.x))};b.T.prototype.div=function(a){a instanceof b.T||(a=new b.T(a));if(a.y)return this.mul(a.reciprocal());var k=b.div;return this.y?new b.T(k(this.x,a.x),k(this.y,a.x)):new b.T(k(this.x,a.x))};b.T.prototype.dot=b.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))");
b.T.prototype.transpose=function(){var a=b.transpose,k=this.x,c=this.y;return c?new b.T(a(k),a(c)):new b.T(a(k))};b.T.prototype.transjugate=function(){var a=b.transpose,k=this.x,c=this.y;return c?new b.T(a(k),b.negtranspose(c)):new b.T(a(k))};b.Tunop=function(a,k,c){"string"!==typeof c&&(c="");return b.compile("var x = this;\n"+c+"\nif(x.y) {  "+k+";\n}\n"+a+";\n")};b.T.prototype.exp=b.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;");
b.T.prototype.conj=b.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));");b.T.prototype.neg=b.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;");b.T.prototype.sin=b.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));");b.T.prototype.cos=b.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);");b.T.prototype.abs=b.Tunop("return new numeric.T(numeric.abs(x.x));",
"return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;");b.T.prototype.log=b.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);");b.T.prototype.norm2=b.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));");b.T.prototype.inv=function(){if("undefined"===typeof this.y)return new b.T(b.inv(this.x));
var a=this.x.length,k,c,g,f=b.identity(a),e=b.rep([a,a],0),d=b.clone(this.x),l=b.clone(this.y),m,x,r,n,y,B,z,C,D,F,G,H;for(k=0;k<a;k++){D=d[k][k];F=l[k][k];r=D*D+F*F;g=k;for(c=k+1;c<a;c++)D=d[c][k],F=l[c][k],m=D*D+F*F,m>r&&(g=c,r=m);g!==k&&(c=d[k],d[k]=d[g],d[g]=c,c=l[k],l[k]=l[g],l[g]=c,c=f[k],f[k]=f[g],f[g]=c,c=e[k],e[k]=e[g],e[g]=c);m=d[k];x=l[k];y=f[k];B=e[k];D=m[k];F=x[k];for(c=k+1;c<a;c++)G=m[c],H=x[c],m[c]=(G*D+H*F)/r,x[c]=(H*D-G*F)/r;for(c=0;c<a;c++)G=y[c],H=B[c],y[c]=(G*D+H*F)/r,B[c]=(H*
D-G*F)/r;for(c=k+1;c<a;c++){r=d[c];n=l[c];z=f[c];C=e[c];D=r[k];F=n[k];for(g=k+1;g<a;g++)G=m[g],H=x[g],r[g]-=G*D-H*F,n[g]-=H*D+G*F;for(g=0;g<a;g++)G=y[g],H=B[g],z[g]-=G*D-H*F,C[g]-=H*D+G*F}}for(k=a-1;0<k;k--)for(y=f[k],B=e[k],c=k-1;0<=c;c--)for(z=f[c],C=e[c],D=d[c][k],F=l[c][k],g=a-1;0<=g;g--)G=y[g],H=B[g],z[g]-=D*G-F*H,C[g]-=D*H+F*G;return new b.T(f,e)};b.T.prototype.get=function(a){var k=this.x,c=this.y,g=0,f,e=a.length;if(c){for(;g<e;)f=a[g],k=k[f],c=c[f],g++;return new b.T(k,c)}for(;g<e;)f=a[g],
k=k[f],g++;return new b.T(k)};b.T.prototype.set=function(a,k){var c=this.x,g=this.y,f=0,e,d=a.length,l=k.x,m=k.y;if(0===d)return m?this.y=m:g&&(this.y=void 0),this.x=c,this;if(m){g||(this.y=g=b.rep(b.dim(c),0));for(;f<d-1;)e=a[f],c=c[e],g=g[e],f++;e=a[f];c[e]=l;g[e]=m;return this}if(g){for(;f<d-1;)e=a[f],c=c[e],g=g[e],f++;e=a[f];c[e]=l;g[e]=l instanceof Array?b.rep(b.dim(l),0):0;return this}for(;f<d-1;)e=a[f],c=c[e],f++;e=a[f];c[e]=l;return this};b.T.prototype.getRows=function(a,k){var c=k-a+1,g,
f=Array(c),e=this.x,d=this.y;for(g=a;g<=k;g++)f[g-a]=e[g];if(d){c=Array(c);for(g=a;g<=k;g++)c[g-a]=d[g];return new b.T(f,c)}return new b.T(f)};b.T.prototype.setRows=function(a,k,c){var g=this.x,f=this.y,e=c.x,d=c.y;for(c=a;c<=k;c++)g[c]=e[c-a];if(d)for(f||(this.y=f=b.rep(b.dim(g),0)),c=a;c<=k;c++)f[c]=d[c-a];else if(f)for(c=a;c<=k;c++)f[c]=b.rep([e[c-a].length],0);return this};b.T.prototype.getRow=function(a){var k=this.x,c=this.y;return c?new b.T(k[a],c[a]):new b.T(k[a])};b.T.prototype.setRow=function(a,
k){var c=this.x,g=this.y,f=k.x,e=k.y;c[a]=f;e?(g||(this.y=g=b.rep(b.dim(c),0)),g[a]=e):g&&b.rep([f.length],0);return this};b.T.prototype.getBlock=function(a,k){var c=this.x,g=this.y,f=b.getBlock;return g?new b.T(f(c,a,k),f(g,a,k)):new b.T(f(c,a,k))};b.T.prototype.setBlock=function(a,k,c){c instanceof b.T||(c=new b.T(c));var g=this.x,f=this.y,e=b.setBlock,d=c.x;if(c=c.y)return f||(f=this.y=b.rep(b.dim(this),0)),e(g,a,k,d),e(f,a,k,c),this;e(g,a,k,d);f&&e(f,a,k,b.rep(b.dim(d),0))};b.T.rep=function(a,
k){var c=b.T;k instanceof c||(k=new c(k));var g=k.x,f=k.y,e=b.rep;return f?new c(e(a,g),e(a,f)):new c(e(a,g))};b.T.diag=function(a){a instanceof b.T||(a=new b.T(a));var k=a.x;a=a.y;var c=b.diag;return a?new b.T(c(k),c(a)):new b.T(c(k))};b.T.eig=function(){if(this.y)throw Error("eig: not implemented for complex matrices.");return b.eig(this.x)};b.T.identity=function(a){return new b.T(b.identity(a))};b.T.prototype.getDiag=function(){var a=b,k=this.x,c=this.y;return c?new a.T(a.getDiag(k),a.getDiag(c)):
new a.T(a.getDiag(k))};b.house=function(a){var k=b.clone(a);a=(0<=a[0]?1:-1)*b.norm2(a);k[0]+=a;a=b.norm2(k);if(0===a)throw Error("eig: internal error");return b.div(k,a)};b.toUpperHessenberg=function(a){var k=b.dim(a);if(2!==k.length||k[0]!==k[1])throw Error("numeric: toUpperHessenberg() only works on square matrices");var k=k[0],c,g,f,e=b.clone(a),d,l,m,x=b.identity(k);for(c=0;c<k-2;c++){g=Array(k-c-1);for(a=c+1;a<k;a++)g[a-c-1]=e[a][c];if(0<b.norm2(g)){f=b.house(g);g=b.getBlock(e,[c+1,c],[k-1,
k-1]);d=b.tensor(f,b.dot(f,g));for(a=c+1;a<k;a++)for(l=e[a],m=d[a-c-1],g=c;g<k;g++)l[g]-=2*m[g-c];g=b.getBlock(e,[0,c+1],[k-1,k-1]);d=b.tensor(b.dot(g,f),f);for(a=0;a<k;a++)for(l=e[a],m=d[a],g=c+1;g<k;g++)l[g]-=2*m[g-c-1];g=Array(k-c-1);for(a=c+1;a<k;a++)g[a-c-1]=x[a];d=b.tensor(f,b.dot(f,g));for(a=c+1;a<k;a++)for(f=x[a],m=d[a-c-1],g=0;g<k;g++)f[g]-=2*m[g]}}return{H:e,Q:x}};b.epsilon=2.220446049250313E-16;b.QRFrancis=function(a,k){"undefined"===typeof k&&(k=1E4);a=b.clone(a);b.clone(a);var c=b.dim(a)[0],
g,f,e,d,l,m,x=b.identity(c),r,n,y;if(3>c)return{Q:x,B:[[0,c-1]]};var B=b.epsilon;for(y=0;y<k;y++){for(e=0;e<c-1;e++)if(Math.abs(a[e+1][e])<B*(Math.abs(a[e][e])+Math.abs(a[e+1][e+1]))){y=b.QRFrancis(b.getBlock(a,[0,0],[e,e]),k);B=b.QRFrancis(b.getBlock(a,[e+1,e+1],[c-1,c-1]),k);d=Array(e+1);for(m=0;m<=e;m++)d[m]=x[m];d=b.dot(y.Q,d);for(m=0;m<=e;m++)x[m]=d[m];d=Array(c-e-1);for(m=e+1;m<c;m++)d[m-e-1]=x[m];d=b.dot(B.Q,d);for(m=e+1;m<c;m++)x[m]=d[m-e-1];return{Q:x,B:y.B.concat(b.add(B.B,e+1))}}e=a[c-
2][c-2];g=a[c-2][c-1];d=a[c-1][c-2];l=a[c-1][c-1];m=e+l;d=e*l-g*d;e=b.getBlock(a,[0,0],[2,2]);m*m>=4*d?(g=0.5*(m+Math.sqrt(m*m-4*d)),m=0.5*(m-Math.sqrt(m*m-4*d)),e=b.add(b.sub(b.dot(e,e),b.mul(e,g+m)),b.diag(b.rep([3],g*m)))):e=b.add(b.sub(b.dot(e,e),b.mul(e,m)),b.diag(b.rep([3],d)));g=[e[0][0],e[1][0],e[2][0]];f=b.house(g);d=[a[0],a[1],a[2]];d=b.tensor(f,b.dot(f,d));for(m=0;3>m;m++)for(r=a[m],n=d[m],g=0;g<c;g++)r[g]-=2*n[g];d=b.getBlock(a,[0,0],[c-1,2]);d=b.tensor(b.dot(d,f),f);for(m=0;m<c;m++)for(r=
a[m],n=d[m],g=0;3>g;g++)r[g]-=2*n[g];d=[x[0],x[1],x[2]];d=b.tensor(f,b.dot(f,d));for(m=0;3>m;m++)for(f=x[m],n=d[m],g=0;g<c;g++)f[g]-=2*n[g];for(e=0;e<c-2;e++){for(g=e;g<=e+1;g++)if(Math.abs(a[g+1][g])<B*(Math.abs(a[g][g])+Math.abs(a[g+1][g+1]))){y=b.QRFrancis(b.getBlock(a,[0,0],[g,g]),k);B=b.QRFrancis(b.getBlock(a,[g+1,g+1],[c-1,c-1]),k);d=Array(g+1);for(m=0;m<=g;m++)d[m]=x[m];d=b.dot(y.Q,d);for(m=0;m<=g;m++)x[m]=d[m];d=Array(c-g-1);for(m=g+1;m<c;m++)d[m-g-1]=x[m];d=b.dot(B.Q,d);for(m=g+1;m<c;m++)x[m]=
d[m-g-1];return{Q:x,B:y.B.concat(b.add(B.B,g+1))}}l=Math.min(c-1,e+3);g=Array(l-e);for(m=e+1;m<=l;m++)g[m-e-1]=a[m][e];f=b.house(g);d=b.getBlock(a,[e+1,e],[l,c-1]);d=b.tensor(f,b.dot(f,d));for(m=e+1;m<=l;m++)for(r=a[m],n=d[m-e-1],g=e;g<c;g++)r[g]-=2*n[g-e];d=b.getBlock(a,[0,e+1],[c-1,l]);d=b.tensor(b.dot(d,f),f);for(m=0;m<c;m++)for(r=a[m],n=d[m],g=e+1;g<=l;g++)r[g]-=2*n[g-e-1];d=Array(l-e);for(m=e+1;m<=l;m++)d[m-e-1]=x[m];d=b.tensor(f,b.dot(f,d));for(m=e+1;m<=l;m++)for(f=x[m],n=d[m-e-1],g=0;g<c;g++)f[g]-=
2*n[g]}}throw Error("numeric: eigenvalue iteration does not converge -- increase maxiter?");};b.eig=function(a,k){for(var c=b.toUpperHessenberg(a),g=b.QRFrancis(c.H,k),f=b.T,e=a.length,d,e=g.B,l=b.dot(g.Q,b.dot(c.H,b.transpose(g.Q))),g=new f(b.dot(g.Q,c.Q)),m,x=e.length,r,n,y,B,z,C,D,F,G=Math.sqrt,c=0;c<x;c++)if(d=e[c][0],d!==e[c][1]&&(r=d+1,n=l[d][d],y=l[d][r],B=l[r][d],z=l[r][r],0!==y||0!==B))m=-n-z,C=n*z-y*B,C=m*m-4*C,0<=C?(m=0>m?-0.5*(m-G(C)):-0.5*(m+G(C)),D=(n-m)*(n-m)+y*y,F=B*B+(z-m)*(z-m),
D>F?(D=G(D),n=(n-m)/D,y/=D):(F=G(F),n=B/F,y=(z-m)/F),m=new f([[y,-n],[n,y]])):(m*=-0.5,C=0.5*G(-C),D=(n-m)*(n-m)+y*y,F=B*B+(z-m)*(z-m),D>F?(D=G(D+C*C),n=(n-m)/D,y/=D,m=0,C/=D):(F=G(F+C*C),n=B/F,y=(z-m)/F,m=C/F,C=0),m=new f([[y,-n],[n,y]],[[m,C],[C,-m]])),g.setRows(d,r,m.dot(g.getRows(d,r)));f=g.dot(a).dot(g.transjugate());e=a.length;l=b.T.identity(e);for(r=0;r<e;r++)if(0<r)for(c=r-1;0<=c;c--)d=f.get([c,c]),x=f.get([r,r]),b.neq(d.x,x.x)||b.neq(d.y,x.y)?(m=f.getRow(c).getBlock([c],[r-1]),C=l.getRow(r).getBlock([c],
[r-1]),l.set([r,c],f.get([c,r]).neg().sub(m.dot(C)).div(d.sub(x)))):l.setRow(r,l.getRow(c));for(r=0;r<e;r++)m=l.getRow(r),l.setRow(r,m.div(m.norm2()));l=l.transpose();l=g.transjugate().dot(l);return{lambda:f.getDiag(),E:l}};b.ccsSparse=function(a){var b=a.length,c,g,f,e=[];for(g=b-1;-1!==g;--g)for(f in c=a[g],c){for(f=parseInt(f);f>=e.length;)e[e.length]=0;0!==c[f]&&e[f]++}c=e.length;var d=Array(c+1);for(g=d[0]=0;g<c;++g)d[g+1]=d[g]+e[g];var l=Array(d[c]),m=Array(d[c]);for(g=b-1;-1!==g;--g)for(f in c=
a[g],c)0!==c[f]&&(e[f]--,l[d[f]+e[f]]=g,m[d[f]+e[f]]=c[f]);return[d,l,m]};b.ccsFull=function(a){var k=a[0],c=a[1],g=a[2],f=b.ccsDim(a);a=f[1];for(var e,d,l=b.rep([f[0],a],0),f=0;f<a;f++)for(e=k[f],d=k[f+1];e<d;++e)l[c[e]][f]=g[e];return l};b.ccsTSolve=function(a,k,c,g,f){function e(a){var b;if(0===c[a]){c[a]=1;for(b=d[a];b<d[a+1];++b)e(l[b]);f[r]=a;++r}}var d=a[0],l=a[1];a=a[2];var m=d.length-1,x=Math.max,r=0;"undefined"===typeof g&&(c=b.rep([m],0));"undefined"===typeof g&&(g=b.linspace(0,c.length-
1));"undefined"===typeof f&&(f=[]);for(var n,y,B,m=g.length-1;-1!==m;--m)e(g[m]);f.length=r;for(m=f.length-1;-1!==m;--m)c[f[m]]=0;for(m=g.length-1;-1!==m;--m)n=g[m],c[n]=k[n];for(m=f.length-1;-1!==m;--m){n=f[m];y=d[n];k=x(d[n+1],y);for(g=y;g!==k;++g)if(l[g]===n){c[n]/=a[g];break}B=c[n];for(g=y;g!==k;++g)y=l[g],y!==n&&(c[y]-=B*a[g])}return c};b.ccsDFS=function(a){this.k=Array(a);this.k1=Array(a);this.j=Array(a)};b.ccsDFS.prototype.dfs=function(a,b,c,g,f,e){var d=0,l=f.length,m=this.k,x=this.k1,r=this.j,
n,y;if(0===g[a])for(g[a]=1,r[0]=a,m[0]=n=b[a],x[0]=y=b[a+1];;)if(n>=y){f[l]=r[d];if(0===d)break;++l;--d;n=m[d];y=x[d]}else a=e[c[n]],0===g[a]?(g[a]=1,m[d]=n,++d,r[d]=a,n=b[a],x[d]=y=b[a+1]):++n};b.ccsLPSolve=function(a,b,c,g,f,e,d){var l=a[0],m=a[1];a=a[2];var x=b[0],r=b[1];b=b[2];var n;n=x[f];x=x[f+1];g.length=0;for(f=n;f<x;++f)d.dfs(e[r[f]],l,m,c,g,e);for(f=g.length-1;-1!==f;--f)c[g[f]]=0;for(f=n;f!==x;++f)d=e[r[f]],c[d]=b[f];for(f=g.length-1;-1!==f;--f){d=g[f];x=l[d];r=l[d+1];for(b=x;b<r;++b)if(e[m[b]]===
d){c[d]/=a[b];break}n=c[d];for(b=x;b<r;++b)x=e[m[b]],x!==d&&(c[x]-=n*a[b])}return c};b.ccsLUP1=function(a,k){var c=a[0].length-1,g=[b.rep([c+1],0),[],[]],f=[b.rep([c+1],0),[],[]],e=g[0],d=g[1],l=g[2],m=f[0],x=f[1],r=f[2],n=b.rep([c],0),y=b.rep([c],0),B,z,C,D,F,G,H,J=b.ccsLPSolve,A=Math.abs,L=b.linspace(0,c-1),O=b.linspace(0,c-1),K=new b.ccsDFS(c);"undefined"===typeof k&&(k=1);for(B=0;B<c;++B){J(g,a,n,y,B,O,K);F=D=-1;for(z=y.length-1;-1!==z;--z)C=y[z],C<=B||(G=A(n[C]),G>D&&(F=C,D=G));A(n[B])<k*D&&
(z=L[B],D=L[F],L[B]=D,O[D]=B,L[F]=z,O[z]=F,D=n[B],n[B]=n[F],n[F]=D);D=e[B];F=m[B];H=n[B];d[D]=L[B];l[D]=1;++D;for(z=y.length-1;-1!==z;--z)C=y[z],G=n[C],y[z]=0,n[C]=0,C<=B?(x[F]=C,r[F]=G,++F):(d[D]=L[C],l[D]=G/H,++D);e[B+1]=D;m[B+1]=F}for(z=d.length-1;-1!==z;--z)d[z]=O[d[z]];return{L:g,U:f,P:L,Pinv:O}};b.ccsDFS0=function(a){this.k=Array(a);this.k1=Array(a);this.j=Array(a)};b.ccsDFS0.prototype.dfs=function(a,b,c,g,f,e,d){d=0;var l=f.length,m=this.k,x=this.k1,r=this.j,n,y;if(0===g[a])for(g[a]=1,r[0]=
a,m[0]=n=b[e[a]],x[0]=y=b[e[a]+1];;){if(isNaN(n))throw Error("Ow!");if(n>=y){f[l]=e[r[d]];if(0===d)break;++l;--d;n=m[d];y=x[d]}else a=c[n],0===g[a]?(g[a]=1,m[d]=n,++d,r[d]=a,a=e[a],n=b[a],x[d]=y=b[a+1]):++n}};b.ccsLPSolve0=function(a,b,c,g,f,e,d,l){var m=a[0],x=a[1];a=a[2];var r=b[0],n=b[1];b=b[2];var y;y=r[f];r=r[f+1];g.length=0;for(f=y;f<r;++f)l.dfs(n[f],m,x,c,g,e,d);for(f=g.length-1;-1!==f;--f)e=g[f],c[d[e]]=0;for(f=y;f!==r;++f)e=n[f],c[e]=b[f];for(f=g.length-1;-1!==f;--f){e=g[f];n=d[e];l=m[e];
e=m[e+1];for(b=l;b<e;++b)if(x[b]===n){c[n]/=a[b];break}y=c[n];for(b=l;b<e;++b)c[x[b]]-=y*a[b];c[n]=y}};b.ccsLUP0=function(a,k){var c=a[0].length-1,g=[b.rep([c+1],0),[],[]],f=[b.rep([c+1],0),[],[]],e=g[0],d=g[1],l=g[2],m=f[0],x=f[1],r=f[2],n=b.rep([c],0),y=b.rep([c],0),B,z,C,D,F,G,H,J=b.ccsLPSolve0,A=Math.abs,L=b.linspace(0,c-1),O=b.linspace(0,c-1),K=new b.ccsDFS0(c);"undefined"===typeof k&&(k=1);for(B=0;B<c;++B){J(g,a,n,y,B,O,L,K);F=D=-1;for(z=y.length-1;-1!==z;--z)C=y[z],C<=B||(G=A(n[L[C]]),G>D&&
(F=C,D=G));A(n[L[B]])<k*D&&(z=L[B],D=L[F],L[B]=D,O[D]=B,L[F]=z,O[z]=F);D=e[B];F=m[B];H=n[L[B]];d[D]=L[B];l[D]=1;++D;for(z=y.length-1;-1!==z;--z)C=y[z],G=n[L[C]],y[z]=0,n[L[C]]=0,C<=B?(x[F]=C,r[F]=G,++F):(d[D]=L[C],l[D]=G/H,++D);e[B+1]=D;m[B+1]=F}for(z=d.length-1;-1!==z;--z)d[z]=O[d[z]];return{L:g,U:f,P:L,Pinv:O}};b.ccsLUP=b.ccsLUP0;b.ccsDim=function(a){return[b.sup(a[1])+1,a[0].length-1]};b.ccsGetBlock=function(a,k,c){var g=b.ccsDim(a),f=g[0],e=g[1];"undefined"===typeof k?k=b.linspace(0,f-1):"number"===
typeof k&&(k=[k]);"undefined"===typeof c?c=b.linspace(0,e-1):"number"===typeof c&&(c=[c]);var d,g=k.length,l=c.length,m,e=b.rep([e],0),x=[],r=[],n=[e,x,r],y=a[0],B=a[1];a=a[2];for(var z=b.rep([f],0),C=0,D=b.rep([f],0),f=0;f<l;++f){d=c[f];var F=y[d],G=y[d+1];for(d=F;d<G;++d)m=B[d],D[m]=1,z[m]=a[d];for(d=0;d<g;++d)m=k[d],D[m]&&(x[C]=d,r[C]=z[k[d]],++C);for(d=F;d<G;++d)m=B[d],D[m]=0;e[f+1]=C}return n};b.ccsDot=function(a,k){var c=a[0],g=a[1],f=a[2],e=k[0],d=k[1],l=k[2],m=b.ccsDim(a),x=b.ccsDim(k),r=
m[0],x=x[1],m=b.rep([r],0),n=b.rep([r],0),r=Array(r),y=b.rep([x],0),B=[],z=[],C=[y,B,z],D,F,G,H,J,A,L,O;for(G=0;G!==x;++G){H=e[G];J=e[G+1];L=0;for(F=H;F<J;++F)for(H=d[F],O=l[F],D=c[H],H=c[H+1];D<H;++D)A=g[D],0===n[A]&&(r[L]=A,n[A]=1,L+=1),m[A]+=f[D]*O;H=y[G];J=H+L;y[G+1]=J;for(F=L-1;-1!==F;--F)O=H+F,D=r[F],B[O]=D,z[O]=m[D],n[D]=0,m[D]=0;y[G+1]=y[G]+L}return C};b.ccsLUPSolve=function(a,k){var c=a.L,g=a.U,f=k[0],e=!1;"object"!==typeof f&&(k=[[0,k.length],b.linspace(0,k.length-1),k],f=k[0],e=!0);var d=
k[1],l=k[2],m=c[0].length-1,x=f.length-1,r=b.rep([m],0),n=Array(m),y=b.rep([m],0),m=Array(m),B=b.rep([x+1],0),z=[],C=[],D=b.ccsTSolve,F,G,H,J,A,L=0;for(F=0;F<x;++F){J=0;G=f[F];for(H=f[F+1];G<H;++G)A=a.Pinv[d[G]],m[J]=A,y[A]=l[G],++J;m.length=J;D(c,y,r,m,n);for(G=m.length-1;-1!==G;--G)y[m[G]]=0;D(g,r,y,n,m);if(e)return y;for(G=n.length-1;-1!==G;--G)r[n[G]]=0;for(G=m.length-1;-1!==G;--G)A=m[G],z[L]=A,C[L]=y[A],y[A]=0,++L;B[F+1]=L}return[B,z,C]};b.ccsbinop=function(a,k){"undefined"===typeof k&&(k="");
return b.compile("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+k+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+
a+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")};(function(){var a,k,c,g;for(a in b.ops2)k=isFinite(eval("1"+b.ops2[a]+"0"))?"[Y[0],Y[1],numeric."+a+"(X,Y[2])]":"NaN",c=isFinite(eval("0"+b.ops2[a]+"1"))?"[X[0],X[1],numeric."+a+"(X[2],Y)]":"NaN",g=isFinite(eval("1"+b.ops2[a]+"0"))&&isFinite(eval("0"+b.ops2[a]+"1"))?"numeric.ccs"+a+"MM(X,Y)":"NaN",b["ccs"+a+"MM"]=
b.ccsbinop("zk = xk "+b.ops2[a]+"yk;"),b["ccs"+a]=b.compile("X","Y",'if(typeof X === "number") return '+k+';\nif(typeof Y === "number") return '+c+";\nreturn "+g+";\n")})();b.ccsScatter=function(a){var k=a[0],c=a[1];a=a[2];var g=b.sup(c)+1,f=k.length,e=b.rep([g],0),d=Array(f),l=Array(f),m=b.rep([g],0),x;for(x=0;x<f;++x)m[c[x]]++;for(x=0;x<g;++x)e[x+1]=e[x]+m[x];var g=e.slice(0),r;for(x=0;x<f;++x)r=c[x],m=g[r],d[m]=k[x],l[m]=a[x],g[r]+=1;return[e,d,l]};b.ccsGather=function(a){var b=a[0],c=a[1];a=a[2];
var g=b.length-1,f=c.length,e=Array(f),d=Array(f),f=Array(f),l,m,x,r;for(l=r=0;l<g;++l)for(m=b[l],x=b[l+1];m!==x;++m)d[r]=l,e[r]=c[m],f[r]=a[m],++r;return[e,d,f]};b.sdim=function k(c,b,f){"undefined"===typeof b&&(b=[]);if("object"!==typeof c)return b;"undefined"===typeof f&&(f=0);f in b||(b[f]=0);c.length>b[f]&&(b[f]=c.length);for(var e in c)c.hasOwnProperty(e)&&k(c[e],b,f+1);return b};b.sclone=function c(g,f,e){"undefined"===typeof f&&(f=0);"undefined"===typeof e&&(e=b.sdim(g).length);var d,l=Array(g.length);
if(f===e-1){for(d in g)g.hasOwnProperty(d)&&(l[d]=g[d]);return l}for(d in g)g.hasOwnProperty(d)&&(l[d]=c(g[d],f+1,e));return l};b.sdiag=function(c){for(var b=c.length,f=Array(b),e,b=b-1;1<=b;b-=2)e=b-1,f[b]=[],f[b][b]=c[b],f[e]=[],f[e][e]=c[e];0===b&&(f[0]=[],f[0][0]=c[b]);return f};b.sidentity=function(c){return b.sdiag(b.rep([c],1))};b.stranspose=function(c){var b=[],f,e,d;for(f in c)if(c.hasOwnProperty(f))for(e in d=c[f],d)d.hasOwnProperty(e)&&("object"!==typeof b[e]&&(b[e]=[]),b[e][f]=d[e]);return b};
b.sLUP=function(c,b){throw Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.");};b.sdotMM=function(c,g){var f=c.length,e=b.stranspose(g),d=e.length,l,m,x,r,n,y=Array(f),B;for(m=f-1;0<=m;m--){B=[];f=c[m];for(r=d-1;0<=r;r--){n=0;l=e[r];for(x in f)f.hasOwnProperty(x)&&x in l&&(n+=f[x]*l[x]);n&&(B[r]=n)}y[m]=B}return y};b.sdotMV=function(c,b){var f=c.length,e,d,l=Array(f),m;for(e=f-1;0<=e;e--){f=c[e];m=0;for(d in f)f.hasOwnProperty(d)&&
b[d]&&(m+=f[d]*b[d]);m&&(l[e]=m)}return l};b.sdotVM=function(c,b){var f,e,d,l,m=[];for(f in c)if(c.hasOwnProperty(f))for(e in d=b[f],l=c[f],d)d.hasOwnProperty(e)&&(m[e]||(m[e]=0),m[e]+=l*d[e]);return m};b.sdotVV=function(c,b){var f,e=0;for(f in c)c[f]&&b[f]&&(e+=c[f]*b[f]);return e};b.sdot=function(c,g){var f=b.sdim(c).length,e=b.sdim(g).length;switch(1E3*f+e){case 0:return c*g;case 1001:return b.sdotVV(c,g);case 2001:return b.sdotMV(c,g);case 1002:return b.sdotVM(c,g);case 2002:return b.sdotMM(c,
g);default:throw Error("numeric.sdot not implemented for tensors of order "+f+" and "+e);}};b.sscatter=function(c){var b,f,e,d=c.length,l=[],m;for(f=c[0].length-1;0<=f;--f)if(c[d-1][f]){m=l;for(e=0;e<d-2;e++)b=c[e][f],m[b]||(m[b]=[]),m=m[b];m[c[e][f]]=c[e+1][f]}return l};b.sgather=function g(b,e,d){"undefined"===typeof e&&(e=[]);"undefined"===typeof d&&(d=[]);var l,m,x;l=d.length;for(m in b)if(b.hasOwnProperty(m))if(d[l]=parseInt(m),x=b[m],"number"===typeof x){if(x){if(0===e.length)for(m=l+1;0<=m;--m)e[m]=
[];for(m=l;0<=m;--m)e[m].push(d[m]);e[l+1].push(x)}}else g(x,e,d);d.length>l&&d.pop();return e};b.cLU=function(g){var f=g[0],e=g[1],d=g[2],l=f.length;g=0;var m,x,r;for(m=0;m<l;m++)f[m]>g&&(g=f[m]);g++;var n=Array(g),y=Array(g),B=b.rep([g],Infinity),z=b.rep([g],-Infinity),C,D;for(r=0;r<l;r++)m=f[r],x=e[r],x<B[m]&&(B[m]=x),x>z[m]&&(z[m]=x);for(m=0;m<g-1;m++)z[m]>z[m+1]&&(z[m+1]=z[m]);for(m=g-1;1<=m;m--)B[m]<B[m-1]&&(B[m-1]=B[m]);for(m=0;m<g;m++)y[m]=b.rep([z[m]-B[m]+1],0),n[m]=b.rep([m-B[m]],0);for(r=
0;r<l;r++)m=f[r],y[m][e[r]-B[m]]=d[r];for(m=0;m<g-1;m++)for(f=m-B[m],d=y[m],x=m+1;B[x]<=m&&x<g;x++)if(e=m-B[x],l=z[m]-m,C=y[x],D=C[e]/d[f]){for(r=1;r<=l;r++)C[r+e]-=D*d[r+f];n[x][m-B[x]]=D}d=[];C=[];r=[];D=[];var F=[],G=[],H,J;for(m=H=l=0;m<g;m++){f=B[m];e=z[m];J=y[m];for(x=m;x<=e;x++)J[x-f]&&(d[l]=m,C[l]=x,r[l]=J[x-f],l++);J=n[m];for(x=f;x<m;x++)J[x-f]&&(D[H]=m,F[H]=x,G[H]=J[x-f],H++);D[H]=m;F[H]=m;G[H]=1;H++}return{U:[d,C,r],L:[D,F,G]}};b.cLUsolve=function(g,f){var e=g.L,d=g.U,l=b.clone(f),m=e[1],
e=e[2],x=d[1],r=d[2],d=d[0].length,n=l.length,y,B;for(y=B=0;y<n;y++){for(;m[B]<y;)l[y]-=e[B]*l[m[B]],B++;B++}B=d-1;for(y=n-1;0<=y;y--){for(;x[B]>y;)l[y]-=r[B]*l[x[B]],B--;l[y]/=r[B];B--}return l};b.cgrid=function(g,f){"number"===typeof g&&(g=[g,g]);var e=b.rep(g,-1),d,l,m;if("function"!==typeof f)switch(f){case "L":f=function(d,b){return d>=g[0]/2||b<g[1]/2};break;default:f=function(d,b){return!0}}m=0;for(d=1;d<g[0]-1;d++)for(l=1;l<g[1]-1;l++)f(d,l)&&(e[d][l]=m,m++);return e};b.cdelsq=function(g){var f=
[[-1,0],[0,-1],[0,1],[1,0]],e=b.dim(g),d=e[0],e=e[1],l,m,x,r,n,y=[],B=[],z=[];for(l=1;l<d-1;l++)for(m=1;m<e-1;m++)if(!(0>g[l][m])){for(x=0;4>x;x++)r=l+f[x][0],n=m+f[x][1],0>g[r][n]||(y.push(g[l][m]),B.push(g[r][n]),z.push(-1));y.push(g[l][m]);B.push(g[l][m]);z.push(4)}return[y,B,z]};b.cdotMV=function(g,f){var e,d=g[0],l=g[1],m=g[2],x,r=d.length;for(x=e=0;x<r;x++)d[x]>e&&(e=d[x]);e++;e=b.rep([e],0);for(x=0;x<r;x++)e[d[x]]+=m[x]*f[l[x]];return e};b.Spline=function(b,f,e,d,l){this.x=b;this.yl=f;this.yr=
e;this.kl=d;this.kr=l};b.Spline.prototype._at=function(g,f){var e=this.x,d=this.yl,l=this.yr,m=this.kr,x,r=b.add,n=b.sub,y=b.mul;x=n(y(this.kl[f],e[f+1]-e[f]),n(l[f+1],d[f]));m=r(y(m[f+1],e[f]-e[f+1]),n(l[f+1],d[f]));e=(g-e[f])/(e[f+1]-e[f]);n=e*(1-e);return r(r(r(y(1-e,d[f]),y(e,l[f+1])),y(x,n*(1-e))),y(m,n*e))};b.Spline.prototype.at=function(b){if("number"===typeof b){var f=this.x,e=f.length,d,l,m=Math.floor;d=0;for(e-=1;1<e-d;)l=m((d+e)/2),f[l]<=b?d=l:e=l;return this._at(b,d)}e=b.length;f=Array(e);
for(d=e-1;-1!==d;--d)f[d]=this.at(b[d]);return f};b.Spline.prototype.diff=function(){for(var g=this.x,f=this.yl,e=this.yr,d=this.kl,l=this.kr,m=f.length,x,r,n=Array(m),y=Array(m),B=b.add,z=b.mul,C=b.div,D=b.sub,m=m-1;-1!==m;--m)x=g[m+1]-g[m],r=D(e[m+1],f[m]),n[m]=C(B(z(r,6),z(d[m],-4*x),z(l[m+1],-2*x)),x*x),y[m+1]=C(B(z(r,-6),z(d[m],2*x),z(l[m+1],4*x)),x*x);return new b.Spline(g,d,l,n,y)};b.Spline.prototype.roots=function(){var b=[],f=this.x,e=this.yl,d=this.yr,l=this.kl,m=this.kr;"number"===typeof e[0]&&
(e=[e],d=[d],l=[l],m=[m]);var x=e.length,r=f.length-1,n,y,B,z,C,D,F,b=Array(x),G,H,J,A,L,O,K,Q,M,Z=Math.sqrt;for(n=0;n!==x;++n){z=e[n];C=d[n];D=l[n];F=m[n];G=[];for(y=0;y!==r;y++){0<y&&0>C[y]*z[y]&&G.push(f[y]);B=f[y+1]-f[y];A=z[y];L=C[y+1];H=D[y]/B;J=F[y+1]/B;O=(H-J+3*(A-L))*(H-J+3*(A-L))+12*J*A;B=J+3*A+2*H-3*L;A=3*(J+H+2*(A-L));0>=O?(H=B/A,O=H>f[y]&&H<f[y+1]?[f[y],H,f[y+1]]:[f[y],f[y+1]]):(H=(B-Z(O))/A,K=(B+Z(O))/A,O=[f[y]],H>f[y]&&H<f[y+1]&&O.push(H),K>f[y]&&K<f[y+1]&&O.push(K),O.push(f[y+1]));
L=O[0];H=this._at(L,y);for(B=0;B<O.length-1;B++)if(Q=O[B+1],K=this._at(Q,y),0===H)G.push(L),L=Q,H=K;else if(0===K||0<H*K)L=Q,H=K;else{for(J=0;;){M=(H*Q-K*L)/(H-K);if(M<=L||M>=Q)break;A=this._at(M,y);if(0<A*K)Q=M,K=A,-1===J&&(H*=0.5),J=-1;else if(0<A*H)L=M,H=A,1===J&&(K*=0.5),J=1;else break}G.push(M);L=O[B+1];H=this._at(L,y)}0===K&&G.push(Q)}b[n]=G}return"number"===typeof this.yl[0]?b[0]:b};b.spline=function(g,f,e,d){var l=g.length,m=[],x=[],r=[],n,y=b.sub,B=b.mul,z=b.add;for(n=l-2;0<=n;n--)x[n]=g[n+
1]-g[n],r[n]=y(f[n+1],f[n]);if("string"===typeof e||"string"===typeof d)e=d="periodic";y=[[],[],[]];switch(typeof e){case "undefined":m[0]=B(3/(x[0]*x[0]),r[0]);y[0].push(0,0);y[1].push(0,1);y[2].push(2/x[0],1/x[0]);break;case "string":m[0]=z(B(3/(x[l-2]*x[l-2]),r[l-2]),B(3/(x[0]*x[0]),r[0]));y[0].push(0,0,0);y[1].push(l-2,0,1);y[2].push(1/x[l-2],2/x[l-2]+2/x[0],1/x[0]);break;default:m[0]=e,y[0].push(0),y[1].push(0),y[2].push(1)}for(n=1;n<l-1;n++)m[n]=z(B(3/(x[n-1]*x[n-1]),r[n-1]),B(3/(x[n]*x[n]),
r[n])),y[0].push(n,n,n),y[1].push(n-1,n,n+1),y[2].push(1/x[n-1],2/x[n-1]+2/x[n],1/x[n]);switch(typeof d){case "undefined":m[l-1]=B(3/(x[l-2]*x[l-2]),r[l-2]);y[0].push(l-1,l-1);y[1].push(l-2,l-1);y[2].push(1/x[l-2],2/x[l-2]);break;case "string":y[1][y[1].length-1]=0;break;default:m[l-1]=d,y[0].push(l-1),y[1].push(l-1),y[2].push(1)}m="number"!==typeof m[0]?b.transpose(m):[m];d=Array(m.length);if("string"===typeof e)for(n=d.length-1;-1!==n;--n)d[n]=b.ccsLUPSolve(b.ccsLUP(b.ccsScatter(y)),m[n]),d[n][l-
1]=d[n][0];else for(n=d.length-1;-1!==n;--n)d[n]=b.cLUsolve(b.cLU(y),m[n]);d="number"===typeof f[0]?d[0]:b.transpose(d);return new b.Spline(g,f,f,d,d)};b.fftpow2=function f(b,d){var l=b.length;if(1!==l){var m=Math.cos,x=Math.sin,r,n,y=Array(l/2),B=Array(l/2),z=Array(l/2),C=Array(l/2);n=l/2;for(r=l-1;-1!==r;--r)--n,z[n]=b[r],C[n]=d[r],--r,y[n]=b[r],B[n]=d[r];f(y,B);f(z,C);n=l/2;var D,F=-6.283185307179586/l,G;for(r=l-1;-1!==r;--r)--n,-1===n&&(n=l/2-1),D=F*r,G=m(D),D=x(D),b[r]=y[n]+G*z[n]-D*C[n],d[r]=
B[n]+G*C[n]+D*z[n]}};b._ifftpow2=function e(d,b){var m=d.length;if(1!==m){var x=Math.cos,r=Math.sin,n,y,B=Array(m/2),z=Array(m/2),C=Array(m/2),D=Array(m/2);y=m/2;for(n=m-1;-1!==n;--n)--y,C[y]=d[n],D[y]=b[n],--n,B[y]=d[n],z[y]=b[n];e(B,z);e(C,D);y=m/2;var F,G=6.283185307179586/m,H;for(n=m-1;-1!==n;--n)--y,-1===y&&(y=m/2-1),F=G*n,H=x(F),F=r(F),d[n]=B[y]+H*C[y]-F*D[y],b[n]=z[y]+H*D[y]+F*C[y]}};b.ifftpow2=function(e,d){b._ifftpow2(e,d);b.diveq(e,e.length);b.diveq(d,d.length)};b.convpow2=function(e,d,
l,m){b.fftpow2(e,d);b.fftpow2(l,m);var x,r,n,y,B;for(x=e.length-1;-1!==x;--x)r=e[x],y=d[x],n=l[x],B=m[x],e[x]=r*n-y*B,d[x]=r*B+y*n;b.ifftpow2(e,d)};b.T.prototype.fft=function(){var e=this.x,d=this.y,l=e.length,m=Math.log,x=m(2),m=Math.ceil(m(2*l-1)/x),r=Math.pow(2,m),m=b.rep([r],0),x=b.rep([r],0),n=Math.cos,y=Math.sin,B,z=-3.141592653589793/l,C=b.rep([r],0),D=b.rep([r],0);for(B=0;B<l;B++)C[B]=e[B];if("undefined"!==typeof d)for(B=0;B<l;B++)D[B]=d[B];for(B=m[0]=1;B<=r/2;B++)e=z*B*B,m[B]=n(e),x[B]=y(e),
m[r-B]=n(e),x[r-B]=y(e);e=new b.T(C,D);d=new b.T(m,x);e=e.mul(d);b.convpow2(e.x,e.y,b.clone(d.x),b.neg(d.y));e=e.mul(d);e.x.length=l;e.y.length=l;return e};b.T.prototype.ifft=function(){var e=this.x,d=this.y,l=e.length,m=Math.log,x=m(2),m=Math.ceil(m(2*l-1)/x),r=Math.pow(2,m),m=b.rep([r],0),x=b.rep([r],0),n=Math.cos,y=Math.sin,B,z=3.141592653589793/l,C=b.rep([r],0),D=b.rep([r],0);for(B=0;B<l;B++)C[B]=e[B];if("undefined"!==typeof d)for(B=0;B<l;B++)D[B]=d[B];for(B=m[0]=1;B<=r/2;B++)e=z*B*B,m[B]=n(e),
x[B]=y(e),m[r-B]=n(e),x[r-B]=y(e);e=new b.T(C,D);d=new b.T(m,x);e=e.mul(d);b.convpow2(e.x,e.y,b.clone(d.x),b.neg(d.y));e=e.mul(d);e.x.length=l;e.y.length=l;return e.div(l)};b.gradient=function(e,d){var l=d.length,m=e(d);if(isNaN(m))throw Error("gradient: f(x) is a NaN!");var x=Math.max,r,n=b.clone(d),y,B,z=Array(l),C,x=Math.max,D=Math.abs,F=Math.min,G,H,J,A=0,L;for(r=0;r<l;r++)for(var O=x(1E-6*m,1E-8);;){++A;if(20<A)throw Error("Numerical gradient fails");n[r]=d[r]+O;y=e(n);n[r]=d[r]-O;B=e(n);n[r]=
d[r];if(isNaN(y)||isNaN(B))O/=16;else if(z[r]=(y-B)/(2*O),G=d[r]-O,H=d[r],J=d[r]+O,C=(y-m)/O,L=(m-B)/O,y=x(D(z[r]),D(m),D(y),D(B),D(G),D(H),D(J),1E-8),C=F(x(D(C-z[r]),D(L-z[r]),D(C-L))/y,O/y),0.001<C)O/=16;else break}return z};b.uncmin=function(e,d,l,m,x,r,n){var y=b.gradient;"undefined"===typeof n&&(n={});"undefined"===typeof l&&(l=1E-8);"undefined"===typeof m&&(m=function(d){return y(e,d)});"undefined"===typeof x&&(x=1E3);d=b.clone(d);var B=d.length,z=e(d),C,D;if(isNaN(z))throw Error("uncmin: f(x0) is a NaN!");
var F=Math.max,G=b.norm2;l=F(l,b.epsilon);var H,J;n=n.Hinv||b.identity(B);var B=b.dot,F=b.sub,A=b.add,L=b.tensor,O=b.div,K=b.mul,Q=b.all,M=b.isFinite,Z=b.neg,I=0,P,E,N,S,V="";for(J=m(d);I<x;){if("function"===typeof r&&r(I,d,z,J,n)){V="Callback returned true";break}if(!Q(M(J))){V="Gradient has Infinity or NaN";break}H=Z(B(n,J));if(!Q(M(H))){V="Search direction has Infinity or NaN";break}S=G(H);if(S<l){V="Newton step smaller than tol";break}N=1;D=B(J,H);for(E=d;I<x&&!(N*S<l);)if(P=K(H,N),E=A(d,P),C=
e(E),C-z>=0.1*N*D||isNaN(C))N*=0.5,++I;else break;if(N*S<l){V="Line search step size smaller than tol";break}if(I===x){V="maxit reached during line search";break}D=m(E);d=F(D,J);J=B(d,P);z=B(n,d);n=F(A(n,K((J+B(d,z))/(J*J),L(P,P))),O(A(L(z,P),L(P,z)),J));d=E;z=C;J=D;++I}return{solution:d,f:z,gradient:J,invHessian:n,iterations:I,message:V}};b.Dopri=function(b,d,l,m,x,r,n){this.x=b;this.y=d;this.f=l;this.ymid=m;this.iterations=x;this.events=n;this.message=r};b.Dopri.prototype._at=function(e,d){var l=
this.x,m=this.y,x=this.f,r=this.ymid,n,y,B,z=b.add,C=b.mul,D=b.sub,F;n=l[d];y=l[d+1];l=m[d];m=m[d+1];B=n+0.5*(y-n);r=r[d];F=D(x[d],C(l,1/(n-B)+2/(n-y)));x=D(x[d+1],C(m,1/(y-B)+2/(y-n)));n=[(e-y)*(e-y)*(e-B)/((n-y)*(n-y))/(n-B),(e-n)*(e-n)*(e-y)*(e-y)/((n-B)*(n-B))/((y-B)*(y-B)),(e-n)*(e-n)*(e-B)/((y-n)*(y-n))/(y-B),(e-n)*(e-y)*(e-y)*(e-B)/((n-y)*(n-y))/(n-B),(e-y)*(e-n)*(e-n)*(e-B)/((n-y)*(n-y))/(y-B)];return z(z(z(z(C(l,n[0]),C(r,n[1])),C(m,n[2])),C(F,n[3])),C(x,n[4]))};b.Dopri.prototype.at=function(b){var d,
l,m,x=Math.floor;if("number"!==typeof b){d=b.length;l=Array(d);for(d-=1;-1!==d;--d)l[d]=this.at(b[d]);return l}var r=this.x;d=0;for(l=r.length-1;1<l-d;)m=x(0.5*(d+l)),r[m]<=b?d=m:l=m;return this._at(b,d)};b.dopri=function(e,d,l,m,x,r,n){"undefined"===typeof x&&(x=1E-6);"undefined"===typeof r&&(r=1E3);var y=[e],B=[l],z=[m(e,l)],C,D,F,G,H,J,A=[],L=[0.075,0.225],O=[44/45,-56/15,32/9],K=[19372/6561,-25360/2187,64448/6561,-212/729],Q=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],M=[35/384,0,500/1113,
125/192,-2187/6784,11/84],Z=[0.10013431883002395,0,0.3918321794184259,-0.02982460176594817,0.05893268337240795,-0.04497888809104361,0.023904308236133973],I=[0.2,0.3,0.8,8/9,1,1],P=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,0.025],E=0,N,S=(d-e)/10,V=0,X=b.add,R=b.mul,ga=Math.min,aa=Math.abs,pa=b.norminf,fa=Math.pow,v=b.any,ea=b.lt,ba=b.and,U,W,da=new b.Dopri(y,B,z,A,-1,"");for("function"===typeof n&&(U=n(e,l));e<d&&V<r;)if(++V,e+S>d&&(S=d-e),C=m(e+I[0]*S,X(l,R(0.2*S,z[E]))),D=m(e+I[1]*S,X(X(l,
R(L[0]*S,z[E])),R(L[1]*S,C))),F=m(e+I[2]*S,X(X(X(l,R(O[0]*S,z[E])),R(O[1]*S,C)),R(O[2]*S,D))),G=m(e+I[3]*S,X(X(X(X(l,R(K[0]*S,z[E])),R(K[1]*S,C)),R(K[2]*S,D)),R(K[3]*S,F))),H=m(e+I[4]*S,X(X(X(X(X(l,R(Q[0]*S,z[E])),R(Q[1]*S,C)),R(Q[2]*S,D)),R(Q[3]*S,F)),R(Q[4]*S,G))),C=X(X(X(X(X(l,R(z[E],S*M[0])),R(D,S*M[2])),R(F,S*M[3])),R(G,S*M[4])),R(H,S*M[5])),J=m(e+S,C),N=X(X(X(X(X(R(z[E],S*P[0]),R(D,S*P[2])),R(F,S*P[3])),R(G,S*P[4])),R(H,S*P[5])),R(J,S*P[6])),N="number"===typeof N?aa(N):pa(N),N>x){if(S=0.2*S*
fa(x/N,0.25),e+S===e){da.msg="Step size became too small";break}}else{A[E]=X(X(X(X(X(X(l,R(z[E],S*Z[0])),R(D,S*Z[2])),R(F,S*Z[3])),R(G,S*Z[4])),R(H,S*Z[5])),R(J,S*Z[6]));++E;y[E]=e+S;B[E]=C;z[E]=J;if("function"===typeof n){var ca;D=e;F=e+0.5*S;var $;W=n(F,A[E-1]);l=ba(ea(U,0),ea(0,W));v(l)||(D=F,F=e+S,U=W,W=n(F,C),l=ba(ea(U,0),ea(0,W)));if(v(l)){d=0;for(r=x=1;;){if("number"===typeof U)$=(r*W*D-x*U*F)/(r*W-x*U);else for($=F,y=U.length-1;-1!==y;--y)0>U[y]&&0<W[y]&&($=ga($,(r*W[y]*D-x*U[y]*F)/(r*W[y]-
x*U[y])));if($<=D||$>=F)break;ca=da._at($,E-1);B=n($,ca);y=ba(ea(U,0),ea(0,B));v(y)?(F=$,W=B,l=y,r=1,x=-1===d?0.5*x:1,d=-1):(D=$,U=B,x=1,r=1===d?0.5*r:1,d=1)}C=da._at(0.5*(e+$),E-1);da.f[E]=m($,ca);da.x[E]=$;da.y[E]=ca;da.ymid[E-1]=C;da.events=l;da.iterations=V;return da}}e+=S;l=C;U=W;S=ga(0.8*S*fa(x/N,0.25),4*S)}da.iterations=V;return da};b.LU=function(e,d){var l=Math.abs,m,x,r,n,y,B,z=e.length,C=z-1,D=Array(z);d||(e=b.clone(e));for(r=0;r<z;++r){y=r;n=e[r];B=l(n[r]);for(x=r+1;x<z;++x)m=l(e[x][r]),
B<m&&(B=m,y=x);D[r]=y;y!=r&&(e[r]=e[y],e[y]=n,n=e[r]);x=n[r];for(m=r+1;m<z;++m)e[m][r]/=x;for(m=r+1;m<z;++m){y=e[m];for(x=r+1;x<C;++x)y[x]-=y[r]*n[x],++x,y[x]-=y[r]*n[x];x===C&&(y[x]-=y[r]*n[x])}}return{LU:e,P:D}};b.LUsolve=function(e,d){var l,m,x=e.LU,r=x.length,n=b.clone(d),y=e.P,B;for(l=r-1;-1!==l;--l)n[l]=d[l];for(l=0;l<r;++l)for(m=y[l],y[l]!==l&&(B=n[l],n[l]=n[m],n[m]=B),B=x[l],m=0;m<l;++m)n[l]-=n[m]*B[m];for(l=r-1;0<=l;--l){B=x[l];for(m=l+1;m<r;++m)n[l]-=n[m]*B[m];n[l]/=B[l]}return n};b.solve=
function(e,d,l){return b.LUsolve(b.LU(e,l),d)};b.echelonize=function(e){var d=b.dim(e),l=d[0],d=d[1],m=b.identity(l),x=Array(l),r,n,y,B,z,C,D,F,G=Math.abs,H=b.diveq;e=b.clone(e);for(r=0;r<l;++r){y=0;z=e[r];C=m[r];for(n=1;n<d;++n)G(z[y])<G(z[n])&&(y=n);x[r]=y;H(C,z[y]);H(z,z[y]);for(n=0;n<l;++n)if(n!==r){D=e[n];F=D[y];for(B=d-1;-1!==B;--B)D[B]-=z[B]*F;D=m[n];for(B=l-1;-1!==B;--B)D[B]-=C[B]*F}}return{I:m,A:e,P:x}};b.__solveLP=function(e,d,l,m,x,r,n){var y=b.sum,B=b.mul,z=b.sub,C=b.dot,D=b.div,F=b.add,
G=e.length,H=l.length,J,A=!1,L=1;b.transpose(d);var O=b.transpose,K=Math.sqrt,Q=Math.abs,M=Math.min,Z=b.all,I=b.gt,P=Array(G),E=Array(H);b.rep([H],1);var N=b.solve,S=z(l,C(d,r)),V,X=C(e,e);for(V=0;V<x;++V){var R;for(R=H-1;-1!==R;--R)E[R]=D(d[R],S[R]);J=O(E);for(R=G-1;-1!==R;--R)P[R]=y(J[R]);L=0.25*Q(X/C(e,P));R=100*K(X/C(P,P));if(!isFinite(L)||L>R)L=R;A=F(e,B(L,P));J=C(J,E);for(R=G-1;-1!==R;--R)J[R][R]+=1;J=N(J,D(A,L),!0);var S=D(S,C(d,J)),ga=1;for(R=H-1;-1!==R;--R)0>S[R]&&(ga=M(ga,-0.999*S[R]));
J=z(r,B(J,ga));S=z(l,C(d,J));if(!Z(I(S,0)))return{solution:r,message:"",iterations:V};r=J;if(L<m)return{solution:J,message:"",iterations:V};if(n)for(L=C(e,A),ga=C(d,A),A=!0,R=H-1;-1!==R;--R){if(0>L*ga[R]){A=!1;break}}else A=0<=r[G-1]?!1:!0;if(A)return{solution:J,message:"Unbounded",iterations:V}}return{solution:r,message:"maximum iteration count exceeded",iterations:V}};b._solveLP=function(e,d,l,m,x){var r=e.length,n=l.length,y=b.sub,B=b.dot,z=b.rep([r],0).concat([1]),n=b.rep([n,1],-1),C=b.blockMatrix([[d,
n]]),n=b.rep([r],0).concat(Math.max(0,b.sup(b.neg(l)))+1),z=b.__solveLP(z,C,l,m,x,n,!1),n=b.clone(z.solution);n.length=r;if(0>b.inf(y(l,B(d,n))))return{solution:NaN,message:"Infeasible",iterations:z.iterations};e=b.__solveLP(e,d,l,m,x-z.iterations,n,!0);e.iterations+=z.iterations;return e};b.solveLP=function(e,d,l,m,x,r,n){"undefined"===typeof n&&(n=1E3);"undefined"===typeof r&&(r=b.epsilon);if("undefined"===typeof m)return b._solveLP(e,d,l,r,n);var y=m.length,B=m[0].length,z=d.length,C=b.echelonize(m),
D=b.rep([B],0),F=C.P,G=[],H;for(H=F.length-1;-1!==H;--H)D[F[H]]=1;for(H=B-1;-1!==H;--H)0===D[H]&&G.push(H);H=b.getRange;y=b.linspace(0,y-1);z=b.linspace(0,z-1);m=H(m,y,G);y=H(d,z,F);H=H(d,z,G);d=b.dot;z=b.sub;B=d(y,C.I);y=z(H,d(B,m));l=z(l,d(B,x));B=Array(F.length);D=Array(G.length);for(H=F.length-1;-1!==H;--H)B[H]=e[F[H]];for(H=G.length-1;-1!==H;--H)D[H]=e[G[H]];H=z(D,d(B,d(C.I,m)));r=b._solveLP(H,y,l,r,n);n=r.solution;if(n!==n)return r;x=d(C.I,z(x,d(m,n)));e=Array(e.length);for(H=F.length-1;-1!==
H;--H)e[F[H]]=x[H];for(H=G.length-1;-1!==H;--H)e[G[H]]=n[H];return{solution:e,message:r.message,iterations:r.iterations}};b.MPStoLP=function(e){function d(d){throw Error("MPStoLP: "+d+"\nLine "+r+": "+e[r]+"\nCurrent state: "+m[l]+"\n");}e instanceof String&&e.split("\n");var l=0,m="Initial state;NAME;ROWS;COLUMNS;RHS;BOUNDS;ENDATA".split(";"),x=e.length,r,n,y,B=0,z={},C=[],D=0,F={},G=0,H,J=[],A=[],L=[];for(r=0;r<x;++r){y=e[r];var O=y.match(/\S*/g),K=[];for(n=0;n<O.length;++n)""!==O[n]&&K.push(O[n]);
if(0!==K.length){for(n=0;n<m.length&&y.substr(0,m[n].length)!==m[n];++n);if(n<m.length){if(l=n,1===n&&(H=K[1]),6===n)return{name:H,c:J,A:b.transpose(A),b:L,rows:z,vars:F}}else switch(l){case 0:case 1:d("Unexpected line");case 2:switch(K[0]){case "N":0===B?B=K[1]:d("Two or more N rows");break;case "L":z[K[1]]=D;C[D]=1;L[D]=0;++D;break;case "G":z[K[1]]=D;C[D]=-1;L[D]=0;++D;break;case "E":z[K[1]]=D;C[D]=0;L[D]=0;++D;break;default:d("Parse error "+b.prettyPrint(K))}break;case 3:F.hasOwnProperty(K[0])||
(F[K[0]]=G,J[G]=0,A[G]=b.rep([D],0),++G);y=F[K[0]];for(n=1;n<K.length;n+=2)K[n]===B?J[y]=parseFloat(K[n+1]):(O=z[K[n]],A[y][O]=(0>C[O]?-1:1)*parseFloat(K[n+1]));break;case 4:for(n=1;n<K.length;n+=2)L[z[K[n]]]=(0>C[z[K[n]]]?-1:1)*parseFloat(K[n+1]);break;case 6:d("Internal error")}}}d("Reached end of file without ENDATA")};b.seedrandom={pow:Math.pow,random:Math.random};(function(b,d,l,m,x,r,n){function y(d){var b,e,m=this,r=d.length,n=0,x=m.i=m.j=m.m=0;m.S=[];m.c=[];for(r||(d=[r++]);n<l;)m.S[n]=n++;
for(n=0;n<l;n++)b=m.S[n],x=x+b+d[n%r]&l-1,e=m.S[x],m.S[n]=e,m.S[x]=b;m.g=function(d){var b=m.S,e=m.i+1&l-1,r=b[e],n=m.j+r&l-1,x=b[n];b[e]=x;b[n]=r;for(var y=b[r+x&l-1];--d;)e=e+1&l-1,r=b[e],n=n+r&l-1,x=b[n],b[e]=x,b[n]=r,y=y*l+b[r+x&l-1];m.i=e;m.j=n;return y};m.g(l)}function B(d,b,e,l,m){e=[];m=typeof d;if(b&&"object"==m)for(l in d)if(5>l.indexOf("S"))try{e.push(B(d[l],b-1))}catch(r){}return e.length?e:d+("string"!=m?"\x00":"")}function z(d,b,e,m){d+="";for(m=e=0;m<d.length;m++){var r=b,n=m&l-1,x=
(e^=19*b[m&l-1])+d.charCodeAt(m);r[n]=x&l-1}d="";for(m in b)d+=String.fromCharCode(b[m]);return d}d.seedrandom=function(C,D){var F=[],G;C=z(B(D?[C,b]:arguments.length?C:[(new Date).getTime(),b,window],3),F);G=new y(F);z(G.S,b);d.random=function(){for(var d=G.g(m),b=n,e=0;d<x;)d=(d+e)*l,b*=l,e=G.g(1);for(;d>=r;)d/=2,b/=2,e>>>=1;return(d+e)/b};return C};n=d.pow(l,m);x=d.pow(2,x);r=2*x;z(d.random(),b)})([],b.seedrandom,256,6,52);(function(b){function d(b){if("object"!==typeof b)return b;var e=[],l,m=
b.length;for(l=0;l<m;l++)e[l+1]=d(b[l]);return e}function l(d){if("object"!==typeof d)return d;var b=[],e,m=d.length;for(e=1;e<m;e++)b[e-1]=l(d[e]);return b}function m(d,b,e){var l,m,r;for(b=1;b<=e;b+=1){d[b][b]=1/d[b][b];r=-d[b][b];for(l=1;l<b;l+=1)d[l][b]*=r;l=b+1;if(e<l)break;for(m=l;m<=e;m+=1)for(r=d[b][m],d[b][m]=0,l=1;l<=b;l+=1)d[l][m]+=r*d[l][b]}}function x(d,b,e,l){var m,r,n;for(m=1;m<=e;m+=1){n=0;for(b=1;b<m;b+=1)n+=d[b][m]*l[b];l[m]=(l[m]-n)/d[m][m]}for(r=1;r<=e;r+=1)for(m=e+1-r,l[m]/=d[m][m],
n=-l[m],b=1;b<m;b+=1)l[b]+=n*d[b][m]}function r(d,b,e,l){var m,r,n,x,J;for(m=1;m<=e;m+=1){l[1]=m;J=0;r=m-1;if(!(1>r))for(n=1;n<=r;n+=1){x=d[n][m];for(b=1;b<n;b+=1)x-=d[b][m]*d[b][n];x/=d[n][n];d[n][m]=x;J+=x*x}J=d[m][m]-J;if(0>=J)break;d[m][m]=Math.sqrt(J);l[1]=0}}function n(d,b,e,l,n,F,G,H,J,A,L,O,K,Q,M,I){function Y(){for(E=1;E<=l;E+=1){U=0;for(N=1;N<=l;N+=1)U+=d[N][E]*G[N][ea];M[E]=U}V=ga;for(E=1;E<=l;E+=1)M[V+E]=0;for(N=K+1;N<=l;N+=1)for(E=1;E<=l;E+=1)M[V+E]+=d[E][N]*M[N];ra=!0;for(E=K;1<=E;E-=
1){U=M[E];S=pa+E*(E+3)/2;V=S-E;for(N=E+1;N<=K;N+=1)U-=M[S]*M[aa+N],S+=N;U/=M[V];M[aa+E]=U;if(O[E]<L)break;if(0>U)break;ra=!1;R=E}if(!ra)for(W=M[v+R]/M[aa+R],E=1;E<=K&&!(O[E]<L)&&!(0>M[aa+E]);E+=1)ba=M[v+E]/M[aa+E],ba<W&&(W=ba,R=E);U=0;for(E=ga+1;E<=ga+l;E+=1)U+=M[E]*M[E];if(Math.abs(U)<=la){if(ra)return I[1]=1,999;for(E=1;E<=K;E+=1)M[v+E]-=W*M[aa+E];M[v+K+1]+=W;return 700}U=0;for(E=1;E<=l;E+=1)U+=M[ga+E]*G[E][ea];da=-M[fa+ea]/U;ha=!0;!ra&&W<da&&(da=W,ha=!1);for(E=1;E<=l;E+=1)n[E]+=da*M[ga+E],Math.abs(n[E])<
la&&(n[E]=0);F[1]+=da*U*(da/2+M[v+K+1]);for(E=1;E<=K;E+=1)M[v+E]-=da*M[aa+E];M[v+K+1]+=da;if(ha){K+=1;O[K]=ea;S=pa+(K-1)*K/2+1;for(E=1;E<=K-1;E+=1)M[S]=M[E],S+=1;if(K===l)M[S]=M[l];else{for(E=l;E>=K+1&&0!==M[E];E-=1){ca=Math.max(Math.abs(M[E-1]),Math.abs(M[E]));$=Math.min(Math.abs(M[E-1]),Math.abs(M[E]));ba=0<=M[E-1]?Math.abs(ca*Math.sqrt(1+$*$/(ca*ca))):-Math.abs(ca*Math.sqrt(1+$*$/(ca*ca)));ca=M[E-1]/ba;$=M[E]/ba;if(1===ca)break;if(0===ca)for(M[E-1]=$*ba,N=1;N<=l;N+=1)ba=d[N][E-1],d[N][E-1]=d[N][E],
d[N][E]=ba;else for(M[E-1]=ba,ja=$/(1+ca),N=1;N<=l;N+=1)ba=ca*d[N][E-1]+$*d[N][E],d[N][E]=ja*(d[N][E-1]+ba)-d[N][E],d[N][E-1]=ba}M[S]=M[K]}}else{U=-H[ea];for(N=1;N<=l;N+=1)U+=n[N]*G[N][ea];if(ea>L)M[fa+ea]=U;else if(M[fa+ea]=-Math.abs(U),0<U){for(N=1;N<=l;N+=1)G[N][ea]=-G[N][ea];H[ea]=-H[ea]}return 700}return 0}function P(){S=pa+R*(R+1)/2+1;V=S+R;if(0===M[V])return 798;ca=Math.max(Math.abs(M[V-1]),Math.abs(M[V]));$=Math.min(Math.abs(M[V-1]),Math.abs(M[V]));ba=0<=M[V-1]?Math.abs(ca*Math.sqrt(1+$*$/
(ca*ca))):-Math.abs(ca*Math.sqrt(1+$*$/(ca*ca)));ca=M[V-1]/ba;$=M[V]/ba;if(1===ca)return 798;if(0===ca){for(E=R+1;E<=K;E+=1)ba=M[V-1],M[V-1]=M[V],M[V]=ba,V+=E;for(E=1;E<=l;E+=1)ba=d[E][R],d[E][R]=d[E][R+1],d[E][R+1]=ba}else{ja=$/(1+ca);for(E=R+1;E<=K;E+=1)ba=ca*M[V-1]+$*M[V],M[V]=ja*(M[V-1]+ba)-M[V],M[V-1]=ba,V+=E;for(E=1;E<=l;E+=1)ba=ca*d[E][R]+$*d[E][R+1],d[E][R+1]=ja*(d[E][R]+ba)-d[E][R+1],d[E][R]=ba}return 0}var E,N,S,V,X,R,ga,aa,pa,fa,v,ea,ba,U,W,da,ca,$,ja,ra,ha,la,sa;J=Math.min(l,A);S=2*l+
J*(J+5)/2+2*A+1;la=1E-60;do la+=la,X=1+0.1*la,sa=1+0.2*la;while(1>=X||1>=sa);for(E=1;E<=l;E+=1)M[E]=b[E];for(E=l+1;E<=S;E+=1)M[E]=0;for(E=1;E<=A;E+=1)O[E]=0;X=[];if(0===I[1]){r(d,e,l,X);if(0!==X[1]){I[1]=2;return}x(d,e,l,b);m(d,e,l)}else{for(N=1;N<=l;N+=1)for(n[N]=0,E=1;E<=N;E+=1)n[N]+=d[E][N]*b[E];for(N=1;N<=l;N+=1)for(b[N]=0,E=N;E<=l;E+=1)b[N]+=d[N][E]*n[E]}F[1]=0;for(N=1;N<=l;N+=1)for(n[N]=b[N],F[1]+=M[N]*n[N],M[N]=0,E=N+1;E<=l;E+=1)d[E][N]=0;F[1]=-F[1]/2;I[1]=0;ga=l;aa=ga+l;v=aa+J;pa=v+J+1;fa=
pa+J*(J+1)/2;b=fa+A;for(E=1;E<=A;E+=1){U=0;for(N=1;N<=l;N+=1)U+=G[N][E]*G[N][E];M[b+E]=Math.sqrt(U)}K=0;Q[1]=0;for(e=Q[2]=0;;){Q[1]+=1;S=fa;for(E=1;E<=A;E+=1){S+=1;U=-H[E];for(N=1;N<=l;N+=1)U+=G[N][E]*n[N];Math.abs(U)<la&&(U=0);if(E>L)M[S]=U;else if(M[S]=-Math.abs(U),0<U){for(N=1;N<=l;N+=1)G[N][E]=-G[N][E];H[E]=-H[E]}}for(E=1;E<=K;E+=1)M[fa+O[E]]=0;ba=ea=0;for(E=1;E<=A;E+=1)M[fa+E]<ba*M[b+E]&&(ea=E,ba=M[fa+E]/M[b+E]);e=0===ea?999:0;if(999===e)break;for(;;){e=Y();if(0===e)break;if(999===e)return;if(700===
e){if(R!==K)for(;;){P();V=S-R;for(E=1;E<=R;E+=1)M[V]=M[S],S+=1,V+=1;M[v+R]=M[v+R+1];O[R]=O[R+1];R+=1;e=R<K?797:0;if(797!==e)break}M[v+K]=M[v+K+1];M[v+K+1]=0;O[K]=0;K-=1;Q[2]+=1}}}}b.solveQP=function(b,e,m,r,x,F){b=d(b);e=d(e);m=d(m);var G,H,J,A,L=[],O=[],K=[],Q=[],M=[];x=x||0;F=F?d(F):[void 0,0];r=r?d(r):[];H=b.length-1;J=m[1].length-1;if(!r)for(G=1;G<=J;G+=1)r[G]=0;for(G=1;G<=J;G+=1)O[G]=0;A=Math.min(H,J);for(G=1;G<=H;G+=1)K[G]=0;L[1]=0;for(G=1;G<=2*H+A*(A+5)/2+2*J+1;G+=1)Q[G]=0;for(G=1;2>=G;G+=
1)M[G]=0;n(b,e,H,H,K,L,m,r,H,J,x,O,0,M,Q,F);b="";1===F[1]&&(b="constraints are inconsistent, no solution!");2===F[1]&&(b="matrix D in quadratic function is not positive definite!");return{solution:l(K),value:l(L),unconstrained_solution:l(e),iterations:l(M),iact:l(O),message:b}}})(b);b.svd=function(e){function d(d,b){d=Math.abs(d);b=Math.abs(b);return d>b?d*Math.sqrt(1+b*b/d/d):0==b?d:b*Math.sqrt(1+d*d/b/b)}var l;l=b.epsilon;var m=1E-64/l,x=0,r=0,n=0,y=0,B=0;e=b.clone(e);var z=e.length,C=e[0].length;
if(z<C)throw"Need more rows than columns";for(var D=Array(C),F=Array(C),r=0;r<C;r++)D[r]=F[r]=0;for(var G=b.rep([C,C],0),H=0,J=0,A=0,L=0,O=0,K=0,Q=0,r=0;r<C;r++){D[r]=J;Q=0;B=r+1;for(n=r;n<z;n++)Q+=e[n][r]*e[n][r];if(Q<=m)J=0;else for(H=e[r][r],J=Math.sqrt(Q),0<=H&&(J=-J),A=H*J-Q,e[r][r]=H-J,n=B;n<C;n++){Q=0;for(y=r;y<z;y++)Q+=e[y][r]*e[y][n];H=Q/A;for(y=r;y<z;y++)e[y][n]+=H*e[y][r]}F[r]=J;Q=0;for(n=B;n<C;n++)Q+=e[r][n]*e[r][n];if(Q<=m)J=0;else{H=e[r][r+1];J=Math.sqrt(Q);0<=H&&(J=-J);A=H*J-Q;e[r][r+
1]=H-J;for(n=B;n<C;n++)D[n]=e[r][n]/A;for(n=B;n<z;n++){Q=0;for(y=B;y<C;y++)Q+=e[n][y]*e[r][y];for(y=B;y<C;y++)e[n][y]+=Q*D[y]}}O=Math.abs(F[r])+Math.abs(D[r]);O>L&&(L=O)}for(r=C-1;-1!=r;r+=-1){if(0!=J){A=J*e[r][r+1];for(n=B;n<C;n++)G[n][r]=e[r][n]/A;for(n=B;n<C;n++){Q=0;for(y=B;y<C;y++)Q+=e[r][y]*G[y][n];for(y=B;y<C;y++)G[y][n]+=Q*G[y][r]}}for(n=B;n<C;n++)G[r][n]=0,G[n][r]=0;G[r][r]=1;J=D[r];B=r}for(r=C-1;-1!=r;r+=-1){B=r+1;J=F[r];for(n=B;n<C;n++)e[r][n]=0;if(0!=J){A=e[r][r]*J;for(n=B;n<C;n++){Q=
0;for(y=B;y<z;y++)Q+=e[y][r]*e[y][n];H=Q/A;for(y=r;y<z;y++)e[y][n]+=H*e[y][r]}for(n=r;n<z;n++)e[n][r]/=J}else for(n=r;n<z;n++)e[n][r]=0;e[r][r]+=1}l*=L;for(y=C-1;-1!=y;y+=-1)for(m=0;50>m;m++){r=!1;for(B=y;-1!=B;B+=-1){if(Math.abs(D[B])<=l){r=!0;break}if(Math.abs(F[B-1])<=l)break}if(!r)for(x=0,Q=1,L=B-1,r=B;r<y+1;r++){H=Q*D[r];D[r]*=x;if(Math.abs(H)<=l)break;J=F[r];A=d(H,J);F[r]=A;x=J/A;Q=-H/A;for(n=0;n<z;n++)O=e[n][L],K=e[n][r],e[n][L]=O*x+K*Q,e[n][r]=-O*Q+K*x}K=F[y];if(B==y){if(0>K)for(F[y]=-K,n=
0;n<C;n++)G[n][y]=-G[n][y];break}if(49<=m)throw"Error: no convergence.";L=F[B];O=F[y-1];J=D[y-1];A=D[y];H=((O-K)*(O+K)+(J-A)*(J+A))/(2*A*O);J=d(H,1);H=0>H?((L-K)*(L+K)+A*(O/(H-J)-A))/L:((L-K)*(L+K)+A*(O/(H+J)-A))/L;Q=x=1;for(r=B+1;r<y+1;r++){J=D[r];O=F[r];A=Q*J;J*=x;K=d(H,A);D[r-1]=K;x=H/K;Q=A/K;H=L*x+J*Q;J=-L*Q+J*x;A=O*Q;O*=x;for(n=0;n<C;n++)L=G[n][r-1],K=G[n][r],G[n][r-1]=L*x+K*Q,G[n][r]=-L*Q+K*x;K=d(H,A);F[r-1]=K;x=H/K;Q=A/K;H=x*J+Q*O;L=-Q*J+x*O;for(n=0;n<z;n++)O=e[n][r-1],K=e[n][r],e[n][r-1]=
O*x+K*Q,e[n][r]=-O*Q+K*x}D[B]=0;D[y]=H;F[y]=L}for(r=0;r<F.length;r++)F[r]<l&&(F[r]=0);for(r=0;r<C;r++)for(n=r-1;0<=n;n--)if(F[n]<F[r]){x=F[n];F[n]=F[r];F[r]=x;for(y=0;y<e.length;y++)l=e[y][r],e[y][r]=e[y][n],e[y][n]=l;for(y=0;y<G.length;y++)l=G[y][r],G[y][r]=G[y][n],G[y][n]=l;r=n}return{U:e,S:F,V:G}};return b});I("math/distance",["require","math/builtin","numeric"],function(b){var h=b("math/builtin"),u=b("numeric"),w={hypot:function(b,h){return 0===b&&0===h?0:Math.abs(b)>Math.abs(h)?Math.abs(b)*Math.sqrt(h/
b*(h/b)+1):Math.abs(h)*Math.sqrt(b/h*(b/h)+1)},mean:function(b,h){return 0<b===0<h?b+0.5*(h-b):0.5*(b+h)},dot:function(b,h,s,a){return b*s+h*a},pointToSegmentParameter:function(b,h,s,a,k,c){var g=this.hypot(k-s,c-a);return 0===g?0:this.dot((b-s)/g,(h-a)/g,(k-s)/g,(c-a)/g)},closestPointOnSegment:function(b,h,s,a,k,c){b=this.pointToSegmentParameter(b,h,s,a,k,c);return 0>=b?[s,a]:1<=b?[k,c]:[s+b*(k-s),a+b*(c-a)]},pointToSegment:function(b,h,s,a,k,c){s=this.closestPointOnSegment(b,h,s,a,k,c);return this.hypot(b-
s[0],h-s[1])},isLine:function(b,p,s,a,k,c){b=u.svd([[b,p,1],[s,a,1],[k,c,1]]).S;return h.approx(b[b.length-1]/b[0],0)},isCircle:function(b,p,s,a,k,c,g,f){b=u.svd([[b*b+p*p,b,p,1],[s*s+a*a,s,a,1],[k*k+c*c,k,c,1],[g*g+f*f,g,f,1]]).S;return h.approx(b[b.length-1]/b[0],0)},isConic:function(b,p,s,a,k,c,g,f,e,d,l,m){b=u.svd([[b*b,p*p,2*b*p,b,p,1],[s*s,a*a,2*s*a,s,a,1],[k*k,c*c,2*k*c,k,c,1],[g*g,f*f,2*g*f,g,f,1],[e*e,d*d,2*e*d,e,d,1],[l*l,m*m,2*l*m,l,m,1]]).S;return h.approx(b[b.length-1]/b[0],0)},conicQuadraticParameters:function(b,
h,s,a,k,c,g,f,e,d){return{a:u.det([[h*h,2*b*h,b,h,1],[a*a,2*s*a,s,a,1],[c*c,2*k*c,k,c,1],[f*f,2*g*f,g,f,1],[d*d,2*e*d,e,d,1]]),b:u.det([[b*b,h*h,b,h,1],[s*s,a*a,s,a,1],[k*k,c*c,k,c,1],[g*g,f*f,g,f,1],[e*e,d*d,e,d,1]]),c:-u.det([[b*b,2*b*h,b,h,1],[s*s,2*s*a,s,a,1],[k*k,2*k*c,k,c,1],[g*g,2*g*f,g,f,1],[e*e,2*e*d,e,d,1]])}},classifyConic:function(b,p,s,a,k,c,g,f,e,d,l,m){if(w.isLine(b,p,k,c,l,m))return"line";if(w.isCircle(b,p,s,a,e,d,l,m))return"circle";if(!w.isConic(b,p,s,a,k,c,g,f,e,d,l,m))return"none";
b=w.conicQuadraticParameters(b,p,s,a,k,c,g,f,e,d);p=u.svd([[b.a,b.b],[b.b,b.c]]).S;return h.approx(p[p.length-1]/p[0],0,20)?"parabola":b.b*b.b>b.a*b.c?"hyperbola":"ellipse"}};return w});I("math/poi",["require","./builtin","./distance"],function(b){function h(a,c){var b;a>c&&(b=a,a=c,c=b);b=0<a;var g=0<c,k=0.01<Math.abs(a),r=0.01<Math.abs(c);if(k||r)return f.mean(a,c);if(0===a)return c*Math.abs(c);if(0===c)return a*Math.abs(a);if(b!==g)return 0;b=b?Math.sqrt(a*c):-Math.sqrt(a*c);return b>=a&&c>=b?
b:f.mean(a,c)}function u(a,c,b,f,g){if(isFinite(c)&&isFinite(f)&&0>c!==0>f)for(;;){var k=h(a,b),n=g(k);if(!isFinite(n))return null;if(k===a||k===b)return Math.abs(c)<=Math.abs(f)?[a,c]:[b,f];if(0===n)return w(a,c,k,n,b,f,g);0>c!==0>n?(b=k,f=n):(a=k,c=n)}}function w(a,c,b,f,g,k,n){var s;if(isFinite(f))return isFinite(c)||(s=q(a,c,b,f,n),a=s[0],c=s[1]),isFinite(k)||(s=q(b,f,g,k,n),g=s[0],k=s[1]),a=c===f?[a,c]:p(a,c,b,f,n,f),b=k===f?[g,k]:p(b,f,g,k,n,f),b=h(a[0],b[0]),[b,n(b)]}function q(a,c,b,f,g){if(isFinite(c)!==
isFinite(f))for(;;){var k=h(a,b),n=g(k);if(k===a||k===b)return isFinite(c)?[a,c]:[b,f];isFinite(n)!==isFinite(c)?(b=k,f=n):(a=k,c=n)}}function p(a,c,b,f,g,k){if(c===k!==(f===k))for(;;){var n=h(a,b),s=g(n);if(n===a||n===b)return c===k?[a,c]:[b,f];s===k!==(c===k)?(b=n,f=s):(a=n,c=s)}}function s(a,c,b,f,g,k,n){if(a<b&&b<g&&isFinite(c)&&isFinite(f)&&isFinite(k)&&c!==f&&f!==k&&f>c===f>k)for(;;){var s=h(a,b),q=n(s),p=h(b,g),u=n(p);if(!isFinite(q)||!isFinite(u))return null;if(s===a||s===b||p===b||p===g)return q>
f===f>c?[s,q]:u>f===f>c?[p,u]:[b,f];if(q===f||u===f)return w(a,c,b,f,g,k,n);q>c===f>c&&q>c===q>f?(g=b,k=f,b=s,f=q):u>k===f>k&&u>f===u>k?(a=b,c=f,b=p,f=u):(a=s,c=q,g=p,k=u)}}function a(a,c,b,f,g,k,n,h){var s=Math.abs(f-c),q=Math.abs(k-f),p=Math.abs(h-k);return s>q&&s>p?[[a,c],[b,f]]:p>q&&p>s?[[g,k],[n,h]]:[[b,f],[g,k]]}function k(a,c){for(var b,f={x:[],y:[]},g,k,n,h,s,q=0,p=a.length;q<p;q++){b=a[q];s=void 0;0===b[1]&&(s=[b[0],b[1]]);for(var D=0,F=b.length;D<F-2;D+=2)(g=b[D],k=b[D+1],n=b[D+2],h=b[D+
3],s)?0!==h&&(s[0]!==b[0]&&(g=w(s[0],s[1],g,k,n,h,c),f.x.push(g[0]),f.y.push(g[1])),s=void 0):0===h?s=[g,k]:0>k!==0>h&&(g=u(g,k,n,h,c))&&(f.x.push(g[0]),f.y.push(g[1]))}return f}function c(a,c){for(var b,f={x:[],y:[]},g,k,n,h,q,p,C,D=0,F=a.length;D<F;D++){b=a[D];for(var G=0,H=b.length;G<H-4;G+=2)if(g=b[G],k=b[G+1],n=b[G+2],h=b[G+3],q=b[G+4],p=b[G+5],isFinite(k)&&isFinite(h)&&isFinite(p))if(k!==h&&h===p)C=[g,k];else if(k===h&&h!==p&&C)h>C[1]===h>p&&(g=w(C[0],C[1],n,h,q,p,c),f.x.push(g[0]),f.y.push(g[1])),
C=void 0;else if((k!==h||h!==p)&&h>k===h>p)if(c.derivative)0<c.derivative(g)!==0<c.derivative(q)&&(g=u(g,c.derivative(g),q,c.derivative(q),c.derivative))&&(f.x.push(g[0]),f.y.push(c(g[0])));else if(g=s(g,k,n,h,q,p,c))f.x.push(g[0]),f.y.push(g[1])}return f}var g=b("./builtin"),f=b("./distance");return{bisectJump:function(c,b,g,k,x,r,n,s){if(c<g&&g<x&&isFinite(b)&&isFinite(k)&&isFinite(r))for(;;){var p=h(c,g),w=n(p),u=h(g,x),D=n(u),F=Math.abs(w-f.mean(b,k)),G=Math.abs(D-f.mean(k,r));s||(s=0);if(F<=
s&&G<=s)return null;if(!isFinite(w))return c=q(c,b,p,w,n),g=q(p,w,x,r,n),[c,g];if(!isFinite(D))return c=q(c,b,u,D,n),g=q(u,D,x,r,n),[c,g];if(p!==c&&p!==g||u!==g&&u!==x){if(p===c||p===g)return a(c,b,g,k,u,D,x,r);if(u===g||u===x)return a(c,b,p,w,g,k,x,r)}else return Math.abs(k-b)>Math.abs(r-k)?(c=[c,b],g=[g,k]):(c=[g,k],g=[x,r]),[c,g];F>G?(x=g,r=k,g=p,k=w):(c=g,b=k,g=u,k=D)}},bisectExtremum:s,bisectFinite:q,bisectZero:u,findExtrema:c,findZeros:k,findPOIs:function(a,b){for(var f=k(a,b),g=a.length,h=
[],r=[],n=0;n<g;n++){var s=a[n];0===parseFloat(s[1].toFixed(7))&&(h.push(s[0]),r.push(s[1]));0===parseFloat(s[s.length-1].toFixed(7))&&(h.push(s[s.length-2]),r.push(s[s.length-1]))}f.x.push.apply(f.x,h);f.y.push.apply(f.y,r);g=b(0);g=isFinite(g)?{x:[0],y:[b(0)]}:{x:[],y:[]};return{zeros:f,intercept:g,extrema:c(a,b)}},findIntersections:function(a,b,f){var m=function(a){return f(a)-b(a)},h=k(a,m),r=c(a,m);a=0;for(m=r.x.length;a<m;a++)g.approx(r.y[a],0)&&(h.x.push(r.x[a]),h.y.push(r.y[a]));a=0;for(m=
h.x.length;a<m;a++)h.y[a]=b(h.x[a]);return h},INTERSECTION:1001,ZERO:1002,INTERCEPT:1003,EXTREMUM:1004,EDGE:1005,DEFINITION:1006}});I("graphing/graphmode",{X:1,Y:2,XYPOINT:3,XYPOINT_MOVABLE:4,PARAMETRIC:5,POLAR:6,POLYGONFILL:7});I("math/plotter","require ./distance ./poi graphing/graphmode ./builtinframe config".split(" "),function(b){var h=b("./distance"),u=b("./poi"),w=b("graphing/graphmode"),q=b("./builtinframe"),p=b("config"),s={Accumulator:function(a){var b,c;a?(b=a.xtolerance||a.tolerance||
0,c=a.ytolerance||a.tolerance||0):b=c=0;return{xtolerance:b,ytolerance:c,segments:[],segment:null,pivotPoint:null,pendingPoint:null,addPoint:function(g){this.n+=1;var f=this.pivotPoint;if(this.segment)if(0>b&&0>c)this.segment.push(g[0],g[1]);else{if(f){var e;e=[this.segment[this.segment.length-2],this.segment[this.segment.length-1]];var d=f,f=g,l=b,m=c;a&&a.map&&(e=a.map(e),d=a.map(d),f=a.map(f));var x=h.pointToSegmentParameter(f[0],f[1],e[0],e[1],d[0],d[1]);1>x?e=!1:(e=[e[0]+x*(d[0]-e[0]),e[1]+x*
(d[1]-e[1])],e=Math.abs(f[0]-e[0])<=l&&Math.abs(f[1]-e[1])<=m);e||(this.flushPending(),this.pivotPoint=g)}else this.pivotPoint=g;this.pendingPoint=g}else this.segment=[g[0],g[1]]},flushPending:function(){this.pendingPoint&&(this.segment.push(this.pendingPoint[0],this.pendingPoint[1]),this.pendingPoint=this.pivotPoint=null)},breakSegment:function(){this.flushPending();this.segment&&(2<this.segment.length&&this.segments.push(this.segment),this.segment=null)},getSegments:function(){this.breakSegment();
return this.segments}}},sampleParametricNaive:function(a,b){for(var c=s.Accumulator(),g,f=b.min;f<=b.max+b.step/2;f+=b.step)g=a(f),isFinite(g[0])&&isFinite(g[1])?c.addPoint(g):c.breakSegment();return c.getSegments()},sampleXYNaive:function(a,b){for(var c=s.Accumulator(b),g,f=b.min;f<=b.max+b.step/2;f+=b.step)g=a(f),isFinite(g)?c.addPoint([f,g]):c.breakSegment();return c.getSegments()},sampleXY:function(a,b){var c=s.Accumulator(b),g,f=b.min,e=a(f),d=[f,e],l;b&&(l=b.ytolerance||b.tolerance);var m=function(b,
d){if(isFinite(l)&&!(0>=l)){var e;e=h.mean(b[0],d[0]);if(e=u.bisectJump(b[0],b[1],e,a(e),d[0],d[1],a,l))c.addPoint(e[0]),c.breakSegment(),c.addPoint(e[1])}};isFinite(e)&&c.addPoint([f,e]);for(f+=b.step;f<=b.max+b.step/2;f+=b.step)e=a(f),isFinite(e)&&isFinite(d[1])?(m(d,[f,e]),c.addPoint([f,e])):isFinite(e)&&!isFinite(d[1])?(g=u.bisectFinite(d[0],d[1],f,e,a),g[0]!==f&&c.addPoint(g),m(g,[f,e]),c.addPoint([f,e])):!isFinite(e)&&isFinite(d[1])&&(g=u.bisectFinite(d[0],d[1],f,e,a),m(d,g),g[0]!==d[0]&&c.addPoint(g),
c.breakSegment()),d=[f,e];return c.getSegments()},findPiPeriod:function(a,b,c){function g(a,b){var e=0===b%2?1:-1;if(!c&&-1===e)return!1;for(var g=b*(Math.PI/q._angleMultiplier),l=[f,f+1,f+2,f+3],k=0,m=l.length;k<m;k++)if(isFinite(a(l[k]))!==isFinite(a(l[k]+g))||Math.abs(a(l[k])-e*a(l[k]+g))>d)return!1;return!0}var f=b.min,e=b.max-b.min,d=b.xtolerance&&b.ytolerance?Math.min(b.xtolerance,b.ytolerance):b.tolerance;b=Math.floor(e/(Math.PI/q._angleMultiplier));for(var l,m,e=1;e<=b;e++)if(g(a,e)){m=e;
for(l=2;l*e<=b;l++)g(a,l*e)||(m=void 0);if(m)break}return m?m*(Math.PI/q._angleMultiplier):null},mapPolar:function(a){return[a[1]*Math.cos(a[0]),a[1]*Math.sin(a[0])]},samplePolar:function(a,b){b.map=this.mapPolar;return this.sampleXY(a,b)},eachStep:function(a,b){for(var c=a.min,g=a.max,f=g-c,e=Math.ceil(f/a.step),f=f/e,d=0;d<e;d++)b(c+d*f);b(g)},sampleParametricRecursive:function(a,b){if(b.max<b.min)return[];var c=s.Accumulator(b),g,f;b?(g=b.xtolerance||b.tolerance||0,f=b.ytolerance||b.tolerance||
0):g=f=0;var e=b.min,d=a(e);isFinite(d[0])&&isFinite(d[1])&&c.addPoint(d);var l;this.eachStep(b,function(b){l=a(b);s.subsampleParametricRecursive(a,e,d,b,l,10,c,g,f);e=b;d=l});return c.getSegments()},subsampleParametricRecursive:function(a,b,c,g,f,e,d,l,m){if(g!==b){var x=h.mean(b,g),r=a(x,!0),n=isFinite(c[0])&&isFinite(c[1]),q=isFinite(f[0])&&isFinite(f[1]),p=isFinite(r[0])&&isFinite(r[1]);if(0===e||x===b||x===g)d.breakSegment(),q&&d.addPoint(f);else if(n||q)if(n!=q){for(var q=b,w=g,u=c,D=f;b!==
x&&x!==g;)p==n?(b=x,c=r,n=p):(g=x,f=r),x=b+(g-b)/2,r=a(x,!0),p=isFinite(r[0])&&isFinite(r[1]);n?(s.subsampleParametricRecursive(a,q,u,b,c,e-1,d,l,m),d.breakSegment()):(d.breakSegment(),d.addPoint(f),s.subsampleParametricRecursive(a,g,f,w,D,e-1,d,l,m))}else{if(n&&p&&q&&(n=h.pointToSegmentParameter(r[0],r[1],c[0],c[1],f[0],f[1]),0.2<n&&0.8>n&&Math.abs(r[0]-(c[0]+n*(f[0]-c[0])))<=l&&Math.abs(r[1]-(c[1]+n*(f[1]-c[1])))<=m)){d.addPoint(f);return}c[0]===r[0]&&c[1]===r[1]||s.subsampleParametricRecursive(a,
b,c,x,r,e-1,d,l,m);f[0]===r[0]&&f[1]===r[1]||s.subsampleParametricRecursive(a,x,r,g,f,e-1,d,l,m)}}},validateViewState:function(a){return a&&a.viewport.xmax>a.viewport.xmin&&a.viewport.ymax>a.viewport.ymin&&0<a.screen.width&&0<a.screen.height?!0:!1},computeDomain:function(a,b,c){var g=a.viewport.xmin,f=a.viewport.xmax,e=a.viewport.ymin,d=a.viewport.ymax,l=a.oversample||4,m=1/l*(f-g)/a.screen.width;a=1/l*(d-e)/a.screen.height;var l=b.isLinear,h;switch(b.graphMode){case w.X:h={min:e,max:d,xtolerance:a,
ytolerance:m,step:l?d-e:a};break;case w.Y:h={min:g,max:f,xtolerance:m,ytolerance:a,step:l?f-g:m};break;case w.POLAR:h={min:0,max:6*(2*Math.PI/q._angleMultiplier),step:2*Math.PI/q._angleMultiplier/1E3,tolerance:Math.min(m,a)};if(b=s.findPiPeriod(c,h,"="===b.operator))h.max=h.min+b;break;case w.PARAMETRIC:h={min:b.domain.min,max:b.domain.max,step:b.domain.step,xtolerance:m,ytolerance:a}}return h},classifyBranchConic:function(a){if(p.get("conic")){var b,c;if(1===a.length&&4===a[0].length)return"line";
for(var g=0;g<a.length;g++){var f=a[g],e=f.length;if(12>e)return"unknown";try{c=h.classifyConic(f[0],f[1],f[2*Math.floor(1*e/12)],f[2*Math.floor(1*e/12)+1],f[2*Math.floor(2*e/12)],f[2*Math.floor(2*e/12)+1],f[2*Math.floor(3*e/12)],f[2*Math.floor(3*e/12)+1],f[2*Math.floor(4*e/12)],f[2*Math.floor(4*e/12)+1],f[e-2],f[e-1])}catch(d){return"unknown"}if("none"===c||b&&c!==b)return"none";b=c}return b}},computeGraphData:function(a,b,c){a=s.computeDomain(a,b,c);if(!a)return[];var g;switch(b.graphMode){case w.X:case w.Y:g=
s.sampleXY(c,a);break;case w.POLAR:g=s.samplePolar(c,a);break;case w.PARAMETRIC:a.step||(a.step=(a.max-a.min)/1E3),g=s.sampleParametricRecursive(c,a)}a=[];b.graphMode!==w.PARAMETRIC&&(a=u.findPOIs(g,c),g=s.interleaveExtrema(g,a));if(b.graphMode===w.X)for(var f in a)a.hasOwnProperty(f)&&(c=a[f].y,a[f].y=a[f].x,a[f].x=c);return[{segments:g,graphMode:b.graphMode,color:b.color,style:b.style,operator:b.operator,poi:a,conic:s.classifyBranchConic(g),expr:null}]},interleaveExtrema:function(a,b){for(var c=
a.length,g,f=Array(c),e,d,l=b.extrema,m=0,h=l.x.length,r=0;r<c;r++){g=a[r];d=g.length;e=[];for(var n=0;n<d;n+=2){for(;m<h&&l.x[m]<=g[n];)l.x[m]!==g[n]&&e.push(l.x[m],l.y[m]),m++;e.push(g[n],g[n+1])}f[r]=e}return f},polygonsFromSegments:function(a,b,c){for(var g=function(a){a=a[a.length-1];return a[a.length-2]},f=[],e=0,d=0,l=[],m=[],h=-Infinity,r=-Infinity;;){if(h<=r){if(e>=b.length)break;m.push(b[e++])}if(r<=h){if(d>=a.length)break;l.push(a[d++])}h=g(m);r=g(l);h==r&&(f.push(s.polygonFromSegments(l,
m,c)),m=[],l=[])}return f},polygonFromSegments:function(a,b,c){var g,f,e,d=[],l;switch(c){case w.POLAR:l=this.mapPolar;break;case w.X:l=function(a){return[a[1],a[0]]}}for(c=0;c<a.length;c++)for(e=a[c],g=0;g<e.length;g+=2)f=[e[g],e[g+1]],l&&(f=l(f)),d.push(f[0],f[1]);for(c=b.length-1;0<=c;c--)for(e=b[c],g=e.length-2;0<=g;g-=2)f=[e[g],e[g+1]],l&&(f=l(f)),d.push(f[0],f[1]);return d}};return s});I("main/fake_i18n",["require","underscore"],function(b){var h=b("underscore");return{t:function(b,w){h.each(w,
function(h,p){b=b.split("__"+p+"__").join(h)});return b},init:function(){}}});I("math/evaluationstate",["require","pjs","graphing/graphmode","math/comparators"],function(b){var h=b("pjs"),u=b("graphing/graphmode"),w=b("math/comparators");return h(function(b){b.init=function(b,h,a){var k;this.error=b.error;if(this.is_graphable=a&&a.isGraphable())k=b.graph_info.graphMode;if(this.is_evaluable=a&&a.isEvaluable())this.zero_values=a.getZeroValues();this.is_point_list=k===u.XYPOINT||k===u.XYPOINT_MOVABLE;
this.is_parametric=k===u.PARAMETRIC;if(this.is_shade_between=this.is_graphable&&!!a.shade_between)this.shade_between_operators=a.getOperators();this.is_double_inequality=this.is_shade_between&&2==a.getOperators().length;a?(this.operator=a.getOperator(),this.assignment=a.getAssignedVariable(),this.variables=a.getSlidableVariables(),this.simple_constant=a.getSliderValue(),this.is_inequality=this.is_double_inequality||0!==w.table[this.operator].direction):this.variables=[];this.is_animatable=(this.is_slidable=
!!b.slider)&&!this.is_graphable;b.moveIds&&(this.move_ids=b.moveIds);if(this.is_tableable=this.is_graphable&&!this.is_parametric&&!a.is_solved_equation&&"="===this.operator&&!this.is_double_inequality)if(this.table_info=a.getTableInfo(),b=this.table_info.independent_variable,"y"===b||"theta"===b)this.is_tableable=!1,delete this.table_info}})});I("graphing/columnmode",{POINTS:"POINTS",LINES:"LINES",POINTS_AND_LINES:"POINTS_AND_LINES"});I("math/derivative",["require","./parser_util","./evalframe"],
function(b){var h=b("./parser_util"),u=b("./evalframe"),w=h.DerivativeNode,q=h.ConstantNode,p=h.NegationNode,s=h.ParseNode,a=h.BinaryOperatorNode,k=h.FunctionNode,c=h.FunctionDeclarationNode,g=h.FunctionCallExponentNode,f=h.IdentifierNode;b=h.RepeatedOperatorNode;var e=h.SummationNode,d=h.ChainedComparatorNode,l=h.PiecewiseNode,m=h.AssignmentNode;w.open(function(a){a.takeDerivative=function(a,c){if(this.freeOf(a,c))return q(0);var b=this.expression.takeDerivative(a,this.derivative_variable);return b instanceof
w?h.DerivativeNode(c,b):b.takeDerivative(a,c)};a.freeOf=function(a,c){return this.expression.freeOf(a,c)};a.substitute=function(a){var c=this.expression.takeDerivative(a,this.derivative_variable);if(c instanceof w){if(a.hasVariable(this.derivative_variable.identifier))throw"Can't substitute for derivative variable if derivative can't be taken symbolically";return w(this.derivative_variable,this.expression)}return c.substitute(a)}});s.open(function(a){a.takeDerivative=function(a,c){return w(c,this)};
a.freeOf=function(a,c){return!1}});var x={chain:function(c,b,d,e){return e.freeOf(c,b)?q(0):a.reduce("*",d,e.takeDerivative(c,b))}};(function(){for(var a=[],c=[],b=0;9>b;b++)a.push(f("a_{"+b+s.prototype.tmp()+"}")),c.push(RegExp("a_"+b,"g"));var d=function(b){for(var d=0;d<a.length;d++)b=b.replace(c[d],a[d].toString());return b};x.substituteFn=function(c){var b=h.parse(d(c)),e=u();return function(c){for(var d=c.length,f=0;f<d;f++)e.setVariable(a[f].identifier,c[f]);return b.substitute(e)}}})();a.reduce=
function(c,b,d){switch(c){case "+":if(b instanceof q&&d instanceof q)return q(b.value+d.value);if(b instanceof q&&0===b.value)return d;if(d instanceof q&&0===d.value)return b;break;case "-":if(b instanceof q&&d instanceof q)return q(b.value-d.value);if(d instanceof q&&0===d.value)return b;break;case "*":if(b instanceof q&&d instanceof q)return q(b.value*d.value);if(b instanceof q&&1===b.value)return d;if(d instanceof q&&1===d.value)return b;break;case "/":if(d instanceof q&&1===d.value)return b;if(b instanceof
q&&d instanceof q)return q(b/d);break;case "^":if(d instanceof q&&1===d.value)return b}return a(c,b,d)};p.reduce=function(a){return a instanceof q?q(-a.value):a instanceof p?a.expression:p(a)};a.open(function(c,b){var d=x.substituteFn("a_1*a_0^{a_1 - 1}"),e=x.substituteFn("a_0^{a_1}*\\ln(a_0)");c.takeDerivative=function(c,f){if(this.freeOf(c,f))return q(0);var g=this.args[0],l=this.args[1];switch(this.operator){case "+":return a.reduce("+",g.takeDerivative(c,f),l.takeDerivative(c,f));case "-":return a.reduce("-",
g.takeDerivative(c,f),l.takeDerivative(c,f));case "*":return a.reduce("+",x.chain(c,f,l,g),x.chain(c,f,g,l));case "/":return a.reduce("/",a.reduce("-",x.chain(c,f,l,g),x.chain(c,f,g,l)),a.reduce("^",l,q(2)));case "^":return a.reduce("+",x.chain(c,f,d(this.args),g),x.chain(c,f,e(this.args),l));default:return b.takeDerivative.call(this,c,f)}};c.freeOf=function(a,c){return this.args[0].freeOf(a,c)&&this.args[1].freeOf(a,c)};c.substitute=function(c){return a.reduce(this.operator,this.args[0].substitute(c),
this.args[1].substitute(c))}});d.open(function(a){a.freeOf=function(a,c){return this.args.every(function(b){return b.freeOf(a,c)})};a.substitute=function(a){return d(this.comparators,this.args.map(function(c){return c.substitute(a)}))}});q.open(function(a){a.takeDerivative=function(){return q(0)};a.freeOf=function(a,c){return!0};a.substitute=function(a){return this}});k.open(function(c,b){var d={exp:["\\exp(a_0)"],sqrt:["\\frac{1}{2*\\sqrt{a_0}}"],sin:["\\angleMultiplier(1)*\\cos(a_0)"],cos:["-\\angleMultiplier(1)*\\sin(a_0)"],
tan:["\\angleMultiplier(1)*(\\sec(a_0))^2"],arcsin:["\\frac{1}{\\angleMultiplier(1)*\\sqrt{1 - a_0^2}}"],arccos:["\\frac{-1}{\\angleMultiplier(1)*\\sqrt{1 - a_0^2}}"],arctan:["\\frac{1}{\\angleMultiplier(1)*(1 + a_0^2)}"],sinh:["\\cosh(a_0)"],cosh:["\\sinh(a_0)"],tanh:["(\\sech(a_0))^2"],arcsinh:["\\frac{1}{\\sqrt{a_0^2 + 1}}"],arccosh:["\\frac{1}{\\sqrt{a_0^2 - 1}}"],arctanh:["\\frac{1}{1 - a_0^2}"],factorial:["(a_0)!*\\polyGamma(0, a_0 + 1)"],floor:["\\left\\{ \\mod(a_0, 1) > 0: 0 \\right\\}"],
ceil:["\\left\\{ \\mod(a_0, 1) > 0: 0 \\right\\}"],round:["\\left\\{ \\abs(\\mod(a_0, 1) - 0.5) > 0: 0 \\right\\}"],abs:["\\left\\{ \\abs(a_0) > 0: \\sign(a_0) \\right\\}"],sign:["\\left\\{ \\abs(a_0) > 0: 0 \\right\\}"],angleMultiplier:["0"],log:["\\left\\{a_0 > 0: \\frac{1}{a_0*\\ln(a_1)}\\right\\}","\\frac{-\\log_{a_1}(a_0)}{a_1*\\ln(a_1)}"],pow:["a_1*a_0^{a_1 - 1}","a_0^{a_1}*\\ln(a_0)"],nthroot:["a_0^{1/a_1 - 1}/a_1","-\\frac{a_0^{1/a_1}*\\ln(a_0)}{a_1^2}"],polyGamma:["0/0","\\polyGamma(1 + a_0, a_1)"],
min:["\\left\\{ a_0 < a_1 : 1, a_0 > a_1 : 0 \\right\\}","\\left\\{ a_1 < a_0 : 1, a_1 > a_0 : 0 \\right\\}"],max:["\\left\\{ a_0 > a_1 : 1, a_0 < a_1 : 0 \\right\\}","\\left\\{ a_1 > a_0 : 1, a_1 < a_0 : 0 \\right\\}"],mod:["\\left\\{ \\abs(\\mod(a_0, a_1)) > 0: 1 \\right\\}","\\left\\{ \\mod(a_0/a_1, 1) > 0: -\\floor(a_0/a_1) \\right\\}"]},e={};(function(){var a=x.substituteFn,c;for(c in d)d.hasOwnProperty(c)&&(e[c]=d[c].map(a))})();var g=function(c,b){e[b]=[function(b){return p.reduce(a.reduce("/",
e[c][0](b),a.reduce("^",k(f(c),b),q(2))))}]};[["sin","csc"],["cos","sec"],["tan","cot"],["sinh","csch"],["cosh","sech"],["tanh","coth"]].forEach(function(a){g(a[0],a[1])});var l=function(c,b){e[b]=[function(b){return p.reduce(a.reduce("/",e[c][0]([a.reduce("/",q(1),b[0])]),a.reduce("^",b[0],q(2))))}]};[["arcsin","arccsc"],["arccos","arcsec"],["arctan","arccot"],["arcsinh","arccsch"],["arccosh","arcsech"],["arctanh","arccoth"]].forEach(function(a){l(a[0],a[1])});var m=function(){return q(NaN)},h=function(a){e[a]=
[m,m]};"lcm gcd nCr nPr mcm mcd".split(" ").forEach(h);["quadraticFormula","quadraticInequalityRegions"].forEach(h);c.takeDerivative=function(c,d){function f(b,e){return 0>e?b:f(a.reduce("+",b,x.chain(c,d,k[e](l),l[e])),e-1)}if(this.freeOf(c,d))return q(0);var g=this.identifier.identifier,l=this.args,k;if(e.hasOwnProperty(g))k=e[g];else if(c.hasFunction(g))k=c.getFunctionTree(g).computePartials(c);else return 1===this.args.length&&c.hasVariable(g)?a("*",this.identifier,this.args[0]).takeDerivative(c,
d):b.takeDerivative.call(this,c,d);g=l.length;g=x.chain(c,d,k[g-1](l),l[g-1]);return f(g,this.args.length-2)};c.freeOf=function(a,c){return this.args.every(function(b){return b.freeOf(a,c)})&&this.identifier.freeOf(a,c)};c.substitute=function(a){return k(this.identifier,this.args.map(function(c){return c.substitute(a)}))}});c.open(function(a){a.computePartials=function(a){var c=this;return c.args.map(function(b){var d=c.expression.takeDerivative(a,b);return function(b){for(var e=u(a),g=u(a),l,k=0;k<
c.args.length;k++)l=f(c.tmp()),e.setVariable(c.args[k].identifier,l),g.setVariable(l.identifier,b[k]);return d.substitute(e).substitute(g)}})}});g.open(function(a){a.takeDerivative=function(a,c){return this.getEquivalentNode(a).takeDerivative(a,c)};a.freeOf=function(a,c){return this.getEquivalentNode(a).freeOf(a,c)};a.substitute=function(a){return g(this.identifier.substitute(a),this.arg.substitute(a),this.exponent.substitute(a))}});f.open(function(a){a.takeDerivative=function(a,c){return c.identifier===
this.identifier?q(1):a.hasVariable(this.identifier)?a.getVariable(this.identifier).takeDerivative(a,c):q(0)};a.freeOf=function(a,c){return c.identifier===this.identifier?!1:a.hasVariable(this.identifier)?a.getVariable(this.identifier).freeOf(a,c):!0};a.substitute=function(a){return a.hasVariable(this.identifier)?a.getVariable(this.identifier).substitute(a):this}});p.open(function(a){a.takeDerivative=function(a,c){return this.freeOf(a,c)?q(0):p.reduce(this.expression.takeDerivative(a,c))};a.freeOf=
function(a,c){return this.expression.freeOf(a,c)};a.substitute=function(a){return p.reduce(this.expression.substitute(a))}});l.open(function(a){a.takeDerivative=function(a,c){if(this.freeOf(a,c))return q(0);var b=l(this.condition,this.if_expr.takeDerivative(a,c));this.else_expr&&b.append_else(this.else_expr.takeDerivative(a,c));return b};a.freeOf=function(a,c){return this.else_expr?this.condition.freeOf(a,c)&&this.if_expr.freeOf(a,c)&&this.else_expr.freeOf(a,c):this.condition.freeOf(a,c)&&this.if_expr.freeOf(a,
c)};a.substitute=function(a){var c=l(this.condition.substitute(a),this.if_expr.substitute(a));this.else_expr&&c.append_else(this.else_expr.substitute(a));return c}});b.open(function(a){a.freeOf=function(a,c){return this.index.freeOf(a,c)&&this.lower_bound.freeOf(a,c)&&this.upper_bound.freeOf(a,c)&&this.summand.freeOf(a,c)};a.substitute=function(a){var c=this.index,b=u(a),d;d=f(this.tmp());b.setVariable(c.identifier,d);c=this.constructor;return c(d,this.lower_bound.substitute(a),this.upper_bound.substitute(a),
this.summand.substitute(b))}});e.open(function(a){a.takeDerivative=function(a,c){return this.freeOf(a,c)?q(0):e(this.index,this.lower_bound,this.upper_bound,this.summand.takeDerivative(a,c))}});(function(){var a=function(a,c){return this.expression.takeDerivative(a,c)};m.open(function(c){c.substitute=function(a){return m(this.assigns,this.expression.substitute(a))};c.expressionDerivative=a});c.open(function(b){b.substitute=function(a){return c(this.assigns,this.args,this.expression.substitute(a))};
b.expressionDerivative=a})})()});I("math/evaluatorobject","require underscore pjs main/fake_i18n ./parser_util ./plotter ./comparators ./evalframe ./quadratic ./evaluationstate graphing/graphmode graphing/columnmode ./derivative".split(" "),function(b){function h(a){for(var c=[],b=[],d=a.length,e=0;e<d;e++)c.push(a[e][0]),b.push(a[e][1]);return{defined:{x:c,y:b}}}var u=b("underscore"),w=b("pjs"),q=b("main/fake_i18n"),p=b("./parser_util"),s=b("./plotter"),a=b("./comparators"),k=b("./evalframe"),c=
b("./quadratic"),g=b("./evaluationstate"),f=b("graphing/graphmode"),e=b("graphing/columnmode");b("./derivative");var d={name:"ERROR"},l={name:"WARNING"},m={name:"EVALUABLE"},x={name:"GRAPHABLE"},r={name:"SILENT"},n={},y=p.ConstantNode,B=p.IdentifierNode,z=p.ErrorNode,C=p.BinaryOperatorNode;b=w(function(a){a.init=function(a){this._context=a;this._analysis=null;this.compiler=a.compiler};a.exportDefinitionsTo=function(a){};a.getAllIds=function(){return[]};a.cleanupId=function(a){throw"base analysis object can't cleanup ID";
};a.invalidate=function(){this._analysis=null};a.getAnalysis=function(){this._analysis||this._context.updateAnalysis();return this._analysis};a.setAnalysis=function(a){this._analysis=a};a.shouldIntersect=function(){return!1};a.isEvaluable=function(){return this.getAnalysis().status==m};a.isGraphable=function(){return this.getAnalysis().status==x};a.isGraphed=function(){return this.isGraphable()};a.graphModeFromVariables=function(a,c){return"x"===c||"y"===a?f.X:"r"===c&&"theta"===a||"r"===c&&void 0===
a||void 0===c&&"theta"===a?f.POLAR:f.Y};a.setGraphMode=function(a,c,b){"y"!==b||c||(c="x");"x"!==b||c||(c="y");"r"!==b||c||(c="theta");a||(a=this.graphModeFromVariables(c,b));this._analysis.graph_info={color:this._statement.color,style:this._statement.style,graphMode:a,independent:c,dependent:b,operator:this.getOperator(),domain:this._statement.domain};return x};a.computeGraphData=function(a){};a.getStatus=function(){return this.getAnalysis().status};a.getAssignedVariable=function(){return null};
a.compile=function(){};a.getSlidableVariables=function(){return[]};a.getSliderValue=function(){return NaN};a.getZeroValues=function(){return[]};a.addFreeVariables=function(a){for(var c=0;c<a.length;c++){var b=a[c];-1<this._analysis.free_variables.indexOf(b)||this._analysis.free_variables.push(b)}}});var D=w(b,function(a,c){a.init=function(a,b,d){c.init.call(this,a);this._statement=b;this._tree=d;this.id=b.id;this.color=b.color;this.style=b.style;this.domain=b.domain};a.isGraphed=function(){return this.isGraphable()&&
this._statement.shouldGraph};a.getAllIds=function(){return[this.id]};a.getGraphInfo=function(){return this._analysis.graph_info};a.shouldIntersect=function(){if(!this.isGraphed())return!1;var a=this.getGraphInfo().graphMode;return a===f.Y||a===f.X};a.computeGraphData=function(a){var c={},b=this._context.getFrame(),d=this.compile(b);d.fn.derivative=this.compileDerivative(b).fn;var e=this._analysis.graph_info;1===this._tree.polynomialOrder(b,e.independent)&&(e.isLinear=!0);c[this.id]=s.computeGraphData(a,
e,d.fn);c[this.id][0].compiled=d;return c};a.getEvaluationState=function(){return g(this._analysis,this._context,this)};a.computeStatus=function(){return this.markError(q.t("Unimplemented status check"))};a.getZeroValues=function(){return[{val:this._tree.evaluateOnce(this._context.getFrame()),operator:"="}]};a.referencesSymbol=function(a){return this._tree.references(a)};a.referencedSymbols=function(a){return this._tree._referencedSymbols};a.getSlidableVariables=function(){for(var a=this._analysis.free_variables,
c=[],b=0;b<a.length;b++){var d=a[b];this._context.assignmentForbidden(d)||this._analysis.hasOwnProperty("solution")&&d==this._analysis.solution.variable||c.push(d)}return c};a.exportedSymbols=function(){var a={};this._tree.assigns&&(a[this._tree.assigns.identifier]=this._tree.arity);return a};a.exportDefinitionsTo=function(a,c){if(this._tree.assigns){var b=this._tree.assigns.identifier;this._context.assignmentForbidden(b)||(this._tree.exportDefinitionsTo(a,this.compiler),a.setDefinitionId(b,c))}};
a.shadowedSymbols=function(){return[]};a.getDependencies=function(){return this._tree.dependencies()};a.getType=function(){return this._tree.statementType};a.freeVariablesError=function(a){for(var c=0;c<a.length;c++)if(!this._context.assignmentForbidden(a[c]))return a=q.t("Too many free variables to graph.  Try defining '__variable__'",{variable:a[c]}),this.markError(a);return this.markError(q.t("Too many free variables.  I don't know what to do with this"))};a.getParseError=function(){return this._tree.valid?
void 0:this._tree.error_msg};a.markError=function(a){this._analysis.error=a;return this._analysis.status=d};a.evaluateOnce=function(a){return this._tree.evaluateOnce(a)};a.evalStrings=function(a){return this._tree.getEvalStrings(a)};a.compileAllBranches=function(a){return[this.compile(a)]};a.compile=function(a){a=this.compile_to_strings(a,this.independent_variable());a.fn=this.compiler.compile(a.args,a.function_string);return a};a.compileDerivative=function(a){var c=this.independent_variable(),b=
B(c),b=this._tree.expressionDerivative?this._tree.expressionDerivative(a,b):this._tree.takeDerivative(a,b);a=D(this._context,this._statement,b).compile_to_strings(a,c);a.fn=this.compiler.compile(a.args,a.function_string);return a};a.independent_variable=function(){if(this._analysis.status===x)return this._analysis.graph_info.independent;if(1===this._analysis.free_variables.length)return this._analysis.free_variables[0]};a.compile_to_strings=function(a,c){var b=this._tree.getEvalStrings(a);return{args:[c],
function_string:b.statements+"return "+b.expression}};a.getOperator=function(){return"="};a.getTableInfo=function(){};a.getTableInfo=function(){return{independent_variable:this._analysis.graph_info.independent,dependent_column:this._tree.getInputString(),by_reference:!1}}});n[EXPRESSION]=w(D,function(a,c){a.computeStatus=function(a){a=this._analysis.free_variables;if(0===a.length)return m;if(1===a.length)switch(a[0]){case "x":return this.setGraphMode(f.Y,"x");case "y":return this.markError(q.t("Maybe you wanted to plot x as a function of y?"));
case "r":case "theta":return this.markError(q.t("Maybe you wanted to plot r as a function of θ?"));default:return this.markError(q.t("Maybe you wanted to plot x or y as a function of __variable__ ?",{variable:a[0]}))}return this.freeVariablesError(a)}});n[FUNCTION_DEFINITION]=w(D,function(a,c){a.init=function(a,b,d){c.init.call(this,a,b,d);this.arity=this._tree.arity};a.shadowedSymbols=function(){return this._tree.passed_variables};a.computeStatus=function(a){if(1===this._tree.arity)return this._tree.assigns.identifier===
this._tree.passed_variables[0]?this.markError(q.t("You can't use __identifier__ as both the function name and the argument",this._tree.assigns.identifier)):0<this._analysis.free_variables.length?this.markError(q.t("Every variable you use in the function must be defined.  Either define __variable__or pass it in as an argument",{variable:this._analysis.free_variables[0]})):this.setGraphMode(void 0,this._tree.passed_variables[0],this._tree.assigns.identifier);if(1<this._tree.arity)return l};a.addFreeVariables=
function(a){for(var c=this._tree.passedVariables(),b=0;b<a.length;b++){var d=a[b];-1<c.indexOf(d)||-1<this._analysis.free_variables.indexOf(d)||(this.markError(q.t("Every variable you use in the function must be defined.  Either define '__variable__' or pass it in as an argument",{variable:d})),this._analysis.free_variables.push(d))}};a.conflictError=function(a){a=q.t("'__symbol__' is already defined, so you can't reuse it as one of the parameters of this function",{symbol:a});return this.markError(a)};
a.getTableInfo=function(){return this._context.assignmentForbidden(this._tree.assigns.identifier)?{independent_variable:this._analysis.graph_info.independent,dependent_column:this._tree.expression.getInputString(),by_reference:!1}:{independent_variable:this._analysis.graph_info.independent,dependent_column:this._tree.getInputString(),by_reference:!0}};a.getSlidableVariables=function(){for(var a=this._analysis.free_variables,c=[],b=0;b<a.length;b++){var d=a[b];this._context.assignmentForbidden(d)||
c.push(d)}return c}});n[VARIABLE_DEFINITION]=w(D,function(a,c){a.computeStatus=function(a){a=this._tree.assigns.identifier;var c=this._analysis.free_variables;if("theta"===a)return this.markError(q.t("Sorry - can't graph θ as a function of anything yet"));if(0===c.length){if(c=this._tree.expression instanceof y)this._analysis.slider=!0;return-1!=="xyr".indexOf(a)?this.setGraphMode(void 0,void 0,a):c?r:m}return 1===c.length?c[0]===a?this.markError(q.t("Cannot define __variable__ in terms of itself."),
{variable:c[0]}):"r"===c[0]?this.markError(q.t("Maybe you wanted to plot r as a function of θ?")):this.setGraphMode(void 0,c[0],a):this.freeVariablesError(c)};a.getAssignedVariable=function(){return this._tree.assigns.identifier};a.getSliderValue=function(){return this._tree.expression instanceof y?this._tree.evaluateOnce():c.getSliderValue()};a.getTableInfo=function(){return this._context.assignmentForbidden(this._tree.assigns.identifier)?{independent_variable:this._analysis.graph_info.independent,
dependent_column:this._tree.expression.getInputString(),by_reference:!1}:{independent_variable:this._analysis.graph_info.independent,dependent_column:this._analysis.graph_info.dependent,by_reference:!0}}});n[IDENTIFIER]=w(D,function(a,c){a.computeStatus=function(a){a=this._analysis.free_variables;return 1===a.length&&"x"===a[0]?this.setGraphMode(f.Y,"x"):0<a.length?r:m}});n[CONSTANT]=w(D,function(a,c){a.computeStatus=function(a){return r};a.getSliderValue=function(){return this._tree.evaluateOnce()}});
n[ORDERED_PAIR_LIST]=w(D,function(a,c){a.computeMovable=function(a){var c=this;if(c._analysis.status==x&&0===c._analysis.free_variables.length&&1===c._tree.elements.length){var b,d=[void 0,void 0];c._tree.elements[0].children.forEach(function(e,f){if(e instanceof B){var g=a.getDefinitionId(e.identifier);void 0!==g&&c._context.statements[g]._analysis.slider&&(b=!0,d[f]=g)}});b&&(c._analysis.movable=!0,c._analysis.graph_info.graphMode===f.XYPOINT&&(c._analysis.graph_info.graphMode=f.XYPOINT_MOVABLE),
d[1]===d[0]&&(d[1]=void 0),c._analysis.moveIds=d)}};a.computeStatus=function(a){a=this._analysis.free_variables;if(0===a.length)return this.setGraphMode(f.XYPOINT);if(1===a.length)return"t"===a[0]&&1==this._tree.elements.length?this.setGraphMode(f.PARAMETRIC,"t"):this.markError(q.t("Define '__variable__' to plot this point, or make each coordinate a function of 't' to plot it as a parametric function",{variable:a[0]}));if(1<a.length)return this.freeVariablesError(a)};a.getSlidableVariables=function(){var a=
c.getSlidableVariables.call(this),b=a.indexOf("t");-1<b&&a.splice(b,1);return a};a.computeGraphData=function(a){var c=this._analysis.graph_info,b={};if(c.graphMode===f.XYPOINT||c.graphMode===f.XYPOINT_MOVABLE)return a=this._tree.evaluateOnce(this._context.getFrame()),c={segments:[a],graphMode:c.graphMode,color:this._statement.color,style:this._statement.style,poi:h(a)},b[this.id]=[c],b;var d=this.compile(this._context.getFrame());b[this.id]=s.computeGraphData(a,c,function(a){return d.fn(a)[0]});return b};
a.getTableInfo=function(){return{independent_variable:"x",dependent_column:"y",by_reference:!1,values:this._tree.evaluateOnce(this._context.getFrame())}}});n[DOUBLE_INEQUALITY]=w(D,function(c,b){c.init=function(a,c,d){b.init.call(this,a,c,d);this._inequalities=[];for(var e=0;2>e;e++){var f=d.getInequality(e);this._inequalities.push(n[COMPARATOR](a,c,f))}};c.shade_between=!0;c.computeStatus=function(a){for(var c=0;2>c;c++)this._inequalities[c].setAnalysis({free_variables:this._analysis.free_variables});
c=this._inequalities.map(function(c){c._analysis.status=c.computeStatus(a);return c._analysis.status});return c[0]===x&&c[1]===x?(this._analysis.graph_info=this._inequalities[0]._analysis.graph_info,this._analysis.graph_info.graphMode===f.POLAR?this.markError(q.t("Two-sided inequalities are only supported for x and y.  You can do one-sided polar inequalities.")):x):this.markError(q.t("One or more sub-inequality had an error"))};c.computeGraphData=function(c){var b=this.id,d={};d[b]=[];for(var e=function(c){c.operator=
a.get(a.table[c.operator].inclusive,0)},g=0;2>g;g++){var l=this._inequalities[g].computeGraphData(c)[b].slice(0,4);l.forEach(e);d[b].push.apply(d[b],l)}c=d[b][0].graphMode;e=s.polygonsFromSegments(d[b][4].segments,d[b][0].segments,c);d[b].push({graphMode:f.POLYGONFILL,segments:e,poi:{}});e=s.polygonsFromSegments(d[b][7].segments,d[b][3].segments,c);d[b].push({graphMode:f.POLYGONFILL,segments:e,poi:{}});return d};c.compileAllBranches=function(a){for(var c=[],b=0;2>b;b++)c.push.apply(c,this._inequalities[b].compileAllBranches(a));
return c};c.getOperators=function(){return[this._inequalities[0].getOperator(),this._inequalities[1].getOperator()]}});n[EQUATION]=w(D,function(a,b){a.init=function(a,c,d){b.init.call(this,a,c,d);this.temp_tree=C("-",this._tree.lhs,this._tree.rhs)};a.is_solved_equation=!0;a.computeStatus=function(a){var c=this._analysis.free_variables;if(2<c.length)return this.freeVariablesError(c);if(2===c.length)return"x"===c[0]&&"y"===c[1]||"y"===c[0]&&"x"===c[1]?(c=this.temp_tree.polynomialOrder(a,"x"),2>=this.temp_tree.polynomialOrder(a,
"y")?this.setGraphMode(f.Y,"x","y"):2>=c?this.setGraphMode(f.X,"y","x"):this.markError(q.t("Equation is too complicated.  One variable needs to be quadratic."))):this.markError(q.t("You can only plot implicit equations of x and y"));if(1===c.length)return(a=this.solveEvaluable(a))?(this._analysis.solution=a,m):this.markError(q.t("Sorry - unable to solve this equation.  Try something like a quadratic?"));if(0===c.length)return this.markError(q.t("This equation has no variables in it - there's nothing to solve"))};
a.solveEvaluable=function(a){if(1!=this._analysis.free_variables.length)return!1;var b=this._analysis.free_variables[0];switch(this.temp_tree.polynomialOrder(a,b)){case 1:a=this.temp_tree.quadraticCoefficients(a,b);a=[-a[2]/a[1]];break;case 2:a=this.temp_tree.quadraticCoefficients(a,b);a=c.formula(a);break;default:return!1}return{roots:a,variable:b}};a.getZeroValues=function(){for(var a=[],c=this._analysis.solution.roots,b=0;b<c.length;b++)a.push({val:c[b],operator:"="});return a};a.getAssignedVariable=
function(){switch(this._analysis.status){case m:return this._analysis.solution.variable;case x:return this._analysis.graph_info.dependent}};a.computeGraphData=function(a){var c={},b=this.compileAllBranches(this._context.getFrame()),d=this._analysis.graph_info;c[this.id]=[];for(var e=0;e<b.length;e++){var f=s.computeGraphData(a,d,b[e].fn)[0];f.compiled=b[e];c[this.id].push(f)}return c};a.compileAllBranches=function(a){var b=[],d=this._analysis.graph_info.independent;a=this.temp_tree.polynomialEvalStrings(a,
this._analysis.graph_info.dependent,d);a=c.formulaEvalStrings(a);for(var d=[d],e=0;e<a.length;e++)b.push({fn:this.compiler.compile(d,a[e]),args:d,function_string:a[e]});return b}});n[COMPARATOR]=w(D,function(b,d){b.init=function(c,b,e){d.init.call(this,c,b,e);this.temp_tree=1===a.table[this._tree.operator].direction?C("-",this._tree.args[0],this._tree.args[1]):C("-",this._tree.args[1],this._tree.args[0])};b.getDependencies=function(){var a=this._tree.dependencies();return u.isEqual(a,{r:0,theta:0})?
(this.addFreeVariables(["r","theta"]),[]):u.isEqual(a,{r:0})?(this.addFreeVariables(["r"]),[]):a};b.computeStatus=function(a){var c=this._analysis.free_variables;if(0===c.length)return m;var b={x:!0,y:!0,r:!0},d=c[0],e=c[1];if(1===c.length){if(!b.hasOwnProperty(d))return this.markError(q.t("We only plot inequalities of x and y, or r and theta"));a=this.temp_tree.polynomialOrder(a,d);return"r"===d&&1<a?this.markError(q.t("We only plot polar inequalities that are first order in r.")):2<a?this.markError(q.t("Equation too complicated. One variable needs to be quadratic")):
this.setGraphMode(void 0,void 0,d)}b={x:"y",y:"x",r:"theta",theta:"r"};if(2===c.length){if(b[d]!==e)return this.markError(q.t("We only plot inequalities of x and y, or r and theta"));if("r"===d||"r"===e)return a=this.temp_tree.polynomialOrder(a,"r"),1<a?this.markError(q.t("We only plot polar inequalities that are first order in r.")):this.setGraphMode(f.POLAR,"theta","r");d=this.temp_tree.polynomialOrder(a,"x");a=this.temp_tree.polynomialOrder(a,"y");return 2>=a?this.setGraphMode(f.Y,"x","y"):2>=
d?this.setGraphMode(f.X,"y","x"):this.markError(q.t("Equation is too complicated.  One variable needs to be quadratic."))}};b.computeGraphData=function(c){for(var b={},d=this.compileAllBranches(this._context.getFrame()),e=this._analysis.graph_info,g=this._tree.operator,l=b[this.id]=[],k,m=[-1,0,0,1],h=0;4>h;h++)k=s.computeGraphData(c,e,d[h].fn)[0],k.compiled=d[h],k.operator=a.get(a.table[g].inclusive,m[h]),l.push(k);c=s.polygonsFromSegments(l[1].segments,l[2].segments,l[1].graphMode);l.push({graphMode:f.POLYGONFILL,
segments:c,poi:{}});return b};b.compileAllBranches=function(a){var b=[],d=this._analysis.graph_info.independent;a=this.temp_tree.polynomialEvalStrings(a,this._analysis.graph_info.dependent,d);a=c.inequalityRegionEvalStrings(a);for(var d=[d],e=0;e<a.length;e++)b.push({fn:this.compiler.compile(d,a[e]),args:d,function_string:a[e]});return b};b.getOperator=function(){return this._tree.operator};b.getSlidableVariables=function(){return d.getSlidableVariables.call(this).filter(function(a){return"r"!==a})}});
n[CHAINED_COMPARATOR]=w(D,function(a,c){a.computeStatus=function(a){return 0===this._analysis.free_variables.length?m:this.markError(q.t("We only graph solved double inequalities. Try sin(x) < y < cos(x)."))}});var F=w(b,function(a,c){a.init=function(a,b){c.init.call(this,a);this._description=b;this.id=b.id;this.ids_to_clean=[];this.columns=[];this.cell_tree=[];for(var d=0;d<this._description.columns.length;d++){""===this._description.columns[d].latex&&0<d&&(this._description.columns[d].latex="\\emptycolumn_"+
d);var e=G(this._context,this._description.columns[d]);this.columns.push(e);this.cell_tree[d]=[];for(var e=this._description.columns[d].values,f=0;f<e.length;f++)""===e[f].trim()?this.cell_tree[d][f]=z(""):this.cell_tree[d][f]=p.tryParse(e[f])}this.columns[0]._tree&&this.columns[0]._tree instanceof B?(this.shadowed_symbols=[this.columns[0]._tree.identifier],d=this.shadowed_symbols[0],"y"===d&&(this.parse_error=q.t("Sorry - can't make a table based on y yet.  Try x?")),"r"===d&&(this.parse_error=q.t("Sorry - can't make a table based on r yet.  Try x?"))):
(this.parse_error=q.t("Tables need a single variable for their first independent column"),this.shadowed_symbols=[])};a.isGraphed=function(){return!0};a.cleanupId=function(a){this.ids_to_clean.push(a)};a.getAllIds=function(){for(var a=[this.id],c=0;c<this.columns.length;c++)a.push(this.columns[c].id);return a};a.exportedSymbols=function(){return[]};a.shadowedSymbols=function(){return this.shadowed_symbols};a.getDependencies=function(){for(var a={},c,b=0;b<this.columns.length;b++){var d=this.columns[b].getDependencies();
for(c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);for(d=0;d<this.cell_tree[b].length;d++){var e=this.cell_tree[b][d].dependencies();for(c in e)a[c]=e[c]}}return a};a.referencesSymbol=function(a){for(var c=0;c<this.columns.length;c++){if(this.columns[c].referencesSymbol(a))return!0;for(var b=0;b<this.cell_tree[c].length;b++)if(this.cell_tree[c][b].references(a))return!0}return!1};a.getParseError=function(){return this.parse_error?this.parse_error:this.columns[0].getParseError()};a.computeStatus=function(a){if(this.getParseError())return d;
for(var c=0;c<this.columns.length;c++){this.columns[c]._analysis.free_variables=[];var b=this.columns[c].getDependencies(),e;for(e in b)b.hasOwnProperty(e)&&1>=b[e]&&!a.defines(e)&&this.columns[c].addFreeVariables([e]);this.columns[c]._analysis.status=this.columns[c].computeStatus(a)}return x};a.invalidate=function(){c.invalidate.call(this);this.columns.forEach(function(a){a.invalidate()})};a.setAnalysis=function(a){c.setAnalysis.call(this,a);this.columns.forEach(function(a){a.setAnalysis({})})};
a.getEvaluationState=function(){var a,c=this._description.columns[0].values.length,b=[],d,e=[],f=k(this._context.getFrame()),g=k(this._context.getFrame());d=k(this._context.getFrame());for(var l,m,h=0;h<this.columns.length;h++){var r=!1,n=!1;l=null;if(this.columns[h]._tree instanceof B){d=this.columns[h]._tree.identifier;f.defines(d)||(r=!0);if(0===h){r||(l=q.t("First column must be independent"));if("y"===d||"theta"==d||"r"==d)l=q.t("We don't do the right thing for tables with independent __symbol__ yet",
{symbol:d});l||g.setVariable(d,y(0))}l||f.setVariable(d,y(0));e[h]=d}if(!r&&(l=this.columns[h].getParseError(),!l)){try{a=this.columns[h].evaluateOnce(g),n=!0}catch(s){n=!1}try{a=this.columns[h].evaluateOnce(f),"number"!==typeof a&&(l=a)}catch(x){l=x}}this.columns[h].getParseError()&&(this.error=this.columns[h].getParseError());var p=[];if(!l)for(var w=0;w<c;w++){d=k(this._context.getFrame());for(var u=0;u<h;u++)if(!b[u].dependent&&!b[u].error){var J=b[u].values[w];"number"===typeof J&&d.setVariable(e[u],
y(J))}if(r)if(u=this.cell_tree[h][w],u.hasOwnProperty("error_msg"))m=u.error_msg;else try{m=u.evaluateOnce(d)}catch(z){m=z}else try{m=this.columns[h].evaluateOnce(d)}catch(v){m=""}p.push(m)}b.push({dependent:!r,discrete:!n,error:l,values:p})}return b};a.computeGraphData=function(a){for(var c,b,d,g,l,k=this.getEvaluationState(),n={};this.ids_to_clean.length;)n[this.ids_to_clean.pop()]={};for(var q=1;q<k.length;q++){var p=this._description.columns[q];c=this.columns[q].id;k[q].error&&(n[c]={});n[c]=
[];b=p.columnMode;var y=b===e.LINES||b===e.POINTS_AND_LINES,w=p.hidden;if((b===e.POINTS||b===e.POINTS_AND_LINES)&&!w){var B=[];for(g=0;g<k[0].values.length;g++)b=k[0].values[g],d=k[q].values[g],"number"===typeof b&&"number"===typeof d&&B.push([b,d]);b={segments:[B],graphMode:f.XYPOINT,poi:h(B),color:p.color,style:p.style};n[c].push(b)}if(y&&!w&&k[q].discrete){B=s.Accumulator();for(g=0;g<k[0].values.length;g++)b=k[0].values[g],d=k[q].values[g],"number"===typeof b&&"number"===typeof d?B.addPoint([b,
d]):B.breakSegment();b={segments:B.getSegments(),graphMode:f.PARAMETRIC,poi:[],color:p.color,style:p.style};n[c].push(b)}if(y&&!w&&!k[q].discrete){if(this.columns[q].getStatus()===x){p=this.columns[q].computeGraphData(a);if(1!==p[c].length)throw"Programming error - graphData for table columns must be singleton";n[c].push(p[c][0])}if(this.columns[q].getStatus()===m||this.columns[q].getStatus()===r)try{l=this.columns[q].evaluateOnce(this._context.getFrame());var u={graphMode:f.Y,independent:"x",dependent:"y",
operator:"="},J=this.compileConstantFunction(l),z=s.computeGraphData(a,u,J.fn);z[0].compiled=J;if(1!==z.length)throw"Programming error - graphData for table columns must be singleton";n[c].push(z[0])}catch(C){}}}return n};a.compileConstantFunction=function(a){a={args:[],function_string:"return "+String(a)};a.fn=new Function(a.args,a.function_string);return a};a.getGraphInfo=function(){return{graphMode:f.Y}};a.shouldIntersect=function(){return!0};a.compileAllBranches=function(a){return this.columns.slice(1).filter(function(a){return a.getStatus()===
x}).map(function(c){return c.compile(a)})}}),G=function(a,c){switch(c.type){case "table":return F(a,c);case "statement":case void 0:var b=p.tryParse(c.latex);return(0,n[b.statementType])(a,c,b);default:throw"Unrecognized statement type "+c.type;}};return{createAnalysisObject:G,status:{ERROR:d,WARNING:l,EVALUABLE:m,GRAPHABLE:x,SILENT:r}}});I("math/functions",["require","underscore","pjs"],function(b){var h=b("underscore");return b("pjs")(function(b){b.init=function(){var b={};this.compile=function(q,
p){var s=new Function(q,p);return h.bind(s,b)};this.register=function(h,p){b[h]=p}};b.dehydrateGraphData=function(b){for(var h=0;h<b.length;h++)b[h].compiled&&delete b[h].compiled.fn};b.rehydrateGraphData=function(b){for(var h=0;h<b.length;h++)b[h].compiled&&(b[h].compiled.fn=this.compile(b[h].compiled.args,b[h].compiled.function_string))};b.updateFromFunctionMap=function(b){for(var h in b)b.hasOwnProperty(h)&&this.register(h,b[h])};b.updateFromSourceMap=function(b){for(var h in b)if(b.hasOwnProperty(h)){var p=
b[h];this.register(h,this.compile(p.args,p.source))}}})});I("math/evaluatorcontext","require pjs underscore ./plotter ./evalframe ./evaluatorobject ./poi ./functions config graphing/graphmode main/fake_i18n".split(" "),function(b){var h=b("pjs"),u=b("underscore"),w=b("./plotter"),q=b("./evalframe"),p=b("./evaluatorobject"),s=b("./poi"),a=b("./functions"),k=b("config"),c=b("graphing/graphmode"),g=b("main/fake_i18n");return h(function(b){b.triggerGraphComputed=function(){};b.triggerStatusChange=function(){};
b.triggerRemoveGraph=function(){};b.triggerRender=function(){};b.triggerRenderSlowly=function(){};b.triggerDidAddStatement=function(){};b.triggerDidRemoveStatement=function(){};b.triggerDidSetCompleteState=function(){};b.triggerDidSetDegreeMode=function(){};b.triggerDidUpdateIntersections=function(){};b.triggerDidUpdateFunctionMap=function(){};b.init=function(c){c||(c=q());this.parent_frame=c;this.statements={};this.analysis=null;this.current_state={};this.dirty={};this.graph_changed=[];this.compiler=
a();this.intersectIds={};c=c.functionMap();for(var b in c)this.compiler.register(b,c[b])};b.eachStatement=function(a){for(var c in this.statements)a.apply(this,[this.statements[c]])};b.processChangeSet=function(a){var c,b;a.isCompleteState&&(this.statements={},this.invalidate());a.viewState&&this.setViewState(a.viewState);a.hasOwnProperty("degreeMode")&&this.setDegreeMode(a.degreeMode);a.hasOwnProperty("intersectIds")&&(this.intersectIds=a.intersectIds);if(a.statements)for(var e in a.statements){var f=
a.statements[e];if(null===f){if(!a.isCompleteState&&this.statements.hasOwnProperty(e)&&(c=this.statements[e].getAllIds()),this.removeStatement(e),!a.isCompleteState&&c){for(f=0;f<c.length;f++)this.triggerRemoveGraph(c[f]);this.triggerDidRemoveStatement(e)}}else this.addStatement(f),a.isCompleteState||this.triggerDidAddStatement(f)}a.hasOwnProperty("intersectId")&&this.updateIntersections(a.intersectId);a.isCompleteState&&(this.triggerDidSetCompleteState(a.statements),b=this.triggerRender,this.triggerRender=
this.triggerRenderSlowly,this.publishing_paused=!1);this.publishChanges();a.isCompleteState&&(this.triggerRender=b)};b.setViewState=function(a){u.isEqual(a,this.viewState)||(this.viewState=a,this.invalidate())};b.setDegreeMode=function(a){this.parent_frame.setDegreeMode(a);this.invalidate();this.triggerDidSetDegreeMode(a)};b.publishing_paused=!1;b.changes_pending=!1;b.pausePublishing=function(){this.publishing_paused=!0};b.resumePublishing=function(){this.publishing_paused=!1;this.changes_pending&&
this.publishChanges()};b.publishChanges=function(){this.publishing_paused?this.changes_pending=!0:(this.changes_pending=!1,this.publishAllStatuses(),w.validateViewState(this.viewState)&&this.graphAllChanged())};b.publishAllStatuses=function(){var a={},c=this.current_state;this.current_state={};this.eachStatement(function(b){b=b.id;var e=this.getEvaluationState(b);JSON.stringify(e)!==JSON.stringify(c[b])&&(a[b]=e);this.current_state[b]=e});this.triggerStatusChange(a)};b.graphAllChanged=function(){if(this.graph_changed.length){var a=
this.viewState,c,b;for(b=0;b<this.graph_changed.length;b++)c=this.graph_changed[b],this.statements.hasOwnProperty(c)&&(this.statements[c].isGraphed()?this.graph(c,a):this.triggerRemoveGraph(c));a={};for(b=0;b<this.graph_changed.length;b++)a[this.graph_changed[b]]=!0;this.graph_changed=[];for(c in this.intersectIds)this.intersectIds.hasOwnProperty(c)&&(a.hasOwnProperty(c)||this.updateIntersections(c));this.triggerRender()}};b.graph=function(a,c){if(c){var b=this.statements[a],e=b.computeGraphData(c);
if(this.intersectIds.hasOwnProperty(a)&&b.shouldIntersect()&&e.hasOwnProperty(a)){for(var b=this.findSomeIntersectionsWith(a),f=0;f<b.intersections.length;f++)e[a][f].poi.intersections=b.intersections[f];b.streamRest()}for(var g in e)this.triggerGraphComputed(g,e[g])}};b.updateIntersections=function(a){var c=this.statements[a];c&&c.shouldIntersect()?this.findSomeIntersectionsWith(a).streamRest():this.triggerDidUpdateIntersections(a,[])};var e={};b.findSomeIntersectionsWith=function(a){this.cancelIntersectionStreaming(a);
var b=this,f=Array.prototype.push,g=b.statements[a].getGraphInfo(),k=g.graphMode,h=b.statements[a].compileAllBranches(b.getFrame()),p=w.computeDomain(b.viewState,g,null),q=[],u;for(u in b.statements)b.statements.hasOwnProperty(u)&&String(u)!==String(a)&&q.push(b.statements[u]);for(var C=[],g=0;g<h.length;g++)C[g]={x:[],y:[],intersects:[]};var D=q.length-1,F=!1,G=function(){var g=new Date,x=!1,u,z,O,K,Q,M;for(D;0<=D;D--){if(20<new Date-g){if(!F)return;e[a]=setTimeout(G,60);if(!x)return;b.triggerDidUpdateIntersections(a,
C);return}K=q[D];if(K.shouldIntersect()&&K.getGraphInfo().graphMode===k){Q=K.compileAllBranches(b.getFrame());for(var I=0;I<h.length;I++){u=h[I].fn;for(var Y=0;Y<Q.length;Y++){z=Q[Y].fn;O=w.sampleXY(function(a){return z(a)-u(a)},p);O=s.findIntersections(O,u,z);O.x.length&&(x=!0);O.intersects=Array(O.x.length);M=0;for(var P=O.x.length;M<P;M++)O.intersects[M]=K.id;k===c.X&&(M=O.y,O.y=O.x,O.x=M);f.apply(C[I].x,O.x);f.apply(C[I].y,O.y);f.apply(C[I].intersects,O.intersects)}}}}F&&x&&(b.triggerDidUpdateIntersections(a,
C),b.cancelIntersectionStreaming(a))};G();return{intersections:C,streamRest:function(){b.triggerDidUpdateIntersections(a,C);F=!0;G()}}};b.cancelIntersectionStreaming=function(a){clearTimeout(e[a]);delete e[a]};b.cancelAllIntersectionStreaming=function(){for(var a in e[a])e.hasOwnProperty(a)&&this.cancelIntersectionStreaming(a)};b.addStatement=function(a){if(a){var c=a.id;this.markDirty(c);var b;this.statements.hasOwnProperty(c)&&(b=this.statements[c].getAllIds());this.statements[c]=p.createAnalysisObject(this,
a);if(b)for(var e=0;e<b.length;e++){var f=b[e];f!=c&&this.statements[c].cleanupId(f)}this.markClean(a.id);this.markDirty(a.id)}};b.removeStatement=function(a){this.statements.hasOwnProperty(a)&&(this.markDirty(a),delete this.statements[a])};b.recompute=function(){this.invalidate();this.publishChanges()};b.invalidate=function(){this.analysis=null;this.current_state={};this.cancelAllIntersectionStreaming()};b.markDirty=function(a){if(!this.dirty[a]&&(this.dirty[a]=!0,this.cancelIntersectionStreaming(a),
this.statements[a]))for(var c in this.statements[a].exportedSymbols())this.markSymbolDirty(c)};b.markSymbolDirty=function(a){this.assignmentForbidden(a)||this.eachStatement(function(c){c.referencesSymbol(a)&&this.markDirty(c.id)})};b.markClean=function(a){delete this.dirty[a]};b.isDirty=function(a){return this.dirty.hasOwnProperty(a)};b.getFrame=function(){return this.getAnalysis().frame};b.getAnalysis=function(){this.updateAnalysis();return this.analysis};b.getType=function(a){return this.statements[a].getType()};
b.updateAnalysis=function(){if(this.hasOwnProperty("partial_analysis"))throw"Programming error - two overlapping call to updateAnalysis";var a=[],c;if(this.analysis){for(c in this.dirty)a.push(c);if(0===a.length)return}else for(c in this.statements)a.push(c);delete this.analysis;var b=this.partial_analysis={};try{b.frame=q(this.parent_frame);this.eachStatement(function(a){var c=a.id;b[c]={};a.setAnalysis(b[c]);if(a=a.getParseError())b[c].error=a});b.assignments=this.analyzeAssignments();this.markVariableConflicts(b.assignments);
this.analyzeDependencies(b);for(var e=0;e<b.dependencyOrder.length;e++)c=b.dependencyOrder[e],this.statements[c].exportDefinitionsTo(b.frame,c);this.graph_changed=a;this.dirty={};var f=b.frame.leafFunctionMap(),g;for(g in f)this.compiler.register(g,f[g]);this.triggerDidUpdateFunctionMap(b.frame);this.analyzeStatus(b);k.get("dragpoints")&&this.analyzeMovable(b);this.analysis=this.partial_analysis}catch(h){this.invalidate()}finally{delete this.partial_analysis}};b.evaluateOnce=function(a){if(!this.statements.hasOwnProperty(a))throw"Statement "+
a+" not defined";return this.statements[a].evaluateOnce(this.getFrame())};b.compile=function(a){return this.statements[a].compile(this.getFrame())};b.evalStrings=function(a){return this.statements[a].evalStrings(this.getFrame())};b.analyzeStatus=function(a){this.eachStatement(function(c){var b=this.partial_analysis[c.id];b.error&&(b.status=p.status.ERROR);b.status||(b.status=c.computeStatus(a.frame))})};b.assignmentForbidden=function(a){return"x"===a||"y"===a||"theta"===a};b.getStatus=function(a){return void 0===
this.getAnalysis()[a]?void 0:this.getAnalysis()[a].status};b.getEvaluationState=function(a){this.getAnalysis();return this.statements[a].getEvaluationState()};b.analyzeAssignments=function(){var a={};this.eachStatement(function(c){var b=c.exportedSymbols(),e;for(e in b)this.assignmentForbidden(e)||(this.parent_frame&&this.parent_frame.defines(e)?c.markError(g.t("Cannot redefine __symbol__",{symbol:e})):(a.hasOwnProperty(e)||(a[e]=[]),a[e].push({id:c.id,arity:b[e]})))});return a};b.markVariableConflicts=
function(a){this.eachStatement(function(c){for(var b=c.shadowedSymbols(),e=0;e<b.length;e++){var f=b[e];a.hasOwnProperty(f)&&c.conflictError(f)}})};b.analyzeDependencies=function(a){var c=[],b=[],e={},f={},k;for(k in this.statements){var h=a[k];h.free_variables=[];if(this.statements.hasOwnProperty(k)){var s=this.statements[k].getDependencies();e[k]=0;for(var p in s)if(s.hasOwnProperty(p)){var q=s[p];if(this.parent_frame){if(1>=q&&this.parent_frame.hasVariable(p))continue;if(1<=q&&this.parent_frame.hasFunctionWithArity(p,
q))continue}var w=a.assignments[p];if(this.parent_frame&&this.parent_frame.defines(p))w=this.parent_frame.arity(p),0===w&&(h.error=g.t("Cannot call constant __dependency__ as a function",{dependency:p})),h.error=0<w?g.t("__dependency__ is a function that requires __real_arity__ arguments",{dependency:p,real_arity:w}):g.t("Something has gone wrong.  Please report this to desmos.com support");else{w&&0!==w.length||(1>=q?this.statements[k].addFreeVariables([p]):h.error=g.t("Function __dependency__ isn't defined. Try defining it in a new expression",
{dependency:p}));if(w&&1===w.length){var u=w[0].arity;if(u===q||0===u&&1===q)f.hasOwnProperty(p)||(f[p]=[]),f[p].push(k),e[k]++;else if(0===u)h.error=g.t("'__dependency__' is a variable, so can't be used as a function",{dependency:p});else if(1==u)h.error=g.t("Function '__dependency__' requires an argument. ",{dependency:p})+g.t("For example, try typing: __dependency__(x)",{dependency:p});else{for(var q=[],G=0;G<u;G++)q[G]=G+1;q=p+"("+q.join(", ")+")";h.error=g.t("Function '__dependency__' requires __assignment_arity__ arguments. ",
{dependency:p,assignment_arity:u})+g.t("For example, try typing: __recommendation__",{recommendation:q})}}w&&1<w.length&&(h.error=g.t("'__dependency__' is defined more than once. Try deleting all but one definition of '__dependency__'",{dependency:p}))}}0===e[k]&&b.push(k)}}for(;b.length;)if(h=b.pop(),!a[h].error){c.push(h);var s=this.statements[h].exportedSymbols(),H;for(H in s)if(s=f[H])for(;s.length;)p=s.pop(),this.statements[p].addFreeVariables(a[h].free_variables),e[p]--,0===e[p]&&(delete e[p],
b.push(p))}for(k in e)e.hasOwnProperty(k)&&0!==e[k]&&(a[k].unresolved=!0,a[k].error=g.t("Circular dependency"));a.dependencyOrder=c};b.analyzeMovable=function(a){this.eachStatement(function(c){c.computeMovable&&c.computeMovable(a.frame)})}})});I("worker/workercore",["require","math/evaluatorcontext","math/builtinframe","math/derivative"],function(b){var h=b("math/evaluatorcontext"),u=b("math/builtinframe");b("math/derivative");return function(b){var q=h(u);q.triggerGraphComputed=function(h,s){for(var a=
0;a<s.length;a++)s[a].compiled&&delete s[a].compiled.fn;b("graphComputed",{id:h,graphData:s})};q.triggerDidUpdateIntersections=function(h,s){b("updateIntersections",{id:h,intersections:s})};q.triggerDidUpdateFunctionMap=function(h){b("updateFunctionMap",h.leafFunctionSourceMap())};q.triggerRender=function(){b("render")};q.triggerRenderSlowly=function(){b("renderSlowly")};q.triggerRemoveGraph=function(h){b("removeGraph",h)};q.triggerDidSetDegreeMode=function(h){b("setDegreeMode",h)};q.triggerStatusChange=
function(h){b("statusChange",h)};return{processChangeSet:function(h){q.processChangeSet(h);b("processChangeSet",h)}}}});I("worker/fakeworker",["require","worker/workercore"],function(b){var h=b("worker/workercore");return function(b){var w={},q=h(function(h,s){b({data:{type:h,payload:s}})});w.postMessage=function(b){setTimeout(function(){q.processChangeSet(b)},0)};return w}});I("api/cross_origin_worker",["require"],function(b){return function(b,u){var w=window.location,q=document.createElement("a");
q.href=b;var p=JSON.stringify(u.all());if(q.protocol===w.protocol&&q.host===w.host)return b+"?desmos_config="+encodeURIComponent(p);var w="Desmos = {}; Desmos.config = JSON.parse('"+p+"');"+("importScripts('"+b+"');"),s;try{s=new Blob([w],{type:"application/javascript"})}catch(a){s=new (window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder),s.append(w),s=s.getBlob("application/javascript")}return(window.URL||window.webkitURL).createObjectURL(s)}});I("main/evaluator",
"require pjs math/builtinframe worker/fakeworker math/functions api/cross_origin_worker config".split(" "),function(b){var h=b("pjs"),u=b("math/builtinframe"),w=b("worker/fakeworker"),q=b("math/functions"),p=b("api/cross_origin_worker"),s=b("config");return h(function(a){a.triggerStatusChange=function(a){};a.triggerRemove=function(a){};a.triggerGraphComputed=function(a,b){};a.triggerUpdateIntersections=function(a,b){};a.triggerRender=function(){};a.triggerRenderSlowly=function(){};a.init=function(a){this.functions=
q();this.changeSet=null;this.jobsInWorker=0;this.syncId=1;this.processingDisabled=!1;var b=function(){this.worker=w(this.processMessage.bind(this));this.spawnNewWorker=function(){}}.bind(this);if(a)try{this.workerPath=p(a,s),this.spawnNewWorker()}catch(f){b()}else b();this.syncRequests=[];this.listeners.setDegreeMode=function(a){u.setDegreeMode(a)};this.functions.updateFromFunctionMap(u.functionMap())};a.spawnNewWorker=function(){this.worker&&this.worker.terminate();this.worker=new Worker(this.workerPath);
this.worker.addEventListener("message",this.processMessage.bind(this));this.worker.onerror=function(a){};this.jobsInWorker=0};a.processMessage=function(a){this.listeners[a.data.type].call(this,a.data.payload)};a.listeners={};a.listeners.processChangeSet=function(a){for(a=a.syncId;this.syncRequests.length&&this.syncRequests[0].id<=a;)this.syncRequests.shift().callback();this.jobsInWorker--;this.processChangeSet()};a.listeners.log=function(a){};a.listeners.removeGraph=function(a){this.triggerRemove(a)};
a.listeners.graphComputed=function(a){this.functions.rehydrateGraphData(a.graphData);this.triggerGraphComputed(a.id,a.graphData)};a.listeners.updateFunctionMap=function(a){this.functions.updateFromSourceMap(a)};a.listeners.updateIntersections=function(a){this.triggerUpdateIntersections(a.id,a.intersections)};a.listeners.statusChange=function(a){this.triggerStatusChange(a)};a.listeners.render=function(){this.triggerRender()};a.listeners.renderSlowly=function(){this.triggerRenderSlowly()};a._disableProcessing=
function(){this.processingDisabled=!0};a._enableProcessing=function(){this.processingDisabled=!1;this.processChangeSet()};a.batch=function(a){var b=this.processingDisabled;this._disableProcessing();try{a()}finally{b||this._enableProcessing()}};a.processChangeSet=function(){if(this.changeSet&&!(this.processingDisabled||0<this.jobsInWorker)){var a=this.changeSet;this.jobsInWorker++;this.changeSet=null;this.worker.postMessage(a)}};var b=function(a){return function(){this.changeSet||(this.changeSet={});
a.apply(this,arguments);this.processChangeSet()}};a.setViewState=b(function(a){this.changeSet.viewState=a});a.setCompleteState=b(function(a){0<this.jobsInWorker&&this.spawnNewWorker();this.changeSet.isCompleteState=!0;this.changeSet.statements=a});a.addStatement=b(function(a){this.changeSet.statements||(this.changeSet.statements={});this.changeSet.statements[a.id]=a});a.addStatements=b(function(a){for(var b=0;b<a.length;b++)this.addStatement(a[b])});a.removeStatement=b(function(a){this.changeSet.statements||
(this.changeSet.statements={});this.changeSet.statements[a]=null});a.removeStatements=b(function(a){for(var b=0;b<a.length;b++)this.removeStatement(a[b])});a.setIntersectIds=b(function(a){this.changeSet.intersectIds=a});a.updateIntersections=b(function(a){this.changeSet.intersectId=a});a.setDegreeMode=b(function(a){this.changeSet.degreeMode=a});a.notifyWhenSynced=b(function(a){this.syncId++;this.syncRequests.push({id:this.syncId,callback:a});this.changeSet.syncId=this.syncId})})});I("lib/browser",
["require","jquery"],function(b){b=b("jquery");var h={IS_IE8:null!==navigator.userAgent.match(/MSIE 8.0/i),IS_IE9:null!==navigator.userAgent.match(/MSIE 9.0/i),IS_IE:null!==navigator.userAgent.match(/MSIE/i),IS_IPAD:null!==navigator.userAgent.match(/iPad/i),IS_MOBILE:null!==navigator.userAgent.match(/Mobile|Android/i),IS_ANDROID:null!==navigator.userAgent.match(/Android/i),IS_KINDLE:null!==navigator.userAgent.match(/Kindle/i)||null!==navigator.userAgent.match(/Silk/i),IS_IN_IFRAME:window.parent!==
window};h.IS_OPERA_LT_12=function(){if(!navigator.userAgent.match(/OPERA/i))return!1;var b=navigator.userAgent.match(/Version\/(\d+)/);return b&&b[1]?12>parseInt(b[1],10):!1}();h.SUPPORTS_TRANSLATE3D=!1;b(document).ready(function(){var b=document.createElement("p"),w,q={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(b,null);for(var p in q)if(void 0!==b.style[p]){b.style[p]="translate3d(1px,1px,1px)";
w=window.getComputedStyle(b);if(!w)return;w=w.getPropertyValue(q[p])}document.body.removeChild(b);h.SUPPORTS_TRANSLATE3D=void 0!==w&&0<w.length&&"none"!==w});h.translateRule=function(b,w){return h.SUPPORTS_TRANSLATE3D?"translate3d("+b+(b?"px":"")+","+w+(w?"px":"")+",0)":"translate("+b+(b?"px":"")+","+w+(w?"px":"")+")"};h.CAPABLE_BROWSER=function(){var b=!1;if(window.matchMedia){var w=window.matchMedia("(max-device-width:480px)");w&&w.matches&&(b=!0)}else h.IS_ANDROID&&(b=!0);var w=document.createElement("canvas"),
w=!(!w.getContext||!w.getContext("2d")),q=h.IS_IPAD&&null!==navigator.userAgent.match(/OS 3/i);return w&&!(b||h.IS_KINDLE||q)}();return h});I("lib/rounding",["require","math/distance"],function(b){var h=b("math/distance"),u=function(b,h){var p=Math.pow(10,h);return Math.round(b*p)/p};return{bestRound:function(b,h,p){p=p||1;var s=-Math.floor(Math.log(h)/Math.LN10),a=u(b,s),s=u(b,s-2);Math.abs(s-b)<p*h&&(a=s);return a},shortestDecimalBetween:function(b,q){if(b>q){var p=q;q=b;b=p}if(b===q)return b;if(0>=
b&&0<=q)return 0;for(var p=h.mean(b,q),s=-8,a=p;309>s;){var k=Math.pow(10,-s),k=Math.round(p*k)/k;if(!(b<=k&&k<=q))break;a=k;s+=1}return a}}});I("graphing/viewport",["require","lib/rounding"],function(b){function h(b,h,p,s){this.xmin=void 0!==b?b:-10;this.xmax=void 0!==h?h:10;this.ymin=void 0!==p?p:-10;this.ymax=void 0!==s?s:10}var u=b("lib/rounding");h.prototype.toObject=function(){return{xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax}};h.fromObject=function(b){return new h(b.xmin,b.xmax,
b.ymin,b.ymax)};h.prototype.equals=function(b){return this.xmin!==b.xmin||this.ymin!==b.ymin||this.xmax!==b.xmax||this.ymax!==b.ymax?!1:!0};h.prototype.isXValid=function(){return 0<this.xmax-this.xmin};h.prototype.isYValid=function(){return 0<this.ymax-this.ymin};h.prototype.isValid=function(){return this.isXValid()&&this.isYValid()};h.prototype.isSquare=function(b){return 1>Math.abs(b.height-b.width*this.aspectRatio())};h.prototype.aspectRatio=function(){return(this.ymax-this.ymin)/(this.xmax-this.xmin)};
h.prototype.squareXAxis=function(b){var h=this.xmin+(this.xmax-this.xmin)/2;b=(this.ymax-this.ymin)/b.height*b.width;this.xmin=h-b/2;this.xmax=h+b/2};h.prototype.squareYAxis=function(b){var h=this.ymin+(this.ymax-this.ymin)/2;b=(this.xmax-this.xmin)/b.width*b.height;this.ymin=h-b/2;this.ymax=h+b/2};h.prototype.squareCrop=function(b){this.aspectRatio()>b.height/b.width?this.squareYAxis(b):this.squareXAxis(b)};h.prototype.round=function(b){var h=this.xmax-this.xmin,p=this.ymax-this.ymin,s=h/b.width;
b=p/b.height;this.xmin=u.bestRound(this.xmin,s/10);this.xmax=u.bestRound(this.xmin+h,s/10);this.ymin=u.bestRound(this.ymin,b/10);this.ymax=u.bestRound(this.ymin+p,b/10)};h.prototype.clone=function(){return new h(this.xmin,this.xmax,this.ymin,this.ymax)};h.prototype.polarDiameter=function(){var b=Math.abs(this.xmax),h=Math.abs(this.xmin),p=Math.abs(this.ymax),s=Math.abs(this.ymin);return 1.5*Math.max(b,h,p,s)};h.prototype.largestR=function(){return Math.sqrt(Math.pow(Math.max(-this.xmin,this.xmax),
2)+Math.pow(Math.max(-this.ymin,this.ymax),2))};h.prototype.smallestR=function(){return 0>=this.xmin&&0<=this.xmax&&0>=this.ymin&&0<=this.ymax?0:0>=this.xmin&&0<=this.xmax?Math.min(Math.abs(this.ymin),Math.abs(this.ymax)):0>=this.ymin&&0<=this.ymax?Math.min(Math.abs(this.xmin),Math.abs(this.xmax)):Math.sqrt(Math.pow(Math.max(this.xmin,-this.xmax),2)+Math.pow(Math.max(this.ymin,-this.ymax),2))};return h});I("graphing/projection",["require","./viewport"],function(b){var h=b("./viewport");b=function(b,
h,q){this.screen=b;this.viewport=h;this.settings=q};b.prototype.calculateViewportForScreen=function(b){var w=this.viewport,q=(b.width/this.screen.width-1)*(w.xmax-w.xmin),p=(b.height/this.screen.height-1)*(w.ymax-w.ymin),w=new h(w.xmin-q/2,w.xmax+q/2,w.ymin-p/2,w.ymax+p/2);w.round(b);return w};b.prototype.mapx=function(b){return(b-this.viewport.xmin)*this.screen.width/(this.viewport.xmax-this.viewport.xmin)};b.prototype.mapy=function(b){return this.screen.height-(b-this.viewport.ymin)*this.screen.height/
(this.viewport.ymax-this.viewport.ymin)};b.prototype.map_pt=function(b){return{x:this.mapx(b.x),y:this.mapy(b.y)}};b.prototype.reverse_mapx=function(b){return b*(this.viewport.xmax-this.viewport.xmin)/this.screen.width+this.viewport.xmin};b.prototype.reverse_mapy=function(b){return-(b-this.screen.height)*(this.viewport.ymax-this.viewport.ymin)/this.screen.height+this.viewport.ymin};b.prototype.reverse_map_pt=function(b){return{x:this.reverse_mapx(b.x),y:this.reverse_mapy(b.y)}};return b});I("graphing/viewporttransformation",
["require","pjs","./viewport","./projection"],function(b){var h=b("pjs"),u=b("./viewport"),w=b("./projection"),q=h(function(b){b.init=function(b,a,k,c){this.xOffset=void 0!==b?b:0;this.yOffset=void 0!==a?a:0;this.xScale=void 0!==k?k:1;this.yScale=void 0!==c?c:this.xScale};b.compose=function(b){return new q(b.xScale*this.xOffset+b.xOffset,b.yScale*this.yOffset+b.yOffset,b.xScale*this.xScale,b.yScale*this.yScale)};b.lerp=function(b,a){return new q((1-a)*this.xOffset+a*b.xOffset,(1-a)*this.yOffset+a*
b.yOffset,(1-a)*this.xScale+a*b.xScale,(1-a)*this.yScale+a*b.yScale)};b.transformProjection=function(b){var a=b.viewport,k=b.screen,c=(a.xmin+a.xmax)/2,g=(a.ymin+a.ymax)/2,f=c+(a.xmin-c)/this.xScale,c=c+(a.xmax-c)/this.xScale,e=g+(a.ymin-g)/this.yScale,a=g+(a.ymax-g)/this.yScale,g=this.xOffset*(c-f)/k.width,k=-this.yOffset*(a-e)/k.height;return new w(b.screen,new u(f-g,c-g,e-k,a-k),b.settings)}});return q});I("graphing/screen",["require"],function(b){return function(b,u){this.width=b;this.height=
u;return this}});I("text",["module"],function(b){var h,u,w,q,p=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,k="undefined"!==typeof location&&location.href,c=k&&location.protocol&&location.protocol.replace(/\:/,""),g=k&&location.hostname,f=k&&(location.port||void 0),e={},d=b.config&&b.config()||{};h={version:"2.0.7",strip:function(c){if(c){c=c.replace(s,"");var b=c.match(a);b&&(c=b[1])}else c=
"";return c},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var a,c,b;if("undefined"!==typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!==typeof ActiveXObject)for(c=0;3>c;c+=1){b=p[c];try{a=new ActiveXObject(b)}catch(d){}if(a){p=[b];break}}return a},parseName:function(a){var c,
b,d=!1,e=a.indexOf(".");c=0===a.indexOf("./")||0===a.indexOf("../");-1!==e&&(!c||1<e)?(c=a.substring(0,e),b=a.substring(e+1,a.length)):c=a;a=b||c;e=a.indexOf("!");-1!==e&&(d="strip"===a.substring(e+1),a=a.substring(0,e),b?b=a:c=a);return{moduleName:c,ext:b,strip:d}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,c,b,d){var e,f;e=h.xdRegExp.exec(a);if(!e)return!0;a=e[2];e=e[3];e=e.split(":");f=e[1];e=e[0];return(!a||a===c)&&(!e||e.toLowerCase()===b.toLowerCase())&&(!f&&!e||f===d)},finishLoad:function(a,
c,b,f){b=c?h.strip(b):b;d.isBuild&&(e[a]=b);f(b)},load:function(a,b,e,r){if(r.isBuild&&!r.inlineText)e();else{d.isBuild=r.isBuild;var n=h.parseName(a);r=n.moduleName+(n.ext?"."+n.ext:"");var s=b.toUrl(r),p=d.useXhr||h.useXhr;!k||p(s,c,g,f)?h.get(s,function(c){h.finishLoad(a,n.strip,c,e)},function(a){e.error&&e.error(a)}):b([r],function(a){h.finishLoad(n.moduleName+"."+n.ext,n.strip,a,e)})}},write:function(a,c,b,d){e.hasOwnProperty(c)&&(d=h.jsEscape(e[c]),b.asModule(a+"!"+c,"define(function () { return '"+
d+"';});\n"))},writeFile:function(a,c,b,d,e){c=h.parseName(c);var f=c.ext?"."+c.ext:"",g=c.moduleName+f,k=b.toUrl(c.moduleName+f)+".js";h.load(g,b,function(c){c=function(a){return d(k,a)};c.asModule=function(a,c){return d.asModule(a,k,c)};h.write(a,g,c,e)},e)}};if("node"===d.env||!d.env&&"undefined"!==typeof process&&process.versions&&process.versions.node)u=ua.nodeRequire("fs"),h.get=function(a,c,b){try{var d=u.readFileSync(a,"utf8");0===d.indexOf("﻿")&&(d=d.substring(1));c(d)}catch(e){b(e)}};else if("xhr"===
d.env||!d.env&&h.createXhr())h.get=function(a,c,b,e){var f=h.createXhr(),g;f.open("GET",a,!0);if(e)for(g in e)e.hasOwnProperty(g)&&f.setRequestHeader(g.toLowerCase(),e[g]);if(d.onXhr)d.onXhr(f,a);f.onreadystatechange=function(e){if(4===f.readyState&&(e=f.status,399<e&&600>e?(e=Error(a+" HTTP status: "+e),e.xhr=f,b(e)):c(f.responseText),d.onXhrComplete))d.onXhrComplete(f,a)};f.send(null)};else if("rhino"===d.env||!d.env&&"undefined"!==typeof Packages&&"undefined"!==typeof java)h.get=function(a,c){var b,
d,e=new java.io.File(a),f=java.lang.System.getProperty("line.separator"),e=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(e),"utf-8")),g="";try{b=new java.lang.StringBuffer;(d=e.readLine())&&d.length()&&65279===d.charAt(0)&&(d=d.substring(1));for(null!==d&&b.append(d);null!==(d=e.readLine());)b.append(f),b.append(d);g=String(b.toString())}finally{e.close()}c(g)};else if("xpconnect"===d.env||!d.env&&"undefined"!==typeof Components&&Components.classes&&Components.interfaces)w=
Components.classes,q=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),h.get=function(a,c){var b,d,e={},f=new FileUtils.File(a);try{b=w["@mozilla.org/network/file-input-stream;1"].createInstance(q.nsIFileInputStream),b.init(f,1,0,!1),d=w["@mozilla.org/intl/converter-input-stream;1"].createInstance(q.nsIConverterInputStream),d.init(b,"utf-8",b.available(),q.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),d.readString(b.available(),e),d.close(),b.close(),
c(e.value)}catch(g){throw Error((f&&f.path||"")+": "+g);}};return h});I("loadcss",["text"],function(b){function h(b){var h=document.getElementsByTagName("head")[0],p=document.createElement("link");p.href=b;p.rel="stylesheet";p.type="text/css";h.appendChild(p)}var u={};return{load:function(w,q,p,s){q=q.toUrl(w)+".css";s.isBuild?b.get(q,function(a){u[w]=a;p()}):(h(q),p())},onLayerEnd:function(b,h){var p="",s;for(s in u)p+=u[s];s=ua.nodeRequire("fs");var a=h.path.replace(/\.js/g,".required.css");s.writeFileSync(a,
p,"utf8")},write:function(b,h,p){h in u&&p("define('"+b+"!"+h+"', function(){});")}}});I("loadcss!css/poi",function(){});(function(b){b.fn.disableTextSelection=function(h){h&&this.each(function(){b(this).bind("mousedown touchstart",function(){b(document.activeElement).focusout()})});return this.each(function(){b(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})})}})(jQuery);I("lib/jquery.disabletextselection",
function(){});I("graphing/canvaslayer",["require","jquery","pjs","lib/browser","lib/jquery.disabletextselection"],function(b){var h=b("jquery"),u=b("pjs"),w=b("lib/browser");b("lib/jquery.disabletextselection");return u(function(b){b.init=function(b,s){this.$=h("<div class='graph-outer'></div>").css("position","absolute").css("overflow","hidden").disableTextSelection(w.IS_IE);this.canvas_node=h("<canvas class='graph-inner'></canvas>").css("position","relative").css("display","block").disableTextSelection(w.IS_IE);
this.devicePixelRatio=window.devicePixelRatio||1;this.ctx=this.canvas_node[0].getContext("2d");this.resize(b,s);this.unscaledCanvas=document.createElement("canvas");this.unscaledCanvas.width=b;this.unscaledCanvas.height=s;this.transforming=!1;this.$.append(this.canvas_node)};b.resize=function(b,h){1024===b&&2===this.devicePixelRatio&&(b=1023);if(b!==this.width||h!==this.height)this.width=b,this.height=h,this.$.css("width",b+"px").css("height",h+"px"),this.canvas_node.css("width",b+"px").css("height",
h+"px").attr("width",b*this.devicePixelRatio).attr("height",h*this.devicePixelRatio),this.unscaledCanvas&&(this.unscaledCanvas.width=b,this.unscaledCanvas.height=h),this.ctx.scale(this.devicePixelRatio,this.devicePixelRatio)};b.redraw=function(){};b.saveUnscaledCanvas=function(b){if(!this.transforming){this.transforming=!0;b=this.unscaledCanvas.getContext("2d");var h=this.unscaledCanvas.width,a=this.unscaledCanvas.height;b.clearRect(0,0,h,a);b.drawImage(this.canvas_node[0],0,0,h,a)}};b.releaseUnscaledCanvas=
function(){this.transforming=!1};b.paintScaledCanvas=function(b){if(this.unscaledCanvas){var h=this.ctx.canvas.width,a=this.ctx.canvas.height;this.ctx.save();this.ctx.clearRect(0,0,h,a);this.ctx.setTransform(b.xScale,0,0,b.yScale,b.xOffset*this.devicePixelRatio-0.5*(b.xScale-1)*h,b.yOffset*this.devicePixelRatio-0.5*(b.yScale-1)*a);this.ctx.drawImage(this.unscaledCanvas,0,0,h,a);this.ctx.restore()}}})});I("graphing/clipping",[],function(){var b={TOP:1,BOTTOM:2,LEFT:4,RIGHT:8,ALL:15,X:12,Y:3,POLAR_RADIAN_EQUALITY:1,
POLAR_RADIAN_INEQUALITY:2,POLAR_DEGREE_EQUALITY:3,POLAR_DEGREE_INEQUALITY:4,Y_EQUALS:5,X_EQUALS:6,mapSegmentToCanvas:function(h,u,w,q){var p=[],s=u.xmin,a=u.ymin,k=w.height;w=w.width/(u.xmax-u.xmin);u=-k/(u.ymax-u.ymin);var c=h.length,g,f;if(q===b.Y_EQUALS)for(q=0;q<c;q+=2)g=(h[q]-s)*w-0.5,f=(h[q+1]-a)*u+k-0.5,p.push(g,f);else if(q===b.X_EQUALS)for(q=0;q<c;q+=2)g=(h[q+1]-s)*w-0.5,f=(h[q]-a)*u+k-0.5,p.push(g,f);else if(q===b.POLAR_RADIAN_EQUALITY)for(q=0;q<h.length;q+=2)c=h[q],f=h[q+1],g=(f*Math.cos(c)-
s)*w-0.5,f=(f*Math.sin(c)-a)*u+k-0.5,p.push(g,f);else if(q===b.POLAR_RADIAN_INEQUALITY)for(q=0;q<h.length;q+=2)c=h[q],f=h[q+1],0>f&&(f=0),g=(f*Math.cos(c)-s)*w-0.5,f=(f*Math.sin(c)-a)*u+k-0.5,p.push(g,f);else if(q===b.POLAR_DEGREE_EQUALITY)for(q=0;q<h.length;q+=2)c=h[q]*Math.PI/180,f=h[q+1],g=(f*Math.cos(c)-s)*w-0.5,f=(f*Math.sin(c)-a)*u+k-0.5,p.push(g,f);else if(q===b.POLAR_DEGREE_INEQUALITY)for(q=0;q<h.length;q+=2)c=h[q]*Math.PI/180,f=h[q+1],0>f&&(f=0),g=(f*Math.cos(c)-s)*w-0.5,f=(f*Math.sin(c)-
a)*u+k-0.5,p.push(g,f);return p},clipStrokeEdges:function(h,u){return b.clipFillEdges(h,u,b.ALL,!0)},clipFillEdge:function(b,u,w,q){var p=[],s=[].push,a;q?(q=b[0],f=b[1],a=2,(e=u(q,f))&&p.push(q,f)):(q=b[b.length-2],f=b[b.length-1],a=0,e=u(q,f));for(;a<b.length;a+=2){var k=q,c=f,g=e;q=b[a];var f=b[a+1],e=u(q,f);if(e||g)e&&g&&p.push(q,f),e&&!g&&(s.apply(p,w(q,f,k,c)),p.push(q,f)),!e&&g&&s.apply(p,w(k,c,q,f))}return p},clipFillEdges:function(h,u,w,q){var p=u.xmin,s=u.xmax,a=u.ymin,k=u.ymax;u=function(a,
c){return a>=p};var c=function(a,c){return a<=s},g=function(c,b){return b>=a},f=function(a,c){return c<=k},e=function(a,c,b,d){return[p,c+(d-c)*(p-a)/(b-a)]},d=function(a,c,b,d){return[s,c+(d-c)*(s-a)/(b-a)]},l=function(c,b,d,e){return[c+(d-c)*(a-b)/(e-b),a]},m=function(a,c,b,d){return[a+(b-a)*(k-c)/(d-c),k]},x=h;w&b.LEFT&&(x=b.clipFillEdge(h,u,e,q));w&b.BOTTOM&&(x=b.clipFillEdge(x,g,l,q));w&b.RIGHT&&(x=b.clipFillEdge(x,c,d,q));w&b.TOP&&(x=b.clipFillEdge(x,f,m,q));return x},clipAllFillEdges:function(h,
u){return b.clipFillEdges(h,u,b.ALL,!1)},computePolarFill:function(b,u,w){var q=[],p,s=b[0],a=s+w,k=[];q.push(k);for(var c=0;c<b.length;c+=2)if(p=b[c],s=b[c+1],0>s&&(s=0),p>=a){k=[];q.push(k);for(a=s=b[c-2];p>=a;)a+=w;c-=4}else k.push(p,s);if(0===u)for(c=0;c<q.length;c++)q[c].push(0,0);else for(b=w/16,c=0;c<q.length;c++){w=q[c];s=w[0];for(p=a=w[w.length-2];p>s;p-=b)w.push(p,u);w.push(s,u)}return q},computeCartesianFill:function(b,u){b=b.slice();b.push(b[b.length-2],u);b.push(b[0],u);return[b]}};return b});
I("graphing/constants",[],function(){return{ANIMATE_ZOOM_DURATION:500,DOUBLETAP_ZOOM:2,ZOOM_FACTOR:1.125,MAX_DOTTED_SEGMENTS:1E3,STROKE_ALPHA:0.7,HIGHLIGHTED_STROKE_ALPHA:1,FILL_ALPHA:0.4,POINT_ALPHA:0.9,HIGHLIGHTED_POINT_ALPHA:0.6,POLAR_ALPHA:0.2,POI_ALPHA:0.01}});I("graphing/dasheddrawer",["require","./constants","math/distance"],function(b){function h(b,h){this.pattern=[11,7];this.replen=this.pattern[0]+this.pattern[1];null!==h&&h/this.replen>u.MAX_DOTTED_SEGMENTS&&(this.pattern[0]=h*this.pattern[0]/
this.replen/u.MAX_DOTTED_SEGMENTS,this.pattern[1]=h*this.pattern[1]/this.replen/u.MAX_DOTTED_SEGMENTS);this.dstaccum=this.pstate=0;this.py=this.px=null;this.ctx=b;return this}var u=b("./constants"),w=b("math/distance");h.getTotalSegmentLength=function(b){if(4>b.length)return 0;for(var h=0,s=b[0],a=b[1],k=2;k<b.length;k+=2)var c=b[k],g=b[k+1],h=h+w.hypot(c-s,g-a),s=c,a=g;return h};h.prototype.start=function(b,h){this.ctx.desmos_batching||this.ctx.beginPath();this.px=b;this.py=h};h.prototype.next=function(b,
h){var s=this.pattern[this.pstate],a=Math.sqrt(Math.pow(b-this.px,2)+Math.pow(h-this.py,2));if(1E-5<a){for(;a+this.dstaccum>=s;){var k=b-this.px,c=h-this.py,g=s-this.dstaccum,k=k*(g/a),c=c*(g/a);0===this.pstate&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(this.px+k,this.py+c));this.dstaccum=0;this.px+=k;this.py+=c;this.pstate=1-this.pstate;s=this.pattern[this.pstate];a-=g}0===this.pstate&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(b,h))}this.px=b;this.py=h;this.dstaccum+=a};h.prototype.skip=
function(b,h){this.px=b;this.py=h};h.prototype.close=function(){this.ctx.desmos_batching||this.ctx.stroke();this.dstaccum=this.pstate=0;this.py=this.px=null};return h});I("graphing/graphslayer","require pjs underscore ./canvaslayer ./clipping ./dasheddrawer ./constants ./viewport graphing/graphmode".split(" "),function(b){var h=b("pjs"),u=b("underscore"),w=b("./canvaslayer"),q=b("./clipping"),p=b("./dasheddrawer"),s=b("./constants"),a=b("./viewport"),k=b("graphing/graphmode"),c=function(c){return new a(-3,
c.width+3,-3,c.height+3)},g=h(w,function(a){a.redraw=function(a,c,b){var f=a.screen;this.resize(f.width,f.height);this.ctx.clearRect(0,0,f.width,f.height);this.redrawToCtx(this.ctx,a,c,b)};a.redrawToCtx=function(a,c,b,f){if(void 0===f||f.length<u.size(b))f=u.keys(b);f.forEach(function(f){var k=b[f];void 0!==k&&k.visible&&g.drawSketchToCtx(b[f],a,c)})}});g.eachSegment=function(a,c){for(var b=0;b<a.branches.length;b++)for(var g=a.branches[b],k=0;k<g.segments.length;k++)c(g,g.segments[k])};g.drawSketchToCtx=
function(a,c,b){if(a.branches&&a.branches.length){c.lineWidth=b.settings.graphLineWidth;c.strokeStyle=a.color;c.fillStyle=a.color;c.lineJoin="round";c.lineCap="round";var l=!!b.settings.takingScreenshot;c.desmos_batching=!0;c.beginPath();c.save();g.eachSegment(a,function(a,f){(a.graphMode===k.XYPOINT||a.graphMode===k.XYPOINT_MOVABLE&&l)&&g.drawPointsToCtx(c,b,f,a.style)});c.globalAlpha=s.POINT_ALPHA;c.stroke();c.restore();c.desmos_batching=!1;g.eachSegment(a,function(a,f){if(a.graphMode!==k.XYPOINT&&
a.graphMode!==k.XYPOINT_MOVABLE){var l=k.Y;a.flip&&(l=k.X);a.graphMode&&(l=a.graphMode);if(l===k.POLYGONFILL)g.fillPolygonToCtx(c,b,f);else{var h=a.operator;"<"!=h&&">"!=h&&"<="!=h&&">="!=h&&"\\leq"!=h&&"\\le"!=h&&"\\geq"!=h&&"\\ge"!=h||g.fillGraphStrokeToCtx(c,b,f,"<="==h||"<"==h||"\\leq"==h||"\\le"==h,l)}}});c.desmos_batching=!0;c.beginPath();g.eachSegment(a,function(l,h){if(l.graphMode!==k.XYPOINT&&l.graphMode!==k.XYPOINT_MOVABLE){var r=k.Y;l.flip&&(r=k.X);l.graphMode&&(r=l.graphMode);var n=l.operator;
g.drawGraphStrokeToCtx(c,b,h,"<"==n||">"==n||"!="==n||"dashed"===a.style,r,n)}});c.globalAlpha=s.STROKE_ALPHA;c.stroke();c.globalAlpha=1;c.desmos_batching=!1}};g.drawGraphStrokeToCtx=function(a,b,d,k,h,x){a.globalAlpha=b.settings.highlight?s.HIGHLIGHTED_STROKE_ALPHA:s.STROKE_ALPHA;h=g.getClippingGraphType(h,"="!==x,b.settings);d=q.mapSegmentToCanvas(d,b.viewport,b.screen,h);b=q.clipStrokeEdges(d,c(b.screen));if(k){d=new p(a,p.getTotalSegmentLength(b));d.start(b[0],b[1]);for(k=2;k<b.length;k+=2)d.next(b[k],
b[k+1]);d.close()}else{a.desmos_batching||a.beginPath();a.moveTo(b[0],b[1]);for(k=0;k<b.length;k+=2)a.lineTo(b[k],b[k+1]);a.desmos_batching||a.stroke()}a.globalAlpha=1};g.mapPointToScreen=function(a,c,b){c=a.mapx(c)-0.5;if(-20>c||c>a.screen.width+20)return null;b=a.mapy(b)-0.5;return-20>b||b>a.screen.height+20?null:{x:c,y:b}};g.drawPointToCtx=function(a,c,b,k,h,p){b=g.mapPointToScreen(c,b,k);if(!b)return!1;a.globalAlpha=c.settings.highlight?s.HIGHLIGHTED_POINT_ALPHA:s.POINT_ALPHA;h&&(a.globalAlpha=
h);a.globalAlpha=s.POINT_ALPHA;a.desmos_batching||a.beginPath();"cross"===p?(h=0.4*c.settings.pointLineWidth,a.moveTo(b.x-h,b.y-h),a.lineTo(b.x+h,b.y+h),a.moveTo(b.x+h,b.y-h),a.lineTo(b.x-h,b.y+h),a.lineWidth=0.3*c.settings.pointLineWidth):"open"===p?(h=0.5*c.settings.pointLineWidth,a.arc(b.x,b.y,h,0,2*Math.PI,!0),a.closePath(),a.fillStyle="white",a.lineWidth=0.25*c.settings.pointLineWidth,a.fill()):(a.moveTo(b.x-0.1,b.y-0.1),a.lineTo(b.x-0.1,b.y+0.1),a.lineTo(b.x+0.1,b.y+0.1),a.lineTo(b.x+0.1,b.y-
0.1));a.desmos_batching||a.stroke();a.globalAlpha=1;return!0};g.drawPointsToCtx=function(a,c,b,k){a.lineWidth=c.settings.pointLineWidth;for(var h=0;h<b.length;h++)g.drawPointToCtx(a,c,b[h][0],b[h][1],!1,k)};g.fillGraphStrokeToCtx=function(a,b,d,l,h){a.globalAlpha=h===k.POLAR?s.POLAR_ALPHA:s.FILL_ALPHA;var p=null,r=null;h===k.POLAR?(r=q.ALL,p=l?0:b.viewport.polarDiameter(),p=q.computePolarFill(d,p,b.settings.degreeMode?180:2*Math.PI)):h===k.Y?(r=q.Y,p=l?b.viewport.ymin:b.viewport.ymax,p=q.computeCartesianFill(d,
p)):h===k.X&&(r=q.X,p=l?b.viewport.xmin:b.viewport.xmax,p=q.computeCartesianFill(d,p));d=c(b.screen);for(l=0;l<p.length;l++){var n=g.getClippingGraphType(h,!0,b.settings),n=q.mapSegmentToCanvas(p[l],b.viewport,b.screen,n),n=q.clipFillEdges(n,d,r);if(6<=n.length){a.beginPath();a.moveTo(n[0],n[1]);for(var y=2;y<n.length;y+=2)a.lineTo(n[y],n[y+1]);a.closePath();a.fill()}}a.globalAlpha=1};g.fillPolygonToCtx=function(a,b,d){a.globalAlpha=s.FILL_ALPHA;var g=c(b.screen);b=q.mapSegmentToCanvas(d,b.viewport,
b.screen,q.Y_EQUALS);g=q.clipFillEdges(b,g,q.ALL);if(6<=g.length){a.beginPath();a.moveTo(g[0],g[1]);for(b=2;b<g.length;b+=2)a.lineTo(g[b],g[b+1]);a.closePath();a.fill()}a.globalAlpha=1};g.getClippingGraphType=function(a,c,b){switch(a){case k.X:return q.X_EQUALS;case k.PARAMETRIC:case k.Y:return q.Y_EQUALS;case k.POLAR:return b.degreeMode?c?q.POLAR_DEGREE_INEQUALITY:q.POLAR_DEGREE_EQUALITY:c?q.POLAR_RADIAN_INEQUALITY:q.POLAR_RADIAN_EQUALITY}};return g});I("graphing/poidotslayer","require loadcss!css/poi pjs ./graphslayer ./canvaslayer math/poi ./constants".split(" "),
function(b){b("loadcss!css/poi");var h=b("pjs"),u=b("./graphslayer"),w=b("./canvaslayer"),q=b("math/poi"),p=b("./constants"),s=h(w,function(a,b){a.init=function(){b.init.apply(this,arguments);this.$.addClass("poi-dots-layer")};a.redraw=function(a,b){this.resize(a.screen.width,a.screen.height);this.ctx.clearRect(0,0,a.screen.width,a.screen.height);var f=[],e;for(e in b){var d=b[e];if(d.visible){d.showHighlight&&s.drawSketchHighlight(d,this.ctx,a);var k=d.getPOI();(d.showPOI||k.length&&k[0].type===
q.DEFINITION)&&f.push.apply(f,s.drawPOIs(k,this.ctx,"#AAAAAA",a))}}this.savedPOI=f};a.getDrawnPOI=function(){return this.savedPOI||[]}});s.drawSketchHighlight=function(a,b,c){c.settings.setProperty("highlight",!0);u.drawSketchToCtx(a,b,c);c.settings.setProperty("highlight",!1)};s.drawPOIs=function(a,b,c,g){b.lineWidth=g.settings.pointLineWidth;b.strokeStyle=c||"#AAAAAA";b.fillStyle=c||"#AAAAAA";b.lineJoin="round";b.lineCap="round";c=b.globalAlpha;b.globalAlpha=p.POI_ALPHA;var f=[],e,d=a.length,l;
if(d&&a[0].type===q.DEFINITION)for(e=0;e<d;e++)l=a[e],u.mapPointToScreen(g,l.x,l.y)&&f.push(l);else for(e=0;e<d;e++)l=a[e],u.drawPointToCtx(b,g,l.x,l.y,p.POI_ALPHA)&&f.push(l);b.globalAlpha=c;return f};return s});I("graphing/domlayer",["require","pjs","jquery","lib/browser","lib/jquery.disabletextselection"],function(b){var h=b("pjs"),u=b("jquery"),w=b("lib/browser");b("lib/jquery.disabletextselection");return h(function(b){b.init=function(b,h){this.$=u("<div class='graph-outer'></div>").css("position",
"absolute").css("overflow","hidden").disableTextSelection(w.IS_IE);this.dom_node=u("<div></div>").css("position","relative").css("display","block").disableTextSelection(w.IS_IE);this.resize(b,h);this.$.append(this.dom_node)};b.resize=function(b,h){if(b!==this.width||h!==this.height)this.width=b,this.height=h,this.$.css("width",b+"px").css("height",h+"px"),this.dom_node.css("width",b+"px").css("height",h+"px")};b.redraw=function(){}})});I("graphing/label",["math/builtin"],function(b){function h(a,
k){if(isNaN(a))return{string:"undefined",value:a};if(0===a)return{string:"0",value:a};k||(k=a);var c=b.toFraction(a/Math.PI,24),g,f;if(w(k)&&b.approx(c.n/c.d*Math.PI,a,3))return g=0===c.n?"0":1===c.n?"π":-1===c.n?"-π":c.n.toString()+"π",f=1===c.d?"":"/"+c.d.toString(),{string:g+f,value:c.n/c.d*Math.PI};w(k)?(c=a.toFixed(q(k)),f=-1===c.indexOf(".")?c:c.replace(p,""),c=g=null):(g=u(a.toExponential(q(k/a))).split("e"),c=g[0]+"×10",g=g[1].replace("+",""),f=u(a.toExponential(q(k/a))).replace("+",""));
return{string:f,mantissa:c,superscript:g,value:a}}function u(a){return a.replace(s,"e")}function w(a){a=Math.abs(a);return 1E-4<a&&1E7>a}function q(a){a=Math.abs(a);a=Math.max(a,1E-16);return Math.max(0,Math.floor(4.5-Math.log(a)/Math.LN10))}var p=/\.?0+$/,s=/\.?0+e/;return{value:h,point:function(a,b,c,g){a=h(a,b);c=h(g(a.value),c);return[a,c]}}});I("graphing/poilabelslayer","require pjs jquery ./domlayer ./label graphing/graphmode math/poi".split(" "),function(b){var h=b("pjs"),u=b("jquery"),w=b("./domlayer"),
q=b("./label"),p=b("graphing/graphmode"),s=b("math/poi"),a=h(w,function(b,c){var g=u("body");b.init=function(){c.init.call(this,arguments);this.$.addClass("poi-labels-layer")};b.redraw=function(c,b){this.resize(c.screen.width,c.screen.height);this.dom_node.find(".poi").remove();var d=this.hoveredPOI,k=d?d.sketch:null,h=!1,s=[],r;for(r in b){var n=b[r];n===k&&(h=!0);n.visible&&(n=a.drawOpenPOI(n,this.dom_node,c),n.length&&s.push.apply(s,n))}h||(d=this.hoveredPOI=null);d&&d.sketch.visible?d.isOpen()?
g.hasClass("mouse-over-opened-poi")||g.addClass("mouse-over-opened-poi"):(a.drawHoveredPOI(this.dom_node,d,c),g.hasClass("mouse-over-closed-poi")||g.addClass("mouse-over-closed-poi")):(g.hasClass("mouse-over-closed-poi")&&g.removeClass("mouse-over-closed-poi"),g.hasClass("mouse-over-opened-poi")&&g.removeClass("mouse-over-opened-poi"));this.savedPOI=s};b.getDrawnPOI=function(){return this.savedPOI||[]}});a.getPointLabel=function(a,c){var b=c.xmax-c.xmin,f=c.ymax-c.ymin,e=a.getGraphMode();if(e===p.XYPOINT||
e===p.XYPOINT_MOVABLE)b=[q.value(a.x,b),q.value(a.y,f)];else{var d=(e=e===p.X)?a.y:a.x,l=a.getCompiledFunction(),b=q.point(d,b,f,l);e&&(f=b[0],b[0]=b[1],b[1]=f)}return{x:b[0].value,x_label:b[0].superscript?b[0].mantissa+"<sup>"+b[0].superscript+"</sup>":b[0].string,y:b[1].value,y_label:b[1].superscript?b[1].mantissa+"<sup>"+b[1].superscript+"</sup>":b[1].string,is_hole:!isFinite(b[1].value)}};a.createSinglePOI=function(b,c){var g=a.getPointLabel(b,c),f=g.is_hole?" hole":"",e=b.type===s.DEFINITION?
" real":"",d=g.x_label.replace("π","<span class='pi'>π</span>"),g=g.y_label.replace("π","<span class='pi'>π</span>");return u('<div class="tracept poi'+f+e+'">  <div class="pt"></div>  <div class="label">'+d+", "+g+'</div>  <div class="arrow""></div></div>')};a.drawHoveredPOI=function(b,c,g){var f=g.mapx(c.x),e=g.mapy(c.y);-20<f&&-20<e&&f<g.screen.width+20&&e<g.screen.height+20&&(c=a.createSinglePOI(c,g.viewport),c.css({left:f+"px",top:e+"px"}),c.addClass("mouseover"),b.append(c))};a.drawOpenPOI=
function(b,c,g){b=b.openPOI;if(!b.length)return[];for(var f=[],e=0;e<b.length;e++){var d=b[e],l=g.mapx(d.x),h=g.mapy(d.y);if(-20<l&&-20<h&&l<g.screen.width+20&&h<g.screen.height+20){var s=a.createSinglePOI(d,g.viewport);s.css({left:l+"px",top:h+"px"});s.addClass("opened");c.append(s);f.push(d)}}return f};return a});I("graphing/gridlayer",["jquery","pjs","./canvaslayer","./label"],function(b,h,u,w){return h(u,function(b){b.redraw=function(a,b){var c=a.screen;this.resize(c.width,c.height);this.ctx.clearRect(0,
0,c.width,c.height);this.redrawToCtx(this.ctx,a,b)};b.redrawToCtx=function(a,b,c){b.settings.showGrid&&(b.settings.polarMode?this.drawPolarGrid(a,b):this.drawCartesianGrid(a,b));b.settings.showAxes&&this.drawAxes(a,b,c);b.settings.showLabels&&(b.settings.polarMode?this.drawPolarLabels(a,b):this.drawCartesianLabels(a,b))};var h=function(a,b,c,d){a=Math.ceil(a/c);b=Math.floor(b/c);c=1/c;if(!(a>b||1E4<b-a))for(;a<=b;a++)d(a/c)},s=function(a,b,c){return a<b?b:a>c?c:a};b.drawPolarGrid=function(a,b){var c=
d(b),e=b.settings.minorAxisOpacity,f=1-(1-b.settings.majorAxisOpacity)/(1-e),g=b.mapx(0),k=b.mapy(0),s=b.screen.height/(b.viewport.ymax-b.viewport.ymin)/(b.screen.width/(b.viewport.xmax-b.viewport.xmin)),q=k/s,w=b.viewport.smallestR(),u=b.viewport.largestR(),G=c.minorStepX*Math.max(1,Math.floor(w/c.minorStepX)),H=c.majorStepX*Math.max(1,Math.floor(w/c.majorStepX));a.save();a.scale(1,s);a.beginPath();h(G,u,c.minorStepX,function(c){c=b.mapx(c)-g;a.moveTo(g+c,q);a.arc(g,q,c,0,2*Math.PI)});a.restore();
a.lineWidth=1;a.strokeStyle="rgba(0, 0 , 0, "+e+")";a.stroke();a.beginPath();h(0,359,0<w?5:15,function(c){a.moveTo(g,k);var d=b.mapx(u*Math.cos(c*Math.PI/180));c=b.mapy(u*Math.sin(c*Math.PI/180));a.lineTo(d,c)});a.stroke();a.save();a.scale(1,s);a.beginPath();h(H,u,c.majorStepX,function(c){c=b.mapx(c)-g;a.moveTo(g+c,q);a.arc(g,q,c,0,2*Math.PI)});a.restore();a.lineWidth=1;a.strokeStyle="rgba(0, 0 , 0, "+f+")";a.stroke();a.beginPath();h(0,345,90,function(c){a.moveTo(g,k);var d=b.mapx(u*Math.cos(c*Math.PI/
180));c=b.mapy(u*Math.sin(c*Math.PI/180));a.lineTo(d,c)});a.stroke()};b.drawCartesianGrid=function(a,b){var c=b.viewport.xmin,e=b.viewport.ymin,f=b.viewport.xmax,g=b.viewport.ymax,k=d(b),s=b.screen.width,q=b.screen.height,w=b.settings.minorAxisOpacity,u=b.settings.majorAxisOpacity;a.lineWidth=1;a.beginPath();a.strokeStyle="rgba(0, 0 , 0, "+w+")";h(c,f,k.minorStepX,function(c){c=Math.round(b.mapx(c));c!==s&&(a.moveTo(c-0.5,0),a.lineTo(c-0.5,q))});h(e,g,k.minorStepY,function(c){c=Math.round(b.mapy(c));
c!==q&&(a.moveTo(0,c-0.5),a.lineTo(s,c-0.5))});a.stroke();a.beginPath();a.strokeStyle="rgba(0, 0 , 0, "+(1-(1-u)/(1-w))+")";h(c,f,k.majorStepX,function(c){c=Math.round(b.mapx(c));c!==s&&(a.moveTo(c-0.5,0),a.lineTo(c-0.5,q))});h(e,g,k.majorStepY,function(c){c=Math.round(b.mapy(c));c!==q&&(a.moveTo(0,c-0.5),a.lineTo(s,c-0.5))});a.stroke()};b.drawAxes=function(a,b,c){var d=b.settings.axisLineOffset,e=b.settings.axisOpacity.toString(),f="rgba(127,205,230,"+e+")",e="rgba(0,0,0,"+e+")",g=Math.round(b.mapx(0))-
d,d=Math.round(b.mapy(0))-d,k=b.screen.height,h=b.screen.width;a.lineWidth=b.settings.axisLineWidth*("y"===c?3:1);a.strokeStyle="y"===c?f:e;a.beginPath();a.moveTo(g,0);a.lineTo(g,k);a.stroke();a.lineWidth=b.settings.axisLineWidth*("x"===c?3:1);a.strokeStyle="x"===c?f:e;a.beginPath();a.moveTo(0,d);a.lineTo(h,d);a.stroke()};b.drawPolarLabels=function(b,c){function e(a,b,d){a=Math.sqrt(a*a-b*b);D<=a&&a<=F&&d.push([c.mapx(b),c.mapy(a)]);D<=-a&&-a<=F&&d.push([c.mapx(b),c.mapy(-a)])}function f(a,b,d){a=
Math.sqrt(a*a-b*b);z<=a&&a<=C&&d.push([c.mapx(a),c.mapy(b)]);z<=-a&&-a<=C&&d.push([c.mapx(-a),c.mapy(b)])}var g=d(c),q=c.viewport.largestR(),u=c.viewport.smallestR(),z=c.viewport.xmin,C=c.viewport.xmax,D=c.viewport.ymin,F=c.viewport.ymax,G=c.screen.width,H=c.screen.height,J=c.settings.labelHangingColor,A=c.settings.labelNormalColor,L=c.settings.labelSize;b.textAlign="center";b.textBaseline="middle";b.font=L.toString()+"px Arial";var O=c.mapx(0),K=c.mapy(0),Q=0>=D&&0<=F,M=0>=z&&0<=C,I="";if(!Q&&!M){var Y=
Math.abs(O),P=Math.abs(O-G),E=Math.abs(K),N=Math.abs(K-H),S;Y<=P?(S="left",P=Y):S="right";E<=N?Y="top":(Y="bottom",E=N);I=P<=E?S:Y}h(g.majorStepX,q,g.majorStepX,function(d){var g=[],h=w.value(d,q),n=a(b,L,h);M&&D<=d&&d<=F&&g.push([O-n.main-n.superscript-5,c.mapy(d)]);M&&D<=-d&&-d<=F&&g.push([O-n.main-n.superscript-5,c.mapy(-d)]);Q&&z<=d&&d<=C&&g.push([c.mapx(d),K+0.6*L+3]);Q&&z<=-d&&-d<=C&&g.push([c.mapx(-d),K+0.6*L+3]);switch(I){case "top":f(d,F,g);break;case "bottom":f(d,D,g);break;case "left":e(d,
z,g);break;case "right":e(d,C,g)}for(d=0;d<g.length;d++){var p=s(g[d][0],3+n.main,G-3-n-n.superscript),u=s(g[d][1],3+L,H-3-L);b.fillStyle=A;k(b,L,h,p,u,n)}});S=Math.ceil(u/g.majorStepX);var V=Math.ceil((S+Math.floor(q/g.majorStepX))/2)*g.majorStepX;h(0,359,0<u?15:30,function(a){var d;d=c.settings.degreeMode?a.toString()+"°":w.value(a*Math.PI/180,2*Math.PI).string;var e=b.measureText(d).width/2,f=V/1.05,g=f*Math.cos(a*Math.PI/180),f=f*Math.sin(a*Math.PI/180);if(!(g<z||g>C||f<D||f>F)){g=c.mapx(g);f=
c.mapy(f);if(0===a||180===a)f-=L;else if(90===a||270===a)g+=e+3;a=s(g,3+e,G-3-e);e=s(f,3+L,H-3-L);b.fillStyle=J;b.font=L.toString()+"px Arial";b.fillText(d,a,e)}})};var a=function(a,b,c){var d=0,e;c.superscript&&"0"!==c.string?(a.font=b.toString()+"px Arial",e=a.measureText(c.mantissa).width/2,a.font=Math.round(0.8*b).toString()+"px Arial",d=a.measureText(c.superscript).width):(a.font=b.toString()+"px Arial",e=a.measureText(c.string).width/2);return{main:e,superscript:d}},k=function(a,c,b,d,e,f){b.superscript?
(a.font=c.toString()+"px Arial",a.fillText(b.mantissa,d,e+Math.round(c/5)),a.font=Math.round(0.8*c).toString()+"px Arial",a.fillText(b.superscript,d+f.main+f.superscript/2,e-Math.round(c/4))):(a.font=c.toString()+"px Arial",a.fillText(b.string,d,e))};b.drawCartesianLabels=function(c,b){var e=b.viewport.xmin,f=b.viewport.xmax,g=b.viewport.ymin,q=b.viewport.ymax,u=d(b),z=b.screen.width,C=b.screen.height,D=b.settings.labelHangingColor,F=b.settings.labelNormalColor,G=b.mapx(0),H=b.mapy(0),J=b.settings.labelSize;
c.textAlign="center";c.textBaseline="middle";c.font=J.toString()+"px Arial";var A=(c.measureText("-1").width-c.measureText("1").width)/2;h(e,f,u.majorStepX,function(d){var g=w.value(d,f-e),h=a(c,J,g),n=b.mapx(d),p=H+0.6*J+3;0>d&&(n-=A);d=s(n,3+h.main,z-3-h.main-h.superscript);n=s(p,3+J,C-3-J);c.fillStyle=p===n?F:D;"0"===g.string?(c.fillStyle=F,c.fillText("0",G-5-h.main,p)):k(c,J,g,d,n,h)});h(g,q,u.majorStepY,function(d){var e=w.value(d,q-g),f=a(c,J,e),h=b.mapy(d);d=G-3-f.main-f.superscript;var r=
s(d,3+f.main,z-3-f.main-f.superscript),h=s(h,3+J,C-3-J);c.fillStyle=d===r?F:D;"0"!==e.string&&k(c,J,e,r,h,f)})};var c={base:10,major:[1,2,5],minor:[4,4,5]},g={base:10,major:[Math.PI,2*Math.PI,5*Math.PI],minor:[4,4,5]},f={base:2,major:[Math.PI/3],minor:[3]},e=function(a,c){for(var b,d=Infinity,e,f,g=0;g<c.major.length;g++)b=c.major[g],f=Math.ceil(Math.log(a/b)/Math.log(c.base)),b*=Math.pow(c.base,f),b<d&&(d=b,e=d/c.minor[g]);return{major:d,minor:e}},d=function(a){var b=a.screen.width,d=a.screen.height,
k=a.viewport.xmax-a.viewport.xmin,h=a.viewport.ymax-a.viewport.ymin,s=k/(b/a.settings.pixelsPerLabel+1-1),p=h/(d/a.settings.pixelsPerLabel+1-1),q,w;q=!a.settings.xAxisPiLabels||a.settings.polarMode?c:1<=s?g:f;s=e(s,q);w=!a.settings.yAxisPiLabels||a.settings.polarMode?c:1<=p?g:f;p=e(p,w);q===w&&(a=a.settings.polarMode?Infinity:2,b=b/k/(d/h),1<=b&&b<=a?s=p:1>=b&&b>=1/a&&(p=s));return{majorStepX:s.major,minorStepX:s.minor,majorStepY:p.major,minorStepY:p.minor}}})});I("graphing/poi",[],function(){function b(b,
u,w,q,p){this.x=b;this.y=u;this.type=w;this.sketch=q;this.branch=p}b.prototype.getGraphMode=function(){return this.sketch.branches[this.branch].graphMode};b.prototype.getCompiledFunction=function(){return this.sketch.branches[this.branch].compiled.fn};b.prototype.isOpen=function(){return 0<=this.sketch.openPOI.indexOf(this)};b.prototype.close=function(){var b=this.sketch.openPOI.indexOf(this);if(-1===b)return!1;this.sketch.openPOI.splice(b,1);return!0};b.prototype.open=function(){if(this.isOpen())return!1;
this.sketch.openPOI.push(this);return!0};return b});I("graphing/graphsketch",["require","math/poi","./poi","math/distance","graphing/graphmode"],function(b){function h(b,a){this.color="#000000";this.style="normal";this.visible=!0;this.showHighlight=this.showPOI=!1;this.openPOI=[];this.hiddenOpenPOI=[];this.id=b;this.branches=void 0!==a?a:[]}var u=b("math/poi"),w=b("./poi"),q=b("math/distance"),p=b("graphing/graphmode");h.prototype.getPOI=function(){if(this.__cachedPOI)return this.__cachedPOI;var b,
a;this.__cachedPOI=[];for(var k=0;k<this.branches.length;k++)b=this.branches[k],a=b.graphMode,b=b.poi,a===p.X||a===p.Y?(this._pushPOI(b.zeros,k,u.ZERO),this._pushPOI(b.intercept,k,u.INTERCEPT),this._pushPOI(b.extrema,k,u.EXTREMUM),this._pushPOI(b.intersections,k,u.INTERSECTION)):a!==p.XYPOINT&&a!==p.XYPOINT_MOVABLE||this._pushPOI(b.defined,k,u.DEFINITION);return this.__cachedPOI};h.prototype._pushPOI=function(b,a,k){if(b)for(var c=0,g=b.x.length;c<g;c++){var f=new w;f.type=k;f.x=b.x[c];f.y=b.y[c];
f.branch=a;f.sketch=this;b.intersects&&(f.intersects=b.intersects[c]);this.__cachedPOI.push(f)}};h.prototype.updateIntersections=function(b){for(var a=0,k=this.branches.length;a<k;a++)this.branches[a].poi.intersections=b[a];this.__cachedPOI=void 0;this.getPOI();this.reopenPOIFrom(this)};h.prototype.updateFrom=function(b){b&&(this.visible=!0,(b.openPOI.length||b.hiddenOpenPOI.length)&&this.reopenPOIFrom(b),this.showPOI=b.showPOI,this.showHighlight=b.showHighlight)};h.prototype.reopenPOIFrom=function(b){var a=
[],k=[],c,g,f,e,d,h,m,p={},r={};c=this.getPOI();for(h=0;h<c.length;h++)g=c[h],f=g.type,p[f]?p[f].push(g):p[f]=[g];c=b.openPOI.concat(b.hiddenOpenPOI);for(h=0;h<c.length;h++)g=c[h],f=g.type,r[f]?r[f].push(g):r[f]=[g];for(var n in r)for(d=r[n],b=p[n]||[],h=d.length-1;0<=h;h--){f=d[h];c=Infinity;g=-1;for(m=b.length-1;0<=m;m--)(e=b[m])&&e.intersects===f.intersects&&(e=q.hypot(f.x-e.x,f.y-e.y),e<c&&(g=m,c=e));-1!=g?(a.push(b[g]),b[g]=null):k.push(f)}this.openPOI=a;this.hiddenOpenPOI=k};return h});I("graphing/tracelayer",
["require","pjs","./domlayer","./poi","./poilabelslayer"],function(b){var h=b("pjs"),u=b("./domlayer"),w=b("./poi"),q=b("./poilabelslayer");return h(u,function(b,h){b.init=function(){h.init.apply(this,arguments);this.$.addClass("trace-layer")};b.redraw=function(a){this.resize(a.screen.width,a.screen.height);this.dom_node.find(".tracept").remove();var b=this.traceInfo?this.traceInfo.pt:null;if(b){var c=a.mapx(b.x),g=a.mapy(b.y);-20<c&&-20<g&&c<a.screen.width+20&&g<a.screen.height+20&&(b=new w(b.x,
b.y,w.ZERO,this.traceInfo.branchInfo.sketch,this.traceInfo.branchInfo.branch),a=q.createSinglePOI(b,a.viewport),a.css({left:c+"px",top:g+"px"}),a.addClass("temp"),a.removeClass("poi"),a.find(".pt").css("background-color",b.sketch.color),a.find(".pt").css("border-color",b.sketch.color),this.dom_node.append(a))}}})});I("graphing/movablepointslayer",["require","pjs","jquery","./domlayer","graphing/graphmode"],function(b){var h=b("pjs"),u=b("jquery"),w=b("./domlayer"),q=b("graphing/graphmode"),p={};return h(w,
function(b,a){var k=u("body");b.redraw=function(a,b){this.resize(a.screen.width,a.screen.height);var f=b[this.hoveredSketchId];f||(this.hoveredSketchId=null);var e=b[this.pressedSketchId];e||(this.pressedSketchId=null);var d=[],h;for(h in p)p[h].shouldGarbageCollect=!0;for(h in b){var m=b[h];if(m.visible){var s;s=m;var r=this.dom_node,n=a,y=m===f,m=m===e;if(s.branches&&1===s.branches.length&&s.branches[0].graphMode===q.XYPOINT_MOVABLE){var w=s.getPOI()[0],z=n.mapx(w.x),C=n.mapy(w.y);if(!(s.id in p)){var D=
u("<div class='movable-point'><div class='background'></div><div class='dot'></div></div>");r.append(D);p[s.id]={$:D,shouldGarbageCollect:!0}}r=p[s.id].$;-20<z&&-20<C&&z<n.screen.width+20&&C<n.screen.height+20&&(r.css({left:z+"px",top:C+"px",backgroundColor:s.color}),r.toggleClass("highlight",!!s.showHighlight),r.toggleClass("simulate-hovered",!!y),r.toggleClass("simulate-active",!!m),p[s.id].shouldGarbageCollect=!1);s=w}else s=void 0;s&&d.push(s)}}for(h in p)p[h].shouldGarbageCollect&&(p[h].$.remove(),
delete p[h]);f&&f.visible?k.hasClass("mouse-over-movable-point")||k.addClass("mouse-over-movable-point"):k.hasClass("mouse-over-movable-point")&&k.removeClass("mouse-over-movable-point");e&&e.visible?k.hasClass("dragging-movable-point")||k.addClass("dragging-movable-point"):k.hasClass("dragging-movable-point")&&k.removeClass("dragging-movable-point");this.savedPOI=d};b.getDrawnPOI=function(){return this.savedPOI}})});I("graphing/grapher","require jquery lib/browser ./viewport ./viewporttransformation ./screen ./poidotslayer ./poilabelslayer ./gridlayer ./graphsketch ./canvaslayer ./graphslayer ./projection ./tracelayer ./movablepointslayer math/poi".split(" "),
function(b){function h(b,d){this.container=b;this.$=u(b);this.viewport=new q;this.screen=new s(this.$.width(),this.$.height());this.settings=d;this.$.css("overflow","hidden");this.gridLayer=c(this.screen.width,this.screen.height);this.$.append(this.gridLayer.$);this.poiDotsLayer=a(this.screen.width,this.screen.height);this.$.append(this.poiDotsLayer.$);this.graphsLayer=e(this.screen.width,this.screen.height);this.$.append(this.graphsLayer.$);this.$.append('<div class="screenshot"></div>');this.movablePointsLayer=
m(this.screen.width,this.screen.height);this.movablePointsLayer.$.css("z-index","0");this.$.append(this.movablePointsLayer.$);this.poiLabelsLayer=k(this.screen.width,this.screen.height);this.poiLabelsLayer.$.css("z-index","0");this.$.append(this.poiLabelsLayer.$);this.traceLayer=l(this.screen.width,this.screen.height);this.traceLayer.$.css("z-index","0");this.$.append(this.traceLayer.$);w.IS_IE9&&this.traceLayer.$.addClass("transparent-bg");this.transformation=new p;this.scaleAxis=void 0;this.__transient=
!1;this.graphSketches={};this.__sketchOrder=[];this.selectedId=null;return this}var u=b("jquery"),w=b("lib/browser"),q=b("./viewport"),p=b("./viewporttransformation"),s=b("./screen"),a=b("./poidotslayer"),k=b("./poilabelslayer"),c=b("./gridlayer"),g=b("./graphsketch"),f=b("./canvaslayer"),e=b("./graphslayer"),d=b("./projection"),l=b("./tracelayer"),m=b("./movablepointslayer"),x=b("math/poi");h.prototype.setSketchOrder=function(a){this.__sketchOrder=a;this.redrawGraphsLayer()};h.prototype.clear=function(){this.graphSketches=
{}};h.prototype.getGraphSketch=function(a){return a in this.graphSketches?this.graphSketches[a]:null};h.prototype.addGraphSketch=function(a){this.graphSketches[a.id]=a};h.prototype.removeGraphSketch=function(a){delete this.graphSketches[a]};h.prototype.createProjection=function(){var a=new d(this.screen,this.viewport,this.settings);return this.isInTransientState()?this.transformation.transformProjection(a):a};h.prototype.computeDefaultViewport=function(){var a=new q(-10,10,-10,10);a.squareYAxis(this.screen);
a.round(this.screen);return a};h.prototype.updateScreenSize=function(a,b){if(!(0>=a||0>=b)){if(this.screen.width===a&&this.screen.height===b)return!1;this.$.width(a);this.$.height(b);this.screen.width=a;this.screen.height=b;return!0}};h.prototype.beginTransientState=function(){if(!this.isInTransientState()){var a=this.createProjection();this.graphsLayer.saveUnscaledCanvas(a);this.__transient=!0}};h.prototype.endTransientState=function(){if(this.isInTransientState()){var a=this.createProjection();
this.viewport=a.viewport;this.viewport.round(a.screen);this.settings.setProperty("squareAxes",this.viewport.isSquare(a.screen));this.transformation=new p;this.graphsLayer.releaseUnscaledCanvas();this.__transient=!1}};h.prototype.isInTransientState=function(){return this.__transient};h.prototype.hide=function(a){if(a=this.getGraphSketch(a))a.visible=!1};h.prototype.select=function(a){var b=this.getGraphSketch(this.selectedId);b&&(b.showPOI=b.showHighlight=!1);if(b=this.getGraphSketch(a))b.showPOI=
b.showHighlight=!0;this.selectedId=a};h.prototype.updateSketch=function(a,b){if(!this.isInTransientState()){var c=this.getGraphSketch(a);if(!b.length)return this.hide(a);var d=new g(a,b);d.color=b[0].color;d.style=b[0].style;d.updateFrom(c);d.showPOI=d.showHighlight=String(a)===String(this.selectedId);this.addGraphSketch(d)}};h.prototype.updateIntersections=function(a,b){var c=this.getGraphSketch(a);c&&c.updateIntersections(b)};h.prototype.redrawAllLayers=function(){this.cancelRedrawSlowly();this.redrawGridLayer();
this.redrawContentLayers()};h.prototype.redrawContentLayers=function(){this.cancelRedrawSlowly();this.redrawGraphsLayer();this.redrawPOILayer();this.redrawTraceLayer();this.redrawMovablePointsLayer()};h.prototype.cancelRedrawSlowly=function(){clearTimeout(this.redraw_slowly_timeout);this.redraw_slowly_timeout=null};h.prototype.redrawSlowly=function(a,b,c){"undefined"===typeof a&&(a=30);"undefined"===typeof b&&(b=1);"undefined"===typeof c&&(this.cancelRedrawSlowly(),c=0);this.redrawGridLayer();var d=
{},e=!1,f=0,g;for(g in this.graphSketches){if(f++>c){e=!0;break}d[g]=this.graphSketches[g]}this.graphsLayer.redraw(this.createProjection(),d,this.__sketchOrder);if(e){var k=this;this.redraw_slowly_timeout=setTimeout(function(){k.redrawSlowly(a,b,c+b)},a)}else this.redrawPOILayer(),this.redrawTraceLayer(),this.redrawMovablePointsLayer(),this.redraw_slowly_timeout=null};h.prototype.redrawGridLayer=function(){this.screen.height&&this.screen.width&&this.gridLayer.redraw(this.createProjection(),this.scaleAxis)};
h.prototype.redrawGraphsLayer=function(){this.screen.height&&this.screen.width&&(this.isInTransientState()?this.graphsLayer.paintScaledCanvas(this.transformation):this.graphsLayer.redraw(this.createProjection(),this.graphSketches,this.__sketchOrder))};h.prototype.redrawMovablePointsLayer=function(){this.screen.height&&this.screen.width&&this.movablePointsLayer.redraw(this.createProjection(),this.graphSketches)};h.prototype.redrawPOILayer=function(){this.screen.height&&this.screen.width&&(this.poiDotsLayer.redraw(this.createProjection(),
this.graphSketches),this.poiLabelsLayer.redraw(this.createProjection(),this.graphSketches))};h.prototype.redrawTraceLayer=function(){this.screen.height&&this.screen.width&&this.traceLayer.redraw(this.createProjection())};h.prototype.screenshot=function(){var a=this.screen,b=f(a.width,a.height),c=b.ctx,d=this.createProjection();c.fillStyle="white";c.fillRect(0,0,a.width,a.height);this.settings.takingScreenshot=!0;this.gridLayer.redrawToCtx(c,d);this.graphsLayer.redrawToCtx(c,d,this.graphSketches);
this.settings.takingScreenshot=!1;return b.canvas_node.get(0).toDataURL("image/png")};h.prototype.thumbnail=function(a,b){var c=new s(a,b),e=f(a,b),g=e.ctx,k=this.settings.clone();k.setProperty("showLabels",!1);var h=this.viewport.clone();h.isSquare(this.screen)&&h.squareCrop(c);k=new d(c,h,k);g.fillStyle="white";g.fillRect(0,0,c.width,c.height);this.settings.takingScreenshot=!0;this.gridLayer.redrawToCtx(g,k);this.graphsLayer.redrawToCtx(g,k,this.graphSketches);this.settings.takingScreenshot=!1;
return e.canvas_node.get(0).toDataURL("image/png")};h.prototype.getOpenIntersectionIds=function(){var a,b,c={},d;for(d in this.graphSketches)if(this.graphSketches.hasOwnProperty(d)){a=this.graphSketches[d].openPOI;for(b=a.length-1;0<=b;b--)a[b].type===x.INTERSECTION&&(c[d]=!0);a=this.graphSketches[d].hiddenOpenPOI;for(b=a.length-1;0<=b;b--)a[b].type===x.INTERSECTION&&(c[d]=!0)}return c};return h});I("graphing/poicontroller",["require","jquery","math/distance","lib/rounding","graphing/graphmode"],
function(b){function h(b){this.manager=b;this.$=this.manager.$;this.triggerMovePoint=function(a){};this.triggerStartTracingBranch=function(){};this.triggerEmptyTouchStart=function(){};this.triggerStartMovingPoint=function(){};this.triggerStopMovingPoint=function(){};this.triggerPointSelected=function(){};this.addTouchEventHandlers();this.addHoverEventHandler()}var u=b("jquery"),w=b("math/distance"),q=b("lib/rounding"),p=b("graphing/graphmode");h.prototype.getToleranceByDevice=function(b){return"touch"===
b?20:10};h.prototype.addHoverEventHandler=function(){u(document).on("tapmove",function(b){if("touch"!==b.device){var a=this.getMouseRelativeToGrapher(b);b=this.getToleranceByDevice(b.device);var k=this.getPointUnderPoint(a,b),c=null,g=null;k?g=k.sketch.branches[k.branch].graphMode===p.XYPOINT_MOVABLE?k.sketch.id:null:c=this.getPOIUnderPoint(a,b);c!=this.manager.poiLabelsLayer.hoveredPOI&&(this.manager.poiLabelsLayer.hoveredPOI=c,this.manager.redrawPOILayer());g!=this.manager.movablePointsLayer.hoveredSketchId&&
(this.manager.movablePointsLayer.hoveredSketchId=g,this.manager.redrawMovablePointsLayer())}}.bind(this))};h.prototype.addTouchEventHandlers=function(){this.$.on("dblclick",function(b){var a=this.getMouseRelativeToGrapher(b),k=this.getToleranceByDevice(b.device);if(this.getPointUnderPoint(a,k)||this.getPOIUnderPoint(a,k)||this.getBranchInfoUnderPoint(a,k))b.preventDefault(),b.handle()}.bind(this));this.$.on("tapstart",function(b){var a=this.getMouseRelativeToGrapher(b),k=this.getToleranceByDevice(b.device);
u(document.activeElement).blur();var c=this.getPointUnderPoint(a,k);c?(this.triggerStartMovingPoint(c.id),this.startMovingPoint(c),b.handle()):this.togglePOIUnderPoint(a,k)?b.handle():(k=this.getBranchInfoUnderPoint(a,k))?(this.triggerStartTracingBranch(k.id),this.startTracingBranch(k,a),b.handle()):this.triggerEmptyTouchStart()}.bind(this))};h.prototype.getMouseRelativeToGrapher=function(b){var a=this.$.offset();b=b.touches?b.touches[0]:b;return{x:b.pageX-a.left,y:b.pageY-a.top}};h.prototype.getPointUnderPoint=
function(b,a){var k=a,c=null,g=this.manager.graphSketches,f=this.manager.createProjection(),e;for(e in g){var d=g[e];if(d&&d.visible){var h=d.branches;if(h&&h.length)for(var m=0;m<h.length;m++){var q=h[m].graphMode===p.XYPOINT_MOVABLE;if(q||h[m].graphMode===p.XYPOINT)for(var r=h[m].segments[0],n=0;n<r.length;n++){var y=r[n],u=f.map_pt({x:y[0],y:y[1]}),u=w.hypot(u.x-b.x,u.y-b.y);if(u<k||q&&u<a)k=u,c={id:e,branch:m,sketch:d,x:y[0],y:y[1]}}}}}return c};h.prototype.getPOIUnderPoint=function(b,a){var k=
this.manager.createProjection(),c=this.manager.poiLabelsLayer.getDrawnPOI(),c=c.concat(this.manager.poiDotsLayer.getDrawnPOI());if(!c.length)return null;var g=c[0],f=k.map_pt(g),e=a,d=null,f=w.hypot(f.x-b.x,f.y-b.y);f<e&&(d=g,e=f);for(var h=1;h<c.length;h++)g=c[h],f=k.map_pt(g),f=w.hypot(f.x-b.x,f.y-b.y),f<e&&(e=f,d=g);return d};h.prototype.getAllPOIAtSameLocation=function(b){if(!b)return[];var a=[],k=this.manager.poiLabelsLayer.getDrawnPOI(),c=this.manager.poiDotsLayer.getDrawnPOI(),k=k.concat(c);
if(!k.length)return[];for(c=0;c<k.length;c++){var g=k[c];g.x===b.x&&g.y===b.y&&a.push(g)}return a};h.prototype.togglePOIUnderPoint=function(b,a){var k=this.getPOIUnderPoint(b,a),k=this.getAllPOIAtSameLocation(k);if(k.length){for(var c=k[0].isOpen(),g=0;g<k.length;g++)c?(k[g].close(),this.manager.poiLabelsLayer.hoveredPOI=null):k[g].open();this.manager.redrawPOILayer();return!0}return!1};h.prototype.getBranchInfoUnderPoint=function(b,a){var k=null,c=a,g=this.manager.createProjection(),f=g.reverse_map_pt(b),
e;for(e in this.manager.graphSketches){var d=this.manager.graphSketches[e];if(d&&d.visible){var l=d.branches;if(l&&l.length)for(var m=0;m<l.length;m++){var p=h.calculateDistanceFromBranch(l[m],f,g);p<c&&(c=p,k={id:e,branch:m,sketch:d})}}}return k};h.calculateDistanceFromBranch=function(b,a,k){b=h.getBranchesClosestPoint(b,a,k);return!b||isNaN(b.x)||isNaN(b.y)?Infinity:w.hypot((a.x-b.x)*(k.screen.width/(k.viewport.xmax-k.viewport.xmin)),(a.y-b.y)*(k.screen.height/(k.viewport.ymax-k.viewport.ymin)))};
h.getBranchesClosestPoint=function(b,a,k){if(b&&b.compiled&&b.compiled.fn){var c=k.screen.width/(k.viewport.xmax-k.viewport.xmin);k=k.screen.height/(k.viewport.ymax-k.viewport.ymin);var g=a.x,f=a.y;switch(b.graphMode){case p.Y:break;case p.X:a=g;g=f;f=a;a=c;c=k;k=a;break;default:return null}a=b.compiled.fn;var e=g,d=e-3/c,l=e+3/c,m=f,x=a(d),r=a(l);isNaN(x)||isNaN(r)?g=e:(g=w.closestPointOnSegment(g,f,d,x,l,r),g=g[0]);f=h.fillHole(a,g,c,k,e,m);f=w.hypot((g-e)*c,(f-m)*k);10<f&&(f=Math.min(1,(f-10)/
10),g=e*f+g*(1-f));g=q.shortestDecimalBetween(g-1/(2*c),g+1/(2*c));f=h.fillHole(a,g,c,k,e,m);switch(b.graphMode){case p.Y:return{x:g,y:f};case p.X:return{y:g,x:f}}}};h.prototype.startMovingPoint=function(b){var a=!1,k=b.x,c=b.y,g=b.id;this.manager.movablePointsLayer.pressedSketchId=b.sketch.id;this.manager.redrawMovablePointsLayer();u(document).on("tapmove.movepoint",function(b){a=!0;var c=this.manager.createProjection(),d=this.getMouseRelativeToGrapher(b);b=c.reverse_map_pt({x:d.x-0.5,y:d.y-0.5});
c=c.reverse_map_pt({x:d.x+0.5,y:d.y+0.5});this.triggerMovePoint(g,[q.shortestDecimalBetween(b.x,c.x),q.shortestDecimalBetween(b.y,c.y)])}.bind(this));u(document).on("tapend.movepoint tapcancel.movepoint",function(b){u(document).off(".movepoint");this.manager.movablePointsLayer.pressedSketchId=null;this.manager.redrawMovablePointsLayer();this.triggerStopMovingPoint(g);if(!a){var e=this.manager.createProjection();b=this.getToleranceByDevice(b.device);var e=e.map_pt({x:k,y:c}),d=this.manager.getGraphSketch(g),
h=d.openPOI.length;this.togglePOIUnderPoint(e,b);d.openPOI.length>h&&this.triggerPointSelected(g)}}.bind(this))};h.prototype.startTracingBranch=function(b,a){this.last_screen_pt=a;var k=this.manager.createProjection(),c=k.reverse_map_pt(a),k=h.getBranchesClosestPoint(b.sketch.branches[b.branch],c,k);this.manager.traceLayer.traceInfo={pt:k,branchInfo:b};this.manager.redrawTraceLayer();u(document).on("tapmove.tracing",this.handleTraceUpdate.bind(this));u(document).on("tapend.tracing tapcancel.tracing",
this.stopTracingBranch.bind(this))};h.prototype.stopTracingBranch=function(b){(b=this.manager.poiLabelsLayer.hoveredPOI)&&!b.isOpen()&&(b.open(),this.manager.redrawPOILayer());this.manager.traceLayer.traceInfo=null;this.manager.redrawTraceLayer();u(document).off(".tracing")};h.prototype.handleTraceUpdate=function(b){if(this.manager.traceLayer.traceInfo){var a=this.manager.createProjection();b?this.last_screen_pt=b=this.getMouseRelativeToGrapher(b):b=this.last_screen_pt;b=a.reverse_map_pt(b);var k=
Infinity,c=-1,g=this.manager.traceLayer.traceInfo;g.branchInfo.sketch=this.manager.graphSketches[g.branchInfo.sketch.id];for(var g=g.branchInfo.sketch.branches,f=0;f<g.length;f++){var e=h.calculateDistanceFromBranch(g[f],b,a);e<k&&(c=f,k=e)}a=(k=g[c])?h.getBranchesClosestPoint(k,b,a):null;this.manager.traceLayer.traceInfo.pt=a;this.manager.redrawTraceLayer()}};h.fillHole=function(b,a,k,c,g,f){var e=b(a);if(isFinite(e))return e;var e=a-1E-11,d=a+1E-11;a=b(e);b=b(d);if(isNaN(a)&&isNaN(b))return NaN;
if(isNaN(a))return b;if(isNaN(b))return a;var d=(g-d)*k,h=(f-b)*c;return w.hypot((g-e)*k,(f-a)*c)<w.hypot(d,h)?a:b};return h});I("loadcss!vendor_css/tipsy/tipsy",function(){});I("tipsy",["require","loadcss!vendor_css/tipsy/tipsy","jquery"],function(b){function h(a,b){this.$element=w(a);this.options=b;this.fixTitle()}function u(){return 0!==s}b("loadcss!vendor_css/tipsy/tipsy");var w=b("jquery"),q=null,p=!1;w(document).on("tap",".tipsy-sticky",function(a){if(p)p=!1;else{a=a.currentTarget;var b=w(a);
b.attr("tooltip")||(b=b.find("[tooltip]").filter(':not([tooltip=""])'));if(1===b.length&&"none"!==b.css("display")&&!b.parents().filter(function(){return"none"===w(this).css("display")}).length){var c=w.extend({},w.fn.tipsy.defaults);c.title="tooltip";c.gravity="nw";q=new h(b[0],c);q.show();q.opener=a}}});w(document).on("tapstart keydown",function(a){if(q){q.hide();var b=q.opener;if("tapstart"===a.type&&w(a.target).closest(b).length)w(document).one("tapend",function(a){w(a.target).closest(b).length&&
(p=!0)});q=null}});h.prototype={show:function(){var a=this.getTitle();if(a&&!u()){var b=this.tip();b.find(".tipsy-inner")[this.options.html?"html":"text"](a);b[0].className="tipsy";b.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var a=w.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),c,g=b[0].offsetWidth,f=b[0].offsetHeight,e="function"==typeof this.options.gravity?this.options.gravity.call(this.$element[0]):
this.options.gravity;switch(e.charAt(0)){case "n":c={top:a.top+a.height+this.options.offset,left:a.left+a.width/2-g/2};break;case "s":c={top:a.top-f-this.options.offset,left:a.left+a.width/2-g/2};break;case "e":c={top:a.top+a.height/2-f/2,left:a.left-g-this.options.offset};break;case "w":c={top:a.top+a.height/2-f/2,left:a.left+a.width+this.options.offset}}2==e.length&&("w"==e.charAt(1)?c.left=a.left+a.width/2-15:c.left=a.left+a.width/2-g+15);b.css(c).addClass("tipsy-"+e);b.find(".tipsy-arrow")[0].className=
"tipsy-arrow tipsy-arrow-"+e.charAt(0);this.options.className&&b.addClass("function"==typeof this.options.className?this.options.className.call(this.$element[0]):this.options.className);this.options.fadeIn?b.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity},this.options.fadeIn):b.css({visibility:"visible",opacity:this.options.opacity});this.options.sticky&&b.addClass("sticky");var d=this,h=function(){d.validate();d.validateTimeout=setTimeout(h,100)};
h()}},hide:function(){clearTimeout(this.validateTimeout);this.options.fadeOut?this.tip().stop().fadeOut(this.options.fadeOut,function(){w(this).remove()}):this.tip().remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("original-title"))&&a.attr("original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var a,b=this.$element,c=this.options;this.fixTitle();c=this.options;"string"==typeof c.title?a=b.attr("title"==c.title?"original-title":c.title):
"function"==typeof c.title&&(a=c.title.call(b[0]));a&&(a=(""+a).replace(/(^\s*|\s*$)/,""));return a||c.fallback},tip:function(){this.$tip||(this.$tip=w('<div class="tipsy"><div class="tipsy-arrow"></div><div class="tipsy-inner"></div></div>'));return this.$tip},validate:function(){var a=!1;if(this.getTitle())try{for(var b=this.$element[0];b;)if(b===document){a=!0;break}else b=b.parentNode}catch(c){}a||this.hide()}};w.fn.tipsy=function(a){function b(c){var d=w.data(c,"tipsy");d||(d=new h(c,w.fn.tipsy.elementOptions(c,
a)),w.data(c,"tipsy",d));return d}function c(c){if(("tipsyshow"!==c.type||c.target===this)&&q!==this){var d=b(this);d.hoverState="in";0===a.delayIn?d.show():(d.fixTitle(),setTimeout(function(){"in"==d.hoverState&&d.show()},a.delayIn))}}function g(c){if("tipsyhide"!==c.type||c.target===this){var d=b(this);"tapstart"===c.type&&d.options.sticky||(d.hoverState="out",0===a.delayOut?d.hide():setTimeout(function(){"out"==d.hoverState&&d.hide()},a.delayOut))}}if(!0===a)return this.data("tipsy");if("string"==
typeof a){var f=this.data("tipsy");if(f)f[a]();return this}a=w.extend({},w.fn.tipsy.defaults,a);a.fadeIn=a.fadeIn||a.fade;a.fadeOut=a.fadeOut||a.fade;a.live||this.each(function(){b(this)});if("manual"!=a.trigger){var f="hover"==a.trigger?"tipsyshow":"focus",e="hover"==a.trigger?"tipsyhide tapstart tapend tapcancel":"blur";if(a.live&&a.delegate)this.on(f,a.delegate,c).on(e,a.delegate,g);else{var d=a.live?"on":"bind";this[d](f,c)[d](e,g)}}return this};w.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,
fade:!1,fadeIn:!1,fadeOut:!1,fallback:"",gravity:"n",html:!1,live:!0,offset:0,opacity:1,title:"title",trigger:"hover"};w.fn.tipsy.elementOptions=function(a,b){b=w.extend({},b);var c=w(a).attr("tipsy-gravity");c&&(b.gravity=c);c=parseInt(w(a).attr("tipsy-offset"),10);isNaN(c)||(b.offset=c);return b};w.fn.tipsy.autoNS=function(){return w(this).offset().top>w(document).scrollTop()+w(window).height()/2?"s":"n"};w.fn.tipsy.autoWE=function(){return w(this).offset().left>w(document).scrollLeft()+w(window).width()/
2?"e":"w"};w.fn.tipsy.autoBounds=function(a,b){return function(){var c=b[0],g=1<b.length?b[1]:!1,f=w(document).scrollTop()+a,e=w(document).scrollLeft()+a,d=w(this);d.offset().top<f&&(c="n");d.offset().left<e&&(g="w");w(window).width()+w(document).scrollLeft()-d.offset().left<a&&(g="e");w(window).height()+w(document).scrollTop()-d.offset().top<a&&(c="s");return c+(g?g:"")}};w(document).tipsy({title:"tooltip",wait:0,live:!0,delegate:".tipsy-sticky",gravity:"nw",sticky:!0,fade:!1});var s=0;return{isDisabled:u,
removeDisableLock:function(){s--},addDisableLock:function(){s++}}});I("lib/ipad.ghostevents",["require"],function(b){function h(b){w&&(b.stopPropagation(),b.stopImmediatePropagation())}function u(b){w&&(b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation())}var w=!1,q=null,p={isGhostEvent:function(b){return!1}};document.addEventListener("mousedown",function(b){q=document.activeElement;w=p.isGhostEvent(b);h(b)},!0);document.addEventListener("mouseup",h,!0);document.addEventListener("click",
function(b){u(b);w&&document.activeElement!==q&&(document.activeElement&&document.activeElement.blur(),q&&q.focus());w=!1},!0);document.addEventListener("focus",u,!0);document.addEventListener("blur",u,!0);return p});I("lib/touchtracking",["require","jquery","tipsy","lib/ipad.ghostevents"],function(b){var h=b("jquery");b("tipsy");b("lib/ipad.ghostevents").isGhostEvent=function(a){return w!==u&&!d()||a.target===k||a.target&&h.contains(a.target,k)||k&&h.contains(k,a.target)?!1:!0};var u=1,w=0,q={},
p=[],s=0,a=null,k=null,c=null,g=function(a){for(var b=[];a;)b.push(a),a=h(a).parent()[0];return b},f=function(a){k=null;"mousedown"===a.type?(w=2,p=g(a.target)):(w=u,p=g(a.originalEvent.touches[0].target));h(p).addClass("depressed");h(p).each(function(){var a=h(this);a.data({originalScrollTop:a.scrollTop(),originalScrollLeft:a.scrollLeft()})});q={}},e=function(b){k=null;h(".depressed").removeClass("depressed");h(p).each(function(){var a=h(this),b=a.data("originalScrollTop")-a.scrollTop(),a=a.data("originalScrollLeft")-
a.scrollLeft();if(b||a)q.scroll=!0});if(1===q.tapstart&&1===q.tapend&&!q.tapcancel&&!q.scroll)for(var c="mouse"===b.device?b.pageX:b.originalEvent.changedTouches[0].pageX,d="mouse"===b.device?b.pageY:b.originalEvent.changedTouches[0].pageY,e=!1,f=0;f<p.length&&!e;f++){var g=h(p[f]),l=g.offset();"true"===g.attr("tapboundary")&&(e=!0);if(l){if(c<l.left||d<l.top)continue;if(c>l.left+g.outerWidth())continue;if(d>l.top+g.outerHeight())continue}k=g[0];m("tap",b,k);break}w===u&&(a=setTimeout(function(){clearTimeout(a);
s=(new Date).getTime()},1E3));p=[];w=0},d=function(){return a||500>(new Date).getTime()-s},l=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push({identifier:d.identifier,x:d.pageX,y:d.pageY,screenX:d.screenX,screenY:d.screenY,pageX:d.pageX,pageY:d.pageY,clientX:d.clientX,clientY:d.clientY})}return b},m=function(a,b,d){void 0===q[a.toLowerCase()]?q[a.toLowerCase()]=1:q[a.toLowerCase()]++;var e=h.event.fix(b.originalEvent);e.type=a;e.device=w===u?"touch":"mouse";e.touches=l(b.originalEvent.touches);
e.changedTouches=l(b.originalEvent.changedTouches);e.target=d?d:b.target;var f=0<q.longhold;e.wasLongheld=function(){return f};clearTimeout(c);"tapstart"===e.type&&1===e.touches.length&&(c=setTimeout(function(){m("longhold",b,d)},500));h(e.target).trigger(e)},x=function(a){for(var b=p,c=!!p.length,d=h.makeArray(h(".hovered")),e=[],f=[],g=[];a&&a!==document;)c&&-1===b.indexOf(a)||(-1===d.indexOf(a)&&g.push(a),e.push(a)),a=h(a).parent()[0];for(b=0;b<d.length;b++)a=d[b],-1===e.indexOf(a)&&f.push(a);
h(f).removeClass("hovered").trigger("tipsyhide");h(g).addClass("hovered").trigger("tipsyshow")};h(document).on("touchstart",function(a){2!==w&&(0===w&&f(a),x(null),m("tapstart",a))});h(document).on("touchmove",function(a){w===u&&m("tapmove",a)});h(document).on("touchcancel",function(a){w===u&&(m("tapcancel",a),0===a.originalEvent.touches.length&&e(a))});h(document).on("touchend",function(a){w===u&&(m("tapend",a),0===a.originalEvent.touches.length&&e(a))});h(document).on("mousedown",function(a){1!==
a.button&&2!==a.button&&(w===u||d()?h(a.target).is("input, textarea, select")||a.preventDefault():(f(a),a.originalEvent.touches=[a],a.originalEvent.changedTouches=[a],m("tapstart",a)))});h(document).ready(function(){h(document).on("mousedown",function(a){var b=!!h(a.target).closest(".do-not-blur").length,c=!!h(a.target).closest(".do-blur").length;b&&!c&&a.preventDefault();a=window.getSelection();1===a.rangeCount&&(b=a.getRangeAt(0),b.startContainer===b.endContainer&&h(b.startContainer).closest(".text-selectable").length&&
a.removeAllRanges())})});h(document).on("mouseleave",function(a){0===w&&(d()||x(null))});h(document).on("mousemove",function(a){1===a.button||2===a.button||w===u||d()||(x(a.target),a.originalEvent.touches=[a],a.originalEvent.changedTouches=[a],m("tapmove",a))});h(document).on("mouseup",function(a){1!==a.button&&2!==a.button&&2===w&&(a.originalEvent.touches=[],a.originalEvent.changedTouches=[a],m("tapend",a),e(a))});return{isTapActive:function(){return 0!==w}}});(function(b){b.Event.prototype.wasHandled=
function(h){h=h?h:"_*_";var u=this.originalEvent;if((u=u&&u.handledBy)&&u[h])return!0;if("_*_"!==h)return!1;h=b(this.target).closest("[handleEvent]");return h.length&&h[0]!==this.currentTarget?"false"!==h.attr("handleEvent"):!1};b.Event.prototype.handle=function(b){var u=this.originalEvent;if(u){var w=u.handledBy;w||(w=u.handledBy={});w[b?b:"_*_"]=!0}}})(jQuery);I("lib/jquery.handleevent",function(){});(function(b){var h=navigator.userAgent.toLowerCase();b.browser.chrome=/chrome/.test(h)})(jQuery);
(function(b){function h(h){var q=h||window.event,p=[].slice.call(arguments,1),s=0,a=0,k=0;h=b.event.fix(q);h.type="mousewheel";h.originalEvent?h.originalEvent.wheelDelta?s=h.originalEvent.wheelDelta/120:h.originalEvent.detail&&(s=-h.originalEvent.detail/3):h.wheelDelta?s=h.wheelDelta/120:h.detail&&(s=-h.detail/3);k=s;void 0!==q.axis&&q.axis===q.HORIZONTAL_AXIS&&(k=0,a=-1*s);var c=1;if(b.browser.msie||b.browser.webkit&&!b.browser.chrome)c=40;void 0!==q.wheelDeltaY&&(k=q.wheelDeltaY/120/c);void 0!==
q.wheelDeltaX&&(a=-1*q.wheelDeltaX/120/c);0<s?s=1:0>s&&(s=-1);p.unshift(h,s,a,k);return b.event.handle.apply(this,p)}var u=["DOMMouseScroll","mousewheel"];b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=u.length;b;)this.addEventListener(u[--b],h,!1);else this.onmousewheel=h},teardown:function(){if(this.removeEventListener)for(var b=u.length;b;)this.removeEventListener(u[--b],h,!1);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",
b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})})(jQuery);I("vendor/jquery.mousewheel",function(){});I("graphing/graphcontroller","require jquery pjs ./viewport ./viewporttransformation math/distance ./constants config lib/touchtracking lib/jquery.handleevent vendor/jquery.mousewheel".split(" "),function(b){var h=b("jquery"),u=b("pjs"),w=b("./viewport"),q=b("./viewporttransformation"),p=b("math/distance"),s=b("./constants"),a=b("config");b("lib/touchtracking");
b("lib/jquery.handleevent");b("vendor/jquery.mousewheel");return u(function(b){b.init=function(a){this.manager=a;this.$=this.manager.$;this.triggerViewportStable=function(){};this.$animation=h("<div></div>");this.addMouseWheelEventHandler();this.addTouchEventHandler()};b.getViewport=function(){return this.manager.viewport.clone()};b.setViewport=function(a){a.isValid()&&(!this.manager.isInTransientState()&&a.equals(this.manager.viewport)?this.triggerViewportStable():(this.manager.viewport=a.clone(),
this.endTransientState()))};b.setTransformation=function(a){this.manager.beginTransientState();this.manager.transformation=a;this.manager.redrawAllLayers();clearTimeout(this.endTransientTimeout);this.endTransientTimeout=setTimeout(this.endTransientState.bind(this),250)};b.endTransientState=function(){clearTimeout(this.endTransientTimeout);this.manager.endTransientState();this.manager.redrawAllLayers();this.triggerViewportStable()};b.animateTransformation=function(a){var b=this,f=this.manager.transformation,
e=f.compose(a);this.cancelAnimation();this.$animation.css("percent",0);this.$animation.animate({percent:100},{duration:s.ANIMATE_ZOOM_DURATION,step:function(a){b.setTransformation(f.lerp(e,a/100))}})};b.cancelAnimation=function(){this.$animation.stop()};b.addMouseWheelEventHandler=function(){var a=0;this.$.mousewheel(function(b,f){b.preventDefault();0<a||(a+=1,setTimeout(function(){a--},50),this.setTransformation(this.manager.transformation.compose(q(0,0,0<(0<f?1:-1)?s.ZOOM_FACTOR:1/s.ZOOM_FACTOR))))}.bind(this))};
b.handleDoubleClick=function(b){if(!a.get("disable_dblclick_zooming")&&!b.wasHandled()){b.preventDefault();var g=this.$.offset(),f=this.manager.screen,e=s.DOUBLETAP_ZOOM;this.animateTransformation(q((b.pageX-(g.left+0.5*f.width))*(1-e),(b.pageY-(g.top+0.5*f.height))*(1-e),e))}};b.applyPanTouchChanges=function(a,b){var f=this.manager.transformation.compose(q(b[0].x-a[0].x,b[0].y-a[0].y,1));this.setTransformation(f)};b.applyScaleTouchChanges=function(a,b,f){var e=p.mean(b[0].x-a[0].x,b[1].x-a[1].x),
d=p.mean(b[0].y-a[0].y,b[1].y-a[1].y),k=this.manager.screen,h=this.manager.$.offset(),s=p.mean(a[0].x,a[1].x)-(h.left+0.5*k.width),k=p.mean(a[0].y,a[1].y)-(h.top+0.5*k.height),h=Math.abs(b[1].x-b[0].x);b=Math.abs(b[1].y-b[0].y);var r=Math.abs(a[1].x-a[0].x);a=Math.abs(a[1].y-a[0].y);"x"===f?(a=1,f=Math.max(50,h)/Math.max(50,r)):"y"===f?(f=1,a=Math.max(50,b)/Math.max(50,a)):f=a=Math.max(50,p.hypot(h,b))/Math.max(50,p.hypot(r,a));e=this.manager.transformation.compose(q(e+s*(1-f),d+k*(1-a),f,a));this.setTransformation(e)};
b.addTouchEventHandler=function(){var a=this,b=[],f=!1,e=function(b){if(!a.manager.scaleAxis){var d=a.manager;if(2>b.length)b=void 0;else{var e=a.manager.createProjection(),f=a.manager.$.offset(),g=e.mapx(0),k=e.mapy(0),g=Math.min(Math.max(0,g),e.screen.width)+f.left,k=Math.min(Math.max(0,k),e.screen.height)+f.top,f=b[1].x-b[0].x,h=b[1].y-b[0].y;b=10*Math.abs(b[0].x-g)<e.screen.width&&10*Math.abs(b[1].x-g)<e.screen.width&&Math.abs(h)>3*Math.abs(f)?"y":10*Math.abs(b[0].y-k)<e.screen.height&&10*Math.abs(b[1].y-
k)<e.screen.height&&Math.abs(f)>3*Math.abs(h)?"x":"both"}d.scaleAxis=b}return a.manager.scaleAxis},d=function(d){f&&(d=d.touches,2===b.length&&2===d.length?a.applyScaleTouchChanges(b,d,e(d)):a.manager.scaleAxis=void 0,1===b.length&&a.applyPanTouchChanges(b,d),b=d)},k=function(d){f&&(a.cancelAnimation(),b=d.touches,0===d.touches.length&&(f=!1,h(document).off(".graphdrag")),2>d.touches.length&&(a.manager.scaleAxis=void 0))};this.$.on("tapstart",function(a){a.wasHandled()||f||a.touches.length!==a.changedTouches.length||
(f=!0,h(document).on("tapmove.graphdrag",d),h(document).on("tapstart.graphdrag tapend.graphdrag tapcancel.graphdrag",k))});this.$.on("dblclick",this.handleDoubleClick.bind(this))};b.getSetting=function(a,b){var f=this.manager.settings.getProperty(a);return void 0!==f?f:b};b.setSetting=function(a,b,f){this.manager.settings.setProperty(a,void 0!==b?b:f)};b.getState=function(){return{viewport:this.getViewport().toObject(),showLabels:this.getSetting("showLabels"),degreeMode:this.getSetting("degreeMode"),
showGrid:this.getSetting("showGrid"),polarMode:this.getSetting("polarMode"),showAxes:this.getSetting("showAxes"),squareAxes:this.getSetting("squareAxes"),labelXMode:this.getSetting("xAxisPiLabels")?"pi":"",labelYMode:this.getSetting("yAxisPiLabels")?"pi":""}};b.setState=function(a){this.setSetting("showLabels",a.showLabels,!0);this.setSetting("showGrid",a.showGrid,!0);this.setSetting("polarMode",a.polarMode,!1);this.setSetting("showAxes",a.showAxes,!0);this.setSetting("squareAxes",a.squareAxes,!0);
this.setSetting("xAxisPiLabels","pi"===a.labelXMode);this.setSetting("yAxisPiLabels","pi"===a.labelYMode);this.setSetting("degreeMode",a.degreeMode,!1);"viewport"in a&&(a=w.fromObject(a.viewport),this.getSetting("squareAxes")&&!a.isSquare(this.manager.screen)&&(a.squareYAxis(this.manager.screen),a.round(this.manager.screen)),this.setViewport(a))};b.zoom=function(a){"in"===a?this.animateTransformation(q(0,0,2)):"out"===a?this.animateTransformation(q(0,0,0.5)):"default"===a&&(this.manager.settings.setProperty("squareAxes",
!0),this.setViewport(this.manager.computeDefaultViewport()))};b.isZoomRestored=function(){return this.manager.viewport.equals(this.manager.computeDefaultViewport())};b.enforceSquareAxes=function(){var a=this.manager.settings;if(a.squareAxes){var a=a.lastChangedAxis,b=this.manager.viewport.clone();"y"==a?b.squareXAxis(this.manager.screen):b.squareYAxis(this.manager.screen);b.round(this.manager.screen);this.setViewport(b)}}})});(function(){Function.prototype.bind||(Function.prototype.bind=function(b){if("function"!==
typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var h=Array.prototype.slice.call(arguments,1),u=this,w=function(){},q=function(){return u.apply(this instanceof w&&b?this:b,h.concat(Array.prototype.slice.call(arguments)))};w.prototype=this.prototype;q.prototype=new w;return q})})();I("lib/function.bind",function(){});I("lib/underscore_model",["require","underscore","pjs","lib/function.bind"],function(b){var h=b("underscore"),u=b("pjs");b("lib/function.bind");
return u(function(b){var q=0,p="guid_"+Math.round(1E6*Math.random())+"_"+(new Date).getTime()+"_";b.init=function(){this.__observers={};this.__oldProperties={};this.__propertyComparators={};this.guid=p+ ++q};b.getProperty=function(b){return this[b]};b.getOldProperty=function(b){return this.__oldProperties[b]};b.setProperty=function(b,a){var k=this[b],c=this.__propertyComparators[b];if(c){if(c(k,a))return}else if(h.isEqual(k,a))return;this.__oldProperties[b]=k;this[b]=a;this.notifyPropertyChange(b)};
b.setProperties=function(b){for(var a in b)b.hasOwnProperty(a)&&this.setProperty(a,b[a])};b.setPropertyComparator=function(b,a){this.__propertyComparators[b]=a};b.notifyPropertyChange=function(b){var a=this.__observers[b];if(a)for(var k=0;k<a.length;k++)a[k].callback(b,this)};b.unobserve=function(b){if(b){b=b.split(" ");for(var a=0;a<b.length;a++){var k=b[a].split("."),c=k[0],k=k[1];if(c&&k){var g=this.__observers[c],f=[];if(g){for(var e=0;e<g.length;e++){var d=g[e];d.namespace!==k&&f.push(d)}this.__observers[c]=
f}}else if(c)this.__observers[c]&&(this.__observers[c]=[]);else if(k)for(c in this.__observers)this.unobserve(c+"."+k)}}else this.__observers={}};b.observe=function(b,a){for(var k=b.split(" "),c=0;c<k.length;c++){var g=k[c].split("."),f=g[0];if(!f)throw"Must supply a property to observe";var g={namespace:g[1],callback:a},e=this.__observers[f];e?e.push(g):this.__observers[f]=[g]}}})});I("main/graph_settings",["require","jquery","pjs","lib/underscore_model"],function(b){var h=b("jquery"),u=b("pjs");
b=b("lib/underscore_model");var w=u(b,function(b,p){b.init=function(){function b(a,g,f){function e(){k.setProperty(a,k.projectorMode?f:g)}k.observe("projectorMode",e);e()}function a(a,b,f,e,d){function h(){k.setProperty(a,k.projectorMode?k.highlight?d:e:k.highlight?f:b)}k.observe("projectorMode highlight",h);h()}p.init.call(this);this.showGrid=this.showLabels=this.squareAxes=!0;this.polarMode=!1;this.showAxes=!0;this.degreeMode=this.yAxisPiLabels=this.xAxisPiLabels=!1;this.labelHangingColor="rgba(150,150,150,1)";
this.labelNormalColor="rgba(0,0,0,1)";this.lastChangedAxis="x";this.projectorMode=!1;var k=this;b("labelSize",12,18);b("majorAxisOpacity",0.2,0.5);b("minorAxisOpacity",0.08,0.15);b("axisOpacity",0.7,0.9);b("axisLineWidth",1,2);b("axisLineOffset",0.5,0);b("pixelsPerLabel",70,100);a("graphLineWidth",2,3,6,9);a("pointLineWidth",7,11,15,22)};b.clone=function(){var b=w(this.grapher);b.setProperty("squareAxes",this.squareAxes);b.setProperty("showLabels",this.showLabels);b.setProperty("showGrid",this.showGrid);
b.setProperty("polarMode",this.polarMode);b.setProperty("squareAxes",this.showAxes);b.setProperty("xAxisPiLabels",this.xAxisPiLabels);b.setProperty("yAxisPiLabels",this.yAxisPiLabels);b.setProperty("degreeMode",this.degreeMode);b.setProperty("projectorMode",this.projectorMode);return b};b.registerCallbacks=function(b,a){var k=function(){b.manager.redrawGridLayer()};this.observe("showLabels",k);this.observe("showAxes",k);this.observe("showGrid",k);this.observe("polarMode",k);this.observe("xAxisPiLabels",
k);this.observe("yAxisPiLabels",k);this.observe("degreeMode",k);this.observe("squareAxes",function(){b.enforceSquareAxes()});var c=this;this.observe("projectorMode",function(){b.manager.redrawAllLayers();h("body").toggleClass("PROJECTOR-MODE",!!c.projectorMode);a.onProjectorModeChange()})}});return w});I("main/timermodules",[],function(){var b={},h={},u={},w=function(){for(var b in u)if(u.hasOwnProperty(b))u[b]();setTimeout(w,100)};w();return{add:function(h,p){b[h]=p},load:function(q){b[q]&&(h[q]=
b[q].apply(this,Array.prototype.slice.call(arguments,1)),h[q]&&(u[q]=h[q]))}}});I("undoredo",["require","underscore","pjs"],function(b){var h=b("underscore");return b("pjs")(function(b,w){b.CAUSE_OF_CHANGE=1;b.RESPONSE_TO_CHANGE=2;b.triggerFlash=function(){};b.init=function(){this.undos=[];this.redos=[];this.changesCallbacks=[];this.__isApplyingTransaction=0;this.markAsSaved()};b.handleKeydown=function(b){if(b.ctrlKey||b.metaKey)switch(b.which){case 90:return b.shiftKey?this.redo():this.undo(),!1;
case 89:return this.redo(),!1}};b.clear=function(){this.undos=[];this.redos=[];this.markAsSaved()};b.pushUndo=function(b){this.undos.push(b);!1!==b.recordChange&&(this.__changesSinceSave++,this.triggerChanges())};b.pushRedo=function(b){this.redos.push(b);!1!==b.recordChange&&(this.__changesSinceSave--,this.triggerChanges())};b.canUndo=function(){return 0<this.undos.length};b.canRedo=function(){return 0<this.redos.length};b.undo=function(){if(this.canUndo()){var b=this.undos.pop();this.applyTransaction(b,
!0);this.pushRedo(b)}};b.redo=function(){if(this.canRedo()){var b=this.redos.pop();this.applyTransaction(b);this.pushUndo(b)}};b.markAsSaved=function(){this.__changesSinceSave=0;this.triggerChanges()};b.changedSinceSave=function(){return 0!==this.__changesSinceSave};b.isApplyingTransaction=function(){return!!this.__isApplyingTransaction};b.__applyTransaction=function(b,h){var s,a=b.__batched__?b.__batched__:[];if(h){for(s=a.length-1;0<=s;s--)this.__applyTransaction(a[s],h);b.undo()}else for(b.redo(),
s=0;s<a.length;s++)this.__applyTransaction(a[s],h)};b.applyTransaction=function(b,h){this.__isApplyingTransaction++;try{this.__applyTransaction(b,h)}finally{this.__isApplyingTransaction--}};b.oneTransaction=function(b){this.__oneTransactionDepth||(this.__oneTransactionDepth=0);this.__oneTransactionDepth++;b();this.__oneTransactionDepth--;this.__oneTransactionDepth||(this.__oneTransaction=null)};b.isApplyingOneTransaction=function(){return 0<this.__oneTransactionDepth};b.addTransaction=function(b){var h;
if(!this.isApplyingTransaction()&&(b.type===this.CAUSE_OF_CHANGE&&this.applyTransaction(b),!b.ensureChangeOccured||!b.ensureChangeOccured())){this.redos.splice(0);if(this.isApplyingOneTransaction()){if(this.__oneTransaction){h=this.__oneTransaction.__batched__;h||(h=this.__oneTransaction.__batched__=[]);h.push(b);return}this.__oneTransaction=b}this.pushUndo(b)}};b.triggerChanges=function(){h.each(this.changesCallbacks,function(b){b()})}})()});I("expressions/abstractitem",["require","pjs","lib/underscore_model",
"undoredo"],function(b){var h=b("pjs"),u=b("lib/underscore_model"),w=b("undoredo");return h(u,function(b,h){var s=1;b.init=function(a,b){h.init.call(this);this.index=-1;this.selected=!1;this.list=b;for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);this.hasOwnProperty("id")?this.id>=s&&(s=this.id+1):this.id=s++;this.observe("folder",this.updateFolder.bind(this));this.observe("selected",this.onSelectedChange.bind(this))};b.onAddedToList=function(){};b.onRemovedFromList=function(){};b.onStateDidChange=
function(a){var b=this.id,c=this.getOldProperty(a),g=this.getProperty(a),f=this.list;w.addTransaction({type:w.RESPONSE_TO_CHANGE,undo:function(){f.getItemById(b).setProperty(a,c)},redo:function(){f.getItemById(b).setProperty(a,g)}})};b.updateCollapsed=function(){this.setProperty("inCollapsedFolder",this.folder?this.folder.collapsed:!1)};b.updateFolder=function(){this.getOldProperty("folder")&&this.getOldProperty("folder").unobserve("."+this.id);this.folder&&this.folder.observe("collapsed."+this.id,
this.updateCollapsed.bind(this));this.updateCollapsed()};b.onSelectedChange=function(){this.selected&&this.folder&&this.folder.collapsed&&this.folder.setProperty("collapsed",!1)}})});I("expressions/domain",["require","lib/underscore_model","pjs"],function(b){var h=b("lib/underscore_model"),u=b("pjs")(h,function(b,h){b.init=function(b,s){h.init.call(this);this.min=b;this.max=s};b.isValid=function(){return isFinite(this.min)&&isFinite(this.max)&&this.max>this.min};b.serialize=function(){return{min:this.min,
max:this.max}}});u.deserialize=function(b){return b?u(b.min,b.max):u()};return u});(function(b){function h(b){var g,f,e;if(!(this instanceof h))return new h(b);if(b instanceof h)this.s=b.s,this.e=b.e,this.c=b.c.slice();else{if(0===b&&0>1/b)b="-0";else if(!a.test(b+=""))throw NaN;this.s="-"==b.charAt(0)?(b=b.slice(1),-1):1;-1<(g=b.indexOf("."))&&(b=b.replace(".",""));0<(f=b.search(/e/i))?(0>g&&(g=f),g+=+b.slice(f+1),b=b.substring(0,f)):0>g&&(g=b.length);for(f=0;"0"==b.charAt(f);f++);if(f==(e=b.length))this.c=
[this.e=0];else{for(;"0"==b.charAt(--e););this.e=g-f-1;this.c=[];for(g=0;f<=e;this.c[g++]=+b.charAt(f++));}}}function u(a,b,f,e){var d=a.c,h=a.e+b+1;if(0!==f&&1!==f&&2!==f)throw"!Big.RM!";f=f&&(5<d[h]||5==d[h]&&(1==f||e||0>h||null!=d[h+1]||d[h-1]&1));if(1>h||!d[0])a.c=f?(a.e=-b,[1]):[a.e=0];else{d.length=h--;if(f)for(;9<++d[h];)d[h]=0,h--||(++a.e,d.unshift(1));for(h=d.length;!d[--h];d.pop());}return a}function w(a,b,f){var e=b-(a=new h(a)).e,d=a.c;d.length>++b&&u(a,e,h.RM);for(e=d[0]?f?b:(d=a.c,a.e+
e+1):e+1;d.length<e;d.push(0));e=a.e;return 1==f||2==f&&(b<=e||e<=q)?(0>a.s&&d[0]?"-":"")+(1<d.length?(d.splice(1,0,"."),d.join("")):d[0])+(0>e?"e":"e+")+e:a.toString()}h.DP=20;h.RM=1;var q=-7,p=21,s=h.prototype,a=/^-?\d+(?:\.\d+)?(?:e[+-]?\d+)?$/i,k=new h(1);s.cmp=function(a){var b=this.c,f=(a=new h(a)).c,e=this.s,d=a.s,k=this.e,m=a.e;if(!b[0]||!f[0])return b[0]?e:f[0]?-d:0;if(e!=d)return e;a=0>e;if(k!=m)return k>m^a?1:-1;e=-1;for(d=(k=b.length)<(m=f.length)?k:m;++e<d;)if(b[e]!=f[e])return b[e]>
f[e]^a?1:-1;return k==m?0:k>m^a?1:-1};s.div=function(a){var b=this.c,f=(a=new h(a)).c,e=this.s==a.s?1:-1,d=h.DP;if(d!==~~d||0>d||1E6<d)throw"!Big.DP!";if(!b[0]||!f[0]){if(b[0]==f[0])throw NaN;if(!f[0])throw e/0;return new h(0*e)}var l,m,p,r,n=f.slice(),q=l=f.length,s=b.length,w=b.slice(0,l),C=w.length,D=new h(k),F=D.c=[],G=0,H=d+(D.e=this.e-a.e)+1;D.s=e;e=0>H?0:H;for(n.unshift(0);C++<l;w.push(0));do{for(m=0;10>m;m++){if(l!=(C=w.length))p=l>C?1:-1;else for(r=-1,p=0;++r<l;)if(f[r]!=w[r]){p=f[r]>w[r]?
1:-1;break}if(0>p){for(a=C==l?f:n;C;){if(w[--C]<a[C]){for(r=C;r&&!w[--r];w[r]=9);--w[r];w[C]+=10}w[C]-=a[C]}for(;!w[0];w.shift());}else break}F[G++]=p?m:++m;w[0]&&p?w[C]=b[q]||0:w=[b[q]]}while((q++<s||null!=w[0])&&e--);F[0]||1==G||(F.shift(),D.e--);G>H&&u(D,d,h.RM,null!=w[0]);return D};s.minus=function(a){var b,f,e=this.s,d=(a=new h(a)).s;if(e!=d)return a.s=-d,this.plus(a);var k=this.c;b=this.e;var m=a.c,p=a.e;if(!k[0]||!m[0])return m[0]?(a.s=-d,a):new h(k[0]?this:0);if(k=k.slice(),e=b-p){b=(f=0>
e)?(e=-e,k):(p=b,m);b.reverse();for(d=e;d--;b.push(0));b.reverse()}else for(b=((f=k.length<m.length)?k:m).length,e=d=0;d<b;d++)if(k[d]!=m[d]){f=k[d]<m[d];break}f&&(b=k,k=m,m=b,a.s=-a.s);if(0<(d=-((b=k.length)-m.length)))for(;d--;k[b++]=0);for(d=m.length;d>e;){if(k[--d]<m[d]){for(f=d;f&&!k[--f];k[f]=9);--k[f];k[d]+=10}k[d]-=m[d]}for(;0==k[--b];k.pop());for(;0==k[0];k.shift(),--p);k[0]||(k=[p=0]);return a.c=k,a.e=p,a};s.mod=function(a){a=new h(a);var b,f=this,e=f.s,d=a.s;if(!a.c[0])throw NaN;f.s=a.s=
1;b=1==a.cmp(f);f.s=e;a.s=d;return b?new h(f):(e=h.DP,d=h.RM,h.DP=h.RM=0,f=f.div(a),h.DP=e,h.RM=d,this.minus(f.times(a)))};s.plus=function(a){var b,f=this.s;b=(a=new h(a)).s;if(f!=b)return a.s=-b,this.minus(a);b=this.e;var e=this.c,d=a.e,k=a.c;if(!e[0]||!k[0])return k[0]?a:new h(e[0]?this:0*f);if(e=e.slice(),f=b-d){b=0<f?(d=b,k):(f=-f,e);for(b.reverse();f--;b.push(0));b.reverse()}0>e.length-k.length&&(b=k,k=e,e=b);f=k.length;for(b=0;f;b=(e[--f]=e[f]+k[f]+b)/10^0,e[f]%=10);b&&(e.unshift(b),++d);for(f=
e.length;0==e[--f];e.pop());return a.c=e,a.e=d,a};s.pow=function(a){var b=0>a,f=new h(this),e=k;if(a!==~~a||-1E6>a||1E6<a)throw"!pow!";for(a=b?-a:a;;){a&1&&(e=e.times(f));a>>=1;if(!a)break;f=f.times(f)}return b?k.div(e):e};s.round=function(a,b){var f=new h(this);if(null==a)a=0;else if(a!==~~a||0>a||1E6<a)throw"!round!";u(f,a,null==b?h.RM:b);return f};s.sqrt=function(){var a,b,f;b=this.c;a=this.s;f=this.e;var e=new h("0.5");if(!b[0])return new h(this);if(0>a)throw NaN;a=Math.sqrt(this.toString());
0==a||a==1/0?(a=b.join(""),a.length+f&1||(a+="0"),b=new h(Math.sqrt(a).toString()),b.e=((f+1)/2|0)-(0>f||f&1)):b=new h(a.toString());a=b.e+(h.DP+=4);do f=b,b=e.times(f.plus(this.div(f)));while(f.c.slice(0,a).join("")!==b.c.slice(0,a).join(""));u(b,h.DP-=4,h.RM);return b};s.times=function(a){var b,f=this.c,e=(a=new h(a)).c,d=f.length,k=e.length,m=this.e,p=a.e;a.s=this.s==a.s?1:-1;if(!f[0]||!e[0])return new h(0*a.s);a.e=m+p;d<k&&(b=f,f=e,e=b,p=d,d=k,k=p);p=d+k;for(b=[];p--;b.push(0));for(m=k-1;-1<m;m--){k=
0;for(p=d+m;p>m;k=b[p]+e[m]*f[p-m-1]+k,b[p--]=k%10|0,k=k/10|0);k&&(b[p]=(b[p]+k)%10)}k&&++a.e;!b[0]&&b.shift();for(p=b.length;!b[--p];b.pop());return a.c=b,a};s.toString=s.valueOf=function(){var a=this.e,b=this.c.join(""),f=b.length;if(a<=q||a>=p)b=b.charAt(0)+(1<f?"."+b.slice(1):"")+(0>a?"e":"e+")+a;else if(0>a){for(;++a;b="0"+b);b="0."+b}else if(0<a)if(++a>f)for(a-=f;a--;b+="0");else a<f&&(b=b.slice(0,a)+"."+b.slice(a));else 1<f&&(b=b.charAt(0)+"."+b.slice(1));return 0>this.s&&this.c[0]?"-"+b:b};
s.toExponential=function(a){if(null==a)a=this.c.length-1;else if(a!==~~a||0>a||1E6<a)throw"!toExp!";return w(this,a,1)};s.toFixed=function(a){var b,f=q,e=p;q=-(p=1/0);null==a?b=this.toString():a===~~a&&0<=a&&1E6>=a&&(b=w(this,this.e+a),0>this.s&&this.c[0]&&0>b.indexOf("-")&&(b="-"+b));q=f;p=e;if(!b)throw"!toFix!";return b};s.toPrecision=function(a){if(null==a)return this.toString();if(a!==~~a||1>a||1E6<a)throw"!toPre!";return w(this,a-1,2)};"undefined"!==typeof module&&module.exports?module.exports=
h:"function"==typeof I&&I.amd?I("vendor/big",[],function(){return h}):b.Big=h})(this);I("big",["require","vendor/big"],function(b){b=b("vendor/big");b.prototype.equals=function(b){return 0===this.cmp(b)};return b});I("expressions/slider",["require","pjs","lib/underscore_model","big","lib/rounding"],function(b){var h=b("pjs"),u=b("lib/underscore_model"),w=b("big"),q=b("lib/rounding"),p=h(u,function(b,a){b.init=function(b,c,g,f){a.init.call(this);this.min=void 0!==c?c:-10;this.max=void 0!==g?g:10;this.step=
f;this.value=void 0!==b?b:0;this.playDirection=this.animationSpeed=1;this.isPlaying=!1;this.observe("isPlaying",function(){this.isPlaying&&(this.animationTargetValue=this.value)}.bind(this));this.observe("stepper isPlaying",this.updateObservedStepper.bind(this))};b.updateObservedStepper=function(){var a=this.isPlaying&&this.stepper,b=a&&this._observedStepper!==this.stepper;a&&this.stepper===this._observedStepper||!this._observedStepper||(this._observedStepper.unobserve("playStep."+this.guid),this._observedStepper=
void 0);b&&(this._observedStepper=this.stepper,this._observedStepper.observe("playStep."+this.guid,this.playStep.bind(this)))};b.playStep=function(){this.animationTargetValue>=this.max?this.playDirection=-1:this.animationTargetValue<=this.min&&(this.playDirection=1);var a=(this.max-this.min)/200,a=a*this.animationSpeed;this.animationTargetValue+=a*this.playDirection;var b=this.computeSnappedValue(this.animationTargetValue);this.step||(b=q.shortestDecimalBetween(b-0.1*a,b+0.1*a));b=Math.max(this.min,
Math.min(this.max,b));this.setProperty("value",b)};b.serialize=function(){return{min:this.min,max:this.max,step:this.step,value:this.value,playDirection:this.playDirection}};b.computeSnappedValue=function(a){if(!this.step)return a;a=Math.round((a-this.min)/this.step);a=(new w(this.step)).times(a).plus(this.min);return parseFloat(a.toString())}});p.deserialize=function(b){var a=p();b&&["value","min","max","step","playDirection"].forEach(function(k){b.hasOwnProperty(k)&&(a[k]=b[k])});return a};return p});
I("expressions/colors",["require"],function(b){var h="#C0504D #4F81BD #9BBB59 #8064A2 #F79646 #000000".split(" "),u=0;return{all:h,next:function(){var b=h[u];u=(u+1)%h.length;return b},reset:function(){u=0},RED:"#C0504D",BLUE:"#4F81BD",GREEN:"#9BBB59",PURPLE:"#8064A2",ORANGE:"#F79646",BLACK:"#000000"}});I("expressions/expression","require pjs math/evaluationstate undoredo ./abstractitem ./domain ./slider ./colors".split(" "),function(b){var h=b("pjs"),u=b("math/evaluationstate"),w=b("undoredo"),q=
b("./abstractitem"),p=b("./domain"),s=b("./slider"),a=b("./colors");return h(q,function(b,c){b._computeNewLatex=function(a,b){var c=/=(.*?)([-\.0-9]+)/,d=a.match(c);return parseFloat(d[2])===b?a:a.replace(c,"=$1"+b)};b.isExpression=!0;b.init=function(b,f){c.init.call(this,b,f);this.loading=!0;this.formula=u({error:""});delete this.slider;this.color?"object"===typeof this.color&&(this.color=this.color.value):this.color=a.next();void 0===this.style&&(this.style="normal");void 0===this.userRequestedGraphing&&
(this.userRequestedGraphing="default");void 0===this.latex&&(this.latex="");this.domain=p.deserialize(this.domain?this.domain:{min:0,max:1});this.domain.observe("min max",function(a){this.onExpressionDidChange();var b=this.id,c=this.domain.getOldProperty(a),g=this.domain.getProperty(a);w.addTransaction({type:w.RESPONSE_TO_CHANGE,undo:function(){f.getItemById(b).domain.setProperty(a,c)},redo:function(){f.getItemById(b).domain.setProperty(a,g)}})}.bind(this));this.computeShouldGraph();this.observe("formula",
this.onFormulaUpdate.bind(this));this.observe("latex color userRequestedGraphing style",this.onStateDidChange.bind(this));this.observe("latex shouldGraph color style",this.onExpressionDidChange.bind(this));this.observe("userRequestedGraphing",this.computeShouldGraph.bind(this))};b.onStateDidChange=function(a){"latex"===a&&this.slider&&this.slider.transient||c.onStateDidChange.call(this,a)};b.updateFolder=function(){c.updateFolder.call(this);this.getOldProperty("folder")&&this.getOldProperty("folder").unobserve("."+
this.id);this.folder&&this.folder.observe("hidden."+this.id,this.computeShouldGraph.bind(this));this.computeShouldGraph()};b.computeShouldGraph=function(){this.setProperty("shouldGraph",this.folder&&this.folder.hidden?!1:"default"===this.userRequestedGraphing||"always"===this.userRequestedGraphing)};b.onExpressionDidChange=function(){this.domain.isValid()&&this.requestParse()};b.getParsableObject=function(){return void 0===this.latex?void 0:{type:"statement",id:this.id,latex:this.latex,domain:this.domain.serialize(),
shouldGraph:this.shouldGraph,color:this.color,style:this.style}};b.requestParse=function(){this.list.triggerAddExp(this.getParsableObject())};b.requestUnparse=function(){this.list.triggerRemoveExp(this.id)};b.onAddedToList=function(){this.requestParse()};b.onRemovedFromList=function(){this.slider&&this.slider.setProperty("isPlaying",!1);this.requestUnparse()};b.getState=function(){var a={id:this.id,latex:this.latex,domain:this.domain.serialize(),userRequestedGraphing:this.userRequestedGraphing,color:this.color,
style:this.style};this.slider&&(a.sliderMin=this.slider.min,a.sliderMax=this.slider.max,a.sliderInterval=this.slider.step);return a};b.onFormulaUpdate=function(){var a=this.formula;this.setProperty("error",a.error?a.error:"");this.setProperty("isGraphable",a.is_graphable);this.setProperty("dependent",a.assignment);this.setProperty("isTableable",a.is_tableable);this.validateStyle();a.is_slidable&&!this.slider&&this.createSliderModel()};b.validateStyle=function(){var a=this.formula;a.error||(a.is_point_list?
"point"!==this.style&&"open"!==this.style&&"cross"!==this.style&&this.setProperty("style","point"):a.is_inequality?this.setProperty("style","normal"):"normal"!==this.style&&"dashed"!==this.style&&this.setProperty("style","normal"))};b.createSliderModel=function(){this.slider=s.deserialize({min:void 0!==this.sliderMin?this.sliderMin:-10,max:void 0!==this.sliderMax?this.sliderMax:10,step:this.sliderInterval,value:this.formula.simple_constant});var a=this.id,b=this.list;this.slider.observe("step",function(){if(!this.slider.transient){var c=
this.slider.getOldProperty("step"),d=this.slider.getProperty("step");w.addTransaction({type:w.RESPONSE_TO_CHANGE,undo:function(){b.getItemById(a).slider.setProperty("step",c)},redo:function(){b.getItemById(a).slider.setProperty("step",d)}})}}.bind(this));this.slider.observe("min",function(){if(!this.slider.transient){var c=this.slider.getOldProperty("min"),d=this.slider.getProperty("min"),h=this.slider.getProperty("value"),k=d>h?this.latex:null,p=d>h?this._computeNewLatex(k,d):null;w.addTransaction({type:w.CAUSE_OF_CHANGE,
undo:function(){var d=b.getItemById(a);d.slider.setProperty("min",c);k&&d.setProperty("latex",k)},redo:function(){var c=b.getItemById(a);c.slider.setProperty("min",d);p&&c.setProperty("latex",p)}})}}.bind(this));this.slider.observe("max",function(){if(!this.slider.transient){var c=this.slider.getOldProperty("max"),d=this.slider.getProperty("max"),k=this.slider.getProperty("value"),h=d<k?this.latex:null,p=d<k?this._computeNewLatex(h,d):null;w.addTransaction({type:w.CAUSE_OF_CHANGE,undo:function(){var d=
b.getItemById(a);d.slider.setProperty("max",c);h&&d.setProperty("latex",h)},redo:function(){var c=b.getItemById(a);c.slider.setProperty("max",d);p&&c.setProperty("latex",p)}})}}.bind(this));this.slider.observe("transient",function(){var c=this.slider.getOldProperty("transient"),d=this.slider.getProperty("transient");if(!c&&d){var h=this.slider.serialize(),k=this.slider.serialize();this.transientEndingValues=k;w.addTransaction({type:w.RESPONSE_TO_CHANGE,recordChange:!1,undo:function(){var c=b.getItemById(a);
c.slider.setProperty("isPlaying",!1);for(var d in h)h.hasOwnProperty(d)&&c.slider.setProperty(d,h[d])},redo:function(){var c=b.getItemById(a);c.slider.setProperty("isPlaying",!1);for(var d in k)k.hasOwnProperty(d)&&c.slider.setProperty(d,k[d])}})}else if(c&&!d){var c=this.slider.serialize(),p;for(p in c)c.hasOwnProperty(p)&&(this.transientEndingValues[p]=c[p])}}.bind(this));this.slider.observe("value",function(){var a=this.slider.getProperty("value");a<this.slider.min&&this.slider.setProperty("min",
a);a>this.slider.max&&this.slider.setProperty("max",a);a=this._computeNewLatex(this.latex,a);this.setProperty("latex",a)}.bind(this));this.slider.setProperty("stepper",this.list);this.notifyPropertyChange("slider")};b.isEmpty=function(){var a=this.latex;return!a||""===a.split(" ").join("")}})});I("expressions/text",["require","pjs","./abstractitem"],function(b){var h=b("pjs");b=b("./abstractitem");return h(b,function(b,h){b.isText=!0;b.init=function(b,p){h.init.call(this,b,p);this.text||(this.text=
"");this.observe("text",this.onStateDidChange.bind(this))};b.isEmpty=function(){return""===this.text.split(" ").join("")};b.getState=function(){return{id:this.id,text:this.text}};b.markedUpText=function(){return this.text.replace(/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target ='_blank'>$1</a>")}})});var Ga=Ga||[];window._kmk&&(ia=function(b){setTimeout(function(){var h=document,u=h.getElementsByTagName("script")[0],h=h.createElement("script");h.type=
"text/javascript";h.async=!0;h.src=b;u.parentNode.insertBefore(h,u)},1)},ia("//i.kissmetrics.com/i.js"),ia("//doug1izaerwt3.cloudfront.net/"+_kmk+".1.js"));I("analytics/kissmetrics",function(){});I("lib/track_feature",["require","analytics/kissmetrics"],function(b){b("analytics/kissmetrics");var h={},u=function(b){h.hasOwnProperty(b)||(h[b]=!0,Ga.push(["record","Discovered "+b]))},w=function(b,h){u(b);if(!(Math.random()>1/h)){var s={};s["E("+b+")"]=h;Ga.push(["record","Used "+b,s])}};return{discover:u,
use:function(b){w(b,1)},sample_usage:w}});I("expressions/table","require underscore pjs lib/underscore_model graphing/columnmode lib/track_feature big ./abstractitem ./colors undoredo".split(" "),function(b){var h=b("underscore"),u=b("pjs"),w=b("lib/underscore_model"),q=b("graphing/columnmode"),p=b("lib/track_feature"),s=b("big"),a=b("./abstractitem"),k=b("./colors"),c=b("undoredo"),g=u(w,function(a,b){a.init=function(a,c){b.init.call(this);this.column=a;c&&(this.value=c.value,this.error=c.error)};
a.isEmpty=function(){return""===this.value.split(" ").join("")}}),f=u(a,function(a,b){function f(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e="";h.isNumber(d)&&(e=String(Number(Number(d).toFixed(4))),e=e.replace("NaN","Undefined"));b.push(e)}return b}a.init=function(a,c,e){if(void 0!==e.showPoints||void 0!==e.showLine)e=JSON.parse(JSON.stringify(e)),e.showPoints&&e.showLine?e.columnMode=q.POINTS_AND_LINES:e.showPoints?e.columnMode=q.POINTS:e.showLine?e.columnMode=q.LINES:(e.hidden=!0,e.columnMode=
q.POINTS);this.latex="";this.hidden=!1;this.columnMode=q.POINTS;this.values=[];this.error="";b.init.call(this,e);this.color||(this.color=k.next());this.style||(this.style="point");if(0!==c&&0===this.values.length&&a.columns[0].cells){this.values=[];e=a.columns[0].cells.length;for(var f=0;f<e;f++)this.values.push("")}var h=this;this.cells=this.values.map(function(a){return g(h,{value:String(a)})});delete this.values;this.table=a;this.index=c;0===c&&(this.hidden=!0);this.isGraphable=!this.error;this.observe("error",
function(){this.setProperty("isGraphable",!this.error)}.bind(this));this.observe("color columnMode hidden latex style",this.onStateChange.bind(this));this.observe("hidden hiddenByTable",this.computeShouldGraph.bind(this));this.computeShouldGraph();this.observe("shouldGraph",this.table.requestParse.bind(this.table))};a.computeShouldGraph=function(){this.setProperty("shouldGraph",!this.hiddenByTable&&!this.hidden)};a.onStateChange=function(a){this.table.requestParse();var b=this.table.id,d=this.index,
e=this.table.list,f=this.getOldProperty(a),g=this.getProperty(a);c.addTransaction({type:c.RESPONSE_TO_CHANGE,undo:function(){e.getItemById(b).columns[d].setProperty(a,f)},redo:function(){e.getItemById(b).columns[d].setProperty(a,g)}})};a.isEmpty=function(){return""===this.latex.split(" ").join(" ")};a.getValues=function(){for(var a=[],b=this.cells.length,c=0;c<b;c++){var d=this.cells[c].value;null===d||void 0===d?a.push(""):a.push(String(d))}return a};a.triggerRowChange=function(){};a.insertCell=
function(a,b){var c=g(this,{value:b});this.cells.splice(a,0,c)};a.removeCell=function(a){this.cells.splice(a,1)};a.setComputedValues=function(a){!a.error&&a.dependent&&p.discover("dependent table columns");if(0===a.values.length&&a.error)for(var b=0;b<this.cells.length-1;b++)a.values[b]=null;this.setProperty("error",a.error);this.setProperty("discrete",a.discrete);this.setProperty("disabled",a.dependent);this.setErrors(a.values);a.dependent?(this.independentValues||(this.independentValues=this.getValues()),
this.setValues(f(a.values))):this.independentValues&&(this.setValues(this.independentValues),this.independentValues=null,this.table.requestParse())};a.setValues=function(a){for(var b=0;b<a.length;b++)this.cells[b].setProperty("value",String(a[b]))};a.setErrors=function(a){for(var b=0;b<a.length;b++)"string"===typeof a[b]?this.cells[b].setProperty("error",a[b]):this.cells[b].setProperty("error","")};a.serialize=function(){return{values:this.getValues(),columnMode:this.columnMode,hidden:this.hidden,
id:this.id,color:this.color,style:this.style,latex:this.latex}}});return u(a,function(a,b){a.isTable=!0;a.init=function(a,c){var e,g;b.init.call(this,a,c);this.list=c;this.selectedCell=null;this.headings&&(this.columns=this.headings,delete this.headings);if(this.rows){for(g=0;g<this.columns.length;g++){var k=this.columns[g];k.values=[];for(e=0;e<this.rows.length;e++)k.values.push(this.rows[e][g])}delete this.rows}var p=this;this.columns||(this.columns=[]);this.columns=this.columns.map(function(a,
b){return f(p,b,a)});this.columns.push(f(this,this.columns.length,{disabled:!0}));var q=this.columns[0].cells.length;h.each(this.columns,function(a){a.insertCell(q,"")});this.observe("selected",this.onSelectedChange.bind(this))};a.updateFolder=function(){b.updateFolder.call(this);this.getOldProperty("folder")&&this.getOldProperty("folder").unobserve("."+this.id);this.folder&&this.folder.observe("hidden."+this.id,this.computeColumnsHidden.bind(this));this.computeColumnsHidden()};a.computeColumnsHidden=
function(){var a=this.folder&&this.folder.hidden;h.each(this.columns,function(b){b.setProperty("hiddenByTable",a)})};a.onSelectedChange=function(){this.selected||this.setProperty("selectedCell",null)};a.insertColumn=function(a,b){var d=this.id,e=this.list;c.addTransaction({type:c.CAUSE_OF_CHANGE,undo:function(){e.getItemById(d).__removeColumn(a)},redo:function(){var c=e.getItemById(d);c.__insertColumn(a,b);b=c.columns[a].serialize()}})};a.removeColumn=function(a){var b=this.id,d=this.columns[a].serialize(),
e=this.list;c.addTransaction({type:c.CAUSE_OF_CHANGE,undo:function(){e.getItemById(b).__insertColumn(a,d)},redo:function(){e.getItemById(b).__removeColumn(a)}})};a.moveColumn=function(a,b){var d=this.id,e=this.list;c.addTransaction({type:c.CAUSE_OF_CHANGE,undo:function(){e.getItemById(d).__moveColumn(b,a)},redo:function(){e.getItemById(d).__moveColumn(a,b)}})};a.triggerColumnAdded=function(a){};a.__insertColumn=function(a,b){b||(b={});var c=f(this,a,b);this.columns.splice(a,0,c);for(c=a+1;c<this.columns.length;c++)this.columns[c].setProperty("index",
c);this.triggerColumnAdded(a);this.requestParse()};a.triggerColumnRemoved=function(a){};a.__removeColumn=function(a){this.requestUnparseColumn(a);this.columns.splice(a,1);for(var b=a;b<this.columns.length;b++)this.columns[b].setProperty("index",b);this.triggerColumnRemoved(a);this.requestParse()};a.triggerColumnMoved=function(a,b){};a.__moveColumn=function(a,b){if(a!==b){var c=this.columns.length,d=this.columns[a];if(!(1>a||1>b||a>=c-1||b>=c-1)){this.columns.splice(a,1);this.columns.splice(b,0,d);
for(d=0;d<c;d++)this.columns[d].setProperty("index",d);this.triggerColumnMoved(a,b)}}};a.getAutofillValues=function(a){var b,c=this.columns.length,d=[];for(b=0;b<c;b++)d.push("");var c=this.columns[0].getValues(),e;try{for(1<a&&(e=s(c[1]).minus(c[0])),b=2;b<a&&void 0!==e;b++){var f=s(c[b]).minus(c[b-1]);e.equals(f)||(e=void 0)}}catch(g){e=void 0}void 0!==e&&(d[0]=e.plus(c[a-1]).toString());return d};a.setComputedValues=function(a){for(var b=0;b<a.length;b++)this.columns[b].setComputedValues(a[b])};
a.triggerRowAdded=function(a){};a.insertRow=function(a,b){for(var d=0;d<this.columns.length;d++)this.columns[d].insertCell(a,b[d]);this.triggerRowAdded(a);var e=this.id,f=this.list;c.addTransaction({type:c.RESPONSE_TO_CHANGE,undo:function(){f.getItemById(e).removeRow(a)},redo:function(){f.getItemById(e).insertRow(a,b)}});this.requestParse()};a.triggerRowRemoved=function(a){};a.removeRow=function(a){var b=[];if(this.columns.length&&!(2>=this.columns[0].cells.length)){for(var d=0;d<this.columns.length;d++)b.push(this.columns[d].cells[a].value),
this.columns[d].removeCell(a);this.triggerRowRemoved(a);var e=this.id,f=this.list;c.addTransaction({type:c.RESPONSE_TO_CHANGE,undo:function(){f.getItemById(e).insertRow(a,b)},redo:function(){f.getItemById(e).removeRow(a)}})}};a.getParsableObject=function(){var a=this.columns.map(function(a){var b=a.serialize();b.hidden=!a.shouldGraph;b.values.pop();return b});a.pop();return{type:"table",id:this.id,columns:a}};a.requestParse=function(){this.list.triggerAddExp(this.getParsableObject())};a.requestUnparse=
function(){for(var a=[this.id],b=0;b<this.columns.length;b++)a.push(this.columns[b].id);this.list.triggerRemoveExps(a)};a.onAddedToList=function(){this.requestParse()};a.onRemovedFromList=function(){this.requestUnparse()};a.requestUnparseColumn=function(a){this.list.triggerRemoveExp(this.columns[a].id)};a.getState=function(){var a=this.columns.map(function(a){var b=a.serialize();b.values.pop();a.disabled&&(b.values=b.values.map(function(){return""}));return b});a.pop();return{id:this.id,columns:a}};
a.isEmpty=function(){return!1}})});I("loadcss!css/folder",function(){});I("expressions/folder","require loadcss!css/folder pjs underscore ./abstractitem undoredo".split(" "),function(b){b("loadcss!css/folder");var h=b("pjs"),u=b("underscore"),w=b("./abstractitem"),q=b("undoredo");return h(w,function(b,h){b.isFolder=!0;b.init=function(a,b){h.init.call(this,a,b);this.title||(this.title="");this.memberIds||(this.memberIds={});this.hidden=!!this.hidden;this.collapsed=!!this.collapsed;this.updateCount();
this.observe("title hidden",this.onStateDidChange.bind(this))};b.updateCount=function(){this.setProperty("count",u.size(this.memberIds))};b.getState=function(){return{id:this.id,type:"folder",title:this.title,memberIds:this.memberIds,hidden:this.hidden,collapsed:this.collapsed}};b._addItem=function(a){var b=this.list.getItemById(a);this.memberIds[a]=!0;b&&b.setProperty("folder",this);this.updateCount()};b._removeItem=function(a){var b=this.list.getItemById(a);b&&b.setProperty("folder",void 0);this.memberIds.hasOwnProperty(a)&&
delete this.memberIds[a];this.updateCount()};b.addItem=function(a){var b=this.list,c=this.id,g=a.id;q.addTransaction({type:q.CAUSE_OF_CHANGE,redo:function(){b.getItemById(c)._addItem(g)},undo:function(){b.getItemById(c)._removeItem(g)}})};b.removeItem=function(a){var b=this.list,c=this.id,g=a.id;q.addTransaction({type:q.CAUSE_OF_CHANGE,redo:function(){b.getItemById(c)._removeItem(g)},undo:function(){b.getItemById(c)._addItem(g)}})}})});I("expressions/list","require pjs underscore lib/underscore_model ./expression ./text ./table ./folder undoredo".split(" "),
function(b){var h=b("pjs"),u=b("underscore"),w=b("lib/underscore_model"),q=b("./expression"),p=b("./text"),s=b("./table"),a=b("./folder"),k=b("undoredo");return h(w,function(b,g){b.init=function(){g.init.call(this);this.__items=[];this.__itemIds={};this.drawOrder=[];var a=this,b=function(){a.batchEvaluation(function(){a.notifyPropertyChange("playStep")});setTimeout(function(){b()},40)};b()};b.getItemByIndex=function(a){return this.__items[a]};b.updateDrawOrder=function(){var a=[],b=u.sortBy(this.__itemIds,
function(a){return a.index});u.each(b,function(b){b.hasOwnProperty("columns")?u.each(b.columns,function(b){a.push(b.id)}):a.push(b.id)});this.setProperty("drawOrder",a)};b.getItemById=function(a){return this.__itemIds[a]};b._insertItemAt=function(a,b){var c=String(b.id);if(this.__itemIds.hasOwnProperty(c))throw Error("Item with id '"+c+"' is already in list");this.__itemIds[c]=b;this.__items.splice(a,0,b);b.onAddedToList()};b.triggerItemInserted=function(a,b){};b.insertItemAt=function(a,b){this._insertItemAt(a,
b);this.triggerItemInserted(a,b);var c=this,g=b.constructor,h=b.getState();k.addTransaction({type:k.RESPONSE_TO_CHANGE,undo:function(){c.removeItemAt(a)},redo:function(){c.insertItemAt(a,g(h,c))}});this.updateDrawOrder()};b.addItem=function(a){var b=this.getItemByIndex(this.getItemCount()-1);!b||b.text||b.columns||b.headings||""!==b.latex||this.removeItemAt(this.getItemCount()-1);this.insertItemAt(this.getItemCount(),a)};b.updateItemById=function(a,b){this.getItemById(a).setProperties(b);this.updateDrawOrder()};
b._removeItemAt=function(a){var b=this.__items[a];if(b){if(b.isFolder)for(var c in b.memberIds)this.removeItemAt(this.getItemById(c).index);this.__items.splice(a,1);delete this.__itemIds[String(b.id)];b.onRemovedFromList();return b}};b._removeAllItems=function(){for(var a=0;a<this.__items.length;a++)this.__items[a].onRemovedFromList();this.__items=[];this.__itemIds={}};b.triggerItemRemoved=function(a,b){};b.removeItemAt=function(a){var b=this;k.oneTransaction(function(){var c=this._removeItemAt(a);
this.triggerItemRemoved(a,c);var g=c.constructor,h=c.getState();c.folder&&c.folder.removeItem(c);k.addTransaction({type:k.RESPONSE_TO_CHANGE,undo:function(){var c=g(h,b);b.insertItemAt(a,c)},redo:function(){b.removeItemAt(a)}})}.bind(this));this.updateDrawOrder()};b.triggerItemMoved=function(a,b){};b.moveItemTo=function(a,b){var c=this,g=function(a,b){if(a!==b){var e=c.getItemCount(),f=c.__items[a];0>a||0>b||a>=e||b>=e||(c.__items.splice(a,1),c.__items.splice(b,0,f),c.triggerItemMoved(a,b),c.updateDrawOrder())}};
k.addTransaction({type:k.CAUSE_OF_CHANGE,undo:function(){g(b,a)},redo:function(){g(a,b)}})};b.moveItemsTo=function(a,b,c){k.oneTransaction(function(){var g;if(!(b>=a&&b<a+c))if(a<b)for(g=0;g<c;g++)this.moveItemTo(a,b);else for(g=0;g<c;g++)this.moveItemTo(a+g,b+g)}.bind(this))};b.getItemCount=function(){return this.__items.length};b.isEmpty=function(){var a=this.getItemCount();return 0===a?!0:1<a?!1:""===this.getItemByIndex(0).latex};b.getState=function(){for(var a=[],b=this.getItemCount(),c=0;c<b;c++)a.push(this.getItemByIndex(c).getState());
return{list:a}};b.batchEvaluation=function(a){a()};b.triggerSetState=function(a){};b.setState=function(a){var b,c=[],g=[],h;for(b=0;b<a.list.length;b++)if(h=a.list[b],h.renderShell=!0,h=this.fromState(h))h.isFolder&&g.push(h),c.push(h);var k=this;this.batchEvaluation(function(){k._removeAllItems();for(b=0;b<c.length;b++)k._insertItemAt(b,c[b])});g.forEach(function(a){for(var b in a.memberIds)k.getItemById(b).setProperty("folder",a)});this.triggerSetState(c);this.updateDrawOrder()};b.fromState=function(b){if(void 0!==
b.text)return p(b,this);if(void 0!==b.columns||void 0!==b.headings)return s(b,this);if("folder"===b.type)return a(b,this);-1===["default","always","never"].indexOf(b.userRequestedGraphing)&&(b.hasOwnProperty("graphed")?b.userRequestedGraphing=b.graphed?"always":"never":b.userRequestedGraphing="default");return q(b,this)};b.triggerRemoveExps=function(){};b.triggerRemoveExp=function(){};b.triggerAddExp=function(){}})});(function(b,h){"object"===typeof exports?module.exports=h():"function"===typeof I&&
I.amd&&I("i18next",[],h)})(this,function(){function b(a,b){if(!b||"function"===typeof b)return a;for(var c in b)a[c]=b[c];return a}function h(a,b,c){var d,e=0,f=a.length,g=void 0===f||"function"===typeof a;if(c)if(g)for(d in a){if(!1===b.apply(a[d],c))break}else for(;e<f&&!1!==b.apply(a[e++],c););else if(g)for(d in a){if(!1===b.call(a[d],d,a[d]))break}else for(;e<f&&!1!==b.call(a[e],e,a[e++]););return a}function u(a){var b=function(a){if(window.XMLHttpRequest)return a(null,new XMLHttpRequest);if(window.ActiveXObject)try{return a(null,
new ActiveXObject("Msxml2.XMLHTTP"))}catch(b){return a(null,new ActiveXObject("Microsoft.XMLHTTP"))}return a(Error())},c=function(a){if("string"===typeof a)return a;var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},d=function(){for(var a=arguments[0],b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a},e=function(a,f,g,h){"function"===typeof g&&(h=g,g={});g.cache=g.cache||!1;g.data=
g.data||{};g.headers=g.headers||{};g.jsonp=g.jsonp||!1;g.async=void 0===g.async?!0:g.async;var k=d({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},e.headers,g.headers),l;l="application/json"===k["content-type"]?JSON.stringify(g.data):c(g.data);if("GET"===a){var n=[];l&&(n.push(l),l=null);g.cache||n.push("_="+(new Date).getTime());g.jsonp&&(n.push("callback="+g.jsonp),n.push("jsonp="+g.jsonp));n=n.join("&");1<n.length&&(f=-1<f.indexOf("?")?f+("&"+n):f+("?"+n));if(g.jsonp){var n=
document.getElementsByTagName("head")[0],p=document.createElement("script");p.type="text/javascript";p.src=f;n.appendChild(p);return}}b(function(b,c){if(b)return h(b);c.open(a,f,g.async);for(var d in k)k.hasOwnProperty(d)&&c.setRequestHeader(d,k[d]);c.onreadystatechange=function(){if(4===c.readyState){var a=c.responseText||"";h&&h(c.status,{text:function(){return a},json:function(){return JSON.parse(a)}})}};c.send(l)})};({authBasic:function(a,b){var c=e.headers,d;d=a+":"+b;d=d.replace(/\r\n/g,"\n");
for(var f="",g=0;g<d.length;g++){var h=d.charCodeAt(g);128>h?f+=String.fromCharCode(h):(127<h&&2048>h?f+=String.fromCharCode(h>>6|192):(f+=String.fromCharCode(h>>12|224),f+=String.fromCharCode(h>>6&63|128)),f+=String.fromCharCode(h&63|128))}d=f;var f="",k,l,n,p,m=0;do k=d.charCodeAt(m++),g=d.charCodeAt(m++),h=d.charCodeAt(m++),l=k>>2,k=(k&3)<<4|g>>4,n=(g&15)<<2|h>>6,p=h&63,isNaN(g)?n=p=64:isNaN(h)&&(p=64),f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(p);while(m<d.length);c.Authorization="Basic "+f},connect:function(a,b,c){return e("CONNECT",a,b,c)},del:function(a,b,c){return e("DELETE",a,b,c)},get:function(a,b,c){return e("GET",a,b,c)},head:function(a,b,c){return e("HEAD",a,b,c)},headers:function(a){e.headers=a||{}},isAllowed:function(a,b,c){this.options(a,function(a,d){c(-1!==d.text().indexOf(b))})},
options:function(a,b,c){return e("OPTIONS",a,b,c)},patch:function(a,b,c){return e("PATCH",a,b,c)},post:function(a,b,c){return e("POST",a,b,c)},put:function(a,b,c){return e("PUT",a,b,c)},trace:function(a,b,c){return e("TRACE",a,b,c)}})[a.type?a.type.toLowerCase():"get"](a.url,a,function(b,c){200===b?a.success(c.json(),b,null):a.error(c.text(),b,null)})}function w(a,b){"function"===typeof a&&(b=a,a={});a=a||{};C.extend(n,a);"string"==typeof n.ns&&(n.ns={namespaces:[n.ns],defaultNs:n.ns});"string"==
typeof n.fallbackNS&&(n.fallbackNS=[n.fallbackNS]);n.interpolationPrefixEscaped=C.regexEscape(n.interpolationPrefix);n.interpolationSuffixEscaped=C.regexEscape(n.interpolationSuffix);n.lng||(n.lng=C.detectLanguage());n.lng?n.useCookie&&C.cookie.create(n.cookieName,n.lng,n.cookieExpirationTime):(n.lng=n.fallbackLng,n.useCookie&&C.cookie.remove(n.cookieName));r=C.toLanguages(n.lng);m=r[0];C.log("currentLng set to: "+m);F.setCurrentLng(m);e&&n.setJqueryExt&&p();var c;e&&e.Deferred&&(c=e.Deferred());
if(n.resStore)l=n.resStore,b&&b(k),c&&c.resolve();else{var f=C.toLanguages(n.lng);"string"===typeof n.preload&&(n.preload=[n.preload]);for(var g=0,h=n.preload.length;g<h;g++)for(var q=C.toLanguages(n.preload[g]),s=0,x=q.length;s<x;s++)0>f.indexOf(q[s])&&f.push(q[s]);d.sync.load(f,n,function(a,d){l=d;b&&b(k);c&&c.resolve()})}if(c)return c.promise()}function q(a,b){var c={dynamicLoad:n.dynamicLoad,resGetPath:n.resGetPath,getAsync:n.getAsync,customLoad:n.customLoad,ns:{namespaces:a,defaultNs:""}},e=
C.toLanguages(n.lng);"string"===typeof n.preload&&(n.preload=[n.preload]);for(var f=0,g=n.preload.length;f<g;f++)for(var h=C.toLanguages(n.preload[f]),k=0,p=h.length;k<p;k++)0>e.indexOf(h[k])&&e.push(h[k]);for(var m=[],f=0,g=e.length;f<g;f++){h=!1;if(k=l[e[f]])for(var p=0,q=a.length;p<q;p++)k[a[p]]||(h=!0);else h=!0;h&&m.push(e[f])}m.length?d.sync._fetch(m,c,function(c,e){var f=a.length*m.length;C.each(a,function(a,c){0>n.ns.namespaces.indexOf(c)&&n.ns.namespaces.push(c);C.each(m,function(a,g){l[g]=
l[g]||{};l[g][c]=e[g][c];f--;0===f&&b&&(n.useLocalStorage&&d.sync._storeLocal(l),b())})})}):b&&b()}function p(){function a(b,c,d){if(0!==c.length){var f="text";0===c.indexOf("[")&&(f=c.split("]"),c=f[1],f=f[0].substr(1,f[0].length-1));c.indexOf(";")===c.length-1&&(c=c.substr(0,c.length-2));"html"===f?(d=n.defaultValueFromContent?e.extend({defaultValue:b.html()},d):d,b.html(e.t(c,d))):"text"===f?(d=n.defaultValueFromContent?e.extend({defaultValue:b.text()},d):d,b.text(e.t(c,d))):(d=n.defaultValueFromContent?
e.extend({defaultValue:b.attr(f)},d):d,b.attr(f,e.t(c,d)))}}function b(c,d){var f=c.attr(n.selectorAttr);if(f){var g=c,h=c.data("i18n-target");h&&(g=c.find(h)||c);d||!0!==n.useDataAttrOptions||(d=c.data("i18n-options"));d=d||{};0<=f.indexOf(";")?(f=f.split(";"),e.each(f,function(b,c){""!==c&&a(g,c,d)})):a(g,f,d);!0===n.useDataAttrOptions&&c.data("i18n-options",d)}}e.t=e.t||k;e.fn.i18n=function(a){return this.each(function(){b(e(this),a);e(this).find("["+n.selectorAttr+"]").each(function(){b(e(this),
a)})})}}function s(a,b,c,d){if(!a)return a;d=d||b;if(0>a.indexOf(d.interpolationPrefix||n.interpolationPrefix))return a;var e=d.interpolationPrefix?C.regexEscape(d.interpolationPrefix):n.interpolationPrefixEscaped,f=d.interpolationSuffix?C.regexEscape(d.interpolationSuffix):n.interpolationSuffixEscaped,g="HTML"+f;C.each(b,function(b,h){var k=c?c+n.keyseparator+b:b;"object"===typeof h&&null!==h?a=s(a,h,k,d):d.escapeInterpolation||n.escapeInterpolation?(a=a.replace(RegExp([e,k,g].join(""),"g"),h),a=
a.replace(RegExp([e,k,f].join(""),"g"),C.escape(h))):a=a.replace(RegExp([e,k,f].join(""),"g"),h)});return a}function a(a,b){var c=C.extend({},b);for(delete c.postProcess;-1!=a.indexOf(n.reusePrefix);){x++;if(x>n.maxRecursion)break;var d=a.lastIndexOf(n.reusePrefix),e=a.indexOf(n.reuseSuffix,d)+n.reuseSuffix.length,d=a.substring(d,e),e=d.replace(n.reusePrefix,"").replace(n.reuseSuffix,"");if(-1!=e.indexOf(",")){var f=e.indexOf(",");if(-1!=e.indexOf("{",f)&&-1!=e.indexOf("}",f)){var h=e.indexOf("{",
f),k=e.indexOf("}",h)+1;try{c=C.extend(c,JSON.parse(e.substring(h,k))),e=e.substring(0,f)}catch(l){}}}e=g(e,c);a=a.replace(d,e)}return a}function k(a,b){x=0;return g.apply(null,arguments)}function c(){for(var a=[],b=1;b<arguments.length;b++)a.push(arguments[b]);return{postProcess:"sprintf",sprintf:a}}function g(b,d){d="string"==typeof d?c.apply(null,arguments):d||{};var e=d.defaultValue||b,g=f(b,d),h=d.lng?C.toLanguages(d.lng):r,k=d.ns||n.ns.defaultNs,l;-1<b.indexOf(n.nsseparator)&&(l=b.split(n.nsseparator),
k=l[0],b=l[1]);void 0===g&&n.sendMissing&&(d.lng?D.postMissing(h[0],k,b,e,h):D.postMissing(n.lng,k,b,e,h));h=d.postProcess||n.postProcess;void 0!==g&&h&&G[h]&&(g=G[h](g,b,d));l=e;-1<e.indexOf(n.nsseparator)&&(l=e.split(n.nsseparator),l=l[1]);l===b&&n.parseMissingKey&&(e=n.parseMissingKey(e));void 0===g&&(e=s(e,d),e=a(e,d),h&&G[h]&&(g=G[h](d.defaultValue||b,b,d)));return void 0!==g?g:e}function f(b,c){c=c||{};var e,h=c.defaultValue||b,p=r;if(!l)return h;if(c.lng&&(p=C.toLanguages(c.lng),!l[p[0]])){var m=
n.getAsync;n.getAsync=!1;d.sync.load(p,n,function(a,b){C.extend(l,b);n.getAsync=m})}var q=c.ns||n.ns.defaultNs;-1<b.indexOf(n.nsseparator)&&(e=b.split(n.nsseparator),q=e[0],b=e[1]);if(c.context&&"string"==typeof c.context&&(e=C.extend({},c),delete e.context,e.defaultValue=n.contextNotFound,e=k(q+n.nsseparator+b+"_"+c.context,e),e!=n.contextNotFound))return s(e,{context:c.context});if(void 0!==c.count&&"string"!=typeof c.count&&1!==c.count){e=C.extend({},c);delete e.count;e.defaultValue=n.pluralNotFound;
var x=q+n.nsseparator+b+n.pluralSuffix,w=F.get(p[0],c.count);0<=w?x=x+"_"+w:1===w&&(x=q+n.nsseparator+b);e=k(x,e);if(e!=n.pluralNotFound)return s(e,{count:c.count,interpolationPrefix:c.interpolationPrefix,interpolationSuffix:c.interpolationSuffix})}var y;e=b.split(n.keyseparator);x=0;for(w=p.length;x<w&&void 0===y;x++){for(var u=p[x],B=0,z=l[u]&&l[u][q];e[B];)z=z&&z[e[B]],B++;if(void 0!==z){if("string"===typeof z)z=s(z,c),z=a(z,c);else if("[object Array]"===Object.prototype.toString.apply(z)&&!n.returnObjectTrees&&
!c.returnObjectTrees)z=z.join("\n"),z=s(z,c),z=a(z,c);else if(null===z&&!0===n.fallbackOnNull)z=void 0;else if(null!==z)if(n.returnObjectTrees||c.returnObjectTrees){y={};for(var D in z)y[D]=g(q+n.nsseparator+b+n.keyseparator+D,c);z=y}else z="key '"+q+":"+b+" ("+u+")' returned a object instead of string.",C.log(z);y=z}}if(void 0===y&&!c.isFallbackLookup&&(!0===n.fallbackToDefaultNS||n.fallbackNS&&0<n.fallbackNS.length))if(c.isFallbackLookup=!0,n.fallbackNS.length)for(p=0,q=n.fallbackNS.length;p<q;p++){if(y=
f(n.fallbackNS[p]+n.nsseparator+b,c))if(D=-1<y.indexOf(n.nsseparator)?y.split(n.nsseparator)[1]:y,e=-1<h.indexOf(n.nsseparator)?h.split(n.nsseparator)[1]:h,D!==e)break}else y=f(b,c);return y}Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;0<arguments.length&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&Infinity!=d&&-Infinity!=d&&(d=(0<d||-1)*Math.floor(Math.abs(d))));if(d>=c)return-1;for(d=0<=d?d:
Math.max(c-Math.abs(d),0);d<c;d++)if(d in b&&b[d]===a)return d;return-1});Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=c;1<arguments.length&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&d!=1/0&&d!=-(1/0)&&(d=(0<d||-1)*Math.floor(Math.abs(d))));for(c=0<=d?Math.min(d,c-1):c-Math.abs(d);0<=c;c--)if(c in b&&b[c]===a)return c;return-1});var e=void 0,d={},l={},m,x=0,r=[],n={lng:void 0,load:"all",
preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:"dev",fallbackNS:[],detectLngQS:"setLng",ns:"translation",fallbackOnNull:!0,fallbackToDefaultNS:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,localStorageExpirationTime:6048E5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",
reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),escapeInterpolation:!1,setJqueryExt:!0,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"i18next",postProcess:void 0,parseMissingKey:void 0},y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},B={create:function(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+
6E4*c);c="; expires="+d.toGMTString()}else c="";document.cookie=a+"="+b+c+"; path=/"},read:function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return d.substring(a.length,d.length)}return null},remove:function(a){this.create(a,"",-1)}},z={create:function(a,b,c){},read:function(a){return null},remove:function(a){}},C={extend:e?e.extend:b,each:e?e.each:h,ajax:e?e.ajax:u,cookie:"undefined"!==typeof document?
B:z,detectLanguage:function(){var a,b=[];if("undefined"!==typeof window){for(var c=window.location.search.substring(1).split("&"),d=0;d<c.length;d++){var e=c[d].indexOf("=");if(0<e){var f=c[d].substring(0,e),e=c[d].substring(e+1);b[f]=e}}b[n.detectLngQS]&&(a=b[n.detectLngQS])}!a&&"undefined"!==typeof document&&n.useCookie&&(b=C.cookie.read(n.cookieName))&&(a=b);a||"undefined"===typeof navigator||(a=navigator.language?navigator.language:navigator.userLanguage);return a},escape:function(a){return"string"===
typeof a?a.replace(/[&<>"'\/]/g,function(a){return y[a]}):a},log:function(a){},toLanguages:function(a){var b=[];if("string"===typeof a&&-1<a.indexOf("-")){var c=a.split("-");a=n.lowerCaseLng?c[0].toLowerCase()+"-"+c[1].toLowerCase():c[0].toLowerCase()+"-"+c[1].toUpperCase();"unspecific"!==n.load&&b.push(a);"current"!==n.load&&b.push(c[0])}else b.push(a);-1===b.indexOf(n.fallbackLng)&&n.fallbackLng&&b.push(n.fallbackLng);return b},regexEscape:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,
"\\$&")}};C.applyReplacement=s;var D={load:function(a,b,c){b.useLocalStorage?D._loadLocal(a,b,function(d,e){for(var f=[],g=0,h=a.length;g<h;g++)e[a[g]]||f.push(a[g]);0<f.length?D._fetch(f,b,function(a,b){C.extend(e,b);D._storeLocal(b);c(null,e)}):c(null,e)}):D._fetch(a,b,function(a,b){c(null,b)})},_loadLocal:function(a,b,c){var d={},e=(new Date).getTime();if(window.localStorage){var f=a.length;C.each(a,function(a,g){var h=window.localStorage.getItem("res_"+g);h&&(h=JSON.parse(h),h.i18nStamp&&h.i18nStamp+
b.localStorageExpirationTime>e&&(d[g]=h));f--;0===f&&c(null,d)})}},_storeLocal:function(a){if(window.localStorage)for(var b in a)a[b].i18nStamp=(new Date).getTime(),window.localStorage.setItem("res_"+b,JSON.stringify(a[b]))},_fetch:function(a,b,c){var d=b.ns,e={};if(b.dynamicLoad){var f=function(a,b){c(null,b)};if("function"==typeof b.customLoad)b.customLoad(a,d.namespaces,b,f);else{var g=s(b.resGetPath,{lng:a.join("+"),ns:d.namespaces.join("+")});C.ajax({url:g,success:function(a,b,d){C.log("loaded: "+
g);c(null,a)},error:function(a,b,d){C.log("failed loading: "+g);c(null,void 0)},dataType:"json",async:b.getAsync})}}else{var h=d.namespaces.length*a.length,k;C.each(d.namespaces,function(d,f){C.each(a,function(a,d){var g=function(a,b){a&&(k=k||[],k.push(a));e[d]=e[d]||{};e[d][f]=b;h--;0===h&&c(k,e)};"function"==typeof b.customLoad?b.customLoad(d,f,b,g):D._fetchOne(d,f,b,g)})})}},_fetchOne:function(a,b,c,d){var e=s(c.resGetPath,{lng:a,ns:b});C.ajax({url:e,success:function(a,b,c){C.log("loaded: "+e);
d(null,a)},error:function(a,b,c){C.log("failed loading: "+e);d(c,{})},dataType:"json",async:c.getAsync})},postMissing:function(a,b,c,d,e){var f={};f[c]=d;var g=[];if("fallback"===n.sendMissingTo&&!1!==n.fallbackLng)g.push({lng:n.fallbackLng,url:s(n.resPostPath,{lng:n.fallbackLng,ns:b})});else if("current"===n.sendMissingTo||"fallback"===n.sendMissingTo&&!1===n.fallbackLng)g.push({lng:a,url:s(n.resPostPath,{lng:a,ns:b})});else if("all"===n.sendMissingTo){a=0;for(var h=e.length;a<h;a++)g.push({lng:e[a],
url:s(n.resPostPath,{lng:e[a],ns:b})})}e=0;for(a=g.length;e<a;e++){var k=g[e];C.ajax({url:k.url,type:n.sendType,data:f,success:function(a,e,f){C.log("posted missing key '"+c+"' to: "+k.url);a=c.split(".");e=0;for(f=l[k.lng][b];a[e];)f=e===a.length-1?f[a[e]]=d:f[a[e]]=f[a[e]]||{},e++},error:function(a,b,d){C.log("failed posting missing key '"+c+"' to: "+k.url)},dataType:"json",async:n.postAsync})}}},F={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(a){return Number(1<a)}},af:{name:"Afrikaans",
numbers:[1,2],plurals:function(a){return Number(1!=a)}},ak:{name:"Akan",numbers:[1,2],plurals:function(a){return Number(1<a)}},am:{name:"Amharic",numbers:[1,2],plurals:function(a){return Number(1<a)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(a){return Number(0===a?0:1==a?1:2==a?2:3<=a%100&&10>=a%100?3:11<=a%100?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(a){return Number(1<a)}},ast:{name:"Asturian",
numbers:[1,2],plurals:function(a){return Number(1!=a)}},ay:{name:"Aymará",numbers:[1],plurals:function(a){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(a){return Number(1!=a)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},bg:{name:"Bulgarian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},bo:{name:"Tibetan",
numbers:[1],plurals:function(a){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(a){return Number(1<a)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(a){return Number(1!=a)}},cgg:{name:"Chiga",numbers:[1],plurals:function(a){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:2<=a&&4>=a?1:2)}},csb:{name:"Kashubian",
numbers:[1,2,5],plurals:function(a){return Number(1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(a){return Number(1==a?0:2==a?1:8!=a&&11!=a?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},de:{name:"German",numbers:[1,2],plurals:function(a){return Number(1!=a)}},dz:{name:"Dzongkha",numbers:[1],plurals:function(a){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(a){return Number(1!=a)}},en:{name:"English",
numbers:[1,2],plurals:function(a){return Number(1!=a)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(a){return Number(1!=a)}},es:{name:"Spanish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},et:{name:"Estonian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},eu:{name:"Basque",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fa:{name:"Persian",numbers:[1],plurals:function(a){return 0}},
fi:{name:"Finnish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(a){return Number(1<a)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fr:{name:"French",numbers:[1,2],plurals:function(a){return Number(1<a)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(a){return Number(1==
a?0:2==a?1:7>a?2:11>a?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(a){return Number(1==a||11==a?0:2==a||12==a?1:2<a&&20>a?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(a){return Number(1!=a)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(a){return Number(1!=a)}},gun:{name:"Gun",numbers:[1,2],plurals:function(a){return Number(1<a)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(a){return Number(1!=a)}},he:{name:"Hebrew",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(a){return Number(1!=a)}},id:{name:"Indonesian",numbers:[1],plurals:function(a){return 0}},
is:{name:"Icelandic",numbers:[1,2],plurals:function(a){return Number(1!=a%10||11==a%100)}},it:{name:"Italian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ja:{name:"Japanese",numbers:[1],plurals:function(a){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(a){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(a){return Number(0!==a)}},ka:{name:"Georgian",numbers:[1],plurals:function(a){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(a){return 0}},km:{name:"Khmer",
numbers:[1],plurals:function(a){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ko:{name:"Korean",numbers:[1],plurals:function(a){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(a){return Number(1==a?0:2==a?1:3==a?2:3)}},ky:{name:"Kyrgyz",numbers:[1],plurals:function(a){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ln:{name:"Lingala",
numbers:[1,2],plurals:function(a){return Number(1<a)}},lo:{name:"Lao",numbers:[1],plurals:function(a){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2)}},lv:{name:"Latvian",numbers:[0,1,2],plurals:function(a){return Number(1==a%10&&11!=a%100?0:0!==a?1:2)}},mai:{name:"Maithili",numbers:[1,2],plurals:function(a){return Number(1!=a)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(a){return Number(1<
a)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(a){return Number(1<a)}},mi:{name:"Maori",numbers:[1,2],plurals:function(a){return Number(1<a)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(a){return Number(1==a||1==a%10?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(a){return Number(1!=a)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(a){return Number(1==a?1:2)}},mr:{name:"Marathi",numbers:[1,
2],plurals:function(a){return Number(1!=a)}},ms:{name:"Malay",numbers:[1],plurals:function(a){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(a){return Number(1==a?0:0===a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ne:{name:"Nepali",numbers:[1,
2],plurals:function(a){return Number(1!=a)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(a){return Number(1!=a)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(a){return Number(1!=a)}},oc:{name:"Occitan",numbers:[1,2],plurals:function(a){return Number(1<a)}},or:{name:"Oriya",numbers:[2,1],plurals:function(a){return Number(1!=
a)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ps:{name:"Pashto",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},pt_br:{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(a){return Number(1==a?0:0===a||0<a%100&&20>a%100?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(a){return 0}},sco:{name:"Scots",numbers:[1,
2],plurals:function(a){return Number(1!=a)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(a){return Number(1!=a)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:2<=a&&4>=a?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(a){return Number(1==a%100?1:2==a%100?2:3==a%100||4==a%100?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},son:{name:"Songhay",
numbers:[1,2],plurals:function(a){return Number(1!=a)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(a){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ta:{name:"Tamil",numbers:[1,
2],plurals:function(a){return Number(1!=a)}},te:{name:"Telugu",numbers:[1,2],plurals:function(a){return Number(1!=a)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(a){return Number(1<a)}},th:{name:"Thai",numbers:[1],plurals:function(a){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(a){return Number(1<a)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(a){return Number(1!=a)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(a){return Number(1<a)}},tt:{name:"Tatar",numbers:[1],
plurals:function(a){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(a){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(a){return Number(1!=a)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(a){return Number(1<a)}},vi:{name:"Vietnamese",numbers:[1],plurals:function(a){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(a){return Number(1<
a)}},wo:{name:"Wolof",numbers:[1],plurals:function(a){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(a){return Number(1!=a)}},zh:{name:"Chinese",numbers:[1],plurals:function(a){return 0}}},addRule:function(a,b){F.rules[a]=b},setCurrentLng:function(a){if(!F.currentRule||F.currentRule.lng!==a){var b=a.split("-");F.currentRule={lng:a,rule:F.rules[b[0]]}}},get:function(a,b){var c=a.split("-");if(c=F.currentRule&&F.currentRule.lng===a?F.currentRule.rule:F.rules[c[0]]){var d=c.plurals(b),d=
c.numbers[d];2===c.numbers.length&&1===c.numbers[0]&&(2===d?d=-1:1===d&&(d=1));c=d}else c=1===b?"1":"-1";return c}},G={},B=function(a,b){G[a]=b},H=function(){function a(b){return Object.prototype.toString.call(b).slice(8,-1).toLowerCase()}var b=function(){b.cache.hasOwnProperty(arguments[0])||(b.cache[arguments[0]]=b.parse(arguments[0]));return b.format.call(null,b.cache[arguments[0]],arguments)};b.format=function(b,c){var d=1,e=b.length,f="",g=[],h,k,l,p;for(h=0;h<e;h++)if(f=a(b[h]),"string"===f)g.push(b[h]);
else if("array"===f){l=b[h];if(l[2])for(f=c[d],k=0;k<l[2].length;k++){if(!f.hasOwnProperty(l[2][k]))throw H('[sprintf] property "%s" does not exist',l[2][k]);f=f[l[2][k]]}else f=l[1]?c[l[1]]:c[d++];if(/[^s]/.test(l[8])&&"number"!=a(f))throw H("[sprintf] expecting number but found %s",a(f));switch(l[8]){case "b":f=f.toString(2);break;case "c":f=String.fromCharCode(f);break;case "d":f=parseInt(f,10);break;case "e":f=l[7]?f.toExponential(l[7]):f.toExponential();break;case "f":f=l[7]?parseFloat(f).toFixed(l[7]):
parseFloat(f);break;case "o":f=f.toString(8);break;case "s":f=(f=String(f))&&l[7]?f.substring(0,l[7]):f;break;case "u":f=Math.abs(f);break;case "x":f=f.toString(16);break;case "X":f=f.toString(16).toUpperCase()}f=/[def]/.test(l[8])&&l[3]&&0<=f?"+"+f:f;k=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ";p=l[6]-String(f).length;if(l[6]){for(var n=[];0<p;n[--p]=k);k=n.join("")}else k="";g.push(l[5]?f+k:k+f)}return g.join("")};b.cache={};b.parse=function(a){for(var b=[],c=[],d=0;a;){if(null!==(b=/^[^\x25]+/.exec(a)))c.push(b[0]);
else if(null!==(b=/^\x25{2}/.exec(a)))c.push("%");else if(null!==(b=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(a))){if(b[2]){var d=d|1,e=[],f=b[2],g=[];if(null!==(g=/^([a-z_][a-z_\d]*)/i.exec(f)))for(e.push(g[1]);""!==(f=f.substring(g[0].length));)if(null!==(g=/^\.([a-z_][a-z_\d]*)/i.exec(f)))e.push(g[1]);else if(null!==(g=/^\[(\d+)\]/.exec(f)))e.push(g[1]);else throw"[sprintf] huh?";else throw"[sprintf] huh?";b[2]=e}else d|=2;if(3===d)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";
c.push(b)}else throw"[sprintf] huh?";a=a.substring(b[0].length)}return c};return b}();B("sprintf",function(a,b,c){return c.sprintf?"[object Array]"===Object.prototype.toString.apply(c.sprintf)?(b=c.sprintf,b.unshift(a),H.apply(null,b)):"object"===typeof c.sprintf?H(a,c.sprintf):a:a});d.init=w;d.setLng=function(a,b){return w({lng:a},b)};d.preload=function(a,b){"string"===typeof a&&(a=[a]);for(var c=0,d=a.length;c<d;c++)0>n.preload.indexOf(a[c])&&n.preload.push(a[c]);return w(b)};d.addResourceBundle=
function(a,b,c){"string"!==typeof b?(c=b,b=n.ns.defaultNs):0>n.ns.namespaces.indexOf(b)&&n.ns.namespaces.push(b);l[a]=l[a]||{};l[a][b]=l[a][b]||{};C.extend(l[a][b],c)};d.loadNamespace=function(a,b){q([a],b)};d.loadNamespaces=q;d.setDefaultNamespace=function(a){n.ns.defaultNs=a};d.t=k;d.translate=k;d.exists=function(a,b){b=b||{};var c=b.defaultValue||a,d=f(a,b);return void 0!==d||d===c};d.detectLanguage=C.detectLanguage;d.pluralExtensions=F;d.sync=D;d.functions=C;d.lng=function(){return m};d.addPostProcessor=
B;d.options=n;return d});I("i18n",["require","i18next","config"],function(b){var h=b("i18next"),u={getAsync:!1,fallbackLng:!1,resGetPath:"/assets/generated/locales/__lng__/__ns__.json",detectLngQS:"lang",useCookie:!1,resStore:{en:{translation:{}}}};b("config").get("lang")&&delete u.resStore;h.init(u);return h});I("lib/underscore_view","require jquery underscore ./underscore_model pjs i18n".split(" "),function(b){var h=b("jquery"),u=b("underscore"),w=b("./underscore_model"),q=b("pjs"),p=b("i18n");
return q(w,function(b){b.$=function(a){var b=h(this.__domNode);return a?b.filter(a).add(b.find(a)):b};var a=function(a){return function(b){this.__domNode||k.call(this);h(b)[a](this.$());this.didInsertElement();return this.$()}};b.appendTo=a("append");b.replace=a("replaceWith");b.prependTo=a("prepend");b.insertAfter=a("after");b.insertBefore=a("before");b.remove=function(){this.$().remove();this.destruct()};b.destruct=function(){};b.didCreateElement=function(){};b.didInsertElement=function(){};b.getTemplateParams=
function(){return{}};b.beforeRerender=function(){};b.afterRerender=function(){};b.rerender=function(){var a=this.__domNode,b=this.getTemplateParams();u.isEqual(b,this.__lastRenderParams)||(this.beforeRerender(),k.call(this),a&&h.contains(document,a)&&this.replace(a),this.afterRerender())};b.setDomNode=function(a){this.__domNode=a[0]?a[0]:a;this.didInsertElement()};var k=function(){var a=this.getTemplateParams(),b=u.extend({},a,{t:function(a,b){return p.t(a,b)}}),b=this.template(b);this.__domNode=
h(b)[0];this.__lastRenderParams=a;this.didCreateElement()}})});I("expressions/dragdrop",["require","jquery","pjs","tipsy"],function(b){var h=b("jquery"),u=b("pjs"),w=b("tipsy");return u(function(b){b.toggleStyling=function(b){};b.onDragStart=function(b,h){};b.onDragStop=function(b){};b.commitDragState=function(b){};b.updateScroll=function(){};b.computeDragPosition=function(b,h){return{x:b,y:h}};b.computeDragState=function(b,h){return{}};b.previewDragState=function(b){};b.buildDragList=function(){};
b.init=function(b){this.expressions=b;this.active=!1};b.start=function(b,h){1!==b.touches.length||b.wasHandled("longhold")||(this.active=!0,this.exppanel=this.expressions.$("#exppanel"),this.setupEventListeners(b),this.onDragStart(b,h),this.dragList=this.buildDragList(),this.toggleStyling(!0),this.drag(b.touches[0].x,b.touches[0].y),w.addDisableLock())};b.setupEventListeners=function(b){function q(b){for(var g=0;g<b.touches.length;g++){var f=b.touches[g];if(f.identifier===a)return f}}var a=b.touches[0].identifier,
k=this;h(document).on("tapmove.dragdrop",function(a){(a=q(a))&&k.drag(a.x,a.y)});h(document).on("tapend.dragdrop",function(a){q(a)||(k.stop(),a.handle("dragdrop"))});this.exppanel.on("scroll.dragdrop",this.drag.bind(this))};b.stop=function(b){this.active=!1;h(document).off(".dragdrop");this.toggleStyling(!1);this.commitDragState(this.dragState);this.onDragStop(b);w.removeDisableLock()};b.drag=function(b,h){if(this.active){"number"===typeof b&&(this.mouseX=b);"number"===typeof h&&(this.mouseY=h);this.updateScroll();
var a=this.computeDragPosition(this.mouseX,this.mouseY);this.dragState=this.computeDragState(this.dragList,a);this.previewDragState(this.dragState)}}})});I("expressions/dragdrop_expressions","require jquery underscore lib/browser pjs undoredo ./dragdrop".split(" "),function(b){var h=b("jquery"),u=b("underscore"),w=b("lib/browser"),q=b("pjs"),p=b("undoredo");b=b("./dragdrop");return q(b,function(b,a){b.toggleStyling=function(a){this.exppanel.toggleClass("isDragging",a);this.draggedView.$().toggleClass("dragging",
a);a||(this.draggedView.$().removeClass("overFolder"),h(".expressionitem").css("transform","none"))};b.onDragStart=function(a,b){this.expressions.setSelected(null);this.exppanel=this.expressions.$("#exppanel");h(document.activeElement).blur();a.preventDefault();this.draggedView=b;this.draggedViewHeight=b.$().outerHeight()-1;this.panelTop=this.exppanel.offset().top;this.panelHeight=this.exppanel.height();this.panelBottom=this.panelTop+this.panelHeight;this.grabOffset=b.$().offset().top-a.touches[0].y;
this.grabY=this.computeDragPosition(a.touches[0].x,a.touches[0].y).y;this.grabIndex=b.model.index;this.draggedViewCount=1;b.model.isFolder&&(this.draggedViewCount+=u.size(b.model.memberIds),this.dropCollapsed=b.model.collapsed,b.model.setProperty("collapsed",!0))};b.onDragStop=function(a){clearTimeout(this.scrollTimeout);this.expressions.setSelected(this.draggedView.model)};b.buildDragList=function(){var a=this,b=this.expressions.getItemsByIndexRange(0,Infinity),g=[{y:-Infinity,index:0,folder:void 0}],
f=[{y:Infinity,index:0,folder:void 0}];b.forEach(function(b){if(!(b.id===a.draggedView.model.id||b.folder&&b.folder.collapsed||b.folder&&a.draggedView.model.isFolder)){var c=a.expressions.getItemView(b.id),h=b.index>a.grabIndex,p=c.$();if(b.isFolder&&(b.collapsed||a.draggedView.model.isFolder))for(var q in b.memberIds)p.push(a.expressions.getItemView(q).$()[0]);q=h?-a.draggedViewHeight:0;var r=c.$().height(),c=c.$().position().top+q,h=b.index+(h?-1:0),n=h+p.length,s,w;a.draggedView.model.isFolder||
(s=b.folder,w=b.isFolder?b:b.folder);g.push({y:c,index:h,folder:s});g.push({y:c+r/2,index:n,folder:w,elements:p,offset:q});f={y:c+r,index:n,folder:void 0}}});g.push(f);return g};b.updateScroll=function(){clearTimeout(this.scrollTimeout);if(this.active){var a;a=Math.min(0,this.mouseY-this.panelTop);a=Math.max(a,this.mouseY-this.panelBottom+30);if(a=a*this.panelHeight/900)this.exppanel.scrollTop(this.exppanel.scrollTop()+a),this.scrollTimeout=setTimeout(this.updateScroll.bind(this),30)}};b.computeDragPosition=
function(a,b){b=Math.max(b,Math.min(b,this.panelBottom),this.panelTop);b-=this.panelTop;b+=this.grabOffset;return{x:NaN,y:b+this.exppanel.scrollTop()}};b.computeDragState=function(a,b){var g=u.sortedIndex(a,{y:b.y},function(a){return a.y})-1;return{list:a,index:a[g].index,folder:a[g].folder,dragY:b.y}};b.commitDragState=function(a){var b=this;p.oneTransaction(function(){var g=b.draggedView.model;b.expressions.model.moveItemsTo(b.grabIndex,a.index,b.draggedViewCount);var f=a.folder,e=g.folder;f!==
e&&(e&&e.removeItem(g),f&&f.addItem(g));g.isFolder&&g.setProperty("collapsed",b.dropCollapsed)})};b.previewDragState=function(a){var b=this;this.draggedView.$().css("transform",w.translateRule(0,a.dragY-this.grabY));this.draggedView.$().toggleClass("overFolder",!!a.folder);u.each(a.list,function(g){g.elements&&g.elements.css("transform",w.translateRule(0,g.offset+(g.index>a.index?b.draggedViewHeight:0)))})}})});I("expressions/dragdrop_columns","require jquery underscore lib/browser pjs ./dragdrop".split(" "),
function(b){var h=b("jquery"),u=b("underscore"),w=b("lib/browser"),q=b("pjs");b=b("./dragdrop");return q(b,function(b,q){b.toggleStyling=function(a){this.draggedCells.toggleClass("dragging",a);a||h(".expressiontable .cell").css("transform","none")};b.onDragStart=function(a,b){this.draggedView=b;this.draggedCells=h();this.tableView=b.tableView;this.tableView.model.setProperty("selectedCell",null);b.tableView.model.setProperty("selected",!0);this.draggedViewWidth=b.$().outerWidth()-1;var c=this.tableView.$(".column:first-child"),
g=this.tableView.$(".column:last-child");this.minDragX=c.offset().left+c.outerWidth();this.maxDragX=g.offset().left-this.draggedViewWidth;this.grabOffset=b.$().offset().left-a.touches[0].x;this.grabX=this.computeDragPosition(a.touches[0].x,a.touches[0].y).x;this.grabIndex=b.model.index};b.onDragStop=function(a){};b.buildDragList=function(){var a=this,b=this.tableView.columnViews.slice(1);b.pop();var c=[{x:-Infinity,index:1}],g=[{x:Infinity,index:1}];b.forEach(function(b){var e=b[0];b=h(b.map(function(a){return a.$()[0]}));
if(e===a.draggedView)a.draggedCells=b;else{var d=e.model,k=d.index>a.grabIndex,p=k?-a.draggedViewWidth:0,q=e.$().outerWidth(),e=e.$().offset().left+0+p,d=d.index+(k?-1:0),k=d+1;c.push({x:e,index:d});c.push({x:e+q/2,index:k,offset:p,views:b});g={x:e+q,index:k}}});c.push(g);return c};b.computeDragPosition=function(a,b){a+=this.grabOffset;a=Math.max(this.minDragX,Math.min(this.maxDragX,a));return{x:a,y:NaN}};b.computeDragState=function(a,b){var c=u.sortedIndex(a,{x:b.x},function(a){return a.x})-1;return{list:a,
index:a[c].index,dragX:b.x}};b.commitDragState=function(a){this.tableView.model.moveColumn(this.grabIndex,a.index)};b.previewDragState=function(a){var b=this;this.draggedCells.css("transform",w.translateRule(a.dragX-this.grabX,0));u.each(a.list,function(c){c.views&&c.views.css("transform",w.translateRule(c.offset+(c.index>a.index?b.draggedViewWidth:0),0))})}})});I("loadcss!css/add_expression",function(){});I("main/popover_view",["require","jquery","pjs","lib/underscore_view"],function(b){function h(b){b.isVisible?
(q.forEach(function(h){h!==b&&h.closePopover()}),u(document).on("tapstart.popover-"+b.popoverNumber,function(h){b.setProperty("isVisible",!b.eventShouldClosePopover(h))})):u(document).off("tapstart.popover-"+b.popoverNumber)}var u=b("jquery"),w=b("pjs");b=b("lib/underscore_view");var q=[];return w(b,function(b,s){b.init=function(){s.init.call(this);this.isVisible=!1;q.push(this);this.popoverNumber=q.length;this.observe("isVisible",function(){h(this);this.renderIsVisible()}.bind(this))};b.setupOpenButton=
function(a,b){this.openButton=a;this.openButton.on(b,this.onBtnPressed.bind(this))};b.didInsertElement=function(){this.renderIsVisible()};b.renderIsVisible=function(){this.$().toggle(this.isVisible);this.openButton&&this.openButton.toggleClass("active",this.isVisible)};b.eventShouldClosePopover=function(a){return!this.eventIsWithinPopover(a)};b.eventIsWithinPopover=function(a){a=u(a.target);return a.closest(this.$()).length||a.closest(this.openButton).length};b.onBtnPressed=function(a){a=u(a.target);
a.closest("[popover]").length||a.closest(this.openButton).length&&this.togglePopover()};b.togglePopover=function(){this.setProperty("isVisible",!this.isVisible)};b.closePopover=function(){this.setProperty("isVisible",!1)}})});I("template",["underscore","text"],function(b,h){var u={};return{load:function(w,q,p,s){h.get(q.toUrl("template_src/"+w+".underscore"),function(a){a=b.template(a);s.isBuild&&(u[w]=a.source);p(a)})},write:function(b,h,p){h in u&&p("define('"+b+"!"+h+"', ['underscore'], function(_) {return "+
u[h]+";});")}}});I("template!add_expression",["underscore"],function(b){return function(h){var u="";with(h||{})u+='<div class="add-expression-dropdown popover bottom" popover="true">\n <span class="arrow"></span>\n\n ',b.each(expression_types,function(b){u+="\n   <div class='new-item do-not-blur action-new"+b+"' id='new-"+b+"'>\n      <i class='icon-new-"+b+" expression-icon'></i>\n      "+t(b)+"\n    </div>\n "}),u+="\n\n</div>\n";return u}});I("expressions/add_expression","require loadcss!css/add_expression pjs config main/popover_view lib/track_feature template!add_expression ./expression ./table ./text ./folder lib/browser undoredo".split(" "),
function(b){b("loadcss!css/add_expression");var h=b("pjs"),u=b("config"),w=b("main/popover_view"),q=b("lib/track_feature"),p=b("template!add_expression"),s=b("./expression"),a=b("./table"),k=b("./text"),c=b("./folder"),g=b("lib/browser"),f=b("undoredo");return h(w,function(b,d){b.template=p;b.init=function(a){d.init.call(this);this.listView=a;this.list=a.model};b.getTemplateParams=function(){var a=d.getTemplateParams(),b=["expression","text","table"];u.get("folders")&&b.push("folder");a.expression_types=
b;return a};b.didInsertElement=function(){d.didInsertElement.call(this);if(g.IS_IPAD&&g.IS_IN_IFRAME)this.$().on("tapstart",function(a){a.preventDefault()});this.$(".action-newexpression").on("tap",this.newMath.bind(this));this.$(".action-newtext").on("tap",this.newText.bind(this));this.$(".action-newfolder").on("tap",this.newFolder.bind(this));this.$(".action-newtable").on("tap",this.newTable.bind(this))};b.newMath=function(){this.insertItem(s({selected:!0,latex:""},this.list))};b.newText=function(){this.insertItem(k({selected:!0,
text:""},this.list))};b.newFolder=function(){this.insertItem(c({selected:!0},this.list))};b.newTable=function(){var b=a({selected:!0,latex:"",columns:[{latex:"x",values:[1]},{latex:"y",values:[""]}]},this.list);this.insertItem(b);this.listView.getSelectedView().addFocus("cell",1,1);q.use("create table")};b.insertItem=function(a){var b=this;this.setProperty("isVisible",!1);var c=this.listView.getSelected();if(!c||!c.isExpression||c.latex||c.folder||a.isExpression)if(c&&c.isExpression&&!c.latex&&c.folder&&
!a.isExpression&&!a.isFolder)f.oneTransaction(function(){b.list.insertItemAt(c.index+1,a);c.folder.addItem(a);b.list.removeItemAt(c.index)});else if(!c||c.folder||c.isFolder)if(c&&c.folder&&!a.isFolder)f.oneTransaction(function(){b.list.insertItemAt(c.index+1,a);c.folder.addItem(a)});else if(c&&c.isFolder&&!c.collapsed&&!a.isFolder)f.oneTransaction(function(){b.list.insertItemAt(c.index+1,a);c.addItem(a)});else{c||(c=this.listView.getFirstVisibleItem());for(c.isFolder&&(c=this.list.getItemByIndex(c.index+
1));c&&c.folder;)c=this.list.getItemByIndex(c.index+1);var d=c?c.index:this.list.getItemCount();this.list.insertItemAt(d,a)}else this.list.insertItemAt(c.index+1,a);else f.oneTransaction(function(){b.list.insertItemAt(c.index+1,a);b.list.removeItemAt(c.index)});this.listView.getSelectedView().addFocus()}})});I("template!toast",["underscore"],function(b){return function(b){with(b||{})b=""+('<div class="toast-container">\n  <span class="toast">\n    <span class="msg variable-msg"></span>\n    <a class="undo action-undo">'+
t("undo")+"</a>\n  </span>\n</div>");return b}});I("main/toast","require jquery pjs lib/underscore_view undoredo template!toast".split(" "),function(b){var h=b("jquery"),u=b("pjs"),w=b("lib/underscore_view"),q=b("undoredo"),p=b("template!toast"),s=new (u(w,function(a,b){a.template=p;a.didCreateElement=function(){var a=this;q.changesCallbacks.push(function(){a.hide()});this.$(".action-undo").on("tap",function(){q.undo();a.hide();a.callback&&a.callback()});this.$().toggle(!1)};a.show=function(a,b){clearTimeout(this.hideTimeout);
h(".toast-container").fadeOut("fast");this.$().fadeIn("fast");this.$(".variable-msg").text(a);this.callback=b;var f=this;this.hideTimeout=setTimeout(function(){f.hide()},6E3)};a.hide=function(){clearTimeout(this.hideTimeout);this.$().fadeOut("fast");this.cb=void 0}}));h(function(){s.appendTo("#sliding-interior")});return s});I("main/resize",["require","lib/browser","jquery"],function(b){function h(){return 0!==c}function u(){c--;!h()&&k&&(k=!1,w())}function w(){if(h())k=!0;else for(var a=0;a<g.length;a++)g[a]()}
function q(){0!==a(document.activeElement).filter("input, textarea").length&&a("<input />").prependTo("body").focus().attr({readonly:"readonly",disabled:"true"}).blur().remove()}function p(){if(s.IS_MOBILE){var b=a(document.activeElement);0===b.filter("input,textarea").length&&a(window).scrollTop(0).scrollLeft(0);b.filter("input:hidden, textarea:hidden").length&&q()}else a(window).scrollTop(0).scrollLeft(0);var b=window.innerWidth+a(window).scrollLeft(),c=window.innerHeight+a(window).scrollTop();
if(b!==f.width||c!==f.height)f.width=b,f.height=c,l&&e.width&&e.height||(e.width=b,e.height=c),m&&(s.IS_MOBILE?w():(clearTimeout(d),d=setTimeout(w,100)))}var s=b("lib/browser"),a=b("jquery"),k=!1,c=0,g=[],f={},e={},d,l=!1,m=!1;return{trigger:w,register:function(a){g.push(a);m&&a()},fullScreen:e,currentScreen:f,init:function(b){l=b&&b.stickyFullScreen;p();setInterval(p,100);a(window).resize(function(){p()})},monitor:function(){m=!0;w()},defocusMobile:q,animationIsRunning:h,animationStarted:function(){c++},
animationEnded:u,waitForCSSAnimation:function(b,d){function e(){clearTimeout(l);g.off(k);u();f.resolve()}var f=a.Deferred();if(s.IS_IE9)return w(),f.resolve();var g=a(b),h=g.css("transition-duration");if("s"!==h[h.length-1])return w(),f.resolve();h=1E3*parseFloat(h.slice(0,-1));if(!g.closest("body").length)return w(),f.resolve();b=g[0];c++;w();var k="transitionend webkitTransitionEnd MSTransitionEnd";g.on(k,function(a){a&&(a.target!==b||d&&!a.originalEvent.propertyName.match(d))||e()});var l=setTimeout(function(){e()},
h+100);return f}}});I("lib/keys",["require"],function(b){return new function(){var b={8:this.BACKSPACE="Backspace",9:this.TAB="Tab",13:this.ENTER="Enter",16:this.SHIFT="Shift",17:this.CONTROL="Control",18:this.ALT="Alt",20:this.CAPSLOCK="CapsLock",27:this.ESCAPE="Esc",32:this.SPACEBAR="Space",33:this.PAGEUP="PageUp",34:this.PAGEDOWN="PageDown",35:this.END="End",36:this.HOME="Home",37:this.LEFT="Left",38:this.UP="Up",39:this.RIGHT="Right",40:this.DOWN="Down",46:this.DELETE="Del"};this.lookup=function(u){return b[u.which]}}});
(function(b){b.fn.extend({scrollVisible:function(h,u,w){if(h&&h.length){u=u||0;w=w||0;var q=this.offset().top+u;u=this.outerHeight()+w-u;var p=b(h[0]).offset().top,s=b(h).outerHeight()+p;h.each(function(){var a=b(this),h=a.offset().top,a=a.outerHeight()+h;h<p&&(p=h);a>s&&(s=a)});h=-this.scrollTop();p-=q+h;s-=q+h;q=-p;w=u-s;h>w&&h<q||s-p>u||(h>w?this.scrollTop(-w):h<q&&this.scrollTop(-q))}return this}})})(jQuery);I("lib/jquery.scrollvisible",function(){});I("loadcss!css/new_expression",function(){});
I("template!new_expression",["underscore"],function(b){return function(b){with(b||{});return"<div class=\"expressionitem new-expression opened\">\n  <div class='new-math-div do-not-blur action-newmath'>\n    <div class='new-expression-fade'></div>\n  </div>\n\n  <span\n     class=\"tab\"\n  >\n     <span class='num variable-index'>2</span>\n     <div class='tab-interior'></div>\n  </span>\n\n</div>\n"}});I("expressions/new_expression","require loadcss!css/new_expression pjs lib/underscore_view template!new_expression ./expression".split(" "),
function(b){b("loadcss!css/new_expression");var h=b("pjs"),u=b("lib/underscore_view"),w=b("template!new_expression"),q=b("./expression");return h(u,function(b,h){b.template=w;b.init=function(a){h.init.call(this);this.observe("index",this.updateIndex.bind(this));this.listView=a};b.didInsertElement=function(){this.updateIndex();this.$(".action-newmath").on("tap",this.newMath.bind(this))};b.updateIndex=function(){this.$(".variable-index").text(this.index)};b.newMath=function(){var a=q({selected:!0,latex:""},
this.listView.model);this.listView.model.insertItemAt(this.listView.model.getItemCount(),a);this.listView.getSelectedView().addFocus()}})});I("expressions/renderviewport",["require","jquery","main/timermodules","lib/browser"],function(b){var h=b("jquery"),u=b("main/timermodules"),w=b("lib/browser");u.add("expressions.renderviewport",function(b,p){function s(){k=h("#exppanel");if(!k.length)return k=null,[];c=k.offset().top;var a=[],l=k.scrollTop(),p=k.height();l==e&&p==f?(l=(new Date).getTime(),0===
g?g=l:300<l-g&&(l=b.expressionAtPoint(5,c),p=b.expressionAbovePoint(5,c+p),l&&p&&b.getItemsByIndexRange(l.index,p.index).forEach(function(b){b.renderShell&&a.push(b)}))):(e=l,f=p,g=0);return a}function a(a){var c;if(a.length)c=0,a.forEach(function(a){(function(a){setTimeout(function(){a.setProperty("renderShell",!1)},10*c)})(a,c++)});else if(!w.IS_MOBILE&&!p.redraw_slowly_timeout)for(a=b.model.getItemCount(),c=0;c<a;++c){var e=b.model.getItemByIndex(c);if(e.renderShell){e.setProperty("renderShell",
!1);break}}}var k=null,c=null,g=0,f=0,e=0;return function(){a(s())}})});I("expressions/list_view","require jquery underscore pjs config tipsy lib/underscore_view lib/touchtracking expressions/dragdrop_expressions expressions/dragdrop_columns ./add_expression main/toast undoredo main/resize lib/keys lib/browser lib/jquery.scrollvisible ./new_expression ./renderviewport ./expression".split(" "),function(b){var h=b("jquery"),u=b("underscore"),w=b("pjs"),q=b("config");b("tipsy");var p=b("lib/underscore_view"),
s=b("lib/touchtracking"),a=b("expressions/dragdrop_expressions"),k=b("expressions/dragdrop_columns"),c=b("./add_expression"),g=b("main/toast"),f=b("undoredo"),e=b("main/resize"),d=b("lib/keys"),l=b("lib/browser");b("lib/jquery.scrollvisible");var m=b("./new_expression");b("./renderviewport");var x=b("./expression");return w(p,function(b,n){b.__itemViews={};b.__latexChangeCallbacks=[];b.keypadView=null;b.isTransient=!1;b.transientChildren=[];b.isTablet=q.get("tablet");b.triggerClearGraph=function(){};
b.getTemplateParams=function(){return{IS_TABLET:this.isTablet}};b.getAllSliders=function(){var a=[],b;for(b in this.__itemViews)this.__itemViews[b].hasOwnProperty("sliderView")&&this.__itemViews[b].sliderView&&a.push(this.__itemViews[b].sliderView.slider);return a};b.toggleAllSliders=function(){for(var a=this.getAllSliders(),b=0;b<a.length;b++)if(a[b].isPlaying){this.stopAllSliders();return}this.playAllSliders()};b.playAllSliders=function(){var a=this.getAllSliders();f.oneTransaction(function(){for(var b=
0;b<a.length;b++)a[b].setProperty("isPlaying",!0)}.bind(this))};b.stopAllSliders=function(){var a=this.getAllSliders();f.oneTransaction(function(){for(var b=0;b<a.length;b++)a[b].setProperty("isPlaying",!1)}.bind(this))};b.onStartMovingPoint=function(a){if(a=(a=this.model.getItemById(a))&&a.formula&&a.formula.move_ids)for(var b=0;b<a.length;b++)void 0!==a[b]&&(this.getItemView(a[b]).sliderView.setProperty("isMoving",!0),this.getItemView(a[b]).sliderView.slider.setProperty("isPlaying",!1))};b.onStopMovingPoint=
function(a){if(a=(a=this.model.getItemById(a))&&a.formula&&a.formula.move_ids)for(var b=0;b<a.length;b++)void 0!==a[b]&&this.getItemView(a[b]).sliderView.setProperty("isMoving",!1)};b.onMovePoint=function(a,b){var c=this.model.getItemById(a);if(c=c.formula&&c.formula.move_ids){for(var d,e,f=0;f<b.length;f++)void 0!==c[f]&&(d=this.model.getItemById(c[f]))&&d.slider&&(e=d.slider.computeSnappedValue(b[f]),d.slider.setProperty("value",e));this.setSelected(null)}};b.onLatexChange=function(a){u.each(this.__latexChangeCallbacks,
function(b){b(a)})};b.init=function(b){n.init.call(this);this.model=b;this.model.triggerItemInserted=this.onItemInserted.bind(this);this.model.triggerItemRemoved=this.onItemRemoved.bind(this);this.model.triggerItemMoved=this.onItemMoved.bind(this);this.model.triggerSetState=this.onSetState.bind(this);this.setPropertyComparator("selectedItem",function(a,b){return a===b});this.observe("itemFocused",this.renderItemFocused.bind(this));this.observe("editListMode",this.renderEditListMode.bind(this));this.observe("selectedItem",
this.selectedItemChanged.bind(this));h(document).on("keypress","#exppanel",this.ensureActiveChildIsVisible.bind(this));this.dragdrop_expressions=a(this);this.dragdrop_columns=k(this)};b.computeTransient=function(){this.setProperty("transient",0<this.transientChildren.length)};b.padLastExpression=function(a){this.$(".expressionitem.new-expression").removeClass("animating").css("margin-bottom",+a+"px")};b.unpadLastExpression=function(){this.$(".expressionitem.new-expression").addClass("animating").css("margin-bottom",
"0")};b.padLastExpressionUntilTapEnd=function(a){var b=this;this.padLastExpression(a);h(document).on("tap.animating-bottom",function(){0===h(".exp-options-menu").length&&(b.unpadLastExpression(),h(document).off("tap.animating-bottom"))})};b.updateWidth=function(){function a(b){b=b.find(".main");b.length&&(b=b.outerWidth()+b.offset().left+5,b>c&&(c=b))}var b=this.$("#exppanel"),c=0,d=parseInt(b.css("min-width"),10);this.$(".disable-horizontal-scroll-to-cursor").scrollLeft(0);var e=this.getSelectedView();
e&&(this.itemFocused||e.model.isTable)&&a(e.$());this.editListMode&&this.$(".expressiontable").each(function(){a(h(this))});c<d&&(c=d);parseInt(b.css("max-width"),10)>c?(b.addClass("collapse-slowly"),setTimeout(function(){b.removeClass("collapse-slowly")},0.5)):b.removeClass("collapse-slowly");b.css("max-width",c)};b.onItemInserted=function(a,b){this.newExpressionView&&this.newExpressionView.setProperty("index",this.model.getItemCount()+1);if(this.$items){var c=this.createItemView(b);c&&(0===a?c.prependTo(this.$items):
a===this.model.getItemCount()-1?c.appendTo(this.$items):c.insertAfter(this.$items.children(":nth-child("+a+")")),this.editListMode&&(c.$().css({transform:"scale(0,0)",opacity:0}),setTimeout(function(){c.$().css({transition:".2s",opacity:1,transform:"scale(1,1)"})},1),setTimeout(function(){c.$().css({transition:"none"})},300)));b.observe("selected.listview",this.observeItemSelected.bind(this));b.selected&&this.observeItemSelected("selected",b);for(var d=this.model.getItemCount(),e=a;e<d;e++)this.model.getItemByIndex(e).setProperty("index",
e);this.updateWidth()}};b.onItemRemoved=function(a,b){var c=String(b.id);this.selectedItem===b&&this.setProperty("selectedItem",null);b.unobserve(".listview");this.newExpressionView&&this.newExpressionView.setProperty("index",this.model.getItemCount()+1);var d=this.__itemViews[c];if(d)for(d.remove(),delete this.__itemViews[c],c=this.model.getItemCount(),d=a;d<c;d++)this.model.getItemByIndex(d).setProperty("index",d);this.updateWidth()};b.onItemMoved=function(a,b){for(var c=Math.min(a,b),d=Math.max(a,
b);c<=d;c++)this.model.getItemByIndex(c).setProperty("index",c);if(d=this.getItemView(this.model.getItemByIndex(b).id))if(c=this.$items,0===b)c.prepend(d.$());else if(b===this.model.getItemCount()-1)c.append(d.$());else{var e=b+(b>a?1:0);d.$().insertAfter(c.children(":nth-child("+e+")"))}};b.onSetState=function(a){for(var b in this.__itemViews)this.__itemViews.hasOwnProperty(b)&&this.__itemViews[b].remove();this.__itemViews={};this.selectedItem=null;this.newExpressionView&&this.newExpressionView.setProperty("index",
this.model.getItemCount()+1);this.createAllItemViews()};b.renderItemFocused=function(){h("body").toggleClass("ITEM-FOCUSED",!!this.itemFocused)};b.instantiateItemView=function(a){};b.createItemView=function(a){var b=this.instantiateItemView(a);a=String(a.id);if(b){this.__itemViews[a]=b;var c=this;b.triggerDelete=function(){c.onDelete(b)};b.triggerEnterPressed=function(){c.onEnterPressed(b)};b.triggerUpPressed=function(){c.onUpPressed(b)};b.triggerDownPressed=function(){c.onDownPressed(b)};b.triggerBackspacePressed=
function(){c.onBackspacePressed(b)};b.triggerDelPressed=function(){c.onDelPressed(b)};b.observe("transient",function(a,b){b.transient?c.transientChildren.push(b):c.transientChildren=u(c.transientChildren).without(b);c.computeTransient()})}return b};b.createAllItemViews=function(){if(this.$items){for(var a=this.model.getItemCount(),b=0;b<a;b++){var c=this.model.getItemByIndex(b),d=this.createItemView(c);d&&(d.appendTo(this.$items),c.setProperty("index",b),c.observe("selected.listview",this.observeItemSelected.bind(this)),
c.selected&&this.observeItemSelected("selected",c))}(a=this.getSelectedView())&&a.addFocus();this.updateWidth()}};b.getItemView=function(a){return this.__itemViews[String(a)]};b.onDelete=function(a){var b=this;a.$().css({transition:"0.2s",opacity:"0",transform:"scale(.1, .1)"});setTimeout(function(){f.oneTransaction(function(){b.model.removeItemAt(a.model.index);if(0===b.model.getItemCount()){var c=x(void 0,b.model);b.model.insertItemAt(0,c)}})},200)};b.onUpPressed=function(a){0!==a.model.index&&
(this.selectPrevExpression(a.model),this.getSelectedView().addFocus("end"))};b.onDownPressed=function(a){this.selectNextExpression(a.model);this.getSelectedView().addFocus("start")};b.onBackspacePressed=function(a){var b=a.model.isText,c=this.getItemByIndex(a.model.index+1);!a.model.folder||c&&c.folder?(this.upwardDeleteExpression(a.model),b&&l.IS_IPAD&&l.IS_IN_IFRAME?this.setSelected(null):this.getSelectedView().addFocus("end")):a.model.folder.removeItem(a.model)};b.onDelPressed=function(a){this.downwardDeleteExpression(a.model);
this.getSelectedView().addFocus("start")};b.onEnterPressed=function(a){if(a.model.isText&&l.IS_IPAD&&l.IS_IN_IFRAME)h(document.activeElement).blur(),this.setSelected(null);else{var b=x({selected:!0},this.model),c=this;f.oneTransaction(function(){c.model.insertItemAt(a.model.index+1,b);a.model.isFolder&&!a.model.collapsed&&a.model.addItem(b);a.model.folder&&a.model.folder.addItem(b)});this.getSelectedView().addFocus()}};b.expressionsVisible=!0;b.hideExpressions=function(){this.setSelected(null);h("#show-expressions-tab").show();
this.setProperty("expressionsVisible",!1);h("#hide-expressions-tab").hide();h(document.activeElement).blur();h("body").addClass("fullscreen");h("body").addClass("shift-grapher");e.trigger()};b.showExpressions=function(){this.setProperty("expressionsVisible",!0);h(document.activeElement).blur();h("#show-expressions-tab").hide();h("body").removeClass("fullscreen");setTimeout(function(){h("body").removeClass("shift-grapher");e.trigger()},500)};b.renderEditListMode=function(){var a=this.$(".edit-list-btn"),
b=h("body"),c=this;this.editListMode?(a.addClass("btn-primary"),a.text("done"),a.removeClass("tooltip"),b.addClass("EDIT-LIST-MODE"),this.setSelected(null),this.stopAllSliders(),h(document).on("tapstart.edit-list-mode",function(a){0===h(a.target).closest("#exppanel").length&&0===h(a.target).closest(".options-menu").length&&0===h(a.target).closest("#expression-top-bar").length&&c.setProperty("editListMode",!1)})):(a.removeClass("btn-primary"),a.addClass("tooltip"),a.html('<i class="icon-settings" />'),
b.removeClass("EDIT-LIST-MODE"),h(document).off(".edit-list-mode"))};b.onFocusIn=function(a){this.expressionsVisible||this.showExpressions();var b=h(a.target);a=0!==b.closest(".mathquill-rendered-math").length;var c=0!==b.closest(".mathquill-editable").length,b=0!==b.closest(".expressiontext").length;a||c||b?(this.setProperty("editListMode",!1),this.setProperty("itemFocused",!0)):this.setProperty("itemFocused",!1);this.setProperty("needFakeKeypad",a||c);this.setProperty("editDisabled",a&&!c);clearTimeout(this.fakeKeypadTimeout)};
b.onFocusOut=function(){clearTimeout(this.fakeKeypadTimeout);this.fakeKeypadTimeout=setTimeout(function(){var a=this.getSelectedView();a&&a.isFocused()||(this.setProperty("itemFocused",!1),this.setProperty("needFakeKeypad",!1),this.setProperty("editDisabled",!1))}.bind(this),0)};b.offset=function(){return this.$().offset()};b.setBottom=function(a){var b=this.$().height()-this.$().offset().top;this.$().css("bottom",a+"px");a<b&&s.isTapActive()&&this.padLastExpressionUntilTapEnd(b-a)};b.didInsertElement=
function(){var a=this;n.didInsertElement.call(this);this.addExpressionView=c(this);this.addExpressionView.appendTo(this.$());this.addExpressionView.setupOpenButton(this.$(".action-add-expression"),"tap");this.$items=this.$(".template-expressioneach");e.trigger();this.$("#exppanel").scroll(function(a){h("#expression-top-bar").toggleClass("expressions-scrolled",0<h(a.target).scrollTop())});this.$("#exppanel").on("tapstart",function(a){"mouse"!==a.device&&0===h(a.target).closest(".expressionitem").length&&
h(document.activeElement).blur()});h("#expression-top-bar").on("tapstart",function(b){b.wasHandled()||a.setSelected(null)});this.$().on("tap",".action-clearall",function(){a.triggerClearGraph();g.show("Graph cleared.",function(){a.setProperty("editListMode",!0)})});this.$().on("tap",".action-undo",function(){f.undo()});this.$().on("tap",".action-redo",function(){f.redo()});this.$().on("focusout",this.onFocusOut.bind(this));this.$().on("focusin",this.onFocusIn.bind(this));this.$(".action-toggleeditlistmode").on("tap",
function(){a.setProperty("editListMode",!a.editListMode)});this.$(".action-hideexpressions").on("tap",this.hideExpressions.bind(this));this.$(".action-showexpressions").on("tap",this.showExpressions.bind(this));h(document.documentElement).on("keydown",this.handleKeyDown.bind(this));this.$().on("tapstart",".action-hamburger",function(){h("body").toggleClass("resources-open");e.waitForCSSAnimation("#sliding-interior",/transform/)});this.renderItemFocused();this.renderEditListMode();this.newExpressionView=
m(this);this.newExpressionView.replace(this.$(".template-newexpression"));this.newExpressionView.setProperty("index",this.model.getItemCount()+1);this.$().on("render",function(b){a.updateWidth()});this.observe("editListMode itemFocused selectedItem",function(){a.updateWidth()});this.$().on("focusin",function(){setTimeout(function(){a.updateWidth()},0)});this.createAllItemViews()};b.selectedItemChanged=function(){this.ensureActiveChildIsVisible()};b.getFirstVisibleItem=function(){var a=this.$("#exppanel").offset().top,
b=this.expressionAtPoint(0,a);if(!b)return this.getItemByIndex(0);this.getItemView(b.id).$().offset().top<a-2&&(b=this.getItemByIndex(b.index+1));return b};b.appendBlankExpression=function(){this.newExpressionView.newMath()};b.ensureActiveChildIsVisible=function(){if(this.selectedItem){var a=this.getItemView(this.selectedItem.id);a&&this.$("#exppanel").scrollVisible(a.$(),0,-75)}else a=h(document.activeElement).closest(".expressionitem"),a.length&&this.$("#exppanel").scrollVisible(a,0,-20)};b.handleKeyDown=
function(a){if(!h.contains(document.body,document.activeElement)&&!h(a.target).closest("#exppanel").length&&h.contains(document.documentElement,a.target)){var b=this.getSelectedView();if(b&&b.isFocused())b.processMissedKeyEvent(a);else if(b){var c=d.lookup(a);switch(c){case d.UP:a.preventDefault();this.selectPrevExpression(b.model);break;case d.DOWN:a.preventDefault();this.selectNextExpression(b.model,!0);break;case d.ESCAPE:a.preventDefault();this.setSelected(null);break;case d.RIGHT:case d.TAB:a.preventDefault();
b&&(b.model.isTable?b.addFocus("cell",0,0):b.addFocus("start"));break;case d.LEFT:a.preventDefault();b&&(b.model.isTable?b.addFocus("cell",0,b.model.columns.length-1):b.addFocus("end"));break;case d.BACKSPACE:a.preventDefault();b&&this.upwardDeleteExpression(b.model);break;case d.DELETE:a.preventDefault();b&&this.downwardDeleteExpression(b.model);break;case d.ENTER:a.preventDefault();if(b)this.onEnterPressed(b);break;default:if(a.metaKey||a.ctrlKey||c===d.SHIFT||c===d.SPACEBAR)break;b&&!b.model.isTable&&
b.addFocus("end")}}}};b.observeItemSelected=function(a,b){var c=b.selected;c||this.selectedItem!==b?c&&!this.selectedItem?this.setProperty("selectedItem",b):c&&this.selectedItem!==b&&(this.selectedItem.setProperty("selected",!1),this.setProperty("selectedItem",b)):this.setProperty("selectedItem",null)};b.isSelected=function(a){if((a=this.getSelected())&&a.isTable){var b=a.selectedCell;a=b?a.columns[b.column]:null}return a&&a.id.toString()};b.getSelected=function(){return this.selectedItem};b.getSelectedView=
function(){var a=this.getSelected();return a?this.getItemView(a.id):null};b.setSelected=function(a){var b=a;"number"===typeof a&&(b=this.model.getItemByIndex(a));b?b.setProperty("selected",!0):(a=this.getSelected())&&a.setProperty("selected",!1)};b.upwardDeleteExpression=function(a){var b=a.index,c=this.model.getItemByIndex(this.findPrevSelectableIndex(b)),d=this;f.oneTransaction(function(){d.model.removeItemAt(b);0===d.model.getItemCount()&&(c=x(void 0,d.model),d.model.insertItemAt(0,c));c||(c=d.model.getItemByIndex(d.findNextSelectableIndex(b-
1)));c&&c.setProperty("selected",!0)})};b.findPrevSelectableIndex=function(a){var b;do a--,b=this.model.getItemByIndex(a);while(b&&b.inCollapsedFolder);return b?a:void 0};b.findNextSelectableIndex=function(a){var b;do a++,b=this.model.getItemByIndex(a);while(b&&b.inCollapsedFolder);return b?a:void 0};b.downwardDeleteExpression=function(a){a=a.index;var b=this.model.getItemByIndex(this.findNextSelectableIndex(a)),c=this;if(b)this.setSelected(b),this.model.removeItemAt(a);else if(1<this.model.getItemCount())this.setSelected(a-
1),this.model.removeItemAt(a);else f.oneTransaction(function(){c.model.removeItemAt(0);c.model.insertItemAt(0,x(void 0,c.model));c.setSelected(0)})};b.selectPrevExpression=function(a){if(a){var b=a.index,c=this.model.getItemByIndex(this.findPrevSelectableIndex(b));c&&(c.setProperty("selected",!0),b===this.model.getItemCount()-1&&a.isEmpty()&&this.model.removeItemAt(b))}};b.selectNextExpression=function(a,b){if(a){var c=this.model.getItemByIndex(this.findNextSelectableIndex(a.index));c?c.setProperty("selected",
!0):b||(c=x({selected:!0},this.model),this.model.insertItemAt(this.model.getItemCount(),c))}};b.getItemsByIndexRange=function(a,b){a=Math.max(0,a);b=Math.min(this.model.getItemCount()-1,b);for(var c=[],d=a;d<=b;d++)c.push(this.model.getItemByIndex(d));return c};b.getItemByIndex=function(a){a=this.getItemsByIndexRange(a,a);return a.length?a[0]:null};b.getItemById=function(a){return this.model.getItemById(a)};b.getChildItemById=function(a){if(null===a)return null;for(var b=this.model.getItemCount(),
c=0;c<b;c++){var d=this.model.getItemByIndex(c);if(d.isTable)for(var d=d.columns,e=0;e<d.length;e++)if(String(d[e].id)===String(a))return d[e]}return null};b.expressionAtPoint=function(a,b){for(var c=0,d=this.model.getItemCount()-1;c<=d;){var e=c+Math.floor((d-c)/2),f=this.model.getItemByIndex(e),g=this.getItemView(f.id),g=g&&g.getBounds();if(!g||g.top>b)d=e-1;else if(g.bottom<b)c=e+1;else return f}return null};b.expressionAbovePoint=function(a,b,c,d){a=0;for(var e=this.model.getItemCount()-1,f=null;a<=
e;){var g=a+Math.floor((e-a)/2);if(d&&g===d)if(g<e)g++;else if(g>a)g--;else return c?h():null;var k=this.model.getItemByIndex(g),l=this.getItemView(k.id),l=l&&l.getBounds();!l||l.top>b?e=g-1:(a=g+1,f=k)}return f?c?this.getItemView(f.id).$():f:c?h():null};b.getActiveMathquill=function(){return h(document.activeElement).closest(".mathquill-editable")};b.onProjectorModeChange=function(){for(var a in this.__itemViews)if(this.__itemViews.hasOwnProperty(a))this.__itemViews[a].onProjectorModeChange()};b.onChange=
function(a){for(var b in a)if(a.hasOwnProperty(b)){var c=this.getItemById(b);if(c)if(c.constructor===x){var d=a[b];if(d){var e=this.getItemView(c.id);!1===c.loading&&e&&void 0===e.doAnimate&&e.setProperty("doAnimate",!0);c.setProperty("loading",!1);c.setProperty("formula",d)}}else if(c.isTable){var d=a[b],e=this.getItemView(b),f=!1,g;try{g=e.syncRowHeight,e.syncRowHeight=function(){f=!0},c.setComputedValues(d)}finally{e.syncRowHeight=g}f&&e.syncAllRowHeights()}}}})});I("expressions/abstract_icon",
["require","jquery","lib/underscore_view","pjs","lib/keys"],function(b){var h=b("jquery"),u=b("lib/underscore_view"),w=b("pjs"),q=b("lib/keys"),p=0;return w(u,function(b,a){b.init=function(b){this.parentView=b;this.model=b.model;a.init.call(this);this.optionsmenu_guid=++p;this.model.observe("error.iconview",this.renderErrorTooltip.bind(this));this.observe("error",this.renderErrorTooltip.bind(this));this.observe("error errorStable",this.computeErrorShown.bind(this));this.observe("errorShown",this.renderErrorShown.bind(this))};
b.destruct=function(){this.model.unobserve(".iconview")};b.computeErrorShown=function(){this.setProperty("errorShown",this.error&&this.errorStable)};b.renderErrorTooltip=function(){var a=this.error?this.model.error:"";this.$().closest(".variable-errortooltip").attr("tooltip",a)};b.renderErrorShown=function(){this.$().toggleClass("error",!!this.errorShown)};b.didInsertElement=function(){this.renderErrorShown();this.renderErrorTooltip()};b.createOptionsMenuView=function(){};b.toggleOptions=function(){if(this.error)this.hideOptions();
else if(this.optionsShown)this.hideOptions();else{this.optionsShown=!0;this.optionsMenu=this.createOptionsMenuView();window.opened_options_menu=this;var a=this.optionsmenu_guid;setTimeout(function(){if(this.optionsShown)h("#exppanel").on("scroll.options-menu-"+a,function(a){this.hideOptions()}.bind(this))}.bind(this),0);h(document).on("keydown.options-menu-"+a,function(a){q.lookup(a)===q.ESCAPE&&this.hideOptions()}.bind(this));h(document).on("tapstart.options-menu-"+a,function(a){h(a.target).closest(".options-menu").length||
h(a.target).closest(this.$()).length||this.hideOptions()}.bind(this))}};b.hideOptions=function(){var a=this.optionsmenu_guid;h(document).off("tapstart.options-menu-"+a);h(document).off("keydown.options-menu-"+a);h("#exppanel").off("scroll.options-menu-"+a);this.optionsShown=!1;this.optionsMenu&&(this.optionsMenu.remove(),this.optionsMenu=null);window.opened_options_menu===this&&(window.opened_options_menu=null)};b.onDisplayChange=function(){var a=this.model.error?!0:!1;this.model.isEmpty()&&(a=!1);
a!==this.error?(this.setProperty("errorStable",!1),this.__errorTime=(new Date).getTime(),setTimeout(this.onDisplayChange.bind(this),100)):this.__errorTime+500<(new Date).getTime()?this.setProperty("errorStable",!0):this.errorStable||setTimeout(this.onDisplayChange.bind(this),100);this.setProperty("error",a)}})});I("template!expression_options_menu",["underscore"],function(b){return function(h){var u="";with(h||{})u+="<div class='exp-options-menu options-menu ",0===styles.length&&(u+="colors-only"),
u+="'>\n  <div class='triangle'></div>\n  ",0<styles.length&&(u+="\n    <div class='styles-div'>\n      <div class='styles-menu'>\n        <div class='title'>style:</div>\n        <div class='styles-menu'>\n        ",b.each(styles,function(b){u+='\n          <span class="style-option graph-icon graph-'+b+'"\n            draw-style="'+b+'"\n            style=""\n            handleevent="true">\n          </span>\n        '}),u+="\n        </div>\n      </div>\n    </div>\n  "),u+="\n  <div class='colors-div'>\n    <div class='title'>color:</div>\n    <div class=\"template-colorsview\"></div>\n  </div>\n</div>";
return u}});I("loadcss!css/color_menu",function(){});I("template!color_menu",["underscore"],function(b){return function(h){var u="";with(h||{})u+='<div class="color-menu do-not-blur">\n  ',b.each(colors,function(b){u+='\n    <span class="color-option"\n          color="'+b+'"\n          style="background: '+b+'"\n          handleevent="true">\n          <i class=\'icon-check\'></i>\n    </span>\n  '}),u+="\n</div>";return u}});I("expressions/color_menu_view","require loadcss!css/color_menu jquery pjs lib/underscore_view ./colors template!color_menu".split(" "),
function(b){b("loadcss!css/color_menu");var h=b("jquery"),u=b("pjs"),w=b("lib/underscore_view"),q=b("./colors"),p=b("template!color_menu");return u(w,function(b,a){b.template=p;b.init=function(b){a.init.call(this);this.expression=b;this.expression.observe("color.colorview",this.renderSelectedColor.bind(this));this.expression.observe("userRequestedGraphing.colorview",this.renderSelectedColor.bind(this))};b.destruct=function(){this.expression.unobserve(".colorview")};b.renderSelectedColor=function(){var a=
this.expression.color;this.$(".color-option").removeClass("selected");this.$('.color-option[color="'+a+'"]').addClass("selected")};b.didInsertElement=function(){this.$().on("tap tapstart",".color-option",this.onSelectColor.bind(this));this.renderSelectedColor()};b.getTemplateParams=function(){return{colors:q.all}};b.onSelectColor=function(a){if("tap"!==a.type||"mouse"!==a.device)if("tapstart"!==a.type||"touch"!==a.device)a=h(a.target).closest(".color-option").attr("color"),this.expression.setProperty("color",
a)}})});I("expressions/expression_options_view","require pjs jquery underscore lib/underscore_view template!expression_options_menu ./colors ./color_menu_view".split(" "),function(b){var h=b("pjs"),u=b("jquery"),w=b("underscore"),q=b("lib/underscore_view"),p=b("template!expression_options_menu"),s=b("./colors"),a=b("./color_menu_view");return h(q,function(b,c){b.template=p;b.init=function(a){this.expression=a;this.expression.observe("color.colorview",this.renderSelectedColor.bind(this));this.expression.observe("userRequestedGraphing",
this.renderSelectedStyle.bind(this))};b.destruct=function(){this.colorsView&&(this.colorsView.remove(),this.colorsView=null)};b.getTemplateParams=function(){var a={colors:s.all,styles:[]};this.expression.formula.is_point_list&&!this.expression.formula.move_ids?a.styles=["point","open"]:this.expression.table||this.expression.formula.move_ids||this.expression.formula.is_inequality||(a.styles=["normal","dashed"]);return a};b.renderSelectedColor=function(){var a=this.expression.color;w.each(this.$(".style-option"),
function(b){u(b).css("background",a)})};b.onSelectStyle=function(a){if("tap"!==a.type||"mouse"!==a.device)if("tapstart"!==a.type||"touch"!==a.device)a=u(a.target).closest(".style-option").attr("draw-style"),a===this.expression.style&&"never"!==this.expression.userRequestedGraphing?(this.$(".style-option").removeClass("selected"),this.expression.setProperty("userRequestedGraphing","never")):(this.expression.setProperty("userRequestedGraphing","default"),this.$(".style-option").removeClass("selected"),
u('.style-option[draw-style="'+a+'"]').addClass("selected"),this.expression.setProperty("style",a))};b.renderSelectedStyle=function(){var a=this.expression.style;this.$(".style-option").removeClass("selected");"never"!==this.expression.userRequestedGraphing&&this.$('.style-option[draw-style="'+a+'"]').addClass("selected")};b.didInsertElement=function(){this.colorsView=a(this.expression);this.colorsView.replace(this.$(".template-colorsview"));this.$().on("tap tapstart",".style-option",this.onSelectStyle.bind(this));
this.renderSelectedColor();this.renderSelectedStyle()}})});I("template!expression_icon",["underscore"],function(b){return function(b){with(b||{});return"<span class=\"icon graph-icon variable-colorcss variable-errortooltip tipsy-sticky\">\n\t<i class='icon-play'></i>\n\t<i class='icon-pause'></i>\n\t<i class='icon-hidden'></i>\n</span>\n"}});I("expressions/expression_icon_view","require pjs expressions/abstract_icon ./expression_options_view math/comparators template!expression_icon".split(" "),function(b){var h=
b("pjs"),u=b("expressions/abstract_icon"),w=b("./expression_options_view"),q=b("math/comparators"),p=b("template!expression_icon");return h(u,function(b,a){b.template=p;b.init=function(b){a.init.call(this,b);this.expression=this.model;this.expression.observe("slider.iconview",function(){this.expression.slider.observe("isPlaying.iconview",this.onDisplayChange.bind(this))}.bind(this));this.expression.observe("formula.iconview",this.onDisplayChange.bind(this));this.expression.observe("shouldGraph.iconview",
this.onDisplayChange.bind(this));this.expression.observe("isGraphable.iconview",this.renderUngraphable.bind(this));this.expression.observe("loading.iconview",this.renderLoading.bind(this));this.expression.observe("color.iconview",this.renderColorCSS.bind(this));this.expression.observe("style.iconview",this.onDisplayChange.bind(this))};b.destruct=function(){a.destruct.call(this);this.expression.unobserve(".iconview");this.expression.slider&&this.expression.slider.unobserve(".iconview")};b.renderUngraphable=
function(){this.$().toggleClass("ungraphable",!this.expression.isGraphable)};b.renderLoading=function(){this.$().toggleClass("loading",!!this.expression.loading)};b.renderColorCSS=function(){this.$(".variable-colorcss").css({"border-color":this.expression.color,background:this.expression.color})};b.didInsertElement=function(){var b=this;a.didInsertElement.call(this);this.renderLoading();this.renderUngraphable();this.renderColorCSS();this.onDisplayChange();this.$icon=this.$(".icon");var c=function(a,
c){if(!a.wasHandled("dragdrop")&&!a.wasLongheld()&&a.device===c){if(b.optionsShown)return b.toggleOptions(),!1;b.parentView.listView.editListMode?b.expression.isGraphable&&b.toggleOptions():b.expression.formula.is_animatable?b.toggleSliderIsPlaying():b.toggleGraphShown()}},g=function(a,c){a.device===c&&b.model.isGraphable&&(a.handle("longhold"),b.toggleOptions())};this.$().closest(".action-icon-mouse").on("tap",function(a){c(a,"mouse")});this.$().closest(".action-icon-touch").on("tap",function(a){c(a,
"touch")});this.$().closest(".action-icon-mouse").on("longhold",function(a){g(a,"mouse")});this.$().closest(".action-icon-touch").on("longhold",function(a){g(a,"touch")})};b.isGraphShown=function(){return"never"!==this.expression.userRequestedGraphing};b.toggleSliderIsPlaying=function(){var a=this.expression.slider;a&&a.setProperty("isPlaying",!a.isPlaying)};b.toggleGraphShown=function(){this.model.isGraphable&&!this.errorShown&&(this.model.folder&&this.model.folder.hidden?(this.model.folder.setProperty("hidden",
!1),this.expression.setProperty("userRequestedGraphing","always")):this.isGraphShown()?this.expression.setProperty("userRequestedGraphing","never"):this.expression.setProperty("userRequestedGraphing","always"))};b.createOptionsMenuView=function(){var a=w(this.expression);a.appendTo(this.$().closest(".expressionitem"));return a};b.onDisplayChange=function(){a.onDisplayChange.call(this);if(this.$icon){var b=this.expression.formula,c="";if(b.is_animatable)c=this.expression.slider.isPlaying?"animate-pause":
"animate-play";else if(this.error||!b.is_graphable)c="";else{var g=this.expression.style,f=b.operator,e=0!==q.table[f].direction,f=!1===q.table[f].inclusive;this.expression.shouldGraph?b.move_ids?c="graph-movable-point":b.is_point_list?c="open"===g?"graph-open":"cross"===g?"graph-cross":"graph-point":b.is_shade_between?c="graph-shaded-inequality":f||e?!f&&e?c="graph-shaded-inequality":f&&!e?c="graph-inequality":f&&e&&(c="graph-shaded-inequality"):"normal"===g?c="graph-normal":"dashed"===g&&(c="graph-dashed"):
c="graph-hidden"}this.rendered_icon_class!==c&&(this.rendered_icon_class&&this.$icon.removeClass(this.rendered_icon_class),(this.rendered_icon_class=c)&&this.$icon.addClass(c))}}})});I("template!evaluation_view",["underscore"],function(b){return function(b){with(b||{});return'<div class="evaluation do-blur" handleEvent="true">\n  <table>\n    <tr>\n      <th class="action-selectevaluation">\n        <span class="template-dependentlabelhtml"></span>\n        <span class="equals">=</span>\n      </th>\n      <td class="text-selectable template-evaluationshtml"></td>\n    </tr>\n  </table>\n</div>'}});
I("expressions/evaluation",["require","pjs","lib/underscore_view","template!evaluation_view","i18n"],function(b){var h=b("pjs"),u=b("lib/underscore_view"),w=b("template!evaluation_view"),q=b("i18n");return h(u,function(b,h){b.template=w;b.init=function(a){h.init.call(this);this.evaluations=[];this.observe("dependentLabel",this.renderDependent.bind(this));this.observe("evaluations",this.renderEvaluations.bind(this))};b.renderDependent=function(){this.$(".template-dependentlabelhtml").html(this.dependentLabel)};
b.renderEvaluations=function(){for(var a=this.evaluations,b=[],c=0;c<a.length;c++){var g=a[c];!1===g.val?g.val="false":isNaN(g.val)?g.val="undefined":!0===g.val?g.val="true":1E-15>Math.abs(g.val)?g.val=0:g.val=1===a.length?Number(g.val.toPrecision(8)):Number(g.val.toPrecision(6));b.push(g.val)}if(0===b.length)return"";a=b.join('<span class="or">'+q.t("or")+"</span>");this.$(".template-evaluationshtml").html(a)};b.didInsertElement=function(){this.renderDependent();this.renderEvaluations();this.$(".action-selectevaluation").on("tap",
this.onSelectEvaluation.bind(this))};b.onSelectEvaluation=function(){var a=this.$("td")[0],b=document.createRange();b.selectNodeContents(a);window.getSelection().removeAllRanges();window.getSelection().addRange(b)}})});I("template!domain_view",["underscore"],function(b){return function(b){with(b||{});return'<div class="domain do-blur" handleEvent="true">\n  \n  <div class="edit-domain variable-invalid desmos-input-container">\n    <table>\n      <tr>\n        <td>\n          <span class="before-input"></span>\n          <input type="number" limit="min" />\n          <span class="after-input"></span>\n        </td>\n        <td class="text">≤</td>\n        <td class="text">t</td>\n        <td class="text">≤</td>\n        <td>\n          <span class="before-input"></span>\n          <input type="number" limit="max" />\n          <span class="after-input"></span>\n        </td>\n      </tr>\n    </table>\n  </div>\n  \n  <div class="display-domain">\n    <span class="variable-min"></span> ≤ t ≤ <span class="variable-max"></span>    \n  </div>\n\n</div>'}});
I("expressions/domain_view","require jquery lib/underscore_view pjs template!domain_view lib/keys".split(" "),function(b){var h=b("jquery"),u=b("lib/underscore_view"),w=b("pjs"),q=b("template!domain_view"),p=b("lib/keys");return w(u,function(b,a){b.template=q;b.init=function(b){a.init.call(this);this.domain=b;this.domain.observe("min.domainview",this.renderMin.bind(this));this.domain.observe("max.domainview",this.renderMax.bind(this));this.setProperty("editing",!1);this.setProperty("invalid",!this.domain.isValid());
this.observe("invalid",this.renderInvalid.bind(this));this.observe("editing",this.renderEditing.bind(this));this.storeLastValidDomain()};b.checkInvalid=function(){var a=parseFloat(this.$("input[limit=min]").attr("value")),b=parseFloat(this.$("input[limit=max]").attr("value")),a=!isFinite(a)||!isFinite(b)||a>=b;this.setProperty("invalid",a)};b.destruct=function(){this.domain.unobserve(".domainview")};b.storeLastValidDomain=function(){this.domain.isValid()&&(this.lastValidDomain=this.domain.serialize())};
b.renderInvalid=function(){this.$(".edit-domain").toggleClass("invalid",!!this.invalid)};b.renderEditing=function(){var a=this.getProperty("editing");this.$().toggleClass("editing-domain",!!a)};b.renderMin=function(){var a=this.domain.min;this.$("input[limit=min]").val(a);this.$(".variable-min").text(a)};b.renderMax=function(){var a=this.domain.max;this.$("input[limit=max]").val(a);this.$(".variable-max").text(a)};b.didInsertElement=function(){this.$("input").on("focusin",this.focusIn.bind(this)).on("focusout",
this.focusOut.bind(this)).on("keydown keyup keypress",this.handleUserInput.bind(this));this.$(".display-domain").on("tap",this.onEditLimit.bind(this));this.renderEditing();this.renderMin();this.renderMax()};b.onEditLimit=function(a){a.preventDefault();a=h(a.toElement);this.setProperty("editing",!0);a.hasClass("variable-max")?this.$('input[limit="max"]').focus().select():this.$('input[limit="min"]').focus().select()};b.stopEditing=function(){!this.domain.isValid()&&this.lastValidDomain&&(this.domain.setProperty("min",
this.lastValidDomain.min),this.domain.setProperty("max",this.lastValidDomain.max));this.setProperty("editing",!1)};b.handleUserInput=function(a){p.lookup(a)===p.ENTER?h(document.activeElement).blur():(this.checkInvalid(),this.invalid||this.save(a.target))};b.focusIn=function(a){clearTimeout(this.saveAfterBlurTimeout);this.checkInvalid()};b.focusOut=function(a){var b=this;this.save(a.target);this.saveAfterBlurTimeout=setTimeout(function(){clearTimeout(b.saveAfterBlurTimeout);b.stopEditing()},1);this.checkInvalid()};
b.save=function(a){if(a){a=h(a);var b=parseFloat(a.attr("value"));"min"===a.attr("limit")?b<this.domain.max?this.domain.setProperty("min",b):a.attr("value",this.domain.min):"max"===a.attr("limit")&&(b>this.domain.min?this.domain.setProperty("max",b):a.attr("value",this.domain.max));this.storeLastValidDomain()}}})});I("loadcss!css/slider",function(){});I("main/focus",["require"],function(b){return{takeFocus:function(){}}});I("template!slider_view",["underscore"],function(b){return function(b){with(b||
{})b='<span class="slider-container" tapboundary="true">\n\n  <div class="do-blur slider" handleEvent="true">\n    <div class="minLabel template-minlabelhtml">\n    </div>\n    <div class="maxLabel">\n      <span class="template-maxlabelhtml"></span>\n    </div>\n    <div class="track action-moveslider">\n      <div class="ticks template-tickmarkhtml"></div>\n      <div class="graphic"></div>\n    </div>\n    <div class="zeroMarker action-moveslider">\n      <div class="graphic"></div>\n    </div>\n    <div class="thumb action-startdragging" disablescroll="true">\n      <div class="graphic"></div>\n      <div class="center"></div>\n    </div>\n  </div>\n  \n  <div class="slider-speed-container do-not-blur" handleEvent="true">\n    <span class="action-slower" >&laquo;</span>\n    <span class="variable-speed"></span>\n    <span class="action-faster">&raquo;</span>\n  </div>\n\n  <div class="slider_menu do-blur desmos-input-container" handleEvent="true">\n    <table>\n      <tr>\n        <td>\n          <span class="before-input"></span>\n            <input class="slider_min" limit="min" type="number">\n          <span class="after-input"></span>\n    '+
('\n        </td>\n        <td class="text">\n          ≤\n        </td>\n        <td class="template-dependentlabelhtml text"></td>\n        <td class="text">≤</td>\n        <td>\n          <span class="before-input"></span>\n            <input class="slider_max" limit="max" type="number">\n          <span class="after-input"></span>\n        \n        </td>\n        <td class="step text">'+t("step:")+'</td>\n        <td> \n          <span class="before-input"></span>\n            <input class="slider_interval" limit="step" type="number">\n          <span class="after-input"></span>\n        </td>\n      </tr>\n    </table>\n  </div>\n  \n</span>');
return b}});I("expressions/slider_view","require loadcss!css/slider jquery pjs lib/rounding lib/underscore_view main/focus template!slider_view config underscore lib/keys".split(" "),function(b){b("loadcss!css/slider");var h=b("jquery"),u=b("pjs"),w=b("lib/rounding"),q=b("lib/underscore_view"),p=b("main/focus"),s=b("template!slider_view"),a=b("config"),k=b("underscore"),c=b("lib/keys"),g=function(a){var b=a,c=String(a).split("-").join("");return 4<c.length||-1!=c.indexOf("e")?(c=Math.floor(Math.log(Math.abs(a))/
Math.LN10),a/=Math.pow(10,c),a=Math.round(a),10<=Math.abs(a)&&(c++,a=0>a?-1:1),-3<=c&&3>=c?(c=String(b),0===c.indexOf("0.")?c=c.substr(1):0===c.indexOf("-0.")&&(c="-"+c.substr(2)),c.substr(0,5)):a+"×10<span class='sup'>"+c+"</span> "):String(a)};return u(q,function(b,e){b.template=s;b.animationSpeeds=[0.05,0.1,0.15,0.2,0.35,0.5,0.75,1,1.5,2,3.5,5,7.5,10,15,20];b.init=function(a,b){e.init.call(this);this.slider=a;this.parentView=b;this.value=this.slider.value;this.slider.observe("value",function(){this.setProperty("value",
this.slider.value)}.bind(this));this.editing=!1;this.slider.observe("min.sliderview max.sliderview",this.renderThumbPosition.bind(this));this.observe("value",this.renderThumbPosition.bind(this));this.slider.observe("min.sliderview max.sliderview",this.renderZeroMarker.bind(this));this.slider.observe("min.sliderview max.sliderview step.sliderview",this.renderTickMarks.bind(this));this.slider.observe("min.sliderview",this.renderMin.bind(this));this.slider.observe("max.sliderview",this.renderMax.bind(this));
this.slider.observe("step.sliderview",this.renderStep.bind(this));this.observe("dependentLabel",this.renderDependent.bind(this));this.observe("editing",this.renderEditing.bind(this));this.observe("editing",function(){this.slider.setProperty("isPlaying",!1)}.bind(this));this.observe("invalid",this.renderInvalid.bind(this));this.observe("dragging",this.renderDragging.bind(this));this.slider.observe("isPlaying.sliderview",this.renderIsPlaying.bind(this));this.slider.observe("isPlaying.sliderview",this.setTransient.bind(this));
this.observe("dragging isMoving",this.setTransient.bind(this));this.slider.observe("animationSpeed",this.renderAnimationSpeed.bind(this))};b.renderAnimationSpeed=function(){var a=this.slider.animationSpeed,b=a+"x";this.$(".variable-speed").text(b);this.$(".action-slower").toggleClass("disabled",k.min(this.animationSpeeds)>=a);this.$(".action-faster").toggleClass("disabled",k.max(this.animationSpeeds)<=a)};b.setTransient=function(){this.slider.setProperty("transient",this.dragging||this.slider.isPlaying||
this.isMoving)};b.destruct=function(){this.slider.unobserve(".sliderview")};b.renderDependent=function(){this.$(".template-dependentlabelhtml").html(this.dependentLabel)};b.renderDragging=function(){this.$(".thumb").toggleClass("down",!!this.dragging)};b.renderStep=function(){this.$("input[limit=step]").val(this.slider.step)};b.renderMin=function(){this.$(".template-minlabelhtml").html(g(this.slider.min));this.$("input[limit=min]").val(this.slider.min)};b.renderMax=function(){this.$(".template-maxlabelhtml").html(g(this.slider.max));
this.$("input[limit=max]").val(this.slider.max)};b.renderEditing=function(){this.$().toggleClass("editing-limits",this.editing)};b.renderInvalid=function(){this.$(".slider_menu").toggleClass("invalid",!!this.invalid)};b.renderThumbPosition=function(){var a;a=this.slider.min;var b=this.slider.max,c=this.value;a=c<=a?0:c>=b?100:100*((c-a)/(b-a));this.$(".thumb").css("left",a+"%")};b.renderZeroMarker=function(){var a=(0-this.slider.min)/(this.slider.max-this.slider.min),b={};0<=a&&1>=a?(b.display="block",
b.left=100*a+"%"):b.display="none";this.$(".zeroMarker").css(b)};b.renderTickMarks=function(){var a=100*this.slider.step/(this.slider.max-this.slider.min);3>a&&(a=0);var b="";if(0<a&&100>a)for(var c=a;100>c;c+=a)b+='<div class="tick" style="left:'+c+'%"></div>';this.$(".template-tickmarkhtml").html(b)};b.getDimensions=function(){var a=this.$(".track"),b=a.offset().left,a=b+a.width();return{trackLeft:b,trackRight:a}};b.animateSlower=function(){var a=this.slider.animationSpeed,b=k.filter(this.animationSpeeds,
function(b){return b<a});0!==b.length&&this.slider.setProperty("animationSpeed",k.max(b))};b.animateFaster=function(){var a=this.slider.animationSpeed,b=k.filter(this.animationSpeeds,function(b){return b>a});0!==b.length&&this.slider.setProperty("animationSpeed",k.min(b))};b.didInsertElement=function(){this.$(".action-startdragging").on("tapstart",this.onStartDragging.bind(this));this.$(".action-moveslider").on("tap",function(a){a=a.changedTouches[0];this.slider.setProperty("isPlaying",!1);this.setValueByTouch(a);
this.commitSliderValue()}.bind(this));this.$().on("focusout",this.focusOut.bind(this));this.$().on("focusin",this.focusIn.bind(this));this.$().on("keydown",this.keyDown.bind(this));this.$("input[limit]").on("keypress keydown keyup",this.checkInvalid.bind(this));this.$(".action-play").on("tap",function(){this.slider.setProperty("isPlaying",!0)}.bind(this));this.$(".action-faster").on("tap",this.animateFaster.bind(this));this.$(".action-slower").on("tap",this.animateSlower.bind(this));this.$().on("tap",
".minLabel",this.onEditMin.bind(this));this.$().on("tap",".maxLabel",this.onEditMax.bind(this));this.renderTickMarks();this.renderThumbPosition();this.renderZeroMarker();this.renderDependent();this.renderMin();this.renderMax();this.renderStep();this.renderAnimationSpeed();this.checkInvalid()};b.setValueByTouch=function(a){var b=this.slider.min,c=this.slider.max,e=this.getDimensions(),f=e.trackLeft,g=e.trackRight-f,e=(c-b)/g;a=Math.min(1,Math.max(0,(a.pageX-f)/g));a=b*(1-a)+c*a;a<=b?a=b:a>=c?a=c:(a=
w.bestRound(a,e),a=this.slider.computeSnappedValue(a),a<b?a=b:a>c&&(a=c));this.setProperty("value",a)};b.onStartDragging=function(b){if(1===b.touches.length){p.takeFocus();var c=this;this.slider.setProperty("isPlaying",!1);var e=function(a,b){for(var c=a.touches,d=null,e=0;e<c.length;e++)c[e].identifier===b&&(d=c[e]);return d},f="ios"===a.get("platform")?30:10,g=k.throttle(c.commitSliderValue.bind(c),f);c.setProperty("dragging",!0);var n=b.changedTouches[0].identifier,q=function(a){if(a=e(a,n))c.setValueByTouch(a),
g()},s=function(a){e(a,n)||(h(document).off("tapmove",q),h(document).off("tapend tapcancel",s),c.setProperty("dragging",!1),c.commitSliderValue())};h(document).on("tapmove",q);h(document).on("tapend tapcancel",s)}};b.commitSliderValue=function(){this.slider.setProperty("value",this.value)};b.checkInvalid=function(){var a=parseFloat(this.$("input[limit=min]").attr("value")),b=parseFloat(this.$("input[limit=max]").attr("value")),c=this.$("input[limit=step]").attr("value"),c=""===c?0:parseFloat(c),a=
!isFinite(a)||!isFinite(b)||a>=b||0>c||c>b-a;this.setProperty("invalid",a)};b.keyDown=function(a){c.lookup(a)===c.ENTER?h(document.activeElement).blur():this.checkInvalid()};b.focusIn=function(a){this.slider.setProperty("isPlaying",!1);clearTimeout(this.saveAfterBlurTimeout);this.checkInvalid()};b.focusOut=function(a){var b=this;this.save(a.target);this.saveAfterBlurTimeout=setTimeout(function(){clearTimeout(b.saveAfterBlurTimeout);b.onClose()},1);this.checkInvalid()};b.save=function(a){if(a){a=h(a);
var b=parseFloat(a.attr("value")),c=""===this.$(".slider_interval").attr("value")?0:this.slider.step;a.hasClass("slider_min")?b<this.slider.max&&this.slider.max-b>c?this.slider.setProperty("min",b):a.attr("value",this.slider.min):a.hasClass("slider_max")?b>this.slider.min&&b-this.slider.min>c?this.slider.setProperty("max",b):a.attr("value",this.slider.max):a.hasClass("slider_interval")&&(0<=b&&b<this.slider.max-this.slider.min?this.slider.setProperty("step",b):""===a.attr("value")?this.slider.setProperty("step",
void 0):void 0===c?a.attr("value",""):a.attr("value",this.slider.step))}};b.onClose=function(){this.setProperty("editing",!1)};b.onEditMin=function(a){this.setProperty("editing",!0);a.preventDefault();this.$(".slider_min").focus().select()};b.onEditMax=function(a){this.setProperty("editing",!0);a.preventDefault();this.$(".slider_max").focus().select()};b.renderIsPlaying=function(){0>this.slider.step?this.slider.setProperty("isPlaying",!1):this.parentView.$().toggleClass("isPlaying",!!this.slider.isPlaying)}})});
I("template!prompt_sliders",["underscore"],function(b){return function(h){var u="";with(h||{})u+='<div class="create_sliders action-createslider" handleEvent="true">\n  <span class="msg">'+t("add slider:")+'</span>\n  <span class="btns">\n    ',b.each(variables,function(b){u+='\n      <div class="slider_btn_container" var_name="'+b.name+'" >\n        <div class="btn btn-primary btn-small">'+b.label+"</div>\n      </div>\n    "}),u+="\n              \n    ",1<variables.length&&(u+='\n      <div class="slider_btn_container all">\n        <div class="btn btn-small btn-success all">all!</div>\n      </div>\n    '),
u+="\n  </span>\n</div>";return u}});I("expressions/promptslider_view","require jquery pjs lib/underscore_view main/focus template!prompt_sliders".split(" "),function(b){var h=b("jquery"),u=b("pjs"),w=b("lib/underscore_view"),q=b("main/focus"),p=b("template!prompt_sliders");return u(w,function(b,a){b.template=p;b.init=function(b){a.init.call(this);this.variables=[];this.expressionView=b;this.observe("variables",this.rerender.bind(this))};b.didInsertElement=function(){this.$(".action-createslider").on("tap",
this.onCreateSlider.bind(this))};b.getTemplateParams=function(){for(var a=this.variables,b=[],g=0;4>g&&g<a.length;g++){var f,e=a[g].split("{").join("").split("}").join("").split("_");1<e.length?(f=e[0]+"_{"+e[1]+"}",e=e[0]+"<sub>"+e[1]+"</sub>"):(f=e[0],e=e[0]);b.push({name:f,label:e})}return{variables:b}};b.onCreateSlider=function(a){q.takeFocus();a=h(a.target).closest(".slider_btn_container");a.length&&(a=a.hasClass("all")?this.variables.slice():[a.attr("var_name")],a.length&&this.expressionView.createSliders(a))}})});
I("loadcss!vendor_css/mathquill/mathquill",function(){});(function(){function b(){}function h(a){var b=e.call(arguments,1);return function(){return a.apply(this,b)}}function u(a,b){if(!b)throw Error("prayer failed: "+a);}function w(d,e,f,g){function h(){v=k;var a=m.selection?"$"+m.selection.latex()+"$":"";a!==x&&(B.select(a),x=a,e.triggerSpecialEvent("selectionChanged"))}var n=d.contents().detach();f||d.addClass("mathquill-rendered-math");e.jQ=a('<span class="mathquill-root-block"/>').appendTo(d.attr(c,
e.id));e.revert=function(){d.empty().unbind(".mathquill").removeClass("mathquill-rendered-math mathquill-editable mathquill-textbox").append(n)};var m=e.cursor=ca(e);e.renderLatex(n.text());var r=null!==navigator.userAgent.match(/(iPad|iPhone|iPod)/i),s=null!==navigator.userAgent.match(/(Android|Silk|Kindle)/i),w=e.textarea=r||s?a('<span class="textarea"><span tabindex=0></span></span>'):a('<span class="textarea"><textarea></textarea></span>'),u=w.children(),v,x;e.selectionChanged=function(){v===
k&&(v=setTimeout(h));O(d[0])};d.bind("selectstart.mathquill",function(a){a.target!==u[0]&&a.preventDefault();a.stopPropagation()});var y,z=m.blink;d.bind("mousedown.mathquill",function(c){function f(b){m.seek(a(b.target),b.clientX,b.clientY,n);m.prev===y.prev&&m.parent===y.parent||m.selectFrom(y);b.preventDefault()}function h(a){delete a.target;return f(a)}function l(b){y=k;m.blink=z;m.selection||(g?m.show():w.detach());d.unbind("mousemove",f);a(b.target.ownerDocument).unbind("mousemove",h).unbind("mouseup",
l)}c.preventDefault();if(e.ignoreMousedownTimeout!==k)clearTimeout(e.ignoreMousedownTimeout),e.ignoreMousedownTimeout=k;else{var n=p();setTimeout(function(){e.blurred&&u.focus()});m.blink=b;m.hideHandle().seek(a(c.target),c.clientX,c.clientY,n);y={parent:m.parent,prev:m.prev,next:m.next};g||d.prepend(w);d.mousemove(f);a(c.target.ownerDocument).mousemove(h).mouseup(l)}});m.jQ.delegate(".handle","touchstart",function(b){return function(c){c.preventDefault();c=c.originalEvent;var d=a(c.target);if(!(c.changedTouches.length<
c.touches.length)){var e=c.changedTouches[0],f=b(e)||0;f.touchmove&&d.bind("touchmove",function(a){a=a.originalEvent.changedTouches[0];a.id===e.id&&f.touchmove.call(this,a)});d.bind("touchend",function(a){a=a.originalEvent.changedTouches[0];a.id===e.id&&(f.touchend&&f.touchend.call(this,a),d.unbind("touchmove touchend"))})}}}(function(a){m.blink=b;var c=m.jQ[0].getBoundingClientRect(),d=a.clientX-c.left,f=a.clientY-(c.top+c.bottom)/2,g=p();return{touchmove:function(a){var b=a.clientX-d;a=a.clientY-
f;m.seek(q(b,a,e),b,a,g,!0);var c=m.jQ[0].getBoundingClientRect(),b=b-c.left;a-=(c.top+c.bottom)/2;c=Math.sqrt(b*b+a*a);c=(Math.log(c)+1)/c;b=Math.atan2(c*b,f);a=(c*a+f)/f;m.handle.css({WebkitTransform:"translateX(.5px) skewX("+b+"rad) scaleY("+a+")",opacity:1-0.5*(2*(a-1)+1)})},touchend:function(a){m.handle.css({WebkitTransform:"",opacity:""});m.blink=z;m.show(!0)}}}));if(g)B=l(u,{container:d,key:function(a,b){m.parent.bubble("onKey",a,b)},text:function(a){m.parent.bubble("onText",a)},cut:function(a){m.selection&&
setTimeout(function(){m.prepareEdit();m.parent.bubble("redraw");e.triggerSpecialEvent("render")});a.stopPropagation();e.triggerSpecialEvent("render")},paste:function(a){"$"===a.slice(0,1)&&"$"===a.slice(-1)&&(a=a.slice(1,-1));m.writeLatex(a).show();e.triggerSpecialEvent("render")}}),d.prepend(w),d.addClass("mathquill-editable"),f&&d.addClass("mathquill-textbox"),u.focus(function(a){e.blurred=!1;m.parent||m.appendTo(e);m.parent.jQ.addClass("hasCursor");m.selection?(m.selection.jQ.removeClass("blur"),
setTimeout(e.selectionChanged)):m.show()}).blur(function(a){e.blurred=!0;m.hide().parent.blur();m.selection&&m.selection.jQ.addClass("blur")}).blur(),d.bind("select_all",function(a){for(m.prepareMove().appendTo(e);m.prev;)m.selectLeft()}).bind("custom_paste",function(a,b){"$"===b.slice(0,1)&&"$"===b.slice(-1)&&(b=b.slice(1,-1));m.writeLatex(b).show();e.triggerSpecialEvent("render")});else{var B=l(u,{container:d});d.bind("cut paste",!1).bind("copy",h).prepend('<span class="selectable">$'+e.latex()+
"$</span>");u.blur(function(){m.clearSelection();setTimeout(A)});var A=function(){w.detach()}}}function q(b,c,d){b=document.elementFromPoint(b,c);return a.contains(d.jQ[0],b)?a(b):d.jQ}function p(){function a(b,d){return c[d]||(c[d]=b.getBoundingClientRect())}function b(c){return a(c.jQ[0],c.id)}var c={};b.elById=a;return b}function s(a,b,c){return d(X,{ctrlSeq:a,htmlTemplate:"<"+b+" "+c+">&0</"+b+">"})}var a=jQuery,k,c="mathquill-block-id",g=Math.min,f=Math.max,e=[].slice,d=function(a,b,c){function d(a){return"function"===
typeof a}function e(f,g){function h(a){if(!(this instanceof h))return new h(arguments);a&&d(this.init)&&this.init.apply(this,a)}g===c&&(g=f,f=Object);var k=h[a]=new f,l=f[a],n;k.constructor=h;h.mixin=function(b){h[a]=e(h,b)[a];return h};return(h.open=function(a){n={};d(a)?n=a.call(h,k,l,h,f):"object"===typeof a&&(n=a);if("object"===typeof n)for(var c in n)b.call(n,c)&&(k[c]=n[c]);d(k.init)||(k.init=function(){f.apply(this,arguments)});return h})(g)}return e}("prototype",{}.hasOwnProperty),l=function(){function c(a){var b=
a.which||a.keyCode,e=d[b],f=[];a.ctrlKey&&f.push("Ctrl");a.originalEvent&&a.originalEvent.metaKey&&f.push("Meta");a.altKey&&f.push("Alt");a.shiftKey&&f.push("Shift");a=e||String.fromCharCode(b);if(!f.length&&!e)return a;f.push(a);return f.join("-")}var d={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(d,
e){function f(a){v=setTimeout(a);x=a}function g(){v&&(clearTimeout(v),v=k,x())}function h(){var a=w[0];return"selectionStart"in a?a.selectionStart!==a.selectionEnd:!1}function l(a){var b=w.val();w.val("");b&&a(b)}if(!d.is("textarea"))return{select:b};var n=null,p=null;e||(e={});var m=e.text||b,q=e.key||b,r=e.paste||b,s=e.cut||b,w=a(d),u=a(e.container||w),v,x;u.bind("keydown keypress input keyup focusout paste",g);u.bind({keydown:function(a){n=a;p=null;q(c(n),n)},keypress:function(a){n&&p&&q(c(n),
n);p=a;f(function(){h()?setTimeout(function(){h()||l(m)}):l(m);h()||l(m)})},focusout:function(){n=p=null},cut:s,paste:function(a){w.focus();f(function(){l(r)})}});return{select:function(a){g();w.val(a);a&&w[0].select()}}}}(),m=d(function(a,b,c){function d(a,b){throw"Parse Error: "+b+" at "+(a?"'"+a+"'":"EOF");}a.init=function(a){this._=a};a.parse=function(a){return this.skip(f)._(a,function(a,b){return b},d)};a.or=function(a){u("or is passed a parser",a instanceof c);var b=this;return c(function(c,
d,e){return b._(c,d,function(b){return a._(c,d,e)})})};a.then=function(a){var b=this;return c(function(d,e,f){return b._(d,function(b,d){var g=a instanceof c?a:a(d);u("a parser is returned",g instanceof c);return g._(b,e,f)},f)})};a.many=function(){var a=this;return c(function(b,c,d){function e(a,c){b=a;g.push(c);return!0}function f(){return!1}for(var g=[];a._(b,e,f););return c(b,g)})};a.times=function(a,b){2>arguments.length&&(b=a);var d=this;return c(function(c,e,f){function g(a,b){l.push(b);c=
a;return!0}function h(a,b){p=b;c=a;return!1}function k(a,b){return!1}for(var l=[],n=!0,p,m=0;m<a;m+=1)if(n=d._(c,g,h),!n)return f(c,p);for(;m<b&&n;m+=1)n=d._(c,g,k);return e(c,l)})};a.result=function(a){return this.then(e(a))};a.atMost=function(a){return this.times(0,a)};a.atLeast=function(a){var b=this;return b.times(a).then(function(a){return b.many().map(function(b){return a.concat(b)})})};a.map=function(a){return this.then(function(b){return e(a(b))})};a.skip=function(a){return this.then(function(b){return a.result(b)})};
this.string=function(a){var b=a.length,d="expected '"+a+"'";return c(function(c,e,f){var g=c.slice(0,b);return g===a?e(c.slice(b),g):f(c,d)})};a=this.regex=function(a){u("regexp parser is anchored","^"===a.toString().charAt(1));var b="expected "+a;return c(function(c,d,e){var f=a.exec(c);return f?(e=f[0],d(c.slice(e.length),e)):e(c,b)})};var e=c.succeed=function(a){return c(function(b,c){return c(b,a)})};c.fail=function(a){return c(function(b,c,d){return d(b,a)})};c.letter=a(/^[a-z]/i);c.letters=
a(/^[a-z]*/i);c.digit=a(/^[0-9]/);c.digits=a(/^[0-9]*/);c.whitespace=a(/^\s+/);c.optWhitespace=a(/^\s*/);c.any=c(function(a,b,c){return a?b(a.slice(1),a.charAt(0)):c(a,"expected any character")});c.all=c(function(a,b,c){return b("",a)});var f=c.eof=c(function(a,b,c){return a?c(a,"expected EOF"):b(a,a)})}),x=d(function(a){a.prev=0;a.next=0;a.parent=0;a.firstChild=0;a.lastChild=0;a.children=function(){return r(this.firstChild,this.lastChild)};a.eachChild=function(a){return this.children().each(a)};
a.foldChildren=function(a,b){return this.children().fold(a,b)};a.adopt=function(a,b,c){r(this,this).adopt(a,b,c);return this};a.disown=function(){r(this,this).disown();return this}}),r=d(function(a){function b(a,c,d){u("a parent is always present",a);var e;e=c?c.next===d&&c.parent===a:a.firstChild===d;u("prev is properly set up",e);a=d?d.prev===c&&d.parent===a:a.lastChild===c;u("next is properly set up",a)}a.first=0;a.last=0;a.init=function(a,b){u("no half-empty fragments",!a===!b);a&&(u("first node is passed to Fragment",
a instanceof x),u("last node is passed to Fragment",b instanceof x),u("first and last have the same parent",a.parent===b.parent),this.first=a,this.last=b)};a.adopt=function(a,c,d){b(a,c,d);this.disowned=!1;var e=this.first;if(!e)return this;var f=this.last;c||(a.firstChild=e);d?d.prev=f:a.lastChild=f;this.last.next=d;this.each(function(b){b.prev=c;b.parent=a;c&&(c.next=b);c=b});return this};a.disown=function(){var a=this.first;if(!a||this.disowned)return this;this.disowned=!0;var c=this.last,d=a.parent;
b(d,a.prev,a);b(d,c,c.next);a.prev?a.prev.next=c.next:d.firstChild=c.next;c.next?c.next.prev=a.prev:d.lastChild=a.prev;return this};a.each=function(a){var b=this.first;if(!b)return this;for(;b!==this.last.next&&!1!==a.call(this,b);b=b.next);return this};a.fold=function(a,b){this.each(function(c){a=b.call(this,a,c)});return a}}),n=function(){var a=0;return function(){return a+=1}}(),y=d(x,function(b){b.init=function(a){this.id=n();y[this.id]=this};b.toString=function(){return"[MathElement "+this.id+
"]"};b.bubble=function(a){for(var b=e.call(arguments,1),c=this;c&&!1!==(c[a]&&c[a].apply(c,b));c=c.parent);return this};b.postOrder=function(a){if("string"===typeof a){var b=a;a=function(a){b in a&&a[b].apply(a,arguments)}}(function sa(b){b.eachChild(sa);a(b)})(this)};b.jQ=a();b.jQadd=function(a){this.jQ=this.jQ.add(a)};this.jQize=function(b){function c(a){if(a.getAttribute){var b=a.getAttribute("mathquill-command-id"),d=a.getAttribute("mathquill-block-id");b&&y[b].jQadd(a);d&&y[d].jQadd(a)}}function d(a){for(a=
a.firstChild;a;a=a.nextSibling)c(a),a.firstChild&&d(a)}b=a(b);for(var e=0;e<b.length;e+=1)c(b[e]),d(b[e]);return b};b.finalizeInsert=function(){this.postOrder("finalizeTree");this.postOrder("blur");this.postOrder("respace");this.next.respace&&this.next.respace();this.prev.respace&&this.prev.respace();this.postOrder("redraw");this.bubble("redraw");this.bubble("redraw")};b.seek=function(a,b,c,d,e){function h(){for(var a,b=Infinity,c=0;c<p.length;c+=1)if(p[c]){var d=p[c].sqDist;d<b&&(a=c,b=d)}b=p[a];
p[a]=null;return b}function k(a){if(a=a.seekPoint(b,c,e)){var d=b-a.x,f=c-a.y;p.push({point:a,sqDist:d*d+f*f})}}function l(a){if(a){var d=e(a),h=f(d.left,g(d.right,b)),d=f(d.top,g(d.bottom,c)),h=b-h,d=c-d;p.push({node:a,sqDist:h*h+d*d})}}function n(a){if(a!==d){var h=e(a),h=f(0,g(b-h.left,c-h.top,h.right-b,h.bottom-c));p.push({container:a,sqDist:h*h})}}var p=[];k(this);this.eachChild(l);n(this);for(var m=h();!m.point;m=h())if(m.container){var q=m.container,m=q.parent;k(m);m.eachChild(function(a){a!==
q&&l(a)});n(m)}else k(m.node),m.node.eachChild(l);m.point.next?a.insertBefore(m.point.next):a.appendTo(m.point.parent)}}),B=d(y,function(a,c){a.init=function(a,b,d){c.init.call(this);this.ctrlSeq||(this.ctrlSeq=a);b&&(this.htmlTemplate=b);d&&(this.textTemplate=d)};a.replaces=function(a){a.disown();this.replacedFragment=a};a.isEmpty=function(){return this.foldChildren(!0,function(a,b){return a&&b.isEmpty()})};a.parser=function(){var a=this;return da.block.times(a.numBlocks()).map(function(b){a.blocks=
b;for(var c=0;c<b.length;c+=1)b[c].adopt(a,a.lastChild,0);return a})};a.createBefore=function(a){var b=this.replacedFragment;this.createBlocks();y.jQize(this.html());b&&(b.adopt(this.firstChild,0,0),b.jQ.appendTo(this.firstChild.jQ));a.jQ.before(this.jQ);a.prev=this.adopt(a.parent,a.prev,a.next);this.finalizeInsert(a);this.placeCursor(a)};a.createBlocks=function(){for(var a=this.numBlocks(),b=this.blocks=Array(a),c=0;c<a;c+=1)(b[c]=C()).adopt(this,this.lastChild,0)};a.respace=b;a.placeCursor=function(a){a.appendTo(this.foldChildren(this.firstChild,
function(a,b){return a.isEmpty()?a:b}))};a.seekPoint=b;a.expectedCursorYNextTo=function(a){return this.firstChild.expectedCursorYInside(a)};a.remove=function(){this.disown();this.jQ.remove();this.postOrder(function(a){delete y[a.id]});return this};a.numBlocks=function(){var a=this.htmlTemplate.match(/&\d+/g);return a?a.length:0};a.html=function(){var a=this.blocks,b=" mathquill-command-id="+this.id,c=this.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);u("no unmatched angle brackets",c.join("")===this.htmlTemplate);
for(var d=0,e=c[0];e;d+=1,e=c[d])if("/>"===e.slice(-2))c[d]=e.slice(0,-2)+b+"/>";else if("<"===e.charAt(0)){u("not an unmatched top-level close tag","/"!==e.charAt(1));c[d]=e.slice(0,-1)+b+">";var f=1;do d+=1,e=c[d],u("no missing close tags",e),"</"===e.slice(0,2)?f-=1:"<"===e.charAt(0)&&"/>"!==e.slice(-2)&&(f+=1);while(0<f)}return c.join("").replace(/>&(\d+)/g,function(b,c){return" mathquill-block-id="+a[c].id+">"+a[c].join("html")})};a.latex=function(){return this.foldChildren(this.ctrlSeq,function(a,
b){return a+"{"+(b.latex()||" ")+"}"})};a.textTemplate=[""];a.text=function(){var a=0;return this.foldChildren(this.textTemplate[a],function(b,c){a+=1;var d=c.text();return b&&"("===this.textTemplate[a]&&"("===d[0]&&")"===d.slice(-1)?b+d.slice(1,-1)+this.textTemplate[a]:b+c.text()+(this.textTemplate[a]||"")})}}),z=d(B,function(a,c){a.init=function(a,b,d){d||(d=a&&1<a.length?a.slice(1):a);c.init.call(this,a,b,[d])};a.parser=function(){return m.succeed(this)};a.numBlocks=function(){return 0};a.replaces=
function(a){a.remove()};a.createBlocks=b;a.seek=function(a,b,c,d,e){c=e(this);b-c.left<c.right-b?a.insertBefore(this):a.insertAfter(this)};a.expectedCursorYNextTo=function(a){return(a(this).top+a(this).bottom)/2};a.latex=function(){return this.ctrlSeq};a.text=function(){return this.textTemplate};a.placeCursor=b;a.isEmpty=function(){return!0}}),C=d(y,function(a){a.join=function(a){return this.foldChildren("",function(b,c){return b+c[a]()})};a.latex=function(){return this.join("latex")};a.text=function(){return this.firstChild===
this.lastChild?this.firstChild.text():"("+this.join("text")+")"};a.isEmpty=function(){return 0===this.firstChild&&0===this.lastChild};a.seekPoint=function(a,b,c){if(this.firstChild){if(d={next:this.firstChild,x:c(this.firstChild).left},a>d.x){d={next:this.lastChild,x:c(this.lastChild).left};for(b={next:0,x:c(d.next).right};a<d.x;)b=d,d={next:d.next.prev,x:c(d.next.prev).left};b.x-a<a-d.x&&(d=b)}}else var d={next:0,x:(c(this).left+c(this).right)/2};return{parent:this,next:d.next,x:d.x,y:this.expectedCursorYInside(c)}};
a.expectedCursorYInside=function(a){return this.firstChild?this.firstChild.expectedCursorYNextTo(a):(a(this).top+a(this).bottom)/2};a.focus=function(){this.jQ.addClass("hasCursor");this.jQ.removeClass("empty");return this};a.blur=function(){this.jQ.removeClass("hasCursor");this.isEmpty()&&this.jQ.addClass("empty");return this}}),D=d(r,function(b,c){b.init=function(b,d){c.init.call(this,b,d||b);this.jQ=this.fold(a(),function(a,b){return b.jQ.add(a)})};b.latex=function(){return this.fold("",function(a,
b){return a+b.latex()})};b.remove=function(){this.jQ.remove();this.each(function(a){a.postOrder(function(a){delete y[a.id]})});return this.disown()}}),F=d(C,function(a,b){a.latex=function(){return b.latex.call(this).replace(/(\\[a-z]+) (?![a-z])/ig,"$1")};a.text=function(){return this.foldChildren("",function(a,b){return a+b.text()})};a.renderLatex=function(a){var b=m.all,b=da.skip(m.eof).or(b.result(!1)).parse(a);this.firstChild=this.lastChild=0;b&&b.children().adopt(this,0,0);a=this.jQ;b?(b=b.join("html"),
a.html(b),y.jQize(a),this.focus().finalizeInsert()):a.empty();this.cursor.parent=this;this.cursor.prev=this.lastChild;this.cursor.next=0};a.renderSliderLatex=function(a){function b(a){var c=a.charCodeAt(0);return 65<=c&&90>=c||97<=c&&122>=c?aa(a):J[a]||A[a]?(J[a]||A[a])(a):U(a)}a=/^([a-z])(?:_([a-z0-9]|\{[a-z0-9]+\}))?=([-0-9.]+)$/i.exec(a);u("valid restricted slider LaTeX",a);var c=a[1],d=a[2];a=a[3];this.firstChild=this.lastChild=0;c=aa(c);if(d){var e=A._("_"),f=C().adopt(e,0,0);e.blocks=[f];if(1===
d.length)b(d).adopt(f,f.lastChild,0);else for(var g=1;g<d.length-1;g+=1)b(d.charAt(g)).adopt(f,f.lastChild,0)}c.adopt(this,this.lastChild,0);e&&e.adopt(this,this.lastChild,0);A["="]("=").adopt(this,this.lastChild,0);g=0;for(e=a.length;g<e;g+=1)c=a.charAt(g),b(c).adopt(this,this.lastChild,0);a=this.jQ;e=this.join("html");a.html(e);y.jQize(a);this.cursor.parent=this;this.cursor.prev=this.lastChild;this.cursor.next=0};a.up=function(){this.triggerSpecialEvent("upPressed")};a.down=function(){this.triggerSpecialEvent("downPressed")};
a.moveOutOf=function(a){this.triggerSpecialEvent(a+"Pressed")};a.onKey=function(a,b){switch(a){case "Ctrl-Shift-Backspace":case "Ctrl-Backspace":for(;this.cursor.prev||this.cursor.selection;)this.cursor.backspace();break;case "Shift-Backspace":case "Backspace":this.cursor.backspace();this.triggerSpecialEvent("render");break;case "Esc":case "Tab":var c=this.cursor.parent;if(c===this.cursor.root)return;this.cursor.prepareMove();c.next?this.cursor.prependTo(c.next):this.cursor.insertAfter(c.parent);
break;case "Shift-Tab":case "Shift-Esc":c=this.cursor.parent;if(c===this.cursor.root)return;this.cursor.prepareMove();c.prev?this.cursor.appendTo(c.prev):this.cursor.insertBefore(c.parent);break;case "Enter":this.triggerSpecialEvent("enterPressed");break;case "End":this.cursor.prepareMove().appendTo(this.cursor.parent);break;case "Ctrl-End":this.cursor.prepareMove().appendTo(this);break;case "Shift-End":for(;this.cursor.next;)this.cursor.selectRight();break;case "Ctrl-Shift-End":for(;this.cursor.next||
this.cursor.parent!==this;)this.cursor.selectRight();break;case "Home":this.cursor.prepareMove().prependTo(this.cursor.parent);break;case "Ctrl-Home":this.cursor.prepareMove().prependTo(this);break;case "Shift-Home":for(;this.cursor.prev;)this.cursor.selectLeft();break;case "Ctrl-Shift-Home":for(;this.cursor.prev||this.cursor.parent!==this;)this.cursor.selectLeft();break;case "Left":this.cursor.moveLeft();break;case "Shift-Left":this.cursor.selectLeft();break;case "Ctrl-Left":break;case "Meta-Left":break;
case "Right":this.cursor.moveRight();break;case "Shift-Right":this.cursor.selectRight();break;case "Ctrl-Right":break;case "Meta-Right":break;case "Up":this.cursor.moveUp();break;case "Down":this.cursor.moveDown();break;case "Shift-Up":if(this.cursor.prev)for(;this.cursor.prev;)this.cursor.selectLeft();else this.cursor.selectLeft();case "Shift-Down":if(this.cursor.next)for(;this.cursor.next;)this.cursor.selectRight();else this.cursor.selectRight();case "Ctrl-Up":break;case "Meta-Up":break;case "Ctrl-Down":break;
case "Meta-Down":break;case "Ctrl-Shift-Del":case "Ctrl-Del":for(;this.cursor.next||this.cursor.selection;)this.cursor.deleteForward();this.triggerSpecialEvent("render");break;case "Shift-Del":case "Del":this.cursor.deleteForward();this.triggerSpecialEvent("render");break;case "Meta-A":case "Ctrl-A":if(this!==this.cursor.root)return;for(this.cursor.prepareMove().appendTo(this);this.cursor.prev;)this.cursor.selectLeft();break;default:return!1}b.preventDefault();return!1};a.onText=function(a){this.cursor.write(a);
this.triggerSpecialEvent("render");return!1};a.triggerSpecialEvent=function(a){var b=this.jQ;setTimeout(function(){b.trigger(a)},1)}}),G=d(B,function(a,b){a.init=function(a){b.init.call(this,"$");this.cursor=a};a.htmlTemplate='<span class="mathquill-rendered-math">&0</span>';a.createBlocks=function(){this.firstChild=this.lastChild=F();this.blocks=[this.firstChild];this.firstChild.parent=this;var a=this.firstChild.cursor=this.cursor;this.firstChild.onText=function(b){"$"!==b||a.parent!==this?a.write(b):
this.isEmpty()?a.insertAfter(this.parent).backspace().insertNew(U("\\$","$")).show():a.next?a.prev?a.write(b):a.insertBefore(this.parent):a.insertAfter(this.parent);return!1}};a.latex=function(){return"$"+this.firstChild.latex()+"$"}}),H=d(C,function(a){a.renderLatex=function(a){var b=this.cursor;this.jQ.children().slice(1).remove();this.firstChild=this.lastChild=0;b.show().appendTo(this);var c=m.regex,d=m.string,e=m.eof,f=m.all,g=d("$").then(da).skip(d("$").or(e)).map(function(a){var c=G(b);c.createBlocks();
var d=c.firstChild;a.children().adopt(d,0,0);return c}),c=d("\\$").result("$").or(c(/^[^$]/)).map(U);if(a=g.or(c).many().skip(e).or(f.result(!1)).parse(a)){for(e=0;e<a.length;e+=1)a[e].adopt(this,this.lastChild,0);a=this.join("html");y.jQize(a).appendTo(this.jQ);this.finalizeInsert()}};a.onKey=F.prototype.onKey;a.onText=function(a){this.cursor.prepareEdit();"$"===a?this.cursor.insertNew(G(this.cursor)):this.cursor.insertNew(U(a));return!1}}),J={},A={},I,O=b,K=document.createElement("div").style,Q=
{transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1},M,Z;for(Z in Q)if(Z in K){M=Z;break}M?I=function(a,b,c){a.css(M,"scale("+b+","+c+")")}:"filter"in K?(O=function(a){a.className=a.className},I=function(b,c,d){function e(){b.css("marginRight",(f.width()-1)*(c-1)/c+"px")}c/=1+(d-1)/2;b.css("fontSize",d+"em");b.hasClass("matrixed-container")||b.addClass("matrixed-container").wrapInner('<span class="matrixed"></span>');var f=b.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+
c+",SizingMethod='auto expand')");e();var g=setInterval(e);a(window).load(function(){clearTimeout(g);e()})}):I=function(a,b,c){a.css("fontSize",c+"em")};K=d(B,function(a,b){a.init=function(a,c,d){b.init.call(this,a,"<"+c+" "+d+">&0</"+c+">")}});A.mathrm=h(K,"\\mathrm","span",'class="roman font"');A.mathit=h(K,"\\mathit","i",'class="font"');A.mathbf=h(K,"\\mathbf","b",'class="font"');A.mathsf=h(K,"\\mathsf","span",'class="sans-serif font"');A.mathtt=h(K,"\\mathtt","span",'class="monospace font"');
A.underline=h(K,"\\underline","span",'class="non-leaf underline"');A.overline=A.bar=h(K,"\\overline","span",'class="non-leaf overline"');var Y=d(B,function(a,b){function c(a){var b=this.parent,d=a;do{if(d.next)return a.insertBefore(b),!1;d=d.parent.parent}while(d!==b);a.insertAfter(b);return!1}a.init=function(a,c,d){b.init.call(this,a,"<"+c+' class="non-leaf"><span class="non-leaf '+c+'">&0</span></'+c+">",[d])};a.finalizeTree=function(){u("SupSub is only _ and ^","^"===this.ctrlSeq||"_"===this.ctrlSeq);
"_"===this.ctrlSeq?(this.down=this.firstChild,this.firstChild.up=c):(this.up=this.firstChild,this.firstChild.down=c)};a.latex=function(){if("_"===this.ctrlSeq&&this.respaced)return"";var a="";if("^"===this.ctrlSeq&&this.next.respaced)var b=this.next.firstChild.latex(),a=1===b.length?a+("_"+b):a+("_{"+b+"}");b=this.firstChild.latex();return a=1===b.length?a+(this.ctrlSeq+b):a+(this.ctrlSeq+"{"+(b||" ")+"}")};a.redraw=function(){this.prev&&this.prev.respace();this.prev instanceof Y||(this.respace(),
!this.next||this.next instanceof Y||this.next.respace())};a.respace=function(){"\\int "===this.prev.ctrlSeq||this.prev instanceof Y&&this.prev.ctrlSeq!=this.ctrlSeq&&this.prev.prev&&"\\int "===this.prev.prev.ctrlSeq?this["int"]||(this["int"]=!0,this.jQ.addClass("int")):this["int"]&&(this["int"]=!1,this.jQ.removeClass("int"));if(this.respaced=this.prev instanceof Y&&this.prev.ctrlSeq!=this.ctrlSeq&&!this.prev.respaced){var a=+this.jQ.css("fontSize").slice(0,-2),b=this.prev.jQ.outerWidth(),d=this.jQ.outerWidth();
this.jQ.css({left:(this["int"]&&"_"===this.ctrlSeq?-0.25:0)-b/a+"em",marginRight:0.1-g(d,b)/a+"em"})}else this["int"]&&"_"===this.ctrlSeq?this.jQ.css({left:"-.25em",marginRight:""}):this.jQ.css({left:"",marginRight:""});this.respaced?"^"===this.ctrlSeq?this.down=this.firstChild.down=this.prev.firstChild:this.up=this.firstChild.up=this.prev.firstChild:this.next.respaced?"_"===this.ctrlSeq?this.up=this.firstChild.up=this.next.firstChild:this.down=this.firstChild.down=this.next.firstChild:"_"===this.ctrlSeq?
(delete this.up,this.firstChild.up=c):(delete this.down,this.firstChild.down=c);this.next instanceof Y&&this.next.respace();return this};a.onKey=function(a,b){if(this.getCursor().parent.parent===this)switch(a){case "Tab":if(this.next.respaced)return this.getCursor().prepareMove().prependTo(this.next.firstChild),b.preventDefault(),!1;break;case "Shift-Tab":if(this.respaced)return this.getCursor().prepareMove().appendTo(this.prev.firstChild),b.preventDefault(),!1;break;case "Left":if(!this.getCursor().prev&&
this.respaced)return this.getCursor().prepareMove().insertBefore(this.prev),!1;break;case "Right":if(!this.getCursor().next&&this.next.respaced)return this.getCursor().prepareMove().insertAfter(this.next),!1}};a.getCursor=function(){for(var a,b=this.parent;!a;b=b.parent)a=b.cursor;this.getCursor=function(){return a};return this.getCursor()};a.expectedCursorYNextTo=function(a){return"_"===this.ctrlSeq?a(this).top:a(this).bottom}});A.subscript=A._=h(Y,"_","sub","_");A.superscript=A.supscript=A["^"]=
h(Y,"^","sup","**");var P=d(B,function(a,b){function c(a){var b=this.parent,d=a;do{if(d.prev)return a.insertAfter(b),!1;d=d.parent.parent}while(d!==b);a.insertBefore(b);return!1}a.init=function(a,b){z.prototype.init.call(this,a,'<span class="large-operator non-leaf"><span class="to"><span>&1</span></span><big>'+b+'</big><span class="from"><span>&0</span></span></span>')};a.placeCursor=function(a){a.appendTo(this.firstChild).writeLatex("n=").show()};a.latex=function(){function a(b){return 1===b.length?
b:"{"+(b||" ")+"}"}return this.ctrlSeq+"_"+a(this.firstChild.latex())+"^"+a(this.lastChild.latex())};a.parser=function(){for(var a=m.string,b=m.optWhitespace,c=m.succeed,d=da.block,e=this,f=e.blocks=[C(),C()],g=0;g<f.length;g+=1)f[g].adopt(e,e.lastChild,0);return b.then(a("_").or(a("^"))).then(function(a){var b=f["_"===a?0:1];return d.then(function(a){a.children().adopt(b,b.lastChild,0);return c(e)})}).many().result(e)};a.finalizeTree=function(){this.down=this.firstChild;this.firstChild.up=c;this.up=
this.lastChild;this.lastChild.down=c}});A["∑"]=A.sum=A.summation=h(P,"\\sum ","&sum;");A["∏"]=A.prod=A.product=h(P,"\\prod ","&prod;");var E=A.frac=A.dfrac=A.cfrac=A.fraction=d(B,function(a,b){a.ctrlSeq="\\frac";a.htmlTemplate='<span class="fraction non-leaf"><span class="numerator">&0</span><span class="denominator">&1</span><span style="display:inline-block;width:0;overflow:hidden">&nbsp;</span></span>';a.textTemplate=["(","/",")"];a.finalizeTree=function(){this.up=this.lastChild.up=this.firstChild;
this.down=this.firstChild.down=this.lastChild};a.expectedCursorYNextTo=function(a){return a.elById(this.jQ[0].lastChild,this.id+0.5).top}}),N=A.over=J["/"]=d(E,function(a,b){a.createBefore=function(a){if(!this.replacedFragment){var c=a.prev;if(c instanceof X||c instanceof E)c=c.prev;else{for(;c&&!(c instanceof W||c instanceof X||c instanceof P||c instanceof E||","===c.ctrlSeq||":"===c.ctrlSeq||"\\space "===c.ctrlSeq);)c=c.prev;c instanceof P&&c.next instanceof Y&&(c=c.next,c.next instanceof Y&&c.next.ctrlSeq!=
c.ctrlSeq&&(c=c.next))}c!==a.prev&&(this.replaces(D(c.next||a.parent.firstChild,a.prev)),a.prev=c)}b.createBefore.call(this,a)}}),K=A.sqrt=A["√"]=d(B,function(a,b){a.ctrlSeq="\\sqrt";a.htmlTemplate='<span class="non-leaf"><span class="scaled sqrt-prefix">&radic;</span><span class="non-leaf sqrt-stem">&0</span></span>';a.textTemplate=["sqrt(",")"];a.parser=function(){return da.optBlock.then(function(a){return da.block.map(function(b){var c=S();c.blocks=[a,b];a.adopt(c,0,0);b.adopt(c,a,0);return c})}).or(b.parser.call(this))};
a.redraw=function(){var a=this.lastChild.jQ;I(a.prev(),1,a.innerHeight()/+a.css("fontSize").slice(0,-2)-0.1)}}),S=A.nthroot=d(K,function(a,b){a.htmlTemplate='<sup class="nthroot non-leaf">&0</sup><span class="scaled"><span class="sqrt-prefix scaled">&radic;</span><span class="sqrt-stem non-leaf">&1</span></span>';a.textTemplate=["sqrt[","](",")"];a.latex=function(){return"\\sqrt["+this.firstChild.latex()+"]{"+this.lastChild.latex()+"}"};a.onKey=function(a,b){if(this.getCursor().parent.parent===this)switch(a){case "Right":if(this.getCursor().next)break;
case "Tab":if(this.getCursor().parent===this.firstChild)return this.getCursor().prepareMove().prependTo(this.lastChild),b.preventDefault(),!1;break;case "Left":if(this.getCursor().prev)break;case "Shift-Tab":if(this.getCursor().parent===this.lastChild)return this.getCursor().prepareMove().appendTo(this.firstChild),b.preventDefault(),!1}};a.getCursor=Y.prototype.getCursor;a.expectedCursorYNextTo=function(a){return a.elById(this.jQ[0],this.id+0.5).bottom}}),V=d(B,function(a,b){a.init=function(a,c,d,
e){b.init.call(this,"\\left"+d,'<span class="non-leaf"><span class="scaled paren">'+a+'</span><span class="non-leaf">&0</span><span class="scaled paren">'+c+"</span></span>",[a,c]);this.end="\\right"+e};a.jQadd=function(){b.jQadd.apply(this,arguments);var a=this.jQ;this.bracketjQs=a.children(":first").add(a.children(":last"))};a.finalizeTree=function(){if(this.firstChild.isEmpty()&&this.next){var a=D(this.next,this.parent.lastChild).disown();a.adopt(this.firstChild,0,0);a.jQ.appendTo(this.firstChild.jQ)}};
a.placeCursor=function(a){a.prependTo(this.firstChild)};a.latex=function(){return this.ctrlSeq+this.firstChild.latex()+this.end};a.redraw=function(){var a=this.firstChild.jQ,a=a.outerHeight()/+a.css("fontSize").slice(0,-2);I(this.bracketjQs,g(1+0.2*(a-1),1.2),1.05*a)}});A.left=d(B,function(a){a.parser=function(){var a=m.regex,b=m.string,a=m.regex,c=m.succeed,d=m.optWhitespace;return d.then(a(/^(?:[([|]|\\\{)/)).then(function(e){"\\"===e.charAt(0)&&(e=e.slice(1));var f=J[e]();return da.map(function(a){f.blocks=
[a];a.adopt(f,0,0)}).then(b("\\right")).skip(d).then(a(/^(?:[\])|]|\\\})/)).then(function(a){return a.slice(-1)!==f.end.slice(-1)?m.fail("open doesn't match close"):c(f)})})}});A.right=d(B,function(a){a.parser=function(){return m.fail("unmatched \\right")}});A.lbrace=J["{"]=h(V,"{","}","\\{","\\}");A.langle=A.lang=h(V,"&lang;","&rang;","\\langle ","\\rangle ");Q=d(V,function(a,c){a.createBefore=function(a){if(this.replacedFragment)return c.createBefore.call(this,a);var b=a.parent.parent;if(b.ctrlSeq===
this.ctrlSeq){if(a.next){var d=D(a.next,b.firstChild.lastChild).disown();d.adopt(b.parent,b,b.next);d.jQ.insertAfter(b.jQ);a.next.respace&&a.next.respace()}a.insertAfter(b);b.bubble("redraw")}else c.createBefore.call(this,a),a.appendTo(this.firstChild)};a.finalizeTree=b;a.placeCursor=function(a){this.firstChild.blur();a.insertAfter(this)}});A.rbrace=J["}"]=h(Q,"{","}","\\{","\\}");A.rangle=A.rang=h(Q,"&lang;","&rang;","\\langle ","\\rangle ");Z=function(a,b){a.init=function(a,c){b.init.call(this,
a,c,a,c)}};K=d(V,Z);A.lparen=J["("]=h(K,"(",")");A.lbrack=A.lbracket=J["["]=h(K,"[","]");Q=d(Q,Z);A.rparen=J[")"]=h(Q,"(",")");A.rbrack=A.rbracket=J["]"]=h(Q,"[","]");A.lpipe=A.rpipe=J["|"]=d(K,function(a,c){a.init=function(){c.init.call(this,"|","|")};a.createBefore=function(a){a.next||!a.parent.parent||a.parent.parent.end!==this.end||this.replacedFragment?B.prototype.createBefore.call(this,a):a.insertAfter(a.parent.parent)};a.finalizeTree=b});var X=A.text=A.textnormal=A.textrm=A.textup=A.textmd=
d(B,function(a,b){a.ctrlSeq="\\text";a.htmlTemplate='<span class="text">&0</span>';a.replaces=function(a){a instanceof D?this.replacedText=a.remove().jQ.text():"string"===typeof a&&(this.replacedText=a)};a.textTemplate=['"','"'];a.parser=function(){var a=m.string,b=m.regex;return m.optWhitespace.then(a("{")).then(b(/^[^}]*/)).skip(a("}")).map(function(a){var b=X();b.createBlocks();for(var c=b.firstChild,d=0;d<a.length;d+=1)U(a.charAt(d)).adopt(c,c.lastChild,0);return b})};a.createBlocks=function(){this.firstChild=
this.lastChild=R();this.blocks=[this.firstChild];this.firstChild.parent=this};a.finalizeInsert=function(){this.firstChild.blur=function(){delete this.blur;return this};b.finalizeInsert.call(this)};a.createBefore=function(a){b.createBefore.call(this,this.cursor=a);if(this.replacedText)for(a=0;a<this.replacedText.length;a+=1)this.write(this.replacedText.charAt(a))};a.write=function(a){this.cursor.insertNew(U(a))};a.onKey=function(a,b){if(!this.cursor.selection&&("Backspace"===a&&!this.cursor.prev||
"Del"===a&&!this.cursor.next))return this.isEmpty()&&this.cursor.insertAfter(this),!1};a.onText=function(a){this.cursor.prepareEdit();"$"!==a?this.write(a):this.isEmpty()?this.cursor.insertAfter(this).backspace().insertNew(U("\\$","$")):this.cursor.next?this.cursor.prev?(a=X(D(this.cursor.next,this.firstChild.lastChild)),a.placeCursor=function(a){this.prev=0;delete this.placeCursor;this.placeCursor(a)},a.firstChild.focus=function(){return this},this.cursor.insertAfter(this).insertNew(a),a.prev=this,
this.cursor.insertBefore(a),delete a.firstChild.focus):this.cursor.insertBefore(this):this.cursor.insertAfter(this);this.cursor.root.triggerSpecialEvent("render");return!1}}),R=d(C,function(a,b){a.blur=function(){this.jQ.removeClass("hasCursor");if(this.isEmpty()){var a=this.parent,b=a.cursor;b.parent===this?this.jQ.addClass("empty"):(b.hide(),a.remove(),b.next===a?b.next=a.next:b.prev===a&&(b.prev=a.prev),b.show().parent.bubble("redraw"))}return this};a.focus=function(){b.focus.call(this);var a=
this.parent;if(a.next.ctrlSeq===a.ctrlSeq){var c=this,d=a.cursor,a=a.next.firstChild;a.eachChild(function(a){a.parent=c;a.jQ.appendTo(c.jQ)});this.lastChild?this.lastChild.next=a.firstChild:this.firstChild=a.firstChild;a.firstChild.prev=this.lastChild;this.lastChild=a.lastChild;a.parent.remove();d.prev?d.insertAfter(d.prev):d.prependTo(this);d.parent.bubble("redraw")}else a.prev.ctrlSeq===a.ctrlSeq&&(d=a.cursor,d.prev?a.prev.firstChild.focus():d.appendTo(a.prev.firstChild));return this}});A.em=A.italic=
A.italics=A.emph=A.textit=A.textsl=s("\\textit","i",'class="text"');A.strong=A.bold=A.textbf=s("\\textbf","b",'class="text"');A.sf=A.textsf=s("\\textsf","span",'class="sans-serif text"');A.tt=A.texttt=s("\\texttt","span",'class="monospace text"');A.textsc=s("\\textsc","span",'style="font-variant:small-caps" class="text"');A.uppercase=s("\\uppercase","span",'style="text-transform:uppercase" class="text"');A.lowercase=s("\\lowercase","span",'style="text-transform:lowercase" class="text"');d(B,function(b,
c){b.ctrlSeq="\\";b.replaces=function(a){this._replacedFragment=a.disown();this.isEmpty=function(){return!1}};b.htmlTemplate='<span class="latex-command-input non-leaf">\\<span>&0</span></span>';b.textTemplate=["\\"];b.createBlocks=function(){c.createBlocks.call(this);this.firstChild.focus=function(){this.parent.jQ.addClass("hasCursor");this.isEmpty()&&this.parent.jQ.removeClass("empty");return this};this.firstChild.blur=function(){this.parent.jQ.removeClass("hasCursor");this.isEmpty()&&this.parent.jQ.addClass("empty");
return this}};b.createBefore=function(b){c.createBefore.call(this,b);this.cursor=b.appendTo(this.firstChild);if(this._replacedFragment){var d=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("blur").bind("mousedown mousemove",function(b){a(b.target=d).trigger(b);return!1}).insertBefore(this.jQ).add(this.jQ)}};b.latex=function(){return"\\"+this.firstChild.latex()+" "};b.onKey=function(a,b){if("Tab"===a||"Enter"===a)return this.renderCommand(),this.cursor.root.triggerSpecialEvent("render"),b.preventDefault(),
!1};b.onText=function(a){if(a.match(/[a-z]/i))return this.cursor.prepareEdit(),this.cursor.insertNew(U(a)),!1;this.renderCommand();if(" "===a||"\\"===a&&this.firstChild.isEmpty())return this.cursor.root.triggerSpecialEvent("render"),!1};b.renderCommand=function(){this.jQ=this.jQ.last();this.remove();this.next?this.cursor.insertBefore(this.next):this.cursor.appendTo(this.parent);var a=this.firstChild.latex();a||(a="backslash");this.cursor.insertCmd(a,this._replacedFragment)}});var ga=A.binom=A.binomial=
d(B,function(a,b){a.ctrlSeq="\\binom";a.htmlTemplate='<span class="paren scaled">(</span><span class="non-leaf"><span class="array non-leaf"><span>&0</span><span>&1</span></span></span><span class="paren scaled">)</span>';a.textTemplate=["choose(",",",")"];a.redraw=function(){var a=this.jQ.eq(1),a=a.outerHeight()/+a.css("fontSize").slice(0,-2),b=this.jQ.filter(".paren");I(b,g(1+0.2*(a-1),1.2),1.05*a)};a.expectedCursorYNextTo=z.prototype.expectedCursorYNextTo});A.choose=d(ga,function(a){a.createBefore=
N.prototype.createBefore});A.vector=d(B,function(b,d){b.ctrlSeq="\\vector";b.htmlTemplate='<span class="array"><span>&0</span></span>';b.latex=function(){return"\\begin{matrix}"+this.foldChildren([],function(a,b){a.push(b.latex());return a}).join("\\\\")+"\\end{matrix}"};b.text=function(){return"["+this.foldChildren([],function(a,b){a.push(b.text());return a}).join()+"]"};b.createBefore=function(a){d.createBefore.call(this,this.cursor=a)};b.onKey=function(b,d){var e=this.cursor.parent;if(e.parent===
this){if("Enter"===b){var f=C();f.parent=this;f.jQ=a("<span></span>").attr(c,f.id).insertAfter(e.jQ);e.next?e.next.prev=f:this.lastChild=f;f.next=e.next;e.next=f;f.prev=e;this.bubble("redraw").cursor.appendTo(f);d.preventDefault();return!1}if("Tab"===b&&!e.next){if(e.isEmpty()){if(e.prev)return this.cursor.insertAfter(this),delete e.prev.next,this.lastChild=e.prev,e.jQ.remove(),this.bubble("redraw"),d.preventDefault(),!1;return}f=C();f.parent=this;f.jQ=a("<span></span>").attr(c,f.id).appendTo(this.jQ);
this.lastChild=f;e.next=f;f.prev=e;this.bubble("redraw").cursor.appendTo(f);d.preventDefault();return!1}if(8===d.which){if(e.isEmpty())return e.prev?(this.cursor.appendTo(e.prev),e.prev.next=e.next):(this.cursor.insertBefore(this),this.firstChild=e.next),e.next?e.next.prev=e.prev:this.lastChild=e.prev,e.jQ.remove(),this.isEmpty()?this.cursor.deleteForward():this.bubble("redraw"),d.preventDefault(),!1;if(!this.cursor.prev)return d.preventDefault(),!1}}};b.expectedCursorYNextTo=ga.prototype.expectedCursorYNextTo});
var aa=d(z,function(a,b){a.init=function(a,c){b.init.call(this,a,"<var>"+(c||a)+"</var>")};a.createBefore=function(a){for(var c=this.ctrlSeq,d=0,e=a.prev;d<ba-1&&e&&e instanceof aa;d+=1,e=e.prev)c=e.ctrlSeq+c;for(;c.length;){if(ea.hasOwnProperty(c)){for(d=1;d<c.length;d+=1)a.backspace();a.insertNew(A[c](c));return}c=c.slice(1)}b.createBefore.apply(this,arguments)};a.respace=a.finalizeTree=function(){var a=this.ctrlSeq;if(!(1<a.length)){for(var b=this.prev;b instanceof aa&&1===b.ctrlSeq.length;b=b.prev)a=
b.ctrlSeq+a;for(var c=this.next;c instanceof aa&&1===c.ctrlSeq.length;c=c.next)a+=c.ctrlSeq;D(b.next||this.parent.firstChild,c.prev||this.parent.lastChild).each(function(a){a.jQ.removeClass("un-italicized last");delete a.isFirstLetter;delete a.isLastLetter});var c=0,d=b.next||this.parent.firstChild;a:for(;c<a.length;c+=1,d=d.next)for(b=g(v,a.length-c);0<b;b-=1)if(fa.hasOwnProperty(a.slice(c,c+b))){d.isFirstLetter=!0;for(var e=0;e<b;e+=1,d=d.next){d.jQ.addClass("un-italicized");var f=d}f.isLastLetter=
!0;f.next instanceof Y||f.next instanceof V||f.jQ.addClass("last");c+=b-1;d=f;continue a}}};a.latex=function(){return this.isFirstLetter?"\\"+this.ctrlSeq:this.isLastLetter?this.ctrlSeq+" ":this.ctrlSeq};a.text=function(){var a=this.ctrlSeq;!this.prev||this.prev instanceof aa||this.prev instanceof W||(a="*"+a);!this.next||this.next instanceof W||"^"===this.next.ctrlSeq||(a+="*");return a}}),ia=d(z,function(a,b){a.init=function(a){this.ctrlSeq=a};a.createBefore=function(a){a.writeLatex(this.ctrlSeq).show()};
a.parser=function(){for(var a=this.ctrlSeq,b=C(),c=0;c<a.length;c+=1)aa(a.charAt(c)).adopt(b,b.lastChild,0);return m.succeed(b.children())}}),fa={ln:1,log:1,min:1,nCr:1,nPr:1,gcd:1,lcm:1,mcm:1,mcd:1,ceil:1,exp:1,abs:1,max:1,mod:1,gcf:1,exp:1,floor:1,sign:1,signum:1,round:1},v=9,ea={sqrt:1,nthroot:1,sum:1,prod:1,pi:1,phi:1,tau:1,gamma:1,theta:1},ba=7;(function(){var a={sin:1,cos:1,tan:1,sec:1,cosec:1,csc:1,cotan:1,cot:1,ctg:1},b;for(b in a)fa[b]=fa["arc"+b]=fa[b+"h"]=fa["arc"+b+"h"]=1;for(var c in fa)A[c]=
ia})();var U=d(z,function(a,b){a.init=function(a,c){b.init.call(this,a,"<span>"+(c||a)+"</span>")}});J[" "]=h(U,"\\space "," ");A.prime=J["'"]=h(U,"'","&prime;");K=d(z,function(a,b){a.init=function(a,c){b.init.call(this,a,'<span class="nonSymbola">'+(c||a)+"</span>")}});A["@"]=K;A["&"]=h(K,"\\&","&amp;");A["%"]=h(K,"\\%","%");A.alpha=A.beta=A.gamma=A.delta=A.zeta=A.eta=A.theta=A.iota=A.kappa=A.mu=A.nu=A.xi=A.rho=A.sigma=A.tau=A.chi=A.psi=A.omega=d(aa,function(a,b){a.init=function(a){b.init.call(this,
"\\"+a+" ","&"+a+";")}});A.phi=h(aa,"\\phi ","&#981;");A.phiv=A.varphi=h(aa,"\\varphi ","&phi;");A.epsilon=h(aa,"\\epsilon ","&#1013;");A.epsiv=A.varepsilon=h(aa,"\\varepsilon ","&epsilon;");A.piv=A.varpi=h(aa,"\\varpi ","&piv;");A.sigmaf=A.sigmav=A.varsigma=h(aa,"\\varsigma ","&sigmaf;");A.thetav=A.vartheta=A.thetasym=h(aa,"\\vartheta ","&thetasym;");A.upsilon=A.upsi=h(aa,"\\upsilon ","&upsilon;");A.gammad=A.Gammad=A.digamma=h(aa,"\\digamma ","&#989;");A.kappav=A.varkappa=h(aa,"\\varkappa ","&#1008;");
A.rhov=A.varrho=h(aa,"\\varrho ","&#1009;");A.pi=A["π"]=h(K,"\\pi ","&pi;");A.theta=A["θ"]=h(K,"\\theta ","&theta;");A.lambda=h(K,"\\lambda ","&lambda;");A.Upsilon=A.Upsi=A.upsih=A.Upsih=h(z,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>');A.Gamma=A.Delta=A.Theta=A.Lambda=A.Xi=A.Pi=A.Sigma=A.Phi=A.Psi=A.Omega=A.forall=d(U,function(a,b){a.init=function(a){b.init.call(this,"\\"+a+" ","&"+a+";")}});K=d(B,function(a){a.init=function(a){this.latex=a};a.createBefore=function(a){a.writeLatex(this.latex)};
a.parser=function(){var a=da.parse(this.latex).children();return m.succeed(a)}});A["¹"]=h(K,"^1");A["²"]=h(K,"^2");A["³"]=h(K,"^3");A["¼"]=h(K,"\\frac14");A["½"]=h(K,"\\frac12");A["¾"]=h(K,"\\frac34");A["⅒"]=h(K,"\\frac{1}{10}");A["⅓"]=h(K,"\\frac13");A["⅔"]=h(K,"\\frac23");var W=d(z,function(a,b){a.init=function(a,c,d){b.init.call(this,a,'<span class="binary-operator">'+c+"</span>",d)};a.createBefore=function(a){var c=a.prev.ctrlSeq+this.ctrlSeq;"<="===c?a.backspace().insertNew(W("\\le ","&le;")):
">="===c?a.backspace().insertNew(W("\\ge ","&ge;")):b.createBefore.apply(this,arguments)}}),K=d(W,function(a){a.init=U.prototype.init;a.respace=function(){this.jQ[0].className=this.prev?this.prev instanceof W&&this.next&&!(this.next instanceof W)?"unary-operator":"binary-operator":"";return this}});A["+"]=h(K,"+","+");A["–"]=A["−"]=A["-"]=h(K,"-","&minus;");A["±"]=A.pm=A.plusmn=A.plusminus=h(K,"\\pm ","&plusmn;");A.mp=A.mnplus=A.minusplus=h(K,"\\mp ","&#8723;");J["*"]=A.sdot=A.cdot=h(W,"\\cdot ",
"&middot;");A["="]=h(W,"=","=");A["<"]=h(W,"<","&lt;");A[">"]=h(W,">","&gt;");A.notin=A.sim=A.cong=A.equiv=A.oplus=A.otimes=d(W,function(a,b){a.init=function(a){b.init.call(this,"\\"+a+" ","&"+a+";")}});A.times=h(W,"\\times ","&times;","[x]");A["÷"]=A.div=A.divide=A.divides=h(W,"\\div ","&divide;","[/]");A["≠"]=A.ne=A.neq=h(W,"\\ne ","&ne;");A.ast=A.star=A.loast=A.lowast=h(W,"\\ast ","&lowast;");A.therefor=A.therefore=h(W,"\\therefore ","&there4;");A.cuz=A.because=h(W,"\\because ","&#8757;");A.prop=
A.propto=h(W,"\\propto ","&prop;");A["≈"]=A.asymp=A.approx=h(W,"\\approx ","&asymp;");A.lt=h(W,"<","&lt;");A.gt=h(W,">","&gt;");A["≤"]=A.le=A.leq=h(W,"\\le ","&le;");A["≥"]=A.ge=A.geq=h(W,"\\ge ","&ge;");A.isin=A["in"]=h(W,"\\in ","&isin;");A.ni=A.contains=h(W,"\\ni ","&ni;");A.notni=A.niton=A.notcontains=A.doesnotcontain=h(W,"\\not\\ni ","&#8716;");A.sub=A.subset=h(W,"\\subset ","&sub;");A.sup=A.supset=A.superset=h(W,"\\supset ","&sup;");A.nsub=A.notsub=A.nsubset=A.notsubset=h(W,"\\not\\subset ",
"&#8836;");A.nsup=A.notsup=A.nsupset=A.notsupset=A.nsuperset=A.notsuperset=h(W,"\\not\\supset ","&#8837;");A.sube=A.subeq=A.subsete=A.subseteq=h(W,"\\subseteq ","&sube;");A.supe=A.supeq=A.supsete=A.supseteq=A.supersete=A.superseteq=h(W,"\\supseteq ","&supe;");A.nsube=A.nsubeq=A.notsube=A.notsubeq=A.nsubsete=A.nsubseteq=A.notsubsete=A.notsubseteq=h(W,"\\not\\subseteq ","&#8840;");A.nsupe=A.nsupeq=A.notsupe=A.notsupeq=A.nsupsete=A.nsupseteq=A.notsupsete=A.notsupseteq=A.nsupersete=A.nsuperseteq=A.notsupersete=
A.notsuperseteq=h(W,"\\not\\supseteq ","&#8841;");A.space=h(U,"\\space ","&nbsp;");A.and=A.land=A.wedge=h(U,"\\wedge ","&and;");A.or=A.lor=A.vee=h(U,"\\vee ","&or;");var da=function(){function a(b){for(var c=b[0]||C(),d=1;d<b.length;d+=1)b[d].children().adopt(c,c.lastChild,0);return c}var b=m.string,c=m.regex,d=m.any,e=m.optWhitespace,f=m.succeed,g=m.fail,h=m.letter.map(aa),k=c(/^[^${}\\_^]/).map(U),c=c(/^[^\\]/).or(b("\\").then(c(/^[a-z]+/i).or(c(/^\s+/).result(" ")).or(d))).then(function(a){var b=
A[a];return b?b(a).parser():g("unknown command: \\"+a)}).or(h).or(k),d=b("{").then(function(){return l}).skip(b("}")),c=e.then(d.or(c.map(function(a){var b=C();a.adopt(b,0,0);return b}))),l=c.many().map(a).skip(e),b=b("[").then(c.then(function(a){return"]"!==a.join("latex")?f(a):g()}).many().map(a).skip(e)).skip(b("]")),e=l;e.block=c;e.optBlock=b;return e}(),ca=d(function(b){function d(a,b){if(a.next[b])a.prependTo(a.next[b]);else if(a.prev[b])a.appendTo(a.prev[b]);else{var c=a.parent;do{var e=c[b];
if(e&&("function"===typeof e&&(e=c[b](a)),!1===e||e instanceof C)){a.upDownCache[c.id]={parent:a.parent,prev:a.prev,next:a.next};if(e instanceof C)if(c=a.upDownCache[e.id])c.next?a.insertBefore(c.next):a.appendTo(c.parent);else{var c=a.jQ[0].getBoundingClientRect(),f=p();e.seek(a,c.left,c.bottom,e,f)}break}c=c.parent.parent}while(c)}return a.clearSelection().show()}b.init=function(b){this.parent=this.root=b;var c=this.jQ=this._jQ=a('<span class="cursor"><span class="line">&zwj;</span></span>');this.blink=
function(){c.toggleClass("blink")};this.upDownCache={}};b.prev=0;b.next=0;b.parent=0;b.handle=0;b.showHandle=function(){this.handle||(this.handle=a('<span class="handle"></span>').appendTo(this.jQ));return this};b.hideHandle=function(){this.handle&&(this.handle.remove(),delete this.handle);return this};b.show=function(a){a||this.hideHandle();this.jQ=this._jQ.removeClass("blink");"intervalId"in this?clearInterval(this.intervalId):(this.next?this.selection&&this.selection.first.prev===this.prev?this.jQ.insertBefore(this.selection.jQ):
this.jQ.insertBefore(this.next.jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus());this.intervalId=setInterval(this.blink,500);return this};b.hide=function(){"intervalId"in this&&clearInterval(this.intervalId);delete this.intervalId;this.jQ.detach();this.jQ=a();return this};b.insertAt=function(a,b,c){var d=this.parent;this.parent=a;this.prev=b;this.next=c;d.blur()};b.insertBefore=function(a){this.insertAt(a.parent,a.prev,a);this.parent.jQ.addClass("hasCursor");this.jQ.insertBefore(a.jQ.first());
return this};b.insertAfter=function(a){this.insertAt(a.parent,a,a.next);this.parent.jQ.addClass("hasCursor");this.jQ.insertAfter(a.jQ.last());return this};b.prependTo=function(a){this.insertAt(a,0,a.firstChild);this.jQ.prependTo(a.jQ);a.focus();return this};b.appendTo=function(a){this.insertAt(a,a.lastChild,0);this.jQ.appendTo(a.jQ);a.focus();return this};b.hopLeft=function(){this.jQ.insertBefore(this.prev.jQ.first());this.next=this.prev;this.prev=this.prev.prev;return this};b.hopRight=function(){this.jQ.insertAfter(this.next.jQ.last());
this.prev=this.next;this.next=this.next.next;return this};b.moveLeftWithin=function(a){this.prev?this.prev instanceof S?this.appendTo(this.prev.lastChild):this.prev.up instanceof C?this.appendTo(this.prev.up):this.prev.firstChild?this.appendTo(this.prev.firstChild):this.hopLeft():this.parent!==a?this.insertBefore(this.parent.parent):a.moveOutOf&&a.moveOutOf("left",this)};b.moveRightWithin=function(a){this.next?this.next.up instanceof C?this.prependTo(this.next.up):this.next.firstChild?this.prependTo(this.next.firstChild):
this.hopRight():this.parent!==a?this.insertAfter(this.parent.parent):a.moveOutOf&&a.moveOutOf("right",this)};b.moveLeft=function(){this.upDownCache={};this.selection?this.insertBefore(this.selection.first).clearSelection():this.moveLeftWithin(this.root);this.root.triggerSpecialEvent("cursorMoved");return this.show()};b.moveRight=function(){this.upDownCache={};this.selection?this.insertAfter(this.selection.last).clearSelection():this.moveRightWithin(this.root);this.root.triggerSpecialEvent("cursorMoved");
return this.show()};b.moveUp=function(){return d(this,"up")};b.moveDown=function(){return d(this,"down")};b.seek=function(a,b,d,e,f){this.upDownCache={};f=this.clearSelection().show(f);var g=a.attr(c)||a.attr("mathquill-command-id");g||(a=a.parent(),g=a.attr(c)||a.attr("mathquill-command-id"));a=g?y[g]:f.root;u("nodeId is the id of some Node that exists",a);a.seek(f,b,d,f.root,e);return f};b.writeLatex=function(a){this.upDownCache={};this.show().deleteSelection();var b=m.all;(a=da.skip(m.eof).or(b.result(!1)).parse(a))&&
!a.isEmpty()&&(a.children().adopt(this.parent,this.prev,this.next),b=a.join("html"),y.jQize(b).insertBefore(this.jQ),this.prev=a.lastChild,a.finalizeInsert(),this.parent.bubble("redraw"));return this};b.write=b.insertCh=function(a){if("^"!=a&&"_"!=a||this.prev)if("+"!=a&&"="!=a&&"-"!=a&&"<"!=a&&">"!=a||"^"!==this.parent.parent.ctrlSeq&&"_"!==this.parent.parent.ctrlSeq||this.next||!this.prev||this.moveRight(),"^"===a&&this.prev instanceof Y&&("^"===this.prev.ctrlSeq||"^"===this.prev.prev.ctrlSeq))this.moveUp();
else if("^"===a&&this.next instanceof Y&&("^"===this.next.ctrlSeq||this.next.next&&"^"===this.next.next.ctrlSeq))this.moveUp();else if("_"===a&&this.prev instanceof Y&&("_"===this.prev.ctrlSeq||"_"===this.prev.prev.ctrlSeq))this.moveDown();else{this.upDownCache={};this.show();var b;b=a.match(/^[a-z]$/i)?aa(a):(b=J[a]||A[a])?b(a):U(a);this.selection&&(this.prev=this.selection.first.prev,this.next=this.selection.last.next,b.replaces(this.selection),delete this.selection);return this.insertNew(b)}};
b.insertNew=function(a){a.createBefore(this);return this};b.insertCmd=function(a,b){this.upDownCache={};this.show();var c=A[a];c?(c=c(a),b&&c.replaces(b),this.insertNew(c)):(c=X(),c.replaces(a),c.firstChild.focus=function(){delete this.focus;return this},this.insertNew(c).insertAfter(c),b&&b.remove());return this};b.unwrapGramp=function(){var a=this.parent.parent,b=a.parent,c=a.next,d=a.prev;a.disown().eachChild(function(e){e.isEmpty()||(e.children().adopt(b,d,c).each(function(b){b.jQ.insertBefore(a.jQ.first())}),
d=e.lastChild)});if(!this.next)if(this.prev)this.next=this.prev.next;else for(;!this.next;)if(this.parent=this.parent.next)this.next=this.parent.firstChild;else{this.next=a.next;this.parent=b;break}this.next?this.insertBefore(this.next):this.appendTo(b);a.jQ.remove();a.prev&&a.prev.respace();a.next&&a.next.respace()};b.backspace=function(){this.upDownCache={};this.show();if(!this.deleteSelection())if(this.prev)if(this.prev.isEmpty()){if("\\le "===this.prev.ctrlSeq)var a=A["<"]("<");else"\\ge "===
this.prev.ctrlSeq&&(a=A[">"](">"));this.prev=this.prev.remove().prev;a&&this.insertNew(a)}else{if(this.prev instanceof V)return this.appendTo(this.prev.firstChild).deleteForward();this.selectLeft()}else if(this.parent!==this.root){if(this.parent.parent.isEmpty())return this.insertAfter(this.parent.parent).backspace();if(this.next instanceof V)return this.prependTo(this.next.firstChild).backspace();this.unwrapGramp()}else this.root.triggerSpecialEvent("backspacePressed");this.prev&&this.prev.respace();
this.next&&this.next.respace();this.parent.bubble("redraw");return this};b.deleteForward=function(){this.upDownCache={};this.show();if(!this.deleteSelection())if(this.next)this.next.isEmpty()?this.next=this.next.remove().next:this.selectRight();else if(this.parent!==this.root){if(this.parent.parent.isEmpty())return this.insertBefore(this.parent.parent).deleteForward();this.unwrapGramp()}else this.root.triggerSpecialEvent("delPressed");this.prev&&this.prev.respace();this.next&&this.next.respace();
this.parent.bubble("redraw");return this};b.selectFrom=function(a){var b=this,c=a;a:do{for(var d=this;d!==b.parent.parent;d=d.parent.parent)if(d.parent===c.parent){e=d;f=c;break a}for(d=a;d!==c.parent.parent;d=d.parent.parent)if(b.parent===d.parent){e=b;f=d;break a}b.parent.parent&&(b=b.parent.parent);c.parent.parent&&(c=c.parent.parent)}while(b.parent.parent||c.parent.parent);u("cursor and anticursor are in the same tree",e&&f);var e,f,g;if(e.next!==f){for(a=e;a;a=a.next)if(a===f.prev){g=!0;break}g||
(g=f,f=e,e=g)}this.hide().selection=$(e.prev.next||e.parent.firstChild,f.next.prev||f.parent.lastChild);this.insertAfter(f.next.prev||f.parent.lastChild);this.root.selectionChanged()};b.selectLeft=function(){this.upDownCache={};if(this.selection)if(this.selection.first===this.next)this.prev?this.hopLeft().selection.extendLeft():this.parent!==this.root&&this.insertBefore(this.parent.parent).selection.levelUp();else{this.hopLeft();if(this.selection.first===this.selection.last){this.clearSelection().show();
return}this.selection.retractLeft()}else{if(this.prev)this.hopLeft();else if(this.parent!==this.root)this.insertBefore(this.parent.parent);else return;this.hide().selection=$(this.next)}this.root.selectionChanged()};b.selectRight=function(){this.upDownCache={};if(this.selection)if(this.selection.last===this.prev)this.next?this.hopRight().selection.extendRight():this.parent!==this.root&&this.insertAfter(this.parent.parent).selection.levelUp();else{this.hopRight();if(this.selection.first===this.selection.last){this.clearSelection().show();
return}this.selection.retractRight()}else{if(this.next)this.hopRight();else if(this.parent!==this.root)this.insertAfter(this.parent.parent);else return;this.hide().selection=$(this.prev)}this.root.selectionChanged()};b.prepareMove=function(){this.upDownCache={};return this.show().clearSelection()};b.prepareEdit=function(){this.upDownCache={};return this.show().deleteSelection()};b.clearSelection=function(){this.selection&&(this.selection.clear(),delete this.selection,this.root.selectionChanged());
return this};b.deleteSelection=function(){if(!this.selection)return!1;this.prev=this.selection.first.prev;this.next=this.selection.last.next;this.selection.remove();this.root.selectionChanged();return delete this.selection}}),$=d(D,function(a,b){a.init=function(){b.init.apply(this,arguments);this.jQwrap(this.jQ)};a.jQwrap=function(a){this.jQ=a.wrapAll('<span class="selection"></span>').parent()};a.adopt=function(){this.jQ.replaceWith(this.jQ=this.jQ.children());return b.adopt.apply(this,arguments)};
a.clear=function(){this.jQ.replaceWith(this.jQ.children());return this};a.levelUp=function(){var a=this.first=this.last=this.last.parent.parent;this.clear().jQwrap(a.jQ);return this};a.extendLeft=function(){this.first=this.first.prev;this.first.jQ.prependTo(this.jQ)};a.extendRight=function(){this.last=this.last.next;this.last.jQ.appendTo(this.jQ)};a.retractRight=function(){this.first.jQ.insertBefore(this.jQ);this.first=this.first.next};a.retractLeft=function(){this.last.jQ.insertAfter(this.jQ);this.last=
this.last.prev}});a.fn.mathquill=function(d,e){switch(d){case "focus":case "blur":return this.each(function(){var b=a(this).attr(c);(b=b&&y[b])&&b.textarea&&b.textarea.children().trigger(d)});case "onKey":case "onText":return this.each(function(){var f=a(this).attr(c),g=(f=f&&y[f])&&f.cursor;g&&(g.parent.bubble(d,e,{preventDefault:b}),f.blurred&&g.hide().parent.blur())});case "redraw":return this.each(function(){var b=a(this).attr(c);(b=b&&y[b])&&function Ka(a){a.eachChild(Ka);a.redraw&&a.redraw()}(b)});
case "revert":return this.each(function(){var b=a(this).attr(c);(b=b&&y[b])&&b.revert&&b.revert()});case "sliderLatex":return this.each(function(){var b=a(this).attr(c);if(b=b&&y[b])(m=b&&b.cursor)&&m.clearSelection(),b.renderSliderLatex(e),b.triggerSpecialEvent("render")});case "latex":if(1<arguments.length)return this.each(function(){var b=a(this).attr(c);if(b=b&&y[b])(m=b&&b.cursor)&&m.clearSelection(),b.renderLatex(e),b.triggerSpecialEvent("render")});var f=a(this).attr(c);return(f=f&&y[f])&&
f.latex();case "text":return(f=(f=a(this).attr(c))&&y[f])&&f.text();case "html":return this.children(":last").html().replace(/ ?hasCursor|hasCursor /,"").replace(/ class=(""|(?= |>))/g,"").replace(/<span class="?cursor( blink)?"?>.?<\/span>/i,"");case "write":if(1<arguments.length)return this.each(function(){var b=a(this).attr(c),d=(b=b&&y[b])&&b.cursor;d&&(d.writeLatex(e),b.blurred&&d.hide().parent.blur())});case "cmd":if(1<arguments.length)return this.each(function(){var b=a(this).attr(c),d=(b=
b&&y[b])&&b.cursor;if(d){if(/^\\[a-z]+$/i.test(e)){var f=d.selection;f&&(d.prev=f.first.prev,d.next=f.last.next,delete d.selection);d.insertCmd(e.slice(1),f)}else d.insertCh(e);b.blurred&&d.hide().parent.blur()}});case "touchtap":var g=arguments[1],h=arguments[2],l=arguments[3];return this.each(function(){var b=a(this).attr(c),d=(b=b&&y[b])&&b.cursor;if(d&&g!==d.handle[0]){var e=b.blurred;b.textarea.children().focus();d.seek(q(h,l,b),h,l,p(),!0);e||d.showHandle()}});case "ignoreNextMousedown":var n=
arguments[1];return this.each(function(){var b=a(this).attr(c),d=b&&y[b];d&&(d.ignoreMousedownTimeout=setTimeout(function(){d.ignoreMousedownTimeout=k},n))});case "moveStart":(f=(f=a(this).attr(c))&&y[f])&&f.cursor&&f.cursor.prependTo(f);break;case "moveEnd":(f=(f=a(this).attr(c))&&y[f])&&f.cursor&&f.cursor.appendTo(f);break;case "isAtStart":var m=(f=(f=a(this).attr(c))&&y[f])&&f.cursor;if(m)return m.parent===m.root&&!m.prev;break;case "isAtEnd":if(m=(f=(f=a(this).attr(c))&&y[f])&&f.cursor)return m.parent===
m.root&&!m.next;break;case "selection":m=(f=(f=a(this).attr(c))&&y[f])&&f.cursor;if(!m)break;return m.selection?"$"+m.selection.latex()+"$":"";case "clearSelection":return this.each(function(){var b=a(this).attr(c),d=(b=b&&y[b])&&b.cursor;d&&(d.clearSelection(),b.blurred&&d.hide().parent.blur())});default:var r="textbox"===d,s=r||"editable"===d,u=r?H:F;return this.each(function(){w(a(this),u(),r,s)})}};a(function(){a(".mathquill-editable:not(.mathquill-rendered-math)").mathquill("editable");a(".mathquill-textbox:not(.mathquill-rendered-math)").mathquill("textbox");
a(".mathquill-embedded-latex").mathquill()})})();I("mathquill",function(){});I("template!expression_item",["underscore"],function(b){return function(b){with(b||{})b="",b=renderShell?b+"\n\n<div class=\"do-not-blur expressionitem shell\">\n  <div class='shell'></div>\n</div>\n\n":b+('\n\n<div class="do-not-blur expressionitem">\n  <div class=\'fade-container\'>\n\n    <div class="fadeout-left"></div>\n  \n    <span class="main">\n      <span class="transient-mathquill"></span>\n      <span class="template-mathquill"></span>\n    </span>\n\n    <span class="fadeout"></span>\n    <i class="icon-remove top-level-delete action-delete" handleEvent="true"></i>\n\n    <div class="template-bottom"></div>\n  </div>\n\n  <span class="tab action-drag action-icon-touch"\n        handleevent="true"\n        tapboundary="true"\n        disablescroll="true"\n  >\n    <span class="num variable-index"></span>\n    <span class="tab-interior action-icon-mouse">\n      <span class="template-expricon"></span>\n    </span>\n  </span>\n\n\n  <span class="exp-actions">\n    <span class="graphic" handleEvent="true"></span>\n    <nobr>\n      <span class="action-delete delete-btn tooltip" handleEvent="true" tooltip="'+
t("Delete")+'"><i class=\'icon-remove\'></i></span>\n      <span class="action-duplicate duplicate-btn tooltip" handleEvent="true" tooltip="'+t("Duplicate")+'"><i class=\'icon-duplicate\'></i></span>\n      <span class="action-createtable tooltip" tooltip="'+t("Convert to Table")+'" handleEvent="true">\n        <i class=\'icon-table\'></i>\n      </span>\n    </nobr>\n  </span>\n</div>\n\n');return b+"\n"}});I("expressions/abstractitem_view",["require","pjs","jquery","lib/underscore_view","undoredo"],
function(b){var h=b("pjs"),u=b("jquery"),w=b("lib/underscore_view"),q=b("undoredo");return h(w,function(b,h){b.init=function(a,b){h.init.call(this);this.model=a;this.listView=b;this.model.selected&&(this.model.renderShell=!1);this.model.observe("index.itemview",this.renderIndex.bind(this));this.model.observe("selected.itemview",this.renderSelected.bind(this));this.model.observe("renderShell.itemview",this.rerender.bind(this));this.model.observe("folder.itemview",this.renderFolder.bind(this));this.model.observe("inCollapsedFolder.itemview",
this.renderCollapsedFolder.bind(this))};b.onProjectorModeChange=function(){};b.destruct=function(){this.model.unobserve(".itemview");this.setProperty("transient",!1)};b.getTemplateParams=function(){return{renderShell:this.model.renderShell,inCollapsedFolder:this.model.inCollapsedFolder}};b.renderIndex=function(){var a=this.model.index;this.$().attr("index",a);this.$(".variable-index").text(a+1)};b.renderFolder=function(){this.$().toggleClass("inFolder",!!this.model.folder)};b.renderCollapsedFolder=
function(){this.$().toggleClass("inCollapsedFolder",!!this.model.inCollapsedFolder);this.model.inCollapsedFolder||this.$(".mathquill-rendered-math").mathquill("redraw")};b.renderSelected=function(){this.model.selected&&this.model.renderShell&&this.model.setProperty("renderShell",!1);this.$().toggleClass("selected",!!this.model.selected)};b.didInsertElement=function(){h.didInsertElement.call(this);var a=this;this.$().on("tap tapstart",function(b){if("tap"!==b.type||"mouse"!==b.device)if("tapstart"!==
b.type||"touch"!==b.device)a.onMouseSelect(b)});this.$(".action-drag").on("tapstart",this.onDragPending.bind(this));this.$(".action-delete").on("tap",this.onDelete.bind(this));this.$().attr("expr-id",this.model.id);this.renderIndex();this.renderSelected();this.renderFolder();this.renderCollapsedFolder()};b.triggerDelete=function(){};b.triggerEnterPressed=function(){};b.triggerUpPressed=function(){};b.triggerDownPressed=function(){};b.triggerBackspacePressed=function(){};b.triggerDelPressed=function(){};
b.onMouseSelect=function(){};b.sendTapToMathQuill=function(a,b){"mouse"===a.device&&a.preventDefault();if("mouse"===a.device){if(!u.contains(b[0],a.target)){var c=u.event.fix(a.originalEvent);b.triggerHandler(c)}}else c=a.originalEvent.changedTouches[0],b.mathquill("touchtap",c.target,c.clientX,c.clientY).mathquill("ignoreNextMousedown",1E3)};b.onDelete=function(){this.triggerDelete()};b.convertTo=function(a,b){var c=a(b),g=this.model.index,f=this.model.list,e=this.model.folder;c.setProperty("list",
f);q.oneTransaction(function(){f.removeItemAt(g);f.insertItemAt(g,c);e&&e.addItem(c)});return c};b.getBounds=function(){var a=this.$(),b=a.offset();if(!b)return null;b=b.top;a=a.height();return{top:b,bottom:b+a}};b.allowDragDrop=function(){return!0};b.onDragPending=function(a){u(document.activeElement).blur();if(this.allowDragDrop()){var b=this;this.mouseMovedTo=null;var c=setTimeout(function(){u(document).off(".dragpending");b.onDragStart(a)},500);u(document).on("tapmove.dragpending",function(g){b.mouseMovedTo=
g.touches[0];g=a.touches[0].x-b.mouseMovedTo.x;var f=a.touches[0].y-b.mouseMovedTo.y;3<Math.sqrt(g*g+f*f)&&(clearTimeout(c),u(document).off(".dragpending"),b.onDragStart(a))});u(document).on("tapend.dragpending",function(a){clearTimeout(c);u(document).off(".dragpending")})}};b.onDragStart=function(a){this.allowDragDrop()&&(this.listView.dragdrop_expressions.start(a,this),this.mouseMovedTo&&this.listView.dragdrop_expressions.drag(this.mouseMovedTo.x,this.mouseMovedTo.y))};b.hideContextMenu=function(){window.opened_options_menu&&
window.opened_options_menu.hideOptions()};b.processMissedKeyEvent=function(a){};b.addFocus=function(a){};b.isFocused=function(){return!1}})});I("expressions/expression_view","require jquery pjs config ./expression_icon_view expressions/evaluation expressions/domain_view expressions/slider_view expressions/promptslider_view ./expression graphing/columnmode main/toast ./text ./table mathquill lib/keys undoredo lib/track_feature template!expression_item expressions/abstractitem_view".split(" "),function(b){var h=
b("jquery"),u=b("pjs"),w=b("config"),q=b("./expression_icon_view"),p=b("expressions/evaluation"),s=b("expressions/domain_view"),a=b("expressions/slider_view"),k=b("expressions/promptslider_view"),c=b("./expression"),g=b("graphing/columnmode"),f=b("main/toast"),e=b("./text"),d=b("./table");b("mathquill");var l=b("lib/keys"),m=b("undoredo"),x=b("lib/track_feature"),r=b("template!expression_item");b=b("expressions/abstractitem_view");return u(b,function(b,u){b.template=r;b.init=function(a,b){u.init.call(this,
a,b);this.model.observe("formula.exprview",this.onFormulaChange.bind(this));this.model.observe("selected.exprview",this.onSelectedChange.bind(this));this.model.observe("latex.exprview",this.onLatexChange.bind(this));this.model.observe("dependent.exprview",this.renderDependent.bind(this));this.model.observe("isTableable.exprview",this.renderIsTableable.bind(this));this.observe("shouldExpand",this.observeShouldExpand.bind(this));this.observe("doAnimate",this.renderDoAnimate.bind(this));this.observe("expanded",
this.renderExpanded.bind(this))};b.renderIsTableable=function(){this.$(".action-createtable").toggleClass("disabled",!this.model.isTableable)};b.destruct=function(){u.destruct.call(this);this.model.unobserve(".exprview");this.iconView&&(this.iconView.remove(),this.iconView=null);this.sliderView&&(this.sliderView.remove(),this.sliderView=null);this.promptSliderView&&(this.promptSliderView.remove(),this.promptSliderView=null);this.domainView&&(this.domainView.remove(),this.domainView=null);this.evaluationView&&
(this.evaluationView.remove(),this.evaluationView=null)};b.renderExpanded=function(){this.$().toggleClass("expanded",!!this.expanded)};b.renderDoAnimate=function(){this.$().toggleClass("do-animate",!!this.doAnimate)};b.onLatexChange=function(){if(this.sliderView&&this.sliderView.slider.transient)this.updateTransientValue();else{var a=this.model.latex;'"'===a||"'"===a?(this.convertTo(e,{selected:!0}),this.listView.getSelectedView().addFocus()):(this.listView.onLatexChange(a),this.updateMathquill())}};
b.updateMathquill=function(){if(this.mathquill){var a=this.model.latex;void 0!==a&&this.mathquill.mathquill("latex")!==a&&this.mathquill.mathquill("latex",a)}};b.updateTransientValue=function(){this.$transientValue[0].innerHTML=this.model.slider.computeSnappedValue(this.model.slider.value).toString().replace("-",'<span class="unary-operator">−</span>')};b.createIconView=function(){return q(this)};b.createSliderView=function(){return a(this.model.slider,this)};b.createPromptSliderView=function(){return k(this)};
b.createDomainView=function(){return s(this.model.domain)};b.createEvaluationView=function(){return p(this)};b.onFormulaChange=function(){if(!this.model.renderShell){var a=this.model.formula,b=a.is_slidable;this.sliderView&&!b?(this.sliderView.slider.unobserve(".expressionView"),this.sliderView.remove(),this.sliderView=null,this.$().removeClass("hasSlider")):!this.sliderView&&b&&(this.sliderView=this.createSliderView())&&(this.sliderView.appendTo(this.$(".template-bottom")),this.sliderView.setProperty("dependentLabel",
this.getDependentLabel()),this.$().addClass("hasSlider"),this.sliderView.slider.observe("transient.expressionView",this.updateTransient.bind(this)));b=0<a.variables.length;this.promptSliderView&&!b?(this.promptSliderView.remove(),this.promptSliderView=null):!this.promptSliderView&&b&&(this.promptSliderView=this.createPromptSliderView())&&this.promptSliderView.appendTo(this.$(".template-bottom"));b=a.is_parametric;this.domainView&&!b?(this.domainView.remove(),this.domainView=null,this.$().removeClass("hasDomain")):
!this.domainView&&b&&(this.domainView=this.createDomainView())&&(this.domainView.appendTo(this.$(".template-bottom")),this.$().addClass("hasDomain"));b=a.is_evaluable;this.evaluationView&&!b?(this.evaluationView.remove(),this.evaluationView=null):!this.evaluationView&&b&&(this.evaluationView=this.createEvaluationView())&&(this.evaluationView.appendTo(this.$(".template-bottom")),this.$().addClass("hasEvaluation"),this.evaluationView.setProperty("dependentLabel",this.getDependentLabel()));this.sliderView&&
!this.sliderView.slider.transient&&this.model.slider.setProperty("value",a.simple_constant);this.promptSliderView&&this.promptSliderView.setProperty("variables",a.variables);this.evaluationView&&this.evaluationView.setProperty("evaluations",a.zero_values);this.setProperty("shouldExpand",!!(this.evaluationView||this.promptSliderView||this.sliderView||this.domainView))}};b.renderDependent=function(){this.sliderView&&this.sliderView.setProperty("dependentLabel",this.getDependentLabel());this.evaluationView&&
this.evaluationView.setProperty("dependentLabel",this.getDependentLabel())};b.didInsertElement=function(){u.didInsertElement.call(this);this.model.renderShell||(this.mathquill=this.$(".template-mathquill").mathquill("editable"),this.$transientLhs=this.$(".transient-mathquill").mathquill("editable"),this.$transientLhs.hide(),this.$transientValue=h("<span>"),this.mathquill.on("render upPressed downPressed enterPressed backspacePressed delPressed keydown focusin focus",this.onMathquillEvent.bind(this)),
this.$transientLhs.on("tapstart",this.onSelectTransient.bind(this)),this.mathquill.mathquill("latex",this.model.latex||""),(this.iconView=this.createIconView())&&this.iconView.replace(this.$(".template-expricon")),this.$(".action-duplicate").on("tap",this.onDuplicateWithoutFocus.bind(this)),this.$(".action-createtable").on("tap",this.onCreateTable.bind(this)),this.renderDoAnimate(),this.renderExpanded(),this.renderIsTableable(),this.onFormulaChange())};b.onSelectedChange=function(){!this.model.selected&&
this.mathquill&&this.mathquill.mathquill("clearSelection").mathquill("blur")};b.onSelectTransient=function(){this.stopTransient();this.mathquill.mathquill("focus")};b.onMathquillEvent=function(a){switch(a.type){case "render":this.model.setProperty("latex",this.mathquill.mathquill("latex"));break;case "focus":case "focusin":this.sliderView&&this.sliderView.slider.setProperty("isPlaying",!1);this.model.setProperty("selected",!0);break;case "upPressed":this.triggerUpPressed();break;case "downPressed":this.triggerDownPressed();
break;case "enterPressed":this.triggerEnterPressed();break;case "backspacePressed":if(!this.model.isEmpty())break;this.triggerBackspacePressed();break;case "delPressed":if(!this.model.isEmpty())break;this.triggerDelPressed();break;case "keydown":l.lookup(a)===l.ESCAPE&&h(document.activeElement).blur()}};b.createSliders=function(a){for(var b=[],d=0;d<a.length;d++)b.push({latex:a[d]+"=1",sliderMin:-10,sliderMax:10,userRequestedGraphing:"never"});var e=this.model.folder,f=this.model.index+1,g=this.model.list;
m.addTransaction({type:m.CAUSE_OF_CHANGE,undo:function(){for(var b=0;b<a.length;b++)g.removeItemAt(f)},redo:function(){for(var a=b.length-1;0<=a;a--){var d=c(b[a],g);b[a].id=d.id;g.insertItemAt(f,d);e&&e.addItem(d)}}});this.tempDisableAnimate()};b.onDuplicate=function(){var a=this.onDuplicateWithoutFocus();this.listView.getItemView(a.id).addFocus()};b.onDuplicateWithoutFocus=function(){var a=this.model.index,b=this.model.getState();b.selected=!1;delete b.id;b=c(b,this.model.list);this.model.list.insertItemAt(a+
1,b);return b};b.onMouseSelect=function(a){this.listView.editListMode||a.wasHandled()||(a.handle(),this.model.setProperty("selected",!0),this.sendTapToMathQuill(a,this.mathquill))};b.getDependentLabel=function(){var a=this.model.dependent;if(!a)return"";a.match(/(.*)_(.+)/)&&(a=a.replace(/(.*)_(.+)/,"$1_{$2}"));a=h("<span>"+a+"</span>").mathquill("editable").mathquill("html");return"<span class='mathquill-rendered-math'>"+a+"</span>"};b.tempDisableAnimate=function(){var a=this;a.setProperty("doAnimate",
!1);clearTimeout(a.restoreAnimationTimeout);a.restoreAnimationTimeout=setTimeout(function(){a.setProperty("doAnimate",!0)},500)};b.observeShouldExpand=function(){var a=this;clearTimeout(a.animateTimeout);this.doAnimate?a.animateTimeout=setTimeout(function(){a.setProperty("expanded",a.shouldExpand)},500):a.setProperty("expanded",a.shouldExpand)};b.startTransient=function(){this.setProperty("transient",!0);this.updateTransientValue();this.$transientLhs.show();this.mathquill.hide();this.$transientLhs.mathquill("latex",
this.model.latex.replace(/=[^=]+$/,"="));this.$transientLhs.children(".mathquill-root-block").append(this.$transientValue)};b.stopTransient=function(){this.setProperty("transient",!1);this.$transientValue.remove();this.$transientLhs.hide();this.mathquill.show();this.updateMathquill()};b.updateTransient=function(){this.sliderView.slider.transient?this.startTransient():this.stopTransient()};b.isFocused=function(){return 0!==h(document.activeElement).closest(this.mathquill).length};b.addFocus=function(a){!w.get("no_focus")&&
this.mathquill&&(this.mathquill.mathquill("focus"),"start"===a?this.mathquill.mathquill("moveStart"):"end"===a&&this.mathquill.mathquill("moveEnd"))};b.onCreateTable=function(){var a=this.model.formula;x.use("convert to table");if(this.model.isTableable){var b=a.table_info,c=this.model.index,e={selected:!0},h=g.POINTS_AND_LINES;if(a.is_point_list||"never"===this.model.userRequestedGraphing)h=g.POINTS;var k=[],l=[];if(b.values)for(a=0;a<b.values.length;a++)k.push(b.values[a][0]),l.push(b.values[a][1]);
else for(a=-2;2>=a;a++)k.push(a),l.push("");e.columns=[{latex:b.independent_variable,values:k},{latex:b.dependent_column,color:this.model.color,hidden:!1,columnMode:h,values:l}];var n=this.model.list,p=this.listView;p.setProperty("editListMode",!1);m.oneTransaction(function(){b.by_reference||(n.removeItemAt(c),c--);var a=d(e,n);n.insertItemAt(c+1,a)});f.show("Table created.",function(){p.setProperty("editListMode",!0)})}}})});I("template!text",["underscore"],function(b){return function(b){with(b||
{})b="",b=renderShell?b+"\n\n<div class=\"do-not-blur expressionitem expressiontext shell\">\n  <div class='shell'></div>\n</div>\n\n":b+('\n\n<div class="do-not-blur expressiontext expressionitem">\n  <div class=\'fade-container\'>\n\n    <span class="main">\n      <textarea class="do-blur" placeholder="'+t("enter some text...")+'"></textarea>\n      <div class="displayTextarea"></div>\n    </span>\n    <i class="icon-remove top-level-delete action-delete" handleEvent="true"></i>\n\n  </div>\n\n  <span class="tab action-drag"\n        handleevent="true"\n        tapboundary="true"\n        disablescroll="true"\n  >\n    <span class=\'num variable-index\'></span>\n    <div class=\'tab-interior\'></div>\n    <i class=\'icon-text\'></i>\n  </span>\n\n  <span class=\'exp-actions\'>\n    <span\n      class="action-delete delete-btn tooltip"\n      handleEvent="true"\n      tooltip="'+
t("Delete")+"\"\n    >\n      <i class='icon-remove'></i>\n    </span>\n  </span>\n\n</div>\n\n");return b+""}});I("expressions/text_view","require jquery pjs ./abstractitem_view lib/keys template!text lib/browser".split(" "),function(b){var h=b("jquery"),u=b("pjs"),w=b("./abstractitem_view"),q=b("lib/keys"),p=b("template!text"),s=b("lib/browser");return u(w,function(a,b){a.template=p;a.init=function(a,g){b.init.call(this,a,g);this.model.observe("selected.textview",this.onSelectedChange.bind(this));
this.model.observe("text.textview",this.renderText.bind(this))};a.destruct=function(){this.model.unobserve(".textview")};a.onProjectorModeChange=function(){this.fitText()};a.renderText=function(){var a=this.$("textarea")[0],b=this.$(".displayTextarea");a&&(a.value=this.model.text,b.html(this.model.markedUpText()),this.fitText(),this.$().toggleClass("empty",this.model.isEmpty()),setTimeout(this.fitText.bind(this),1))};a.didInsertElement=function(){b.didInsertElement.call(this);if(!this.model.renderShell){var a=
this.$("textarea"),g=this.$(".displayTextarea");this.renderShell||(g.on("tap tapstart",function(a){"A"===a.target.tagName&&a.handle()}.bind(this)),a.focus(function(){this.model.setProperty("selected",!0)}.bind(this)),a.bind("keydown keypress keyup change cut paste",this.onTextareaEvent.bind(this)),this.renderText())}};a.onTextareaEvent=function(a){var b=this.$("textarea")[0],f=b&&b===document.activeElement,e=f?b.value.length:0,f=f&&"keydown"===a.type?q.lookup(a):"";f===q.ENTER?(a.preventDefault(),
this.triggerEnterPressed()):f===q.ESCAPE?h(document.activeElement).blur():f===q.UP?0===b.selectionStart&&0===b.selectionEnd&&(a.preventDefault(),this.triggerUpPressed()):f===q.DOWN?b.selectionStart===e&&b.selectionEnd===e&&(a.preventDefault(),this.triggerDownPressed()):f===q.BACKSPACE?0===e&&(a.preventDefault(),this.triggerBackspacePressed()):f===q.DELETE?0===e&&(a.preventDefault(),this.triggerDelPressed()):this.model.setProperty("text",b.value)};a.onSelectedChange=function(){var a=this.$("textarea");
this.model.selected||a[0]&&a[0].blur()};a.onMouseSelect=function(a){a.wasHandled()||(a.handle(),this.model.setProperty("selected",!0))};a.fitText=function(){var a=this.$("textarea"),b=a[0];if(b){var f=0;do f++,a.attr("rows",f);while(b.clientHeight<b.scrollHeight)}};a.isFocused=function(){return 0!==h(document.activeElement).closest(this.$()).length};a.addFocus=function(a){if(!s.IS_IPAD||!s.IS_IN_IFRAME){var b=this.$("textarea")[0];b&&(b.focus(),"end"===a?b.selectionStart=b.selectionEnd=b.value.length:
"start"===a&&(b.selectionStart=b.selectionEnd=0))}}})});I("template!table_icon",["underscore"],function(b){return function(b){with(b||{});return'<span class="icon-box variable-errortooltip tipsy-sticky action-icon do-not-blur" \n      handleevent="true"\n      disablescroll="true"\n>\n  <span class="icon graph-icon variable-colorcss">\n    <i class=\'icon-hidden\'></i>\n\t</span>\n</span>'}});I("template!table_column_menu",["underscore"],function(b){return function(b){with(b||{})b=""+("<div class='table-column-menu options-menu'>\n  <div class='triangle'></div>\n  <div class='styles-div'>\n    <div class='title'>"+
t("style:")+"</div>\n    <div>\n      <span class='columnmode-option graph-icon table-points variable-colorcss' mode=\"POINTS\"></span>\n      <span class='columnmode-option graph-icon table-lines variable-colorcss' mode=\"LINES\"></span>\n      <span class='columnmode-option graph-icon table-points-and-lines variable-colorcss' mode=\"POINTS_AND_LINES\"></span>\n    </div>\n  </div>\n  <div class='colors-div'>\n    <div class='title'>"+t("color:")+'</div>\n    <div class="template-colorsview"></div>\n  </div>\n</div>');
return b}});I("expressions/table_column_menu_view","require pjs lib/underscore_view template!table_column_menu jquery ./color_menu_view".split(" "),function(b){var h=b("pjs"),u=b("lib/underscore_view"),w=b("template!table_column_menu"),q=b("jquery"),p=b("./color_menu_view");return h(u,function(b,a){b.template=w;b.init=function(b,c){a.init.call(this);this.column=c;this.parentView=b;this.column.observe("color.columnmenuview",this.renderColorCSS.bind(this));this.column.observe("columnMode.columnmenuview",
this.renderSelectedColumnMode.bind(this));this.column.observe("shouldGraph.columnmenuview",this.renderSelectedColumnMode.bind(this))};b.destruct=function(){this.column.unobserve(".columnmenuview")};b.renderColorCSS=function(){var a=this.column.color;this.$(".variable-colorcss").css({"border-color":a,"background-color":a})};b.renderSelectedColumnMode=function(){this.$(".columnmode-option").removeClass("selected");this.column.shouldGraph&&this.$('.columnmode-option[mode="'+this.column.columnMode+'"]').addClass("selected")};
b.didInsertElement=function(){this.$().on("tap tapstart",".columnmode-option",this.onSelectColumnMode.bind(this));this.renderColorCSS();this.renderSelectedColumnMode();p(this.column).replace(this.$(".template-colorsview"))};b.onSelectColumnMode=function(a){if("tap"!==a.type||"mouse"!==a.device)if("tapstart"!==a.type||"touch"!==a.device)a=q(a.target).closest(".columnmode-option").attr("mode"),this.column.hidden||this.column.columnMode!==a?(this.column.setProperty("columnMode",a),this.column.setProperty("hidden",
!1),(a=this.column.table.folder)&&a.setProperty("hidden",!1)):this.column.setProperty("hidden",!0)}})});I("expressions/table_icon_view","require jquery ./abstract_icon pjs template!table_icon graphing/columnmode ./table_column_menu_view".split(" "),function(b){var h=b("jquery"),u=b("./abstract_icon"),w=b("pjs"),q=b("template!table_icon"),p=b("graphing/columnmode"),s=b("./table_column_menu_view");return w(u,function(a,b){a.template=q;a.init=function(a){b.init.call(this,a);this.column=this.model;this.listView=
a.tableView.listView;this.column.observe("color.iconview",this.renderColorCSS.bind(this));this.column.observe("error.iconview",this.onDisplayChange.bind(this));this.column.observe("columnMode.iconview",this.onDisplayChange.bind(this));this.column.observe("shouldGraph.iconview",this.onDisplayChange.bind(this))};a.destruct=function(){b.destruct.call(this);this.column.unobserve(".iconview")};a.renderErrorShown=function(){this.$(".icon").toggleClass("error",!!this.errorShown);this.$().closest(".cell").toggleClass("error",
!!this.errorShown)};a.renderColorCSS=function(){this.$(".variable-colorcss").css("border-color",this.column.color);this.$(".variable-colorcss").css("background",this.column.color)};a.toggleGraphShown=function(){this.column.isGraphable&&(this.errorShown||(this.model.table.folder&&this.model.table.folder.hidden?this.model.table.folder.setProperty("hidden",!1):this.column.setProperty("hidden",!this.column.hidden)))};a.didInsertElement=function(){b.didInsertElement.call(this);var a=this;this.$(".action-icon").on("tap",
function(b){b.wasHandled("dragdrop")||b.wasLongheld()||(a.optionsShown?a.hideOptions():a.listView.editListMode?a.toggleOptions():a.toggleGraphShown())});this.$(".action-icon").on("longhold",function(b){a.optionsShown||a.toggleOptions()});this.$(".action-icon").on("tapstart",function(b){a.optionsShown||1!==b.touches.length||(h(document).on("tapend.dragdrop tapcancel.dragdrop",function(){h(document).off(".dragdrop")}),h(document).on("tapmove.dragdrop",function(f){h(document).off(".dragdrop");1!==f.touches.length||
f.wasLongheld()||a.listView.dragdrop_columns.start(b,a.parentView)}))});this.renderColorCSS();this.onDisplayChange();this.$icon=this.$(".icon")};a.createOptionsMenuView=function(){var a=s(this,this.column);a.appendTo("#main");var b=this.$(".icon-box").offset();a.$().css({position:"absolute",top:b.top+"px",left:b.left+"px",display:"block"});return a};a.onDisplayChange=function(){b.onDisplayChange.call(this);if(this.$icon){var a=this.column.shouldGraph,g=this.column.columnMode,f=this.column.isGraphable,
e="";this.error||!f?e="":a?g===p.POINTS?e="table-points":g===p.LINES?e="table-lines":g===p.POINTS_AND_LINES&&(e="table-points-and-lines"):e="graph-hidden";this.rendered_icon_class!==e&&(this.rendered_icon_class&&this.$icon.removeClass(this.rendered_icon_class),(this.rendered_icon_class=e)&&this.$icon.addClass(e))}}})});I("template!table",["underscore"],function(b){return function(h){var u="",w=function(){u+=Array.prototype.join.call(arguments,"")};with(h||{})u+="",renderShell?u+="\n\n<div class=\"expressionitem expressiontable shell\">\n  <div class='shell'></div>\n</div>\n\n":
(u+='\n\n<div class="expressionitem expressiontable">\n    \n  <div class=\'fade-container disable-horizontal-scroll-to-cursor\'>\n    \n    <span class="main">\n      <div class="tabledata">\n           \n        ',b.each(columns,function(h,p){u+='\n          <div class="column">\n             \n            ';w(templates.table_cell_header());b.each(columns[0].cells,function(b,a){w(templates.table_cell_body())});u+="\n        \n          </div>\n        "}),u+="\n\n      </div>\n    </span>\n    \n    ",
u+='\n    <span class="fadeout"></span>\n    <i class="icon-remove top-level-delete action-delete" handleEvent="true"></i>\n  </div>\n  \n  <span class="tab action-drag"\n        handleevent="true"\n        tapboundary="true"\n        disablescroll="true"\n  >\n    <span class=\'num variable-index\'></span>\n    <div class=\'tab-interior\'></div>\n  </span>\n\n  <span class=\'exp-actions\'>\n\n    <span\n      class="action-delete delete-btn tooltip"\n      handleEvent="true"\n      tooltip="'+t("Delete")+
"\"\n    >\n      <i class='icon-remove'></i></span>\n    </span>  \n</div>\n\n"),u+="\n";return u}});I("template!table_cell_body",["underscore"],function(b){return function(b){with(b||{});return'<div class="non-editable empty cell">\n  <div class="inner-border"></div>\n  <span class="error-indicator do-not-blur tipsy-sticky" handleevent="true">\n  </span>\n\n  <span class=\'mathquill-rendered-math\'></span>\n  <div class="empty-line"></div>\n</div>\n'}});I("template!table_cell_header",["underscore"],
function(b){return function(b){with(b||{});return'<div class="editable cell header">\n  <div class="inner-border"></div>\n  <span class="template-icon"></span>\n  <span class="mathquill-rendered-math"></span>\n  <span class="fadeout"></span>\n  <span class="action-removecolumn icon-remove do-not-blur" handleevent="true"></span>\n  <div class="empty-line"></div>\n</div>\n'}});I("expressions/table_view","require jquery underscore pjs lib/underscore_view undoredo mathquill lib/keys ./abstractitem_view ./table_icon_view template!table template!table_cell_body template!table_cell_header".split(" "),
function(b){var h=b("jquery"),u=b("underscore"),w=b("pjs"),q=b("lib/underscore_view"),p=b("undoredo");b("mathquill");var s=b("lib/keys"),a=b("./abstractitem_view"),k=b("./table_icon_view"),c={};c.table=b("template!table");c.table_cell_body=b("template!table_cell_body");c.table_cell_header=b("template!table_cell_header");b=w(a,function(a,b){a.template=c.table;a.init=function(a,c){b.init.call(this,a,c);this.model.triggerRowRemoved=this.onRowRemoved.bind(this);this.model.triggerRowAdded=this.onRowAdded.bind(this);
this.model.triggerColumnAdded=this.onColumnAdded.bind(this);this.model.triggerColumnRemoved=this.onColumnRemoved.bind(this);this.model.triggerColumnMoved=this.onColumnMoved.bind(this);this.model.observe("selectedCell.tableview",this.onSelectedCellChange.bind(this))};a.destruct=function(){this.model.unobserve(".tableview")};a.getTemplateParams=function(){return{columns:this.model.columns,renderShell:this.model.renderShell,templates:c}};a.onRowRemoved=function(a){if(this.columnViews){a+=1;for(var b=
0;b<this.columnViews.length;b++)this.columnViews[b].splice(a,1)[0].remove();this.model.notifyPropertyChange("selectedCell")}};a.onRowAdded=function(a){if(this.columnViews){for(var b=a+1,c,e=this.model.columns,f=this.columnViews.length,g=this.$(".column"),h=0;h<f;h++)c=e[h].cells[a],c=d(c,this),c.insertAfter(g.eq(h).find(".cell:nth-of-type("+b+")")),this.columnViews[h].splice(b,0,c);this.syncRowHeight(b);this.listView.model.updateDrawOrder();this.model.notifyPropertyChange("selectedCell")}};a.onColumnRemoved=
function(a){if(this.columnViews){for(var b=this.columnViews.splice(a,1)[0],c=0;c<b.length;c++)b[c].remove();this.$(".column:nth-child("+(a+1)+")").remove();(b=this.selectedCell)&&b.column>a?this.setProperty("selectedCell",{row:b.row,column:b.column-1}):b&&b.column===a&&(this.columns.length<=a?this.selectCell(b.row,b.column-1):this.selectCell(b.row,b.column));this.syncAllRowHeights();this.listView.model.updateDrawOrder();this.model.notifyPropertyChange("selectedCell")}};a.onColumnAdded=function(a){if(this.columnViews){var b=
this.model.columns[a],c=b.cells,g=[];g.push(f(b,this));for(b=0;b<c.length-1;b++)g.push(d(c[b],this));g.push(e(c[b],this));this.columnViews.splice(a,0,g);var k=h('<div class="column"></div>').insertAfter(this.$(".column:nth-child("+a+")"));g.forEach(function(a,b){a.appendTo(k)});this.syncAllRowHeights();this.listView.model.updateDrawOrder();this.model.notifyPropertyChange("selectedCell")}};a.onColumnMoved=function(a,b){if(this.columnViews){var c=this.columnViews.splice(a,1)[0];this.columnViews.splice(b,
0,c);this.$(".column:nth-child("+(a+1)+")").detach().insertAfter(this.$(".column:nth-child("+b+")"))}};a.onProjectorModeChange=function(){for(var a=0;a<this.columnViews.length;a++)for(var b=this.columnViews[a],c=0;c<b.length;c++)b[c].collapseHeight();this.syncAllRowHeights()};a.didInsertElement=function(){b.didInsertElement.call(this);if(!this.model.renderShell){var a=this;this.$().on("focusin",function(){setTimeout(a.onFocusChange.bind(a),0)});this.$().on("keydown",this.onMathQuillKeydownEvent.bind(this));
this.$().on("upPressed downPressed leftPressed rightPressed enterPressed backspacePressed delPressed",this.onMathQuillSpecialEvent.bind(this));this.columnViews=[];var c=this.model.columns,h=c.length,k=c[0].cells.length,l,p,q;for(p=0;p<h;p++)q=c[p],q=p+1<h?f(q,this):g(q,this),q.setDomNode(this.findCell(0,p)),this.columnViews[p]=[q];for(l=1;l<=k;l++)for(p=0;p<h;p++)q=c[p].cells[l-1],q=l===k?e(q,this):d(q,this),q.setDomNode(this.findCell(l,p)),this.columnViews[p].push(q);this.syncAllRowHeights();this.onSelectedCellChange()}};
a.measureRowHeight=function(a){for(var b=0,c=0;c<this.columnViews.length;c++){var d=this.columnViews[c][a];void 0===d.collapsedHeight&&d.measureHeight();d.collapsedHeight>b&&(b=d.collapsedHeight)}return b};a.setRowHeight=function(a,b){for(var c=0;c<this.columnViews.length;c++){var d=this.columnViews[c][a];d.setHeight(b);d.setMathquillTop()}};a.syncAllRowHeights=function(){var a,b=this.columnViews[0].length,c=[];for(a=0;a<b;a++)c.push(this.measureRowHeight(a));for(a=0;a<b;a++)this.setRowHeight(a,c[a])};
a.syncRowHeight=function(a){this.setRowHeight(a,this.measureRowHeight(a))};a.onSelectedCellChange=function(){if(this.columnViews){this.$(".tabledata .selected").removeClass("selected");var a=this.model.selectedCell;if(a&&(a.column>=this.columnViews.length||a.row>=this.columnViews[0].length))this.model.selectedCell=null;else{a&&(this.columnViews[a.column][a.row].$().addClass("selected"),this.model.setProperty("selected",!0));var b=this.getCaretPosition();b&&!u.isEqual(b,a)&&document.activeElement&&
document.activeElement.blur();if(a)b=this.findCellInput(a.row,a.column)[0],this.listView.onFocusIn({target:b});else this.listView.onFocusOut();b=a&&a.column+1===this.model.columns.length;a=a&&a.row===this.model.columns[0].cells.length;this.$().toggleClass("no-faded-h",!!b);this.$().toggleClass("no-faded-v",!!a);this.hideContextMenu()}}};a.onMouseSelect=function(a){if(!a.wasHandled()){a.handle();var b=h(a.originalEvent.target).closest(".cell").find(".mathquill-editable");if(b.length)this.sendTapToMathQuill(a,
b);else{var b=h(a.target),c=b.closest(".tabledata")[0];c&&a.target===c&&(c=null);c?(a=this.getNodesCellPosition(b),this.selectCell(a.row,a.column)):(document.activeElement&&document.activeElement.blur(),this.model.setProperty("selectedCell",null),this.model.setProperty("selected",!0))}}};a.getNodesCellPosition=function(a){var b=a.closest(".column").prevAll(".column").length;return{row:a.closest(".cell").prevAll(".cell").length,column:b}};a.getCaretPosition=function(){return this.$().find(document.activeElement).length?
this.getNodesCellPosition(h(document.activeElement)):null};a.findCell=function(a,b){return this.$(".column:nth-child("+(b+1)+") .cell:nth-child("+(a+1)+")")};a.findCellInput=function(a,b){return this.findCell(a,b).find(".mathquill-rendered-math")};a.selectCell=function(a,b,c){if(!(0>a||0>b)){var d=this.findCellInput(a,b);d.length&&(this.model.setProperty("selectedCell",{row:a,column:b}),d.hasClass("mathquill-editable")?(d.mathquill("focus"),c?d.mathquill("moveEnd"):d.triggerHandler("select_all")):
h(document.activeElement).blur())}};a.unfocus=function(){var a=document.activeElement;this.$().find(a).length&&a.blur()};a.processMissedKeyEvent=function(a){this.doKeyAction(s.lookup(a),a)};a.onMathQuillKeydownEvent=function(a){var b=s.lookup(a);b!==s.Tab&&b!==s.ESCAPE||this.doKeyAction(b,a)};a.onMathQuillSpecialEvent=function(a){var b=a.type.slice(0,-7),b=b.charAt(0).toUpperCase()+b.slice(1);this.doKeyAction(b,a)};a.doKeyAction=function(a,b){b||(b=h.Event());var c=this.model.selectedCell,d=c?c.row:
-1,e=c?c.column:-1,c=this.model.columns,f=c[0].cells.length,g=c.length,c=function(a,c){-1===a?this.triggerUpPressed():a>f?this.triggerDownPressed():(-1===c?(c=g-1,a--):c===g&&(a++,c=0),this.selectCell(a,c),b.preventDefault())}.bind(this),k=function(a){1>=f||(this.model.removeRow(d-1),this.selectCell(a,e),b.preventDefault())}.bind(this),l=function(a){0===e||2>=g||(this.model.removeColumn(e),this.selectCell(d,a),b.preventDefault())}.bind(this);switch(a){case s.LEFT:c(d,e-1);break;case s.RIGHT:c(d,e+
1);break;case s.UP:c(d-1,e);break;case s.DOWN:c(d+1,e);break;case s.ENTER:d<f?(this.model.insertRow(d,this.model.getAutofillValues(d)),this.selectCell(d+1,e)):(this.model.insertRow(d-1,this.model.getAutofillValues(d-1)),this.selectCell(d,e));break;case s.ESCAPE:h(document.activeElement).blur();this.model.setProperty("selectedCell",null);break;case s.TAB:if(0===h(document.activeElement).closest(this.$()).length){b.preventDefault();break}break;case s.BACKSPACE:0===d?0===e?(this.triggerBackspacePressed(),
p.triggerFlash()):e===g-1||1===e&&3===g?c(0,e-1):l(e-1):0!==e?c(d,e-1):d===f?c(d-1,e):k(d-1);break;case s.DELETE:0===d?0===e?(this.triggerDelPressed(),p.triggerFlash()):e<g-1&&l(e):d>=f||k(d)}};a.onFocusChange=function(){this.model&&this.model.setProperty("selectedCell",this.getCaretPosition())};a.isFocused=function(){return!!this.model.selectedCell};a.addFocus=function(a,b,c){"cell"===a?this.selectCell(b,c):"end"!==a?this.selectCell(0,0):this.selectCell(this.model.columns[0].cells.length,0)}});var q=
w(q,function(a,b){a.init=function(){b.init.call(this);this.renderedHeight=this.collapsedHeight=void 0;this.mathquillTop=0};a.lookupCellPosition=function(){};a.handleHeightUpdate=function(){this.collapseHeight();this.tableView.syncRowHeight(this.lookupCellPosition().row)};a.collapseHeight=function(){this.$().css("height","");this.renderedHeight=this.collapsedHeight=void 0};a.measureHeight=function(){this.renderedHeight=this.collapsedHeight=this.$().outerHeight()};a.setHeight=function(a){this.renderedHeight!==
a&&(this.renderedHeight=a,this.$().css("height",a))};a.setMathquillTop=function(){var a=this.renderedHeight-this.collapsedHeight;a!==this.mathquillTop&&(this.mathquillTop=a,this.$(".mathquill-rendered-math").css("top",a))}}),g=w(q,function(a,b){a.template=c.table_cell_header;a.init=function(a,c){b.init.call(this);this.model=a;this.tableView=c};a.lookupCellPosition=function(){return{row:0,column:this.model.index}};a.didInsertElement=function(){b.didInsertElement.call(this);this.$().addClass("right");
this.$().append('<span class="fade-right"></span>');this.$mathquill=this.$(".mathquill-rendered-math").mathquill("editable");var a=this;this.$().on("blur focusout",".mathquill-rendered-math",function(){a.$mathquill.mathquill("clearSelection")});this.$().on("render",".mathquill-rendered-math",function(){var b=h(this).mathquill("latex");if(b){h(this).mathquill("latex","");var c=a.model.index;a.model.table.insertColumn(c,{latex:b});a.tableView.selectCell(0,c,!0)}})}}),f=w(q,function(a,b){a.template=
c.table_cell_header;a.init=function(a,c){b.init.call(this);this.__renderedLatex="";this.__renderedBefore=!1;this.model=a;this.tableView=c;this.model.observe("index.headerview",this.updateIndex.bind(this));this.model.observe("latex.headerview",this.onLatexChange.bind(this));this.model.observe("selected.headerview",this.onSelectedChange.bind(this))};a.onSelectedChange=function(){if(this.model.selected){var a=this.tableView;a&&a.selectCell(0,this.model.index)}};a.lookupCellPosition=function(){return{row:0,
column:this.model.index}};a.destruct=function(){this.model.unobserve(".headerview")};a.updateIndex=function(){this.$().attr("index",this.model.index)};a.onLatexChange=function(){this.$mathquill&&(this.__renderedLatex!==this.model.latex&&(this.__renderedLatex=this.model.latex,this.$mathquill.mathquill("latex",this.model.latex)),this.__renderedBefore&&this.handleHeightUpdate(),this.__renderedBefore=!0)};a.didInsertElement=function(){b.didInsertElement.call(this);0===this.model.index&&this.$().addClass("left");
this.$mathquill=this.$(".mathquill-rendered-math").mathquill("editable");var a=this;this.$().on("blur focusout",".mathquill-rendered-math",function(){a.$mathquill.mathquill("clearSelection")});this.$().on("tap",".action-removecolumn",function(){a.model.table.removeColumn(a.model.index)});this.$().on("render",".mathquill-rendered-math",function(){var b=a.model.latex,c=h(this).mathquill("latex");b!==c&&(a.__renderedLatex=c,a.model.setProperty("latex",c))});this.iconView=k(this);this.iconView.replace(this.$(".template-icon"));
this.onLatexChange();this.updateIndex()}}),q=w(q,function(a,b){a.template=c.table_cell_body;a.init=function(a,c){b.init.call(this);this.model=a;this.tableView=c;this.__renderedDisabled=!0;this.__renderedError=this.__renderedValue="";this.__renderedBefore=!1};a.didInsertElement=function(){b.didInsertElement.call(this);this.model.column===u.first(this.model.column.table.columns)&&this.$().addClass("left");this.model.column===u.last(this.model.column.table.columns)&&(this.$().addClass("right"),this.$().append('<span class="fade-right"></span>'));
this.model===u.last(this.model.column.cells)&&(this.$().addClass("bottom"),this.$().append('<span class="fade-bottom"></span>'))};a.lookupCellPosition=function(){return{row:u.indexOf(this.model.column.cells,this.model)+1,column:this.model.column.index}};a.onValueChange=function(){var a=this.model.getOldProperty("value"),b=this.model.value;this.$().toggleClass("empty",!b);this.$mathquill&&(this.__renderedValue!==b&&(this.__renderedValue=b,this.__renderedDisabled?this.$mathquill.text(b):this.$mathquill.mathquill("latex",
b)),a=(!a||isFinite(a))&&(!b||isFinite(b)),this.__renderedBefore&&!a&&this.handleHeightUpdate(),this.__renderedBefore=!0)};a.onDisabledChange=function(){var a=!!this.model.column.disabled;this.$mathquill&&this.__renderedDisabled!==a&&(this.__renderedDisabled=a,this.$().toggleClass("non-editable",!!a),a?(a=h('<span class="mathquill-rendered-math">'+this.model.value+"</span>"),this.$mathquill.replaceWith(a),this.$mathquill=a,this.mathquillTop=0):this.$mathquill.mathquill("editable"))};a.onErrorChange=
function(){var a=this.model.error?this.model.error:"";this.$error&&this.__renderedError!==a&&(this.__renderedError=a,this.$error.attr("tooltip",a),this.$().toggleClass("error",!!a))}}),e=w(q,function(a,b){a.init=function(a,c){b.init.call(this,a,c);this.model.column.observe("disabled.cellview",this.onDisabledChange.bind(this))};a.destruct=function(){this.model.column.unobserve(".cellview")};a.didInsertElement=function(){b.didInsertElement.call(this);this.$mathquill=this.$(".mathquill-rendered-math");
this.onDisabledChange();var a=this;this.$().on("blur focusout",".mathquill-rendered-math",function(){a.$mathquill.mathquill("clearSelection")});this.$().on("render",".mathquill-rendered-math",function(){var b=h(this).mathquill("latex");if(""!==b){h(this).mathquill("latex","");for(var c=a.lookupCellPosition(),d=a.model.column.table,e=[],f=0;f<d.columns.length;f++)e[f]="";e[c.column]=b;d.insertRow(c.row-1,e);a.tableView.selectCell(c.row,c.column,!0)}})}}),d=w(q,function(a,b){a.template=c.table_cell_body;
a.init=function(a,c){b.init.call(this,a,c);this.model.observe("value.cellview",this.onValueChange.bind(this));this.model.observe("error.cellview",this.onErrorChange.bind(this));this.model.column.observe("disabled."+this.guid,this.onDisabledChange.bind(this))};a.destruct=function(){this.model.unobserve(".cellview");this.model.column.unobserve("disabled."+this.guid)};a.didInsertElement=function(){b.didInsertElement.call(this);this.$error=this.$(".error-indicator");this.$mathquill=this.$(".mathquill-rendered-math");
this.onDisabledChange();this.onValueChange();this.onErrorChange();var a=this;this.$().on("blur focusout",".mathquill-rendered-math",function(){a.$mathquill.mathquill("clearSelection")});this.$().on("render",".mathquill-rendered-math",function(){function b(){return g.getItemById(e).columns[f.column].cells[f.row-1]}var c=a.model.value,d=h(this).mathquill("latex");if(c!==d){a.__renderedValue=d;var e=a.model.column.table.id,f=a.lookupCellPosition(),g=a.tableView.listView.model;p.addTransaction({type:p.CAUSE_OF_CHANGE,
undo:function(){var a=b();a.setProperty("value",c);a.column.table.requestParse()},redo:function(){var a=b();a.setProperty("value",d);a.column.table.requestParse()}})}})}});return b});I("template!folder",["underscore"],function(b){return function(b){with(b||{})b="",b=renderShell?b+'\n\n<div class="do-not-blur expressionitem expressionfolder shell">\n  <div class="shell"></div>\n</div>\n\n':b+('\n\n<div class="do-not-blur expressionfolder expressionitem">\n  <div class="fade-container">\n\n    <span class="main">\n      <div class=\'caret-container action-toggle-folder-collapsed do-not-blur\' handleEvent="true">\n        <i class="icon-caret-down" ></i>\n      </div>\n      <textarea class="do-blur title" placeholder="'+
t("untitled folder...")+'"></textarea>\n    </span>\n    <i class="icon-remove top-level-delete action-delete" handleEvent="true"></i>\n\n  </div>\n\n  <span class="tab action-drag"\n        handleEvent="true"\n        tapboundary="true"\n        disablescroll="true"\n  >\n    <span class="num variable-index"></span>\n    <div class="tab-interior">\n    <span class="action-toggle-folder-hidden graph-icon folder icon">\n      <i class="icon-hidden"></i>\n      <i class="icon-folder"></i>\n    </span>\n    </div>\n  </span>\n\n  <span class="exp-actions">\n    <span\n      class="action-delete delete-btn tooltip"\n      handleEvent="true"\n      tooltip="'+
t("Delete")+"\"\n    >\n      <i class='icon-remove'></i></span>\n    </span>\n  </span>\n\n</div>\n\n");return b+"\n"}});I("expressions/folder_view","require pjs jquery lib/keys expressions/abstractitem_view template!folder lib/browser".split(" "),function(b){var h=b("pjs"),u=b("jquery"),w=b("lib/keys"),q=b("expressions/abstractitem_view"),p=b("template!folder"),s=b("lib/browser");return h(q,function(a,b){a.template=p;a.init=function(a,g){b.init.call(this,a,g);this.model=a;a.observe("hidden.folderView",
this.onHiddenChanged.bind(this));a.observe("collapsed.folderView",this.onCollapsedChanged.bind(this));a.observe("title.folderView",this.renderTitle.bind(this));a.observe("selected.folderView",this.onSelectedChange.bind(this));a.observe("count.folderView",this.onMemberIdsChange.bind(this))};a.destruct=function(){this.model.unobserve(".folderView")};a.didInsertElement=function(){b.didInsertElement.call(this);this.model.renderShell||(this.$title=this.$(".title"),this.$(".action-toggle-folder-collapsed").on("tap",
this.toggleCollapsed.bind(this)),this.$(".action-toggle-folder-hidden").on("tap",this.toggleHidden.bind(this)),this.$title.bind("keydown keypress keyup change cut paste",this.onTitleEvent.bind(this)),this.renderTitle(),this.onCollapsedChanged(),this.onHiddenChanged(),this.onMemberIdsChange())};a.onSelectedChange=function(){!this.selected&&this.$title&&this.$title.blur()};a.onMemberIdsChange=function(){this.$().toggleClass("has-items",0<this.model.count)};a.onTitleEvent=function(a){var b=this.$title[0],
f=b&&b===document.activeElement,e=f?b.value.length:0,f=f&&"keydown"===a.type?w.lookup(a):"";f===w.ENTER?(a.preventDefault(),this.triggerEnterPressed()):f===w.ESCAPE?u(document.activeElement).blur():f===w.UP?0===b.selectionStart&&0===b.selectionEnd&&(a.preventDefault(),this.triggerUpPressed()):f===w.DOWN?b.selectionStart===e&&b.selectionEnd===e&&(a.preventDefault(),this.triggerDownPressed()):f===w.BACKSPACE?0===e&&(a.preventDefault(),this.triggerBackspacePressed()):f===w.DELETE?0===e&&(a.preventDefault(),
this.triggerDelPressed()):this.model.setProperty("title",b.value)};a.renderTitle=function(){this.$title.attr("value",this.model.title);this.fitText()};a.onProjectorModeChange=function(){this.fitText()};a.fitText=function(){if(this.$title){var a=this.$title[0],b=0;do b++,this.$title.attr("rows",b);while(a.clientHeight<a.scrollHeight)}};a.onMouseSelect=function(a){a.wasHandled()||(a.handle(),this.model.setProperty("selected",!0))};a.toggleHidden=function(){this.model.setProperty("hidden",!this.model.hidden)};
a.toggleCollapsed=function(){this.model.setProperty("collapsed",!this.model.collapsed)};a.onHiddenChanged=function(){this.$().toggleClass("hidden",!!this.model.hidden)};a.onCollapsedChanged=function(){this.$().toggleClass("collapsed",!!this.model.collapsed)};a.addFocus=function(a){if((!s.IS_IPAD||!s.IS_IN_IFRAME)&&this.$title){var b=this.$title[0];b.focus();"end"===a?b.selectionStart=b.selectionEnd=b.value.length:"start"===a&&(b.selectionStart=b.selectionEnd=0)}}})});I("template!list",["underscore"],
function(b){return function(b){with(b||{})b='<div id="exppanel-outer">\n  <div id="expression-top-bar">\n  \n    ',IS_TABLET&&(b+="\n      <a class='hamburger-btn action-hamburger'><i class='icon-hamburger'></i></a>\n    "),b+='\n    <a class=\'add-expression-btn action-add-expression tooltip do-not-blur\' handleEvent="true" tooltip="'+t("Add Item")+"\"><i class='icon-plus'></i><i class='icon-caret-down'></i></a>\n    \n    <a class='btn-danger action-clearall'>delete all</a>\n    <span class='center-aligned'>\n      <a class='action-undo tooltip' tooltip=\""+
t("Undo (ctrl+z)")+"\"><i class='icon-undo'></i></a>\n      <a class='action-redo tooltip' tooltip=\""+t("Redo (ctrl+y)")+"\"><i class='icon-redo'></i></a>\n    </span>    \n\n    <a class='resize-list-btn action-hideexpressions do-not-blur tooltip' tooltip=\""+t("Hide List")+"\" handleEvent=\"true\"><i class='icon-hide'></i></a>\n    \n    <a \n      class='edit-list-btn action-toggleeditlistmode do-not-blur tooltip' tooltip=\""+t("Edit List")+'"\n      handleEvent="true">\n      <i class=\'icon-settings\' /></a>\n  \n  </div>\n  \n  <div class="exppanel-container">\n    <div id="exppanel" class="disable-horizontal-scroll-to-cursor">\n      <div class="expressionlist">\n        <span class="template-expressioneach"></span>\n        <div class="template-newexpression"></div>\n      </div>\n    </div>    \n  </div>\n  \n  <div id=\'show-expressions-tab\'>\n    <a class=\'resize-list-btn action-showexpressions\'>\n      <i class=\'icon-show\'></i>\n    </a>\n  </div>\n</div>\n';
return b}});I("expressions/list_view_desktop","require pjs ./list_view tipsy ./expression_view ./text_view ./table_view ./folder_view lib/keys template!list".split(" "),function(b){var h=b("pjs"),u=b("./list_view");b("tipsy");var w=b("./expression_view"),q=b("./text_view"),p=b("./table_view"),s=b("./folder_view"),a=b("lib/keys"),k=b("template!list");return h(u,function(b,g){b.template=k;b.instantiateItemView=function(a){if(a.isExpression)return w(a,this);if(a.isText)return q(a,this);if(a.isTable)return p(a,
this);if(a.isFolder)return s(a,this)};b.didInsertElement=function(){g.didInsertElement.call(this);this.$().tipsy({fade:"fast",title:"tooltip",wait:500,delegate:".tooltip"})};b.handleKeydown=function(b){"body"===b.target.localName&&a.lookup(b)===a.SPACEBAR&&this.toggleAllSliders()}})});I("loadcss!css/keypad",function(){});I("main/cookie",[],function(){return{getCookie:function(b){document.cookie=b+"= ;path=/calculator;expires=Thu, 01 Jan 1970 00:00:01 GMT";b=encodeURIComponent(b);var h,u,w,q=document.cookie.split(";");
for(h=0;h<q.length;h++)if(u=q[h].substr(0,q[h].indexOf("=")),w=q[h].substr(q[h].indexOf("=")+1),u=u.replace(/^\s+|\s+$/g,""),u==b)return decodeURIComponent(w)},setCookie:function(b,h,u){var w=new Date;w.setDate(w.getDate()+(u||30));document.cookie=encodeURIComponent(b)+"="+encodeURIComponent(h)+"; expires="+w.toUTCString()+"; path=/"}}});I("template!keypad",["underscore"],function(b){return function(h){var u="";with(h||{})u+="<div class='desmos-keypad'>\n  <div class='keys-container retracted'>\n    <div class='keys-background do-not-blur'>\n      <div class='keys'>\n\n        <div class='functions-popover popover top' popover=\"true\">\n          <div class='popover-interior'>\n            <div class='header'>\n              <table><tr>\n              ",
b.each(popups.functionsPopup,function(b,h){u+='\n                <td>\n                  <span key="'+b.tab.id+'" class="heading tappable btn btn-inverse'+("trig"==h?" selected":"")+'">\n                    '+b.tab.html+"\n                  </span>\n                </td>\n              "}),u+="\n              </tr></table>\n            </div>\n\n            ",b.each(popups.functionsPopup,function(h,q){u+="\n              <table class='interior-buttons' section='"+q+"'>\n                ";"trig"==
q&&(u+="\n                  <tr class='section-headings'>\n                    <td>trig</td>\n                    <td>inverse</td>\n                    <td>hyperb</td>\n                  </tr>\n                ");u+="\n                <tr>\n\n                ";var p=0;b.each(h.funcs,function(b){u+="\n                  "+(0==p%3?"</tr><tr>":"")+"\n                  ";p++;u+='\n                  <td>\n                    <span\n                      class="option btn tappable'+(b.aClass?" "+b.aClass:
"")+" "+b.id+'-key"\n                      key="'+b.id+'"\n                    >\n                      '+b.html+"\n                    </span>\n                  </td>\n              "});u+="\n              </tr></table>\n            "}),u+="\n          </div>\n          <div class='arrow'></div>\n        </div>\n\n        <canvas class=\"handwriting-area\"></canvas>\n\n        ",b.each(buttons,function(h,q){u+='\n         <div class="'+q+'">\n           ';b.each(h,function(h){u+='\n             <div class="row">\n               ';
b.each(h.keys,function(b){u+='<div\n                   class="cell '+(b.cellClass?b.cellClass:"")+'"\n                 >\n                   ';b.html&&(u+='\n                     <a\n                       class="'+(b.aClass?b.aClass:"")+" "+b.id+'-key"\n                       key="'+b.id+'"\n                     >\n                       '+b.html+"\n                     </a>\n                   ");u+="\n                 </div>"});u+="\n               <div style='clear:both'></div>\n             </div>\n           "});
u+="\n         </div>\n        "}),u+="\n        <div style='clear:both'></div>\n      </div>\n\n      ",userMinimizable&&(u+="\n      <div class='minimize-keypad'>\n        <i class='icon-keyboard minimize-keyboard-icon'></i>\n        <i class='icon-caret-down'></i>\n      </div>\n      "),u+="\n    </div>\n  </div>\n  \n  ",userMinimizable&&(u+='\n    <div class="show-keypad" class="do-not-blur">\n      <i class=\'icon-keyboard maximize-keyboard-icon\'></i>\n      <i class="icon-caret-up do-not-blur"></i>\n    </div>\n  '),
u+="\n  \n</div>\n";return u}});I("text!data/keypad_keys.json",[],function(){return'{\n"trigFuncs":        ["sin","cos","tan","csc","sec","cot"],\n\n"oneArgFuncs":      ["ceil","floor","round","abs","ln","log","exp"],\n\n"twoArgFuncs":      ["min","max","lcm","gcd","mod", "nCr", "nPr"],\n\n"tabs":             ["trig","calc","misc"],\n\n"staticKeys": {\n  "unknown":          {"display":{"html":"?"},\n                      "action":{"cmd":"?"}},\n  "pi":               {"display":{"html":"&pi;"},\n                      "action":{"cmd":"\\\\pi"}},\n  "leftparen":        {"display":{"html":"("},\n                      "action":{"cmd":"("}},\n  "rightparen":       {"display":{"html":")"},\n                      "action":{"cmd":")"}},\n  "sqrt":             {"display":{"html":"&radic;"},\n                      "action":{"cmd":"\\\\sqrt"}},\n  "cuberoot":         {"display":{"html":"<sup>3</sup>&radic;", "noMQ": true},\n                      "action":{"custom":"cuberoot"}},\n  "lt":               {"display":{"html":"&lt;"},\n                      "action":{"cmd":"<"}},\n  "gt":               {"display":{"html":"&gt;"},\n                      "action":{"cmd":">"}},\n  "le":               {"display":{"html":"&le;"},\n                      "action":{"cmd":"\\\\le"}},\n  "ge":               {"display":{"html":"&ge;"},\n                      "action":{"cmd":"\\\\ge"}},\n\n  "squared":          {"display":{"aClass":"exponent", "html":"a^2"},\n                      "action":{"custom":"squared"}},\n\n  "exponent":         {"display":{"aClass":"exponent", "html":"a^b"},\n                      "action":{"cmd":"^"}},\n  "subscript":        {"display":{"html":"a_b"},\n                      "action":{"cmd":"_"}},\n  "fact":             {"display":{"html":"x!"},\n                      "action":{"cmd":"!"}},\n  "theta":            {"display":{"html":"&theta;"},\n                      "action":{"cmd":"\\\\theta"}},\n  "leftbrace":        {"display":{"html":"{", "noMQ":true},\n                      "action":{"cmd":"{"}},\n  "rightbrace":       {"display":{"html":"}", "noMQ":true},\n                      "action":{"cmd":"}"}},\n  "colon":            {"display":{"html":":"},\n                      "action":{"cmd":":"}},\n  "pipes":            {"display":{"html":"|a|"},\n                      "action":{"cmd":"|"}},\n  "comma":            {"display":{"html":","},\n                      "action":{"cmd":","}},\n\n  "times":            {"display":{"html":"&times;"},\n                      "action":{"cmd":"*"}},\n  "plus":             {"display":{"html":"+"},\n                      "action":{"cmd":"+"}},\n  "divide":           {"display":{"html":"&divide;"},\n                      "action":{"cmd":"/"}},\n  "minus":            {"display":{"html":"&ndash;"},\n                      "action":{"cmd":"-"}},\n  "equals":           {"display":{"html":"="},\n                      "action":{"cmd":"="}},\n  "decimal":          {"display":{"html":"."},\n                      "action":{"cmd":"."}},\n\n  "backspace":        {"display":{"aClass":"always-enabled", \n                                "html":"<span class=\\"backspace-img\\"></span><i class=\\"icon-delete\\"></i>"\n                               },\n                      "action":{"key":"Backspace"}},\n  "enter":            {"display":{"aClass":"always-enabled", "html":"ent<span>er</span>"},\n                      "action":{"key":"Enter"}},\n\n  "narrowToggleLetters":    {"display":{"aClass":"always-enabled toggle-btn", "html":"A B C"},\n                      "action":{"changeLayout": "letters"}},\n  "toggleLetters":    {"display":{"aClass":"always-enabled toggle-btn", "html":"A B C", "colspan":2},\n                      "action":{"changeLayout": "letters"}},\n  "toggleHandwriting":{"display":{"aClass":"always-enabled toggle-btn", "html":"<img src=\\"assets/img/handwriting.png\\"/>"},\n                      "action":{"changeLayout": "handwriting"}},\n  "toggleNumbers":    {"display":{"aClass":"always-enabled toggle-btn", \n                                "html":"1<span> </span>2<span> </span>3", \n                                "colspan":1\n                               },\n                      "action":{"changeLayout":"mainNumbers"}},\n\n  "popupFunctions":  {"display":{"aClass":"always-enabled toggle-btn", "html":"functions", "colspan":2},\n                      "action":{"popup": "functions"}},\n\n  "blank":            {"display":{},\n                      "action":{}},\n\n  "halfBlank":        {"display":{"colspan":0.5},\n                      "action":{}},\n\n  "left":             {"display":{"aClass":"always-enabled", "html":"&larr;"},\n                      "action":{"key":"Left"}},\n  "up":               {"display":{"aClass":"always-enabled", "html":"&uarr;"},\n                      "action":{"key":"Up"}},\n  "right":            {"display":{"aClass":"always-enabled", "html":"&rarr;"},\n                      "action":{"key":"Right"}},\n  "down":             {"display":{"aClass":"always-enabled", "html":"&darr;"},\n                      "action":{"key":"Down"}},\n\n  "toggleAltLeft":    {"display":{"aClass":"always-enabled toggle-btn", "html":"more", "colspan":2},\n                      "action":{"changeLayout": "altNumbers"}},\n  "toggleMainLeft":   {"display":{"aClass":"always-enabled toggle-btn active", "html":"more", "colspan":2},\n                      "action":{"changeLayout": "mainNumbers"}},\n  "loga":             {"display":{"html":"log_a"},\n                      "action":{"custom":"loga"}},\n  "ddx":              {"display":{"html":"d/dx"},\n                      "action":{"custom":"d/dx"}},\n  "sum":              {"display":{"html":"\\\\sum"},\n                      "action":{"cmd":"\\\\sum"}},\n  "prod":             {"display":{"html":"\\\\prod"},\n                      "action":{"cmd":"\\\\prod"}}\n  }\n}\n'});
I("main/keypad_keys",["require","jquery","underscore","mathquill","text!data/keypad_keys.json"],function(b){var h=b("jquery"),u=b("underscore");b("mathquill");b=JSON.parse(b("text!data/keypad_keys.json"));var w=b.staticKeys;u.each(b.tabs,function(b){w[b+"Tab"]={display:{html:b},action:{tab:b}}});u.each(b.oneArgFuncs,function(b){w[b]={display:{html:b},action:{func:b}}});u.each(b.twoArgFuncs,function(b){w[b]={display:{html:b},action:{func:b,args:2}}});u.each(b.trigFuncs,function(b){u.each([b,"arc"+
b,b+"h"],function(b){w[b]={display:{html:b},action:{func:b}}})});for(b=0;26>b;b++){var q=String.fromCharCode(97+b);w[q]={display:{html:q},action:{cmd:q}}}for(b=0;10>b;b++)q=String.fromCharCode(48+b),w[q]={display:{html:q},action:{cmd:q}};u.each(w,function(b,q){var a=b.display,k=b.action;a.id=q;"cellClass"in a||(a.cellClass="");"aClass"in a||(a.aClass="");if(a.colspan)switch(a.cellClass&&(a.cellClass+=" "),a.colspan){case 0.5:a.cellClass+="halfwide";break;case 1.5:a.cellClass+="oneandhalfwide";break;
case 2:a.cellClass+="twowide"}a.html&&(a.aClass=a.aClass?a.aClass+" key":"key",a.aClass="tapstart"==a.actionOn?a.aClass+" tapstartable":a.aClass+" tappable");k.tab||k.key||k.popup||k.changeLayout||a.noMQ||!a.html||(a.mathquill=!0,a.html=h("<span>"+a.html+"</span>").mathquill().mathquill("html"),a.aClass+=" mathquill-rendered-math")});return w});I("main/keypad_view","require loadcss!css/keypad jquery underscore lib/browser main/resize main/cookie template!keypad lib/underscore_view config pjs main/cookie main/keypad_keys".split(" "),
function(b){b("loadcss!css/keypad");var h=b("jquery"),u=b("underscore"),w=b("lib/browser"),q=b("main/resize"),p=b("main/cookie"),s=b("template!keypad"),a=b("lib/underscore_view"),k=b("config"),c=b("pjs");b("main/cookie");var g=b("main/keypad_keys");return c(a,function(a,b){a.template=s;a.isOpen=!1;a.userMinimized=!1;a.init=function(a){this.keys=g;this.expressionsView=a;this.setupKeypad();this.setLayout("mainNumbers")};a.didCreateElement=function(){var a=this;a.setLayout(a.layout);a.$hideBtn=a.$(".minimize-keypad");
a.$showBtn=a.$(".show-keypad");a.$funcPopover=a.$(".functions-popover");a.$container=a.$(".keys-container");a.$keys=a.$(".keys");a.$funcBtn=a.$(".popupFunctions-key");a.setTab("trig");a.$().on("tap",".tappable",function(b){b=h(b.target).closest(".tappable");a.buttonClicked(b)});a.$().on("tapstart",".tapstartable",function(b){b=h(b.target).closest(".tapstartable");a.buttonClicked(b)});a.expressionsView.observe("needFakeKeypad",function(){a.requestSetIsOpen(a.expressionsView.needFakeKeypad)});a.expressionsView.observe("editDisabled",
function(){a.setKeysDisabled(a.expressionsView.editDisabled)});a.$showBtn.show();a.$hideBtn.on("tap",function(){a.userMinimized=!0;p.setCookie("keypadMinimized","true");a._hideKeypad()});a.$showBtn.on("tap",function(){a.userMinimized=!1;p.setCookie("keypadMinimized","false");a._showKeypad();var b=a.expressionsView.getSelected();if(b&&b.isExpression)a.expressionsView.getItemView(b.id).addFocus();else if(!(b&&b.isTable&&a.expressionsView.itemFocused)){for(b=a.expressionsView.getFirstVisibleItem();b&&
!b.isExpression;)b=a.expressionsView.getItemByIndex(b.index+1);b?a.expressionsView.getItemView(b.id).addFocus():a.expressionsView.appendBlankExpression()}});a.userMinimized="true"===p.getCookie("keypadMinimized")};a._hideKeypad=function(){clearTimeout(this.__showHideTimeout);this.isOpen=!1;this.$container.addClass("retracted");w.IS_IE8||w.IS_IE9?this.$showBtn.show():this.$showBtn.fadeIn();this.hidePopups();q.trigger()};a._showKeypad=function(){clearTimeout(this.__showHideTimeout);"letters"!==this.layout&&
"altNumbers"!==this.layout||this.setLayout("mainNumbers");this.$showBtn.hide();this.isOpen=!0;var a=this;this.__showHideTimeout=setTimeout(function(){a.$container.removeClass("retracted");q.waitForCSSAnimation(a.$container,/transform/)})};a.requestSetIsOpen=function(a){(!this.userMinimized||this.isOpen)&&a!==this.isOpen&&(a?this._showKeypad():this._hideKeypad())};a.setKeysDisabled=function(a){this.$keys.toggleClass("keys-disabled",!!a)};a.getButton=function(a){this.keys[a]||(a="unknown");return this.keys[a].display};
a.buttonArray=function(a){return u.map(a.split(" "),this.getButton,this)};a.setupKeypad=function(){this.buttons={mainNumbersLeft:[{keys:this.buttonArray("x y squared")},{keys:this.buttonArray("lt gt exponent")},{keys:this.buttonArray("leftparen rightparen comma")},{keys:this.buttonArray("toggleAltLeft sqrt")}],altNumbersLeft:[{keys:this.buttonArray("r theta pi")},{keys:this.buttonArray("le ge pipes")},{keys:this.buttonArray("leftbrace rightbrace colon")},{keys:this.buttonArray("toggleMainLeft cuberoot")}],
numbersMiddle:[{keys:this.buttonArray("7 8 9 divide")},{keys:this.buttonArray("4 5 6 times")},{keys:this.buttonArray("1 2 3 minus")},{keys:this.buttonArray("0 decimal equals plus")}],numbersRight:[{keys:this.buttonArray("popupFunctions backspace")},{keys:this.buttonArray("toggleLetters enter")},{keys:this.buttonArray("blank up blank")},{keys:this.buttonArray("left down right")}],letters:[{keys:this.buttonArray("q w e r t y u i o p backspace")},{keys:this.buttonArray("halfBlank a s d f g h j k l halfBlank toggleNumbers")},
{keys:this.buttonArray("blank z x c v b n m comma blank enter")},{keys:this.buttonArray("halfBlank pi subscript leftparen rightparen plus minus times divide equals blank halfBlank")}]};this.popups={functionsPopup:{trig:{tab:this.getButton("trigTab"),funcs:this.buttonArray("sin arcsin sinh cos arccos cosh tan arctan tanh csc arccsc csch sec arcsec sech cot arccot coth")},calc:{tab:this.getButton("calcTab"),funcs:this.buttonArray("exp ln log loga ddx sum prod fact e")},misc:{tab:this.getButton("miscTab"),
funcs:this.buttonArray("ceil floor round abs min max lcm gcd mod nCr nPr fact")}}}};a.getTemplateParams=function(){return{buttons:this.buttons,popups:this.popups,userMinimizable:!k.get("tablet")}};a.height=function(){return this.isOpen?this.$container.height():0};a.setLayout=function(a){this.layout=a;this.$().removeClass("layout-letters layout-altNumbers layout-mainNumbers layout-handwriting").addClass("layout-"+a)};a.setTab=function(a){var b=this;u.each(["trig","calc","misc"],function(a){b.$("[key="+
a+"Tab]").removeClass("selected");b.$("[section="+a+"]").hide()});this.$("[key="+a+"Tab]").addClass("selected");this.$("[section="+a+"]").show()};a.hidePopups=function(){this.$funcBtn.removeClass("active");this.$funcPopover.hide()};a.setPopup=function(a){"functions"===a&&(525>h(window).height()?this.$funcPopover.removeClass("top").addClass("left"):this.$funcPopover.removeClass("left").addClass("top"),this.$funcBtn.toggleClass("active"),this.$funcPopover.toggle())};a.resize=function(){};a.buttonClicked=
function(a){a=this.$(a).attr("key");a=this.keys[a].action;if(a.changeLayout)this.hidePopups(),this.setLayout(a.changeLayout),"handwriting"===a.changeLayout&&this.resize();else if(a.tab)this.setTab(a.tab);else if(a.popup)this.setPopup(a.popup);else{"altNumbers"===this.layout&&this.setLayout("mainNumbers");this.hidePopups();var b=this.expressionsView.getActiveMathquill();if(b.length)try{if(a.key)b.mathquill("onKey",a.key);else if(a.cmd)b.mathquill("cmd",a.cmd);else if(a.func){var c="\\left( \\right)";
2===a.args&&(c="\\left({},{}\\right)");b.mathquill("write",a.func+c);b.mathquill("onKey","Left");2===a.args&&b.mathquill("onKey","Left")}else if(a.custom)switch(a.custom){case "loga":b.mathquill("write","log_{}\\left( \\right)");b.mathquill("onKey","Left");b.mathquill("onKey","Left");b.mathquill("onKey","Left");break;case "cuberoot":b.mathquill("write","\\sqrt[3]{}");b.mathquill("onKey","Left");break;case "squared":b.mathquill("cmd","^");b.mathquill("cmd","2");b.mathquill("onKey","Right");break;case "cubed":b.mathquill("write",
"^{3}");break;case "d/dx":b.mathquill("write","\\frac{d}{dx}")}b.trigger("render")}catch(e){}else(b=this.expressionsView.getSelected())&&b.isTable&&b.selectedCell&&this.expressionsView.getItemView(b.id).doKeyAction(a.key)}}})});I("main/keypad_view_handwriting",["require","pjs","jquery","./keypad_view"],function(b){var h=b("pjs"),u=b("jquery");b=b("./keypad_view");return h(b,function(b,h){b.didCreateElement=function(){var b=this;h.didCreateElement.call(b);var s={abort:u.noop},a,k=[],c={type:"stroke",
x:[],y:[]},g=b.pxRatio=window.devicePixelRatio||1,f=b.$canvas=b.$(".handwriting-area");b.$keys.on("tapstart",function(e){function d(a){var b=a.originalEvent.touches?a.originalEvent.touches[0]:a;a=b.pageX;b=b.pageY-m;h.lineTo(g*a,g*b);c.x.push(a);c.y.push(b)}if("handwriting"===b.layout&&!u(e.target).closest(".tappable",this).length){s.abort();clearTimeout(a);var h=f[0].getContext("2d");h.strokeStyle="white";h.beginPath();var m=f.offset().top;d(e);u(document).on("tapmove.handwriting",function(a){d(a);
h.stroke()}).one("tapend",function(){u(this).off("tapmove.handwriting");k.push(c);c={type:"stroke",x:[],y:[]};var d=u.post("https://myscript-webservices.visionobjects.com/api/myscript/v2.0/equation/doSimpleRecognition.json",{apiKey:"ec39c110-c7f3-4a37-9aee-fdb06dff0372",equationInput:JSON.stringify({userResources:["desmos_custom"],resultTypes:["LATEX"],components:k})},null,"json"),e=b.expressionsView.getActiveMathquill();a=setTimeout(function(){d.done(function(a){a=a.result.results[0].value.toLowerCase();
var b,c;h.clearRect(0,0,f[0].width,f[0].height);if("\\wedge "===a)e.mathquill("onText","^");else if(" / "===a.slice(0,3))e.mathquill("onText","/").mathquill("write",a.slice(3)).mathquill("onKey","Right");else if("\\overline {"===a.slice(0,11)){b=11;for(c=1;0<c&&b<a.length;b+=1)c+="}"===a[b]?-1:"{"===a[b]?1:0;e.mathquill("onText","/").mathquill("write",a.slice(11,b-1)).mathquill("onKey","Right").mathquill("write",a.slice(b))}else if(0<="(){}[]√".split("").indexOf(a))e.mathquill("onText",a);else{if("\\vphantom {"===
a.slice(0,11)){b=11;for(c=1;0<c&&b<a.length;b+=1)c+="}"===a[b]?-1:"{"===a[b]?1:0;"^{\\wedge } "!==a.slice(b,b+11)&&console.error(":(");a="^{"+a.slice(b+11)+"}"}else"\\wedge "===a.slice(0,7)?(a=a.slice(7),"^{"!==a.slice(0,2)&&(a="^{"+a+"}")):"="===a.charAt(0)&&(e.mathquill("onText","="),a=a.slice(1));e.mathquill("write",a)}e.trigger("render");k=[]});a=void 0},1E3)})}})};b.resize=function(){this.$canvas[0].width=this.pxRatio*parseInt(this.$canvas.width(),10);this.$canvas[0].height=this.pxRatio*parseInt(this.$canvas.height(),
10)};b.setupKeypad=function(){h.setupKeypad.call(this);this.buttons.numbersRight[1]={keys:this.buttonArray("narrowToggleLetters toggleHandwriting enter")};this.buttons.handwriting=[{keys:this.buttonArray("backspace")},{keys:this.buttonArray("toggleNumbers")},{keys:this.buttonArray("enter")}]}})});I("main/state_controller",["require","pjs","undoredo","expressions/colors"],function(b){var h=b("pjs"),u=b("undoredo"),w=b("expressions/colors");return h(function(b){var h={graph:{viewport:{xmin:-10,xmax:10,
ymin:-10,ymax:10},showLabels:!0,showGrid:!0,showAxes:!0,squareAxes:!0,labelXMode:"",labelYMode:""},expressions:{list:[{id:1,latex:"",selected:!0}]}};b.init=function(b,a,h,c){this.graphController=b;this.expressionsModel=a;this.graphSettings=h;this.isFirstSetState=!0;this.expressionsView=c};b.getState=function(b){var a={graph:this.graphController.getState(),expressions:this.expressionsModel.getState()};return"escaped"==b?escape(JSON.stringify(a)):a};b.setState=function(b,a){this.graphSettings.setProperty("POIs",
!1);this.expressionsView.setSelected(null);if(this.isFirstSetState||null!==b||!this.expressionsModel.isEmpty()){var k=this,c=function(a,b){w.reset();a||(a=h);if("escaped"===b||"string"===typeof a)try{a=JSON.parse(unescape(a))}catch(c){alert("invalid state!");return}"expressions"in a&&k.expressionsModel.setState({list:[]});k.graphController.manager.clear();k.graphController.manager.redrawGraphsLayer();"graph"in a&&("degreeMode"in a.graph||(a.graph.degreeMode=!1),k.graphController.setState(a.graph));
"expressions"in a&&k.expressionsModel.setState(a.expressions)};if(this.isFirstSetState)c(b,a),this.isFirstSetState=!1;else{var g=this.getState();u.addTransaction({type:u.CAUSE_OF_CHANGE,undo:function(){c(g)},redo:function(){c(b,a)},ensureChangeOccured:function(){var a=JSON.stringify(k.getState());return JSON.stringify(g)===a}})}}};b.setBlank=function(){this.setState(h);u.markAsSaved()}})});I("main/propagate_selection",["require"],function(b){return function(b,u,w){var q,p,s=function(){var a=b.getSelected();
a!==p&&(p&&p.unobserve("selectedCell.calcjs"),a&&a.observe("selectedCell.calcjs",s),p=a);var k=a?a.id:void 0;a&&a.isTable&&(k=(k=a.selectedCell)?(a=a.columns[k.column])?a.id:void 0:void 0);k!==q&&(u.select(k),a=u.getOpenIntersectionIds(),"undefined"!==typeof k&&(a[k]=!0),w.setIntersectIds(a),w.updateIntersections(k));q=k};b.observe("selectedItem",s)}});I("lib/set_list_height",["require","main/resize"],function(b){var h=b("main/resize");return{init:function(b,w){h.register(function(){var h=w.height();
b.setBottom(h);b.ensureActiveChildIsVisible()})}}});I("template!settings_tablet_window",["underscore"],function(b){return function(b){with(b||{})b=""+('<div id="window-container">\n  <div class="settings-btn action-togglevisible">\n    <i class=\'icon-window\'></i>\n  </div>\n\n  <div class="settings-scrollable bottom" popover="true">\n    <div class="inner-bg">\n      <div class="popover-interior">\n        <div class="popover-title">\n          '+t("Window")+'\n        </div>\n        <div class="popover-content">\n          <div class="window desmos-input-container" id="x-window">\n            <table>\n              <tr>\n                <td>\n                  <span class=\'before-input\'></span>\n                    <input id="xmin" type="number" />\n                  <span class=\'after-input\'></span>\n                </td>\n                <td>&lt;&nbsp;<i>x</i>&nbsp;&lt;</td>\n                <td>\n                  <span class=\'before-input\'></span>\n                  <input id="xmax" type="number" />\n                  <span class=\'after-input\'></span>\n                </td>\n              </tr>\n            </table>\n          </div>\n\n          <div class="window desmos-input-container" id="y-window">\n            <table>\n              <tbody>\n                <tr>\n                  <td>\n                    <span class=\'before-input\'></span>\n                      <input id="ymin" type="number" />\n                    <span class=\'after-input\'></span>\n                  </td>\n                  <td>&lt;&nbsp;<i>y</i>&nbsp;&lt;</td>\n                  <td>\n                    <span class=\'before-input\'></span>\n                      <input id="ymax" type="number" />\n                    <span class=\'after-input\'></span>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n          <div class=\'buttons-container\'>\n            <div>\n              <button id="square-axes" class="btn disabled action-squareaxes">\n                '+
t("equalize")+'\n              </button>\n            </div>\n            <div>\n              <button id="restore-default" class="btn action-zoomrestore">\n                '+t("restore to default")+"\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class='triangle'>    \n    </div>\n  </div>\n</div>");return b}});I("main/settings_view","require jquery underscore pjs main/popover_view graphing/viewport".split(" "),function(b){var h=
b("jquery"),u=b("underscore"),w=b("pjs"),q=b("main/popover_view"),p=b("graphing/viewport");return w(q,function(b,a){b.viewport=new p;b.init=function(b){a.init.call(this);this.graphController=b;this.grapher=b.manager;this.settings=this.grapher.settings};b.closeCondition=function(a){return!h(a.target).closest(this.openCloseBtn).length&&!h(a.target).closest("#settings-container").length};b.didCreateElement=function(){a.didCreateElement.call(this);var b=this;this.$(".action-squareaxes").on("tap",function(){b.settings.setProperty("squareAxes",
!0)});this.$("#show-labels").on("change",function(){b.settings.setProperty("showLabels",!!h(this).attr("checked"))});this.$("#show-grid").on("change",function(){b.settings.setProperty("showGrid",!!h(this).attr("checked"))});this.$(".action-polargrid").on("tap",function(){b.settings.setProperty("polarMode",!b.settings.getProperty("polarMode"))});this.$("#show-axes").on("change",function(){b.settings.setProperty("showAxes",!!h(this).attr("checked"))});this.$("#xmin, #xmax, #ymin, #ymax").on("keydown keyup keypress",
this.onInputKeyPress.bind(this)).on("focusout",this.onFocusOut.bind(this)).on("focusin",this.onFocusIn.bind(this));this.updateTextInputs()};b.addSettingsObserver=function(a,b){var g=b.bind(this);this.settings.observe(a,g);g()};b.onInputKeyPress=function(a){a=parseFloat(this.$("#xmin").val());var b=parseFloat(this.$("#xmax").val()),g=parseFloat(this.$("#ymin").val()),f=parseFloat(this.$("#ymax").val());a=new p(a,b,g,f);this.$("#x-window").toggleClass("invalid",!a.isXValid());this.$("#y-window").toggleClass("invalid",
!a.isYValid());this.settings.setProperty("squareAxes",a.isSquare(this.grapher.screen));this.setViewport(a)};b.renderProjectorMode=function(){var a=this.settings.projectorMode;this.$("#projector-mode").toggleClass("active",!!a)};b.renderXPiLabels=function(){var a=this.settings.xAxisPiLabels;this.$("#x-numlabels").toggleClass("active",!a);this.$("#x-pilabels").toggleClass("active",!!a)};b.renderYPiLabels=function(){var a=this.settings.yAxisPiLabels;this.$("#y-numlabels").toggleClass("active",!a);this.$("#y-pilabels").toggleClass("active",
!!a)};b.renderDegreeMode=function(){var a=this.settings.degreeMode;this.$("#radians").toggleClass("active",!a);this.$("#degrees").toggleClass("active",!!a)};b.renderSquareAxes=function(){var a=this.settings.squareAxes;this.$("#square-axes").toggleClass("disabled",!!a).toggleClass("btn-success",!a)};b.renderShowLabels=function(){var a=this.settings.showLabels,b=this.$("#show-labels");a?b.attr("checked","checked"):b.removeAttr("checked")};b.renderShowGrid=function(){var a=this.settings.showGrid,b=this.$("#show-grid");
a?b.attr("checked","checked"):b.removeAttr("checked")};b.renderPolarMode=function(){this.$("#cartesian-grid").toggleClass("active",!this.settings.polarMode);this.$("#polar-grid").toggleClass("active",!!this.settings.polarMode);this.$("#x-pilabels, #x-numlabels, #y-pilabels, #y-numlabels").toggleClass("disabled",!!this.settings.polarMode)};b.renderShowAxes=function(){var a=this.settings.showAxes,b=this.$("#show-axes");a?b.attr("checked","checked"):b.removeAttr("checked")};b.updateTextInputs=function(){var a=
this;u.each(["xmin","xmax","ymin","ymax"],function(b){parseFloat(a.$("#"+b).val())!==a.viewport[b]&&a.$("#"+b).val(a.viewport[b])})};b.triggerViewportChanged=function(){};b.setViewport=function(a){if(!a.equals(this.viewport)&&a.isValid()){this.viewport=a.clone();var b=this.graphController.getViewport();if(b.ymax!==a.ymax||b.ymin!==a.ymin)this.settings.lastChangedAxis="y";if(b.xmax!==a.xmax||b.xmin!==a.xmin)this.settings.lastChangedAxis="x";this.updateTextInputs();this.graphController.setViewport(a);
this.triggerViewportChanged()}};b.onFocusIn=function(a){clearTimeout(this.stopEditingTimeout)};b.onFocusOut=function(a){var b=this;this.stopEditingTimeout=setTimeout(function(){clearTimeout(b.stopEditingTimeout);b.updateTextInputs();this.$("#x-window").toggleClass("invalid",!b.viewport.isXValid());this.$("#y-window").toggleClass("invalid",!b.viewport.isYValid())},1)}})});I("main/settings_view_tablet",["require","pjs","./settings_view","main/focus"],function(b){var h=b("pjs"),u=b("./settings_view"),
w=b("main/focus");return h(u,function(b,h){b.didCreateElement=function(){h.didCreateElement.call(this);this.$(".action-togglevisible").on("tapstart",function(){w.takeFocus()});this.setupOpenButton(this.$(".action-togglevisible"),"tapstart")};b.renderIsVisible=function(){this.$(".bottom").toggle(this.isVisible)}})});I("main/settings_view_tablet_window",["require","pjs","template!settings_tablet_window","./settings_view_tablet"],function(b){var h=b("pjs"),u=b("template!settings_tablet_window");b=b("./settings_view_tablet");
return h(b,function(b,h){b.template=u;b.name="settings_tablet_window";b.didCreateElement=function(){h.didCreateElement.call(this);var b=this;this.$(".action-zoomrestore").on("tap",function(){b.graphController.zoom("default")});this.renderRestoreAxes();this.addSettingsObserver("squareAxes",this.renderSquareAxes)};b.triggerViewportChanged=function(){this.renderRestoreAxes()};b.renderRestoreAxes=function(){var b=this.graphController.isZoomRestored();this.$("#restore-default").toggleClass("disabled",
!!b)}})});I("template!settings_tablet_options",["underscore"],function(b){return function(b){with(b||{})b=""+('<div id="options-container">\n  <div class="settings-btn action-togglevisible">\n    <i class=\'icon-wrench\'></i>\n  </div>\n  \n  <div class="bottom settings-scrollable" popover="true">\n   <div class="inner-bg">\n      <div class="popover-interior">\n       <div class="popover-title">'+t("View")+"</div>\n       <div class=\"popover-content\">\n  \n         <div class='label action-projectormode'>\n           "+
t("Projector Mode")+"\n           <div class='toggle-on-off' id='projector-toggle'>\n             <span class='thumb'>\n                <span class='off'>"+t("off")+"</span><span class='on'>"+t("on")+'</span>\n             </span>\n           </div>\n         </div>\n       </div>\n  \n  \n        <div class="popover-title">'+t("Graph Paper")+"</div>\n        <div class=\"popover-content\">\n          <div class='label action-showlabels'>\n            "+t("Labels")+"\n            <div class='toggle-on-off' id='labels-toggle'>\n              <span class='thumb'>\n                 <span class='off'>"+
t("off")+"</span><span class='on'>"+t("on")+"</span>\n              </span>\n            </div>\n          </div>\n  \n          <div class='label action-showgrid'>\n          "+t("Grid Lines")+"\n            <div class='toggle-on-off' id='grid-toggle'>\n              <span class='thumb'>\n                 <span class='off'>"+t("off")+"</span><span class='on'>"+t("on")+"</span>\n              </span>\n            </div>\n          </div>\n  \n          <div class='label action-showaxes'>\n            "+
t("Axes")+"\n            <div class='toggle-on-off' id='axes-toggle'>\n              <span class='thumb'>\n                 <span class='off'>"+t("off")+"</span><span class='on'>"+t("on")+'</span>\n              </span>\n            </div>\n          </div>\n        </div>\n  \n  \n        <div class="popover-title interior-title">'+t("Trig Settings")+'</div>\n        <div class="popover-content trig-settings">\n          <table class="pi-labels">\n            <tbody>\n              <tr>\n                <td>\n                  '+
t("<i>x</i>-axis labels:")+"\n                </td>\n                <td>\n                  <div class=\"toggle-group action-xpilabels\" id=\"xpilabels-toggle\">\n                    <div class='thumb'></div>\n                    <span class='first-option'>1, 2, 3</span>\n                    <span class='second-option'>\n                      <font class=\"pi\">π, 2π, 3π</font>\n                    </span>\n                  </div>\n                </td>\n              </tr>\n              <tr>\n                <td>\n                  "+
t("<i>y</i>-axis labels:")+"\n                </td>\n                <td>\n                  <div class=\"toggle-group action-ypilabels\" id=\"ypilabels-toggle\">\n                    <div class='thumb'></div>\n                    <span class='first-option'>1, 2, 3</span>\n                    <span class='second-option'>\n                      <font class=\"pi\">π, 2π, 3π</font>\n                    </span>\n                  </div>\n                </td>\n              </tr>\n              <tr>\n                <td>\n                  "+
t("Angles:")+"\n                </td>\n                <td>\n                  <div class=\"toggle-group action-radianmode\" id=\"radian-toggle\">\n                    <div class='thumb'></div>\n                    <span class='first-option'>"+t("degrees")+"</span>\n                    <span class='second-option'>"+t("radians")+'</span>\n                  </div>\n                </td>\n  \n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n    \n    <div class="triangle">\n    </div>\n  \n  </div>\n</div>');
return b}});I("main/settings_view_tablet_options",["require","pjs","template!settings_tablet_options","./settings_view_tablet"],function(b){var h=b("pjs"),u=b("template!settings_tablet_options");b=b("./settings_view_tablet");return h(b,function(b,h){b.template=u;b.name="settings_tablet_options";b.didCreateElement=function(){h.didCreateElement.call(this);var b=this;this.$(".action-showlabels").on("tapstart",function(){b.$(".action-showlabels .toggle-on-off").toggleClass("isOn");setTimeout(function(){b.settings.setProperty("showLabels",
!b.settings.showLabels)},100)});this.$(".action-showgrid").on("tapstart",function(){b.$(".action-showgrid .toggle-on-off").toggleClass("isOn");setTimeout(function(){b.settings.setProperty("showGrid",!b.settings.showGrid)},100)});this.$(".action-polarmode").on("tapstart",function(){b.$(".action-polarmode .toggle-on-off").toggleClass("isOn");setTimeout(function(){b.settings.setProperty("polarMode",!b.settings.polarMode)},100)});this.$(".action-showaxes").on("tapstart",function(){b.$(".action-showaxes .toggle-on-off").toggleClass("isOn");
setTimeout(function(){b.settings.setProperty("showAxes",!b.settings.showAxes)},100)});this.$(".action-projectormode").on("tapstart",function(){b.$(".action-projectormode .toggle-on-off").toggleClass("isOn");setTimeout(function(){b.settings.setProperty("projectorMode",!b.settings.projectorMode)},100)});this.$(".action-xpilabels").on("tapstart",function(){b.settings.polarMode||(b.$(".action-xpilabels").toggleClass("toggled"),setTimeout(function(){b.settings.setProperty("xAxisPiLabels",!b.settings.xAxisPiLabels)},
100))});this.$(".action-ypilabels").on("tapstart",function(){b.settings.polarMode||(b.$(".action-ypilabels").toggleClass("toggled"),setTimeout(function(){b.settings.setProperty("yAxisPiLabels",!b.settings.yAxisPiLabels)},100))});this.$(".action-radianmode").on("tapstart",function(){b.$(".action-radianmode").toggleClass("toggled");setTimeout(function(){b.settings.setProperty("degreeMode",!b.settings.degreeMode)},100)});this.addSettingsObserver("projectorMode",this.renderProjectorMode);this.addSettingsObserver("xAxisPiLabels",
this.renderXPiLabels);this.addSettingsObserver("yAxisPiLabels",this.renderYPiLabels);this.addSettingsObserver("degreeMode",this.renderDegreeMode);this.addSettingsObserver("showLabels",this.renderShowLabels);this.addSettingsObserver("showGrid",this.renderShowGrid);this.addSettingsObserver("polarMode",this.renderPolarMode);this.addSettingsObserver("showAxes",this.renderShowAxes)};b.renderShowLabels=function(){this.$("#labels-toggle").toggleClass("isOn",!!this.settings.showLabels)};b.renderShowGrid=
function(){this.$("#grid-toggle").toggleClass("isOn",!!this.settings.showGrid)};b.renderPolarMode=function(){this.$("#polar-toggle").toggleClass("isOn",!!this.settings.polarMode);this.$("#xpilabels-toggle, #ypilabels-toggle").toggleClass("disabled",!!this.settings.polarMode)};b.renderShowAxes=function(){this.$("#axes-toggle").toggleClass("isOn",!!this.settings.showAxes)};b.renderProjectorMode=function(){this.$("#projector-toggle").toggleClass("isOn",!!this.settings.projectorMode)};b.renderDegreeMode=
function(){var b=this.settings.degreeMode;this.$("#radian-toggle").toggleClass("toggled",!b)};b.renderXPiLabels=function(){var b=this.settings.xAxisPiLabels;this.$("#xpilabels-toggle").toggleClass("toggled",!!b)};b.renderYPiLabels=function(){var b=this.settings.yAxisPiLabels;this.$("#ypilabels-toggle").toggleClass("toggled",!!b)}})});I("template!zoom",["underscore"],function(b){return function(b){with(b||{})b=""+('<div id="zoom-pillbox">\n  <span\n    class="tooltip-e action-zoomin"\n    tooltip="'+
t("Zoom In")+'"\n    tipsy-offset="15"\n  >\n    <i class="icon-plus"></i>\n  </span>\n  <span\n    class="tooltip-e action-zoomrestore"\n    tooltip="'+t("Restore Default Zoom")+'"\n    tipsy-offset="15"\n  >\n    <i class="icon-home"></i>\n  </span>\n  <span\n    class="tooltip-e action-zoomout"\n    tooltip="'+t("Zoom Out")+'"\n    tipsy-offset="15"\n  >\n    <i class="icon-minus"></i>\n  </span>\n</div>');return b}});I("loadcss!css/zoom_pillbox",function(){});I("main/zoom_view","require pjs lib/underscore_view lib/track_feature template!zoom loadcss!css/zoom_pillbox".split(" "),
function(b){var h=b("pjs"),u=b("lib/underscore_view"),w=b("lib/track_feature"),q=b("template!zoom");b("loadcss!css/zoom_pillbox");return h(u,function(b,h){b.init=function(a){h.init.call(this);this.template=q;this.graphController=a};b.didCreateElement=function(){this.$(".action-zoomin").on("tap",this.zoomIn.bind(this));this.$(".action-zoomrestore").on("tap",this.zoomRestore.bind(this));this.$(".action-zoomout").on("tap",this.zoomOut.bind(this))};b.zoomIn=function(){w.use("Zoom In");this.graphController.zoom("in")};
b.zoomRestore=function(){w.use("Zoom Restore");this.graphController.zoom("default")};b.zoomOut=function(){w.use("Zoom Out");this.graphController.zoom("out")}})});I("lib/external_screenshot",["require","pjs"],function(b){return b("pjs")(function(b){function u(b){b=b.getBoundingClientRect();return{top:b.top,left:b.left,width:b.width,height:b.height}}function w(b,h){b?setTimeout(h):setTimeout(function(){w(b,h)},100)}b.init=function(b,h,s,a,k){this.$root=b;this.expressionsView=h;this.grapher=s;this.evaluator=
a;this.stateController=k};b.initialize=function(b,h){this.$root.addClass("external-screenshot");document.styleSheets[0].insertRule("* {overflow: visible !important;}",document.styleSheets[0].cssRules.length);h()};b.load=function(b,h){this.stateController.setState(b.state);var s=this;this.evaluator.notifyWhenSynced(function(){w(function(){return 0===s.expressionsView.$(".shell.expressionitem").length},function(){setTimeout(function(){h({boxes:{expressions:u(s.expressionsView.$(".expressionlist")[0]),
graphpaper:u(s.grapher.$[0])}})},100)})})}})});I("lib/urlparser",["require"],function(b){return{getParameter:function(b){return decodeURIComponent((RegExp("[?|&]"+b+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}}});I("loadcss!css/tour",function(){});I("lib/trip",["require","jquery","pjs"],function(b){var h=b("jquery");return b("pjs")({init:function(b){var w=this,q=this.$tripBlock=h('<div class="trip-block"><div class="trip-interior"><a class="trip-close"><i class="icon-remove"></i></a><div class="trip-content"></div></div><div class="trip-arrow"></div></div>');
q.css({top:"-100px"});h("body").append(q);q.find(".trip-close").on("tap",function(b){b.preventDefault();w.stop()});this.bindKeyEvents();this.settings=b},cleanup:function(){this.unbindKeyEvents();this.hideTripBlock();return!1},bindKeyEvents:function(){var b=this;h(document).on({"keydown.Trip":function(h){b.keyEvent.call(b,h)}})},unbindKeyEvents:function(){h(document).off("keydown.Trip")},keyEvent:function(b){27===b.which&&this.stop()},stop:function(){this.hideTripBlock();this.settings.onTripStop()},
showTripBlock:function(b){"string"===typeof b.sel&&(b.sel=h(b.sel));var w=this.$tripBlock;w.find(".trip-content").html(b.content);var q=b.sel,p=q.outerWidth(),s=q.outerHeight(),a=w.outerWidth(),k=w.outerHeight();w.removeClass("e s w n");var c=0;switch(b.position){case "e":w.addClass("e");w.css({left:q.offset().left+p+10,top:q.offset().top-(k-s)/2});break;case "s":w.addClass("s");b=q.offset().left+(p-a)/2;w.css({left:b,top:q.offset().top+s+10});b+a>h(window).width()-1&&(c=h(window).width()-1-b-a);
1>b&&(c=1-b);break;case "w":w.addClass("w");w.css({left:q.offset().left-(10+a),top:q.offset().top-(k-s)/2});break;default:w.addClass("n"),w.css({left:q.offset().left+(p-a)/2,top:q.offset().top-10-k})}w.find(".trip-interior").css("transform","translate("+c+"px, 0)");w.css({display:"inline-block"})},fadeInTripBlock:function(){var b=this.$tripBlock;setTimeout(function(){b.addClass("is-loaded")},0)},hideTripBlock:function(){this.$tripBlock.removeClass("is-loaded")}})});I("tours/base_tour",["require",
"pjs","jquery","underscore"],function(b){var h=b("pjs"),u=b("jquery"),w=b("underscore");return h(function(b){b.init=function(b){this.Calc=b;this.expressionsView=this.Calc.expressions};b.expressionsVisible=function(){return this.expressionsView.getProperty("expressionsVisible")};b.requireExpressionsVisible=function(){return{position:"e",content:"Click to show the list of expressions.",sel:u(".action-showexpressions")}};b.resourcesOpen=function(){return u("body").hasClass("resources-open")};b.requireResourcesNotOpen=
function(){return{position:"e",content:"Click to return to this graph.",sel:u(".action-opendrawer")}};b.editListMode=function(){return this.expressionsView.getProperty("editListMode")};b.requireNotEditListMode=function(){return{position:"s",content:"Click to return to your expressions.",sel:u(".action-toggleeditlistmode")}};b.expressionCount=function(){return this.expressionsView.getItemsByIndexRange(0,Infinity).length};b.grapher=function(){return this.Calc.grapher};b.hasConic=function(b){return w.find(this.grapher().graphSketches,
function(h,a){return w.find(h.branches,function(a){return a.conic===b})})}})});I("tours/sliders",["require","pjs","jquery","underscore","./base_tour"],function(b){var h=b("pjs"),u=b("jquery"),w=b("underscore");b=b("./base_tour");return h(b,function(b,h){b.sliderHasSlid=!1;b.sliderBtnsShown=!1;b.isExpAnimating=function(b){return w.filter(b,function(a){return a.slider&&a.slider.isPlaying}).length};b.update=function(){var b=this.expressionsView.getItemsByIndexRange(0,Infinity);if(this.isExpAnimating(b))return{final:!0,
position:"s",endingMsg:"You're a slider pro!",sel:u(".animate-pause").last()};if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.resourcesOpen())return this.requireResourcesNotOpen();if(this.editListMode())return this.requireNotEditListMode();var a=u(".animate-play").last(),h=w.filter(b,function(a){return a&&a.formula&&a.formula.is_graphable});if(a.length&&h.length){b=w.filter(b,function(a){return a&&a.slider&&1!==a.slider.value});if(this.sliderHasSlid||0<b.length){if(0<
u(".thumb.depressed").length)return{doNotUpdate:!0};this.sliderHasSlid=!0;return{position:"s",content:'<b>Go "Hands-free"</b><br>Press play to animate the slider.',sel:a}}return{position:"s",content:"Drag the handle to change the value.",sel:u(".slider-container .thumb:visible").last()}}a=this.expressionsView.getSelectedView();h=[];a&&(h=a.$(".action-createslider .btn"));h.length||(h=u(".action-createslider .btn"));if(1<h.length||h.length&&1<b.length){if(this.sliderBtnsShown&&600<new Date-this.sliderBtnsShown)return{position:"s",
content:"Awesome! Now click here to add the sliders.",sel:h.last()};this.sliderBtnsShown||(this.sliderBtnsShown=new Date);return{doNotUpdate:!0}}this.sliderBtnsShown=!1;if(a)return{position:"e",content:'<b>Let\'s make some sliders</b><br>Try typing <span class="italic">y=mx+b</span>',sel:a.$()};b=this.expressionsView.getFirstVisibleItem();return{position:"e",content:"Click here to type in this expression",sel:this.expressionsView.getItemView(b.id).$()}}})});I("tours/scatter_plot",["require","pjs",
"jquery","underscore","./base_tour"],function(b){var h=b("pjs"),u=b("jquery"),w=b("underscore");b=b("./base_tour");return h(b,function(b,h){b.hasChangedDisplayType=!1;b.update=function(){var b=this.expressionsView.getItemsByIndexRange(0,Infinity),a=w.filter(b,function(a){return a.hasOwnProperty("columns")});if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.resourcesOpen())return this.requireResourcesNotOpen();if(this.editListMode())return this.requireNotEditListMode();
if(0===a.length)return b=u(".action-newtable:visible"),0===b.length?{position:"e",content:"<b>Let's make a scatter plot</b><br>Click here to add a new item.",sel:u(".add-expression-btn")}:{position:"e",content:'... and select the "table" option.',sel:b};for(var h=[],c=[],g,f=0;f<a.length;f++){g=a[f];for(var e=1;e<g.columns.length-1;e++){var b=this.expressionsView.getItemView(g.id),d=b.columnViews[e];g.columns[e].disabled?c.push({model:g.columns[e],view:d,tableView:b}):h.push({model:g.columns[e],view:d,
tableView:b})}}if(0===h.length)return{position:"e",content:"Type <var>y</var> here to create a data column.",sel:".editable.right.header:first"};g=h[0].model.table;b=this.expressionsView.getItemView(g.id);a=g.selectedCell;h=g.columns[0].cells.length;for(f=c=0;f<h&&3>f;f++)g.columns[0].cells[f].value&&!g.columns[0].cells[f].error&&g.columns[1].cells[f].value&&!g.columns[1].cells[f].error&&c++;if(3===c)return g="POINTS_AND_LINES"===g.columns[1].columnMode,f=0<u(".table-column-menu").length,g&&!f?{final:!0,
position:"e",endingMsg:"You're a scatter plot whiz!",sel:b.$()}:g?{position:"e",content:"Click anywhere to close the drawing options.",sel:b.$()}:f?{content:"Click to connect the dots",position:"e",sel:".table-points-and-lines"}:{content:"<b>Last trick!</b><br>Click and hold on this icon until the options menu opens up.",position:"e",sel:b.columnViews[1][0].$(".graph-icon")};for(f=0;f<h;f++)for(e=0;2>e;e++)if(g.columns[e].cells[f].error)return{position:"e",content:"Uh-oh! type a valid number here.",
sel:b.columnViews[e][f+1].$()};if(!a)return{position:"e",content:"Click back to continue editing",sel:b.columnViews[1][h-1].$()};if(2===h&&1===c&&a&&1===a.row)return{position:"e",content:"Go down to the next row to add more data.",sel:b.columnViews[1][a.row].$()};if(3===h&&2===c&&a)return{position:"e",content:"<b>Awesome!</b><br>Now try pressing Enter",sel:b.columnViews[1][a.row].$()};for(f=0;f<h;f++)for(e=0;2>e;e++)if(!g.columns[e].cells[f].value)return g="Fill in this whole row",2===f&&1===e&&(g=
"Just fill in one more..."),0===f&&1===e&&(g="<b>Fill it in</b><br>Type any number here."),{position:"e",content:g,sel:b.columnViews[1][f+1].$()}}})});I("tours/function_table",["require","pjs","jquery","underscore","./base_tour"],function(b){var h=b("pjs"),u=b("jquery"),w=b("underscore");b=b("./base_tour");return h(b,function(b,h){b.hasChangedDisplayType=!1;b.update=function(){var b=this.expressionsView.getItemsByIndexRange(0,Infinity),a=w.filter(b,function(a){return a.hasOwnProperty("columns")});
if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.resourcesOpen())return this.requireResourcesNotOpen();for(var h=[],c=[],g=0;g<a.length;g++)for(var f=a[g],e=1;e<f.columns.length-1;e++){var d=this.expressionsView.getItemView(f.id),l=d.columnViews[e];f.columns[e].disabled?c.push({model:f.columns[e],view:l,tableView:d}):h.push({model:f.columns[e],view:l,tableView:d})}return 0===c.length?(a=w.find(b,function(a){return a.isGraphable}),a&&"x"!==a.latex?0===u(".EDIT-LIST-MODE").length?
{position:"s",content:'<b>Convert this to a table</b><br>Click the "Edit List" button.',sel:".edit-list-btn"}:{position:"e",content:"Click here to convert the expression to a table.",sel:".action-createtable"}:(b=w.find(b,function(a){return!a.hasOwnProperty("columns")&&a.hasOwnProperty("latex")}))?{position:"e",content:"Try typing <var>x</var><sup>2</sup>.<br><i><b>hint:</b> type x^2 or click the a<sup>2</sup> button below</i>",sel:this.expressionsView.getItemView(b.id).$()}:{position:"e",content:"Let's try a Function Table. First: click here to create a new blank expression.",
sel:".new-math-div"}):{final:!0,position:"e",content:"<b>You're a table wizard!</b><br>This message will now self destruct...",sel:c[0].tableView.$()}}})});I("tours/mathart",["require","underscore","jquery","pjs","./base_tour"],function(b){var h=b("underscore"),u=b("jquery"),w=b("pjs");b=b("./base_tour");return{mathart_intro:w(b,function(b){b.graphedLine=null;b.graphedParabola=null;b.graphedLineIsRestricted=function(){if(!this.graphedLine||!this.expressionsView.getItemById(this.graphedLine.id))return!1;
var b=this.grapher().graphSketches[this.graphedLine.id];if(!(b&&b.branches&&b.branches[0]&&b.branches[0].compiled))return!1;b=b.branches[0].compiled.fn;return isNaN(b(-100))&&isNaN(b(100))};b.graphedParabolaIsRestricted=function(){if(!this.graphedParabola||!this.expressionsView.getItemById(this.graphedParabola.id))return!1;var b=this.grapher().graphSketches[this.graphedParabola.id];if(!(b&&b.branches&&b.branches[0]&&b.branches[0].compiled))return!1;b=b.branches[0].compiled.fn;return isNaN(b(100))};
b.graphedParabolaIsShifted=function(){if(!this.graphedParabola||!this.expressionsView.getItemById(this.graphedParabola.id))return!1;var b=this.grapher().graphSketches[this.graphedParabola.id];if(!(b&&b.branches&&b.branches[0]&&b.branches[0].compiled))return!1;b=b.branches[0].compiled.fn;return 0!==b(0)};b.getFirstExp=function(){var b=this.expressionsView.getItemsByIndexRange(0,Infinity);return h.find(b,function(b){return!b.hasOwnProperty("columns")&&b.hasOwnProperty("latex")})};b.restrictedLineTour=
function(){if(this.graphedLineIsRestricted()){if(!this.expressionsView.getSelected()||this.expressionsView.getSelected().latex)return{position:"e",content:"<b>Brilliant!</b><br>Click here to create a new expression",sel:".new-math-div"};this.phaseOn++;return this.update()}this.graphedLine&&!this.expressionsView.getItemById(this.graphedLine.id)&&(this.graphedLine=null);var b=this.expressionsView.getSelected();b&&this.grapher().graphSketches[b.id]&&"line"===this.grapher().graphSketches[b.id].branches[0].conic&&
!isFinite(b.formula.simple_constant)&&(this.graphedLine={id:b.id});if(this.graphedLine)return{position:"e",content:"<b>Awesome!</b><br>Restrict the domain of this line by making it<br> <code>y=2x{1&lt;x&lt;2}</code><br><i>Hint: press the 'more' button on the keypad to find the { } buttons</i>",sel:this.expressionsView.getItemView(this.graphedLine.id).$()};b=this.expressionsView.getSelectedView();!b&&this.getFirstExp()&&(b=this.expressionsView.getItemView(this.getFirstExp().id));return b?{position:"e",
content:"<b>Let's get started!</b><br>Try graphing a straight line, like <code>y=2x</code>",sel:b.$()}:{position:"e",content:"Click here to make a new blank expression",sel:".new-math-div"}};b.restrictedParabolaTour=function(){if(this.graphedParabolaIsRestricted())return this.phaseOn++,this.update();var b=this.expressionsView.getSelectedView();if(b){var h=b.model;this.grapher().graphSketches[h.id]&&"parabola"===this.grapher().graphSketches[h.id].branches[0].conic&&(this.graphedParabola={id:h.id})}this.graphedParabola&&
!this.expressionsView.getItemById(this.graphedParabola.id)&&(this.graphedParabola=null);return this.graphedParabola?(b=this.expressionsView.getItemById(this.graphedParabola.id),b.isGraphable?"y"!==b.dependent?{position:"e",content:'<b>Don\'t forget the "y="!</b><br>Try typing all of <code>y=x<sup>2</sup></code>',sel:this.expressionsView.getItemView(this.graphedParabola.id).$()}:this.graphedParabolaIsShifted()?{position:"e",content:"<b>Nice!</b><br>Now let's restrict the range. Change this to:<br><code>y=x<sup>2</sup>-2{y&lt;4}</code>",
sel:this.expressionsView.getItemView(this.graphedParabola.id).$()}:{position:"e",content:"<b>Move the parabola.</b><br>Change this equation to <code>y=x<sup>2</sup>-2</code>",sel:this.expressionsView.getItemView(this.graphedParabola.id).$()}:{doNotUpdate:!0}):b?{position:"e",content:"Now graph: <code>y=x<sup>2</sup></code><br><i>Hint: you can type y=x^2, or use the a<sup>2</sup> button on the keypad below</i>",sel:b.$()}:{position:"e",content:"Click here to make a new blank expression",sel:".new-math-div"}};
b.colorWasChanged=!1;b.changeColorTour=function(){var b=this;h.each(this.expressionsView.getItemsByIndexRange(0,Infinity),function(a){a.unobserve("color.tour");a.observe("color.tour",function(){b.colorWasChanged=!0})});if(this.colorWasChanged)return u(".options-menu").length?{position:"e",content:"... and click anywhere to close the color menu.",sel:"#exppanel-outer"}:{final:!0,position:"e",endingMsg:"Great job! Now to complete your mission: make a face. Good luck!",sel:"#exppanel-outer"};if(u(".options-menu").length)return{position:"e",
content:"<b>Last step...</b><br>Change the color!",sel:".options-menu"};var q=this.expressionsView.getSelected()||this.getFirstExp();return{position:"e",content:"<b>Great!</b><br>Click and hold to open the secret drawing menu.",sel:this.expressionsView.getItemView(q.id).iconView.$icon}};b.phaseOn=0;b.phases=[b.restrictedLineTour,b.restrictedParabolaTour,b.changeColorTour];b.update=function(){return this.phases[this.phaseOn].call(this)}})}});I("tours/tour_manager","require underscore jquery pjs lib/urlparser loadcss!css/tour lib/trip tours/sliders tours/scatter_plot tours/function_table tours/mathart".split(" "),
function(b){var h=b("underscore"),u=b("jquery"),w=b("pjs"),q=b("lib/urlparser");b("loadcss!css/tour");var p=b("lib/trip"),s=b("tours/sliders"),a=b("tours/scatter_plot"),k=b("tours/function_table"),c=b("tours/mathart");return w(function(b,f){b.init=function(){this.tripManager=new p({onTripStop:this.stopTour.bind(this)});this.currentTour=this.currentStep=void 0;this.TOURS={sliders:s,tables:a,functiontable:k};h.extend(this.TOURS,c)};b.startFromUrl=function(a){if(2>u(".expressionitem").length)setTimeout(this.startFromUrl.bind(this,
a),100);else{var b=q.getParameter("tour");b&&this.TOURS[b]&&(a=this.TOURS[b](a),this.startTour(a))}};b._tripLoop=function(){clearTimeout(this.__tripLoopTimeout);if(this.running){var a=this.currentTour.update();if(a&&!a.doNotUpdate){this.currentStep=a;if(a.final){this.finishTour(a,5);return}this.tripManager.showTripBlock(a)}this.__tripLoopTimeout=setTimeout(this._tripLoop.bind(this),300)}};b.updateNow=b._tripLoop;b.startTour=function(a){this.running||(this.currentTour=a,this.running=!0,this._tripLoop(),
this.tripManager.fadeInTripBlock())};b.finishTour=function(a,b){this.running=!1;var c=this;0>b?c.tripManager.stop():(a.endingMsg&&(a.content=["<b>"+a.endingMsg+"</b><br>","This message will self-destruct in "+b+"..."].join("")),c.tripManager.showTripBlock(a),setTimeout(function(){c.finishTour(a,b-1)},1E3))};b.stopTour=function(){this.running=!1;this.currentTour=this.currentStep=void 0;clearTimeout(this.finishTimeout)}})});(function(b){var h=0,u=null;b(document).bind("touchstart",function(w){var q=
b(w.target);for(h=0;0===h&&q.length&&void 0!==q[0].tagName;){if(q.closest("[disablescroll]").length){h=0;return}var p=q.css("overflow"),s=q.css("overflow-y");"hidden"!==p&&"visible"!==p&&"hidden"!==s&&"hidden"!==s&&(p=q.scrollTop(),0!==p&&(h=2),q.scrollTop(p+1),q.scrollTop()!==p&&(h|=1,q.scrollTop(p)));q=q.parent()}if(0!==h)for(u=[],w=w.originalEvent.touches,q=0;q<w.length;q++){var p={},a;for(a in w[q])w[q].hasOwnProperty(a)&&(p[a]=w[q][a]);u.push(p)}});b(document).bind("touchmove",function(b){if(u){var q=
b.originalEvent.touches[0].screenY-u[0].screenY;0<q&&!(h&2)?h=0:0>q&&!(h&1)&&(h=0);q&&(u=null)}0===h&&b.preventDefault()});b(document).bind("touchend",function(){h=0;u=null})})(jQuery);I("lib/ipad.scrollfix",function(){});I("main/calc_embed","require jquery underscore pjs config main/evaluator graphing/grapher graphing/poicontroller graphing/graphcontroller main/graph_settings graphing/viewport main/timermodules expressions/list expressions/list_view_desktop main/focus undoredo main/keypad_view_handwriting main/keypad_view main/state_controller main/propagate_selection lib/set_list_height lib/browser main/settings_view_tablet_window main/settings_view_tablet_options main/zoom_view main/resize lib/external_screenshot tours/tour_manager lib/ipad.scrollfix".split(" "),
function(b){var h=b("jquery");b("underscore");var u=b("pjs"),w=b("config"),q=b("main/evaluator"),p=b("graphing/grapher"),s=b("graphing/poicontroller"),a=b("graphing/graphcontroller"),k=b("main/graph_settings"),c=b("graphing/viewport"),g=b("main/timermodules"),f=b("expressions/list"),e=b("expressions/list_view_desktop"),d=b("main/focus"),l=b("undoredo"),m=b("main/keypad_view_handwriting"),x=b("main/keypad_view"),r=b("main/state_controller"),n=b("main/propagate_selection"),y=b("lib/set_list_height");
b("lib/browser");var B=b("main/settings_view_tablet_window"),z=b("main/settings_view_tablet_options"),C=b("main/zoom_view"),D=b("main/resize"),F=b("lib/external_screenshot"),G=b("tours/tour_manager");b("lib/ipad.scrollfix");return u(function(b){b.init=function(b){var u=f(),H=e(u),I=q(w.get("workerURL")),K=k(),Q,M=["embed-container"];w.get("menus")||M.push("no-menus");w.get("zoomButtons")||M.push("no-zoom");var Z=h('<div class="'+M.join(" ")+'">'),Y=h('<div class="grapher">');Y.appendTo(Z);w.get("keypad")?
(Q=w.get("handwriting")?m(H):x(H),y.init(H,Q),Q.appendTo(Z)):h(".new-expression").hide();w.get("nographpaper")&&Z.addClass("no-graphpaper");Z.appendTo(b);var P=new p(Y,K),E=new s(P),N=a(P);b=z(N);var S=B(N),M=h('<div id="settings-track">');b.appendTo(M);S.appendTo(M);M.appendTo(Z);K.registerCallbacks(N,H);K.observe("degreeMode",function(){I.setDegreeMode(K.degreeMode)});C(N).appendTo(Z);var V=r(N,u,K,H);this.Screenshot=F(Z,H,P,I,V);P.redrawSlowly=P.redrawAllLayers;N.triggerViewportStable=function(){var a=
P.createProjection();I.setViewState({viewport:a.viewport.toObject(),screen:a.screen});P.viewport.isSquare(P.screen)&&P.settings.setProperty("squareAxes",!0);S.setViewport(N.getViewport())};I.triggerStatusChange=function(a){H.onChange(a)};I.triggerGraphComputed=function(a,b){P.updateSketch(a,b)};I.triggerRemove=function(a){P.hide(a)};I.triggerUpdateIntersections=function(a,b){P.updateIntersections(a,b);P.redrawPOILayer()};I.triggerRender=function(){E.handleTraceUpdate();P.redrawContentLayers()};I.triggerRenderSlowly=
function(){P.redrawSlowly()};u.triggerAddExp=function(a){a&&(""===a.latex&&"table"!==this.type&&P.removeGraphSketch(a.id),I.addStatement(a))};u.triggerRemoveExp=function(a){I.removeStatement(a)};u.triggerRemoveExps=function(a){I.removeStatements(a)};u.observe("drawOrder",function(){P.setSketchOrder(u.getProperty("drawOrder"))});u.batchEvaluation=I.batch.bind(I);H.triggerClearGraph=function(){V.setBlank()};n(H,P,I);D.register(function(){P.screen.width=P.$.width();P.screen.height=P.$.height();N.enforceSquareAxes();
P.redrawAllLayers();Q&&Q.resize()});E.triggerStartTracingBranch=function(a){H.setSelected(u.getItemById(a))};E.triggerEmptyTouchStart=function(){H.setSelected(null)};E.triggerStartMovingPoint=function(a){H.onStartMovingPoint(a)};E.triggerMovePoint=function(a,b){I.batch(function(){H.onMovePoint(a,b)})};E.triggerStopMovingPoint=function(a){H.onStopMovingPoint(a)};E.triggerPointSelected=function(a){H.setSelected(H.getItemView(a))};d.takeFocus=function(){H.setSelected(null)};H.appendTo(Z);g.load("expressions.renderviewport",
H,P);D.init();h(document).bind("keydown",l.handleKeydown.bind(l));this.expressions=H;this.grapher=P;this.graphController=N;this.evaluator=I;this.setState=V.setState.bind(V);this.setBlank=V.setBlank.bind(V);this.getState=V.getState.bind(V);this.tourManager=G();this.setViewport=function(a){P.viewport=new c(a[0],a[1],a[2],a[3]);N.triggerViewportStable()};this.resize=function(){D.trigger()};this.interceptTouch=function(){var a=Y,a=a.add(H.$("#expression-top-bar"));Q&&(a=a.add(Q.$()));a.on("touchstart",
function(a){a.preventDefault()});a.on("touchend",D.defocusMobile)};this.setOptions=function(a){var b=!1;a.hasOwnProperty("solutions")&&Z.toggleClass("no-solutions",!a.solutions);a.hasOwnProperty("menus")&&(Z.toggleClass("no-menus",!a.menus),b=!0);a.hasOwnProperty("graphpaper")&&(Z.toggleClass("no-graphpaper",!a.graphpaper),b=!0);a.hasOwnProperty("zoomButtons")&&Z.toggleClass("no-zoom",!a.zoomButtons);a.hasOwnProperty("keypad")&&console.warn("Bad option {keypad: "+a.keypad+"}. The keypad can only be added or removed at load time, not at runtime.");
b&&D.trigger()};V.setBlank()}})});window.Desmos||(window.Desmos={});I("api/abstract_api",["require","pjs","expressions/colors"],function(b){function h(b){"string"===typeof b?b={latex:b}:void 0!==b.headings&&(b.headings=b.headings.map(function(b){return"string"===typeof b?{latex:b}:b}));return b}var u=b("pjs");b=b("expressions/colors");u=u(function(b){b.init=function(b,h){this._calc=b(h);this._calc.interceptTouch()};b.setExpression=function(b){var p=this._calc.expressions.model,s={},a=s.id=b.id.toString();
a&&(b.hasOwnProperty("latex")&&(s.latex=b.latex.toString()),b.hasOwnProperty("color")&&(s.color=b.color.toString()),b.hasOwnProperty("style")&&(s.style=b.style.toString()),b.hasOwnProperty("hidden")&&(s.userRequestedGraphing=b.hidden?"never":"always"),p.getItemById(a)?p.updateItemById(a,s):(b=p.fromState(h(s)),p.addItem(b)))};b.setExpressions=function(b){b.forEach(this.setExpression.bind(this))};b.setViewport=function(b){4==b.length&&b[1]>b[0]&&b[3]>b[2]?this._calc.setViewport(b):console.warn("Invalid viewport.  Expected [xmin, xmax, ymin, ymax].  Got "+
b)};b.resize=function(){this._calc.resize()}});window.Desmos.Colors={RED:b.RED,BLUE:b.BLUE,GREEN:b.GREEN,ORANGE:b.ORANGE,PURPLE:b.PURPLE,BLACK:b.BLACK,next:b.next};return u});I("api/forwardmessages",["require"],function(b){return function(b){var u={setState:function(u,q){b.setState(JSON.parse(q))},setBlank:function(u){b.setBlank()},setOptions:function(u,q){b.setOptions(q)},getState:function(u){var q=b.getState(),q={type:"getState",payload:JSON.stringify(q)};u.source.postMessage(JSON.stringify(q),
u.origin)}};window.addEventListener("message",function(b){var h=JSON.parse(b.data);if(u.hasOwnProperty(h.type))u[h.type](b,h.payload);else console.warn("Unsupported API call ["+h.type+"].Only getState, setState, and setBlank are supported in the iframe API.")},!1);parent!==window&&parent.postMessage(JSON.stringify({type:"ready"}),"*")}});I("api/calculator","require pjs jquery main/calc_embed ./abstract_api config ./forwardmessages".split(" "),function(b){var h=b("pjs"),u=b("jquery"),w=b("main/calc_embed"),
q=b("./abstract_api"),p=b("config"),s=b("./forwardmessages");p.get("cssURL")&&u("head").append('<link rel="stylesheet" href="'+p.get("cssURL")+'" />');b=h(q,function(a,b){a.init=function(a){function g(){clearTimeout(d);'"loaded"'===f.css("content")?e.resize():setTimeout(g,200)}b.init.call(this,w,a);s(this._calc);var f=u('<div class="dcg-sentinal" style="display: none">');u(a).append(f);var e=this,d;g()};a.setState=function(){return this._calc.setState.apply(this._calc,arguments)};a.getState=function(){return this._calc.getState.apply(this._calc,
arguments)};a.setBlank=function(){return this._calc.setBlank.apply(this._calc,arguments)};a.setOptions=function(){return this._calc.setOptions.apply(this._calc,arguments)}});return window.Desmos.Calculator=b});var ta=window.Desmos||{};ta.require=ua;ta.requirejs=ya;ya(["api/calculator","jquery","underscore"],function(b,h,u){ta.$=h;ta._=u;h.noConflict(!0);u.noConflict()},void 0,!0);I("toplevel/calculator_embed",function(){})})();
